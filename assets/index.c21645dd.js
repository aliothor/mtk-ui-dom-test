var wx=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var iN=wx((Jn,Qn)=>{const Cx=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(e){if(e.ep)return;e.ep=!0;const a=n(e);fetch(e.href,a)}};Cx();function yh(r,t){const n=Object.create(null),i=r.split(",");for(let e=0;e<i.length;e++)n[i[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const Px="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Tx=yh(Px);function cm(r){return!!r||r===""}function bh(r){if(Ie(r)){const t={};for(let n=0;n<r.length;n++){const i=r[n],e=St(i)?Ex(i):bh(i);if(e)for(const a in e)t[a]=e[a]}return t}else{if(St(r))return r;if(Mt(r))return r}}const Sx=/;(?![^(]*\))/g,Mx=/:(.+)/;function Ex(r){const t={};return r.split(Sx).forEach(n=>{if(n){const i=n.split(Mx);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function xh(r){let t="";if(St(r))t=r;else if(Ie(r))for(let n=0;n<r.length;n++){const i=xh(r[n]);i&&(t+=i+" ")}else if(Mt(r))for(const n in r)r[n]&&(t+=n+" ");return t.trim()}const Ke={},Fi=[],Cn=()=>{},Ox=()=>!1,Ax=/^on[^a-z]/,wl=r=>Ax.test(r),wh=r=>r.startsWith("onUpdate:"),yt=Object.assign,Ch=(r,t)=>{const n=r.indexOf(t);n>-1&&r.splice(n,1)},Rx=Object.prototype.hasOwnProperty,$e=(r,t)=>Rx.call(r,t),Ie=Array.isArray,io=r=>Cl(r)==="[object Map]",Ix=r=>Cl(r)==="[object Set]",Le=r=>typeof r=="function",St=r=>typeof r=="string",Ph=r=>typeof r=="symbol",Mt=r=>r!==null&&typeof r=="object",dm=r=>Mt(r)&&Le(r.then)&&Le(r.catch),kx=Object.prototype.toString,Cl=r=>kx.call(r),Dx=r=>Cl(r).slice(8,-1),Lx=r=>Cl(r)==="[object Object]",Th=r=>St(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Is=yh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pl=r=>{const t=Object.create(null);return n=>t[n]||(t[n]=r(n))},jx=/-(\w)/g,Tn=Pl(r=>r.replace(jx,(t,n)=>n?n.toUpperCase():"")),Nx=/\B([A-Z])/g,fa=Pl(r=>r.replace(Nx,"-$1").toLowerCase()),Tl=Pl(r=>r.charAt(0).toUpperCase()+r.slice(1)),Xl=Pl(r=>r?`on${Tl(r)}`:""),_o=(r,t)=>!Object.is(r,t),Jl=(r,t)=>{for(let n=0;n<r.length;n++)r[n](t)},Vs=(r,t,n)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:n})},vm=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let sd;const zx=()=>sd||(sd=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Yn;class Fx{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Yn&&(this.parent=Yn,this.index=(Yn.scopes||(Yn.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Yn=this,t()}finally{Yn=this.parent}}on(){Yn=this}off(){Yn=this.parent}stop(t){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function Hx(r,t=Yn){t&&t.active&&t.effects.push(r)}const Sh=r=>{const t=new Set(r);return t.w=0,t.n=0,t},gm=r=>(r.w&Dr)>0,pm=r=>(r.n&Dr)>0,Bx=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=Dr},$x=r=>{const{deps:t}=r;if(t.length){let n=0;for(let i=0;i<t.length;i++){const e=t[i];gm(e)&&!pm(e)?e.delete(r):t[n++]=e,e.w&=~Dr,e.n&=~Dr}t.length=n}},hf=new WeakMap;let Ya=0,Dr=1;const cf=30;let Dn;const ni=Symbol(""),df=Symbol("");class Mh{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Hx(this,i)}run(){if(!this.active)return this.fn();let t=Dn,n=Or;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Dn,Dn=this,Or=!0,Dr=1<<++Ya,Ya<=cf?Bx(this):ld(this),this.fn()}finally{Ya<=cf&&$x(this),Dr=1<<--Ya,Dn=this.parent,Or=n,this.parent=void 0}}stop(){this.active&&(ld(this),this.onStop&&this.onStop(),this.active=!1)}}function ld(r){const{deps:t}=r;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(r);t.length=0}}let Or=!0;const mm=[];function ha(){mm.push(Or),Or=!1}function ca(){const r=mm.pop();Or=r===void 0?!0:r}function Qt(r,t,n){if(Or&&Dn){let i=hf.get(r);i||hf.set(r,i=new Map);let e=i.get(n);e||i.set(n,e=Sh()),_m(e)}}function _m(r,t){let n=!1;Ya<=cf?pm(r)||(r.n|=Dr,n=!gm(r)):n=!r.has(Dn),n&&(r.add(Dn),Dn.deps.push(r))}function tr(r,t,n,i,e,a){const o=hf.get(r);if(!o)return;let s=[];if(t==="clear")s=[...o.values()];else if(n==="length"&&Ie(r))o.forEach((l,u)=>{(u==="length"||u>=i)&&s.push(l)});else switch(n!==void 0&&s.push(o.get(n)),t){case"add":Ie(r)?Th(n)&&s.push(o.get("length")):(s.push(o.get(ni)),io(r)&&s.push(o.get(df)));break;case"delete":Ie(r)||(s.push(o.get(ni)),io(r)&&s.push(o.get(df)));break;case"set":io(r)&&s.push(o.get(ni));break}if(s.length===1)s[0]&&vf(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);vf(Sh(l))}}function vf(r,t){for(const n of Ie(r)?r:[...r])(n!==Dn||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Wx=yh("__proto__,__v_isRef,__isVue"),ym=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(Ph)),Gx=Eh(),Vx=Eh(!1,!0),Zx=Eh(!0),ud=Ux();function Ux(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...n){const i=ze(this);for(let a=0,o=this.length;a<o;a++)Qt(i,"get",a+"");const e=i[t](...n);return e===-1||e===!1?i[t](...n.map(ze)):e}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...n){ha();const i=ze(this)[t].apply(this,n);return ca(),i}}),r}function Eh(r=!1,t=!1){return function(i,e,a){if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return t;if(e==="__v_raw"&&a===(r?t?uw:Pm:t?Cm:wm).get(i))return i;const o=Ie(i);if(!r&&o&&$e(ud,e))return Reflect.get(ud,e,a);const s=Reflect.get(i,e,a);return(Ph(e)?ym.has(e):Wx(e))||(r||Qt(i,"get",e),t)?s:mt(s)?!o||!Th(e)?s.value:s:Mt(s)?r?Tm(s):Mn(s):s}}const Kx=bm(),Yx=bm(!0);function bm(r=!1){return function(n,i,e,a){let o=n[i];if(yo(o)&&mt(o)&&!mt(e))return!1;if(!r&&!yo(e)&&(Sm(e)||(e=ze(e),o=ze(o)),!Ie(n)&&mt(o)&&!mt(e)))return o.value=e,!0;const s=Ie(n)&&Th(i)?Number(i)<n.length:$e(n,i),l=Reflect.set(n,i,e,a);return n===ze(a)&&(s?_o(e,o)&&tr(n,"set",i,e):tr(n,"add",i,e)),l}}function qx(r,t){const n=$e(r,t);r[t];const i=Reflect.deleteProperty(r,t);return i&&n&&tr(r,"delete",t,void 0),i}function Xx(r,t){const n=Reflect.has(r,t);return(!Ph(t)||!ym.has(t))&&Qt(r,"has",t),n}function Jx(r){return Qt(r,"iterate",Ie(r)?"length":ni),Reflect.ownKeys(r)}const xm={get:Gx,set:Kx,deleteProperty:qx,has:Xx,ownKeys:Jx},Qx={get:Zx,set(r,t){return!0},deleteProperty(r,t){return!0}},ew=yt({},xm,{get:Vx,set:Yx}),Oh=r=>r,Sl=r=>Reflect.getPrototypeOf(r);function Ko(r,t,n=!1,i=!1){r=r.__v_raw;const e=ze(r),a=ze(t);t!==a&&!n&&Qt(e,"get",t),!n&&Qt(e,"get",a);const{has:o}=Sl(e),s=i?Oh:n?Ih:bo;if(o.call(e,t))return s(r.get(t));if(o.call(e,a))return s(r.get(a));r!==e&&r.get(t)}function Yo(r,t=!1){const n=this.__v_raw,i=ze(n),e=ze(r);return r!==e&&!t&&Qt(i,"has",r),!t&&Qt(i,"has",e),r===e?n.has(r):n.has(r)||n.has(e)}function qo(r,t=!1){return r=r.__v_raw,!t&&Qt(ze(r),"iterate",ni),Reflect.get(r,"size",r)}function fd(r){r=ze(r);const t=ze(this);return Sl(t).has.call(t,r)||(t.add(r),tr(t,"add",r,r)),this}function hd(r,t){t=ze(t);const n=ze(this),{has:i,get:e}=Sl(n);let a=i.call(n,r);a||(r=ze(r),a=i.call(n,r));const o=e.call(n,r);return n.set(r,t),a?_o(t,o)&&tr(n,"set",r,t):tr(n,"add",r,t),this}function cd(r){const t=ze(this),{has:n,get:i}=Sl(t);let e=n.call(t,r);e||(r=ze(r),e=n.call(t,r)),i&&i.call(t,r);const a=t.delete(r);return e&&tr(t,"delete",r,void 0),a}function dd(){const r=ze(this),t=r.size!==0,n=r.clear();return t&&tr(r,"clear",void 0,void 0),n}function Xo(r,t){return function(i,e){const a=this,o=a.__v_raw,s=ze(o),l=t?Oh:r?Ih:bo;return!r&&Qt(s,"iterate",ni),o.forEach((u,f)=>i.call(e,l(u),l(f),a))}}function Jo(r,t,n){return function(...i){const e=this.__v_raw,a=ze(e),o=io(a),s=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=e[r](...i),f=n?Oh:t?Ih:bo;return!t&&Qt(a,"iterate",l?df:ni),{next(){const{value:h,done:c}=u.next();return c?{value:h,done:c}:{value:s?[f(h[0]),f(h[1])]:f(h),done:c}},[Symbol.iterator](){return this}}}}function vr(r){return function(...t){return r==="delete"?!1:this}}function tw(){const r={get(a){return Ko(this,a)},get size(){return qo(this)},has:Yo,add:fd,set:hd,delete:cd,clear:dd,forEach:Xo(!1,!1)},t={get(a){return Ko(this,a,!1,!0)},get size(){return qo(this)},has:Yo,add:fd,set:hd,delete:cd,clear:dd,forEach:Xo(!1,!0)},n={get(a){return Ko(this,a,!0)},get size(){return qo(this,!0)},has(a){return Yo.call(this,a,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:Xo(!0,!1)},i={get(a){return Ko(this,a,!0,!0)},get size(){return qo(this,!0)},has(a){return Yo.call(this,a,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:Xo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=Jo(a,!1,!1),n[a]=Jo(a,!0,!1),t[a]=Jo(a,!1,!0),i[a]=Jo(a,!0,!0)}),[r,n,t,i]}const[nw,rw,iw,aw]=tw();function Ah(r,t){const n=t?r?aw:iw:r?rw:nw;return(i,e,a)=>e==="__v_isReactive"?!r:e==="__v_isReadonly"?r:e==="__v_raw"?i:Reflect.get($e(n,e)&&e in i?n:i,e,a)}const ow={get:Ah(!1,!1)},sw={get:Ah(!1,!0)},lw={get:Ah(!0,!1)},wm=new WeakMap,Cm=new WeakMap,Pm=new WeakMap,uw=new WeakMap;function fw(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hw(r){return r.__v_skip||!Object.isExtensible(r)?0:fw(Dx(r))}function Mn(r){return yo(r)?r:Rh(r,!1,xm,ow,wm)}function cw(r){return Rh(r,!1,ew,sw,Cm)}function Tm(r){return Rh(r,!0,Qx,lw,Pm)}function Rh(r,t,n,i,e){if(!Mt(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const a=e.get(r);if(a)return a;const o=hw(r);if(o===0)return r;const s=new Proxy(r,o===2?i:n);return e.set(r,s),s}function Hi(r){return yo(r)?Hi(r.__v_raw):!!(r&&r.__v_isReactive)}function yo(r){return!!(r&&r.__v_isReadonly)}function Sm(r){return!!(r&&r.__v_isShallow)}function Mm(r){return Hi(r)||yo(r)}function ze(r){const t=r&&r.__v_raw;return t?ze(t):r}function Em(r){return Vs(r,"__v_skip",!0),r}const bo=r=>Mt(r)?Mn(r):r,Ih=r=>Mt(r)?Tm(r):r;function Om(r){Or&&Dn&&(r=ze(r),_m(r.dep||(r.dep=Sh())))}function Am(r,t){r=ze(r),r.dep&&vf(r.dep)}function mt(r){return!!(r&&r.__v_isRef===!0)}function ee(r){return Rm(r,!1)}function dw(r){return Rm(r,!0)}function Rm(r,t){return mt(r)?r:new vw(r,t)}class vw{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ze(t),this._value=n?t:bo(t)}get value(){return Om(this),this._value}set value(t){t=this.__v_isShallow?t:ze(t),_o(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:bo(t),Am(this))}}function Zs(r){return mt(r)?r.value:r}const gw={get:(r,t,n)=>Zs(Reflect.get(r,t,n)),set:(r,t,n,i)=>{const e=r[t];return mt(e)&&!mt(n)?(e.value=n,!0):Reflect.set(r,t,n,i)}};function Im(r){return Hi(r)?r:new Proxy(r,gw)}function pw(r){const t=Ie(r)?new Array(r.length):{};for(const n in r)t[n]=ao(r,n);return t}class mw{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function ao(r,t,n){const i=r[t];return mt(i)?i:new mw(r,t,n)}class _w{constructor(t,n,i,e){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Mh(t,()=>{this._dirty||(this._dirty=!0,Am(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=i}get value(){const t=ze(this);return Om(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function yw(r,t,n=!1){let i,e;const a=Le(r);return a?(i=r,e=Cn):(i=r.get,e=r.set),new _w(i,e,a||!e,n)}Promise.resolve();function Ar(r,t,n,i){let e;try{e=i?r(...i):r()}catch(a){Ml(a,t,n)}return e}function vn(r,t,n,i){if(Le(r)){const a=Ar(r,t,n,i);return a&&dm(a)&&a.catch(o=>{Ml(o,t,n)}),a}const e=[];for(let a=0;a<r.length;a++)e.push(vn(r[a],t,n,i));return e}function Ml(r,t,n,i=!0){const e=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,s=n;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](r,o,s)===!1)return}a=a.parent}const l=t.appContext.config.errorHandler;if(l){Ar(l,null,10,[r,o,s]);return}}bw(r,n,e,i)}function bw(r,t,n,i=!0){console.error(r)}let Us=!1,gf=!1;const qt=[];let Xn=0;const oo=[];let qa=null,Ei=0;const so=[];let xr=null,Oi=0;const km=Promise.resolve();let kh=null,pf=null;function gn(r){const t=kh||km;return r?t.then(this?r.bind(this):r):t}function xw(r){let t=Xn+1,n=qt.length;for(;t<n;){const i=t+n>>>1;xo(qt[i])<r?t=i+1:n=i}return t}function Dm(r){(!qt.length||!qt.includes(r,Us&&r.allowRecurse?Xn+1:Xn))&&r!==pf&&(r.id==null?qt.push(r):qt.splice(xw(r.id),0,r),Lm())}function Lm(){!Us&&!gf&&(gf=!0,kh=km.then(zm))}function ww(r){const t=qt.indexOf(r);t>Xn&&qt.splice(t,1)}function jm(r,t,n,i){Ie(r)?n.push(...r):(!t||!t.includes(r,r.allowRecurse?i+1:i))&&n.push(r),Lm()}function Cw(r){jm(r,qa,oo,Ei)}function Pw(r){jm(r,xr,so,Oi)}function Dh(r,t=null){if(oo.length){for(pf=t,qa=[...new Set(oo)],oo.length=0,Ei=0;Ei<qa.length;Ei++)qa[Ei]();qa=null,Ei=0,pf=null,Dh(r,t)}}function Nm(r){if(so.length){const t=[...new Set(so)];if(so.length=0,xr){xr.push(...t);return}for(xr=t,xr.sort((n,i)=>xo(n)-xo(i)),Oi=0;Oi<xr.length;Oi++)xr[Oi]();xr=null,Oi=0}}const xo=r=>r.id==null?1/0:r.id;function zm(r){gf=!1,Us=!0,Dh(r),qt.sort((n,i)=>xo(n)-xo(i));const t=Cn;try{for(Xn=0;Xn<qt.length;Xn++){const n=qt[Xn];n&&n.active!==!1&&Ar(n,null,14)}}finally{Xn=0,qt.length=0,Nm(),Us=!1,kh=null,(qt.length||oo.length||so.length)&&zm(r)}}function Tw(r,t,...n){const i=r.vnode.props||Ke;let e=n;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in i){const f=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:c}=i[f]||Ke;c?e=n.map(d=>d.trim()):h&&(e=n.map(vm))}let s,l=i[s=Xl(t)]||i[s=Xl(Tn(t))];!l&&a&&(l=i[s=Xl(fa(t))]),l&&vn(l,r,6,e);const u=i[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,vn(u,r,6,e)}}function Fm(r,t,n=!1){const i=t.emitsCache,e=i.get(r);if(e!==void 0)return e;const a=r.emits;let o={},s=!1;if(!Le(r)){const l=u=>{const f=Fm(u,t,!0);f&&(s=!0,yt(o,f))};!n&&t.mixins.length&&t.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!s?(i.set(r,null),null):(Ie(a)?a.forEach(l=>o[l]=null):yt(o,a),i.set(r,o),o)}function Lh(r,t){return!r||!wl(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(r,t[0].toLowerCase()+t.slice(1))||$e(r,fa(t))||$e(r,t))}let Xt=null,El=null;function Ks(r){const t=Xt;return Xt=r,El=r&&r.type.__scopeId||null,t}function Sw(r){El=r}function Mw(){El=null}function ht(r,t=Xt,n){if(!t||r._n)return r;const i=(...e)=>{i._d&&Td(-1);const a=Ks(t),o=r(...e);return Ks(a),i._d&&Td(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Ql(r){const{type:t,vnode:n,proxy:i,withProxy:e,props:a,propsOptions:[o],slots:s,attrs:l,emit:u,render:f,renderCache:h,data:c,setupState:d,ctx:v,inheritAttrs:g}=r;let m,p;const _=Ks(r);try{if(n.shapeFlag&4){const x=e||i;m=kn(f.call(x,x,h,a,d,c,v)),p=l}else{const x=t;m=kn(x.length>1?x(a,{attrs:l,slots:s,emit:u}):x(a,null)),p=t.props?l:Ew(l)}}catch(x){uo.length=0,Ml(x,r,1),m=E(zn)}let b=m;if(p&&g!==!1){const x=Object.keys(p),{shapeFlag:C}=b;x.length&&C&7&&(o&&x.some(wh)&&(p=Ow(p,o)),b=si(b,p))}return n.dirs&&(b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),m=b,Ks(_),m}const Ew=r=>{let t;for(const n in r)(n==="class"||n==="style"||wl(n))&&((t||(t={}))[n]=r[n]);return t},Ow=(r,t)=>{const n={};for(const i in r)(!wh(i)||!(i.slice(9)in t))&&(n[i]=r[i]);return n};function Aw(r,t,n){const{props:i,children:e,component:a}=r,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?vd(i,o,u):!!o;if(l&8){const f=t.dynamicProps;for(let h=0;h<f.length;h++){const c=f[h];if(o[c]!==i[c]&&!Lh(u,c))return!0}}}else return(e||s)&&(!s||!s.$stable)?!0:i===o?!1:i?o?vd(i,o,u):!0:!!o;return!1}function vd(r,t,n){const i=Object.keys(t);if(i.length!==Object.keys(r).length)return!0;for(let e=0;e<i.length;e++){const a=i[e];if(t[a]!==r[a]&&!Lh(n,a))return!0}return!1}function Rw({vnode:r,parent:t},n){for(;t&&t.subTree===r;)(r=t.vnode).el=n,t=t.parent}const Iw=r=>r.__isSuspense;function kw(r,t){t&&t.pendingBranch?Ie(r)?t.effects.push(...r):t.effects.push(r):Pw(r)}function Ut(r,t){if(pt){let n=pt.provides;const i=pt.parent&&pt.parent.provides;i===n&&(n=pt.provides=Object.create(i)),n[r]=t}}function _t(r,t,n=!1){const i=pt||Xt;if(i){const e=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(e&&r in e)return e[r];if(arguments.length>1)return n&&Le(t)?t.call(i.proxy):t}}function Ht(r,t){return jh(r,null,t)}const gd={};function ke(r,t,n){return jh(r,t,n)}function jh(r,t,{immediate:n,deep:i,flush:e,onTrack:a,onTrigger:o}=Ke){const s=pt;let l,u=!1,f=!1;if(mt(r)?(l=()=>r.value,u=Sm(r)):Hi(r)?(l=()=>r,i=!0):Ie(r)?(f=!0,u=r.some(Hi),l=()=>r.map(p=>{if(mt(p))return p.value;if(Hi(p))return ei(p);if(Le(p))return Ar(p,s,2)})):Le(r)?t?l=()=>Ar(r,s,2):l=()=>{if(!(s&&s.isUnmounted))return h&&h(),vn(r,s,3,[c])}:l=Cn,t&&i){const p=l;l=()=>ei(p())}let h,c=p=>{h=m.onStop=()=>{Ar(p,s,4)}};if(Po)return c=Cn,t?n&&vn(t,s,3,[l(),f?[]:void 0,c]):l(),Cn;let d=f?[]:gd;const v=()=>{if(!!m.active)if(t){const p=m.run();(i||u||(f?p.some((_,b)=>_o(_,d[b])):_o(p,d)))&&(h&&h(),vn(t,s,3,[p,d===gd?void 0:d,c]),d=p)}else m.run()};v.allowRecurse=!!t;let g;e==="sync"?g=v:e==="post"?g=()=>Vt(v,s&&s.suspense):g=()=>{!s||s.isMounted?Cw(v):v()};const m=new Mh(l,g);return t?n?v():d=m.run():e==="post"?Vt(m.run.bind(m),s&&s.suspense):m.run(),()=>{m.stop(),s&&s.scope&&Ch(s.scope.effects,m)}}function Dw(r,t,n){const i=this.proxy,e=St(r)?r.includes(".")?Hm(i,r):()=>i[r]:r.bind(i,i);let a;Le(t)?a=t:(a=t.handler,n=t);const o=pt;ea(this);const s=jh(e,a.bind(i),n);return o?ea(o):ai(),s}function Hm(r,t){const n=t.split(".");return()=>{let i=r;for(let e=0;e<n.length&&i;e++)i=i[n[e]];return i}}function ei(r,t){if(!Mt(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),mt(r))ei(r.value,t);else if(Ie(r))for(let n=0;n<r.length;n++)ei(r[n],t);else if(Ix(r)||io(r))r.forEach(n=>{ei(n,t)});else if(Lx(r))for(const n in r)ei(r[n],t);return r}function Bm(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bt(()=>{r.isMounted=!0}),en(()=>{r.isUnmounting=!0}),r}const on=[Function,Array],Lw={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:on,onEnter:on,onAfterEnter:on,onEnterCancelled:on,onBeforeLeave:on,onLeave:on,onAfterLeave:on,onLeaveCancelled:on,onBeforeAppear:on,onAppear:on,onAfterAppear:on,onAppearCancelled:on},setup(r,{slots:t}){const n=va(),i=Bm();let e;return()=>{const a=t.default&&Nh(t.default(),!0);if(!a||!a.length)return;const o=ze(r),{mode:s}=o,l=a[0];if(i.isLeaving)return eu(l);const u=pd(l);if(!u)return eu(l);const f=wo(u,o,i,n);Co(u,f);const h=n.subTree,c=h&&pd(h);let d=!1;const{getTransitionKey:v}=u.type;if(v){const g=v();e===void 0?e=g:g!==e&&(e=g,d=!0)}if(c&&c.type!==zn&&(!Xr(u,c)||d)){const g=wo(c,o,i,n);if(Co(c,g),s==="out-in")return i.isLeaving=!0,g.afterLeave=()=>{i.isLeaving=!1,n.update()},eu(l);s==="in-out"&&u.type!==zn&&(g.delayLeave=(m,p,_)=>{const b=Wm(i,c);b[String(c.key)]=c,m._leaveCb=()=>{p(),m._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=_})}return l}}},$m=Lw;function Wm(r,t){const{leavingVNodes:n}=r;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function wo(r,t,n,i){const{appear:e,mode:a,persisted:o=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:c,onAfterLeave:d,onLeaveCancelled:v,onBeforeAppear:g,onAppear:m,onAfterAppear:p,onAppearCancelled:_}=t,b=String(r.key),x=Wm(n,r),C=(w,P)=>{w&&vn(w,i,9,P)},y={mode:a,persisted:o,beforeEnter(w){let P=s;if(!n.isMounted)if(e)P=g||s;else return;w._leaveCb&&w._leaveCb(!0);const T=x[b];T&&Xr(r,T)&&T.el._leaveCb&&T.el._leaveCb(),C(P,[w])},enter(w){let P=l,T=u,L=f;if(!n.isMounted)if(e)P=m||l,T=p||u,L=_||f;else return;let j=!1;const M=w._enterCb=D=>{j||(j=!0,D?C(L,[w]):C(T,[w]),y.delayedLeave&&y.delayedLeave(),w._enterCb=void 0)};P?(P(w,M),P.length<=1&&M()):M()},leave(w,P){const T=String(r.key);if(w._enterCb&&w._enterCb(!0),n.isUnmounting)return P();C(h,[w]);let L=!1;const j=w._leaveCb=M=>{L||(L=!0,P(),M?C(v,[w]):C(d,[w]),w._leaveCb=void 0,x[T]===r&&delete x[T])};x[T]=r,c?(c(w,j),c.length<=1&&j()):j()},clone(w){return wo(w,t,n,i)}};return y}function eu(r){if(Ol(r))return r=si(r),r.children=null,r}function pd(r){return Ol(r)?r.children?r.children[0]:void 0:r}function Co(r,t){r.shapeFlag&6&&r.component?Co(r.component.subTree,t):r.shapeFlag&128?(r.ssContent.transition=t.clone(r.ssContent),r.ssFallback.transition=t.clone(r.ssFallback)):r.transition=t}function Nh(r,t=!1){let n=[],i=0;for(let e=0;e<r.length;e++){const a=r[e];a.type===Ze?(a.patchFlag&128&&i++,n=n.concat(Nh(a.children,t))):(t||a.type!==zn)&&n.push(a)}if(i>1)for(let e=0;e<n.length;e++)n[e].patchFlag=-2;return n}function Se(r){return Le(r)?{setup:r,name:r.name}:r}const mf=r=>!!r.type.__asyncLoader,Ol=r=>r.type.__isKeepAlive;function jw(r,t){Gm(r,"a",t)}function Nw(r,t){Gm(r,"da",t)}function Gm(r,t,n=pt){const i=r.__wdc||(r.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}return r()});if(Al(t,i,n),n){let e=n.parent;for(;e&&e.parent;)Ol(e.parent.vnode)&&zw(i,t,n,e),e=e.parent}}function zw(r,t,n,i){const e=Al(t,r,i,!0);vi(()=>{Ch(i[t],e)},n)}function Al(r,t,n=pt,i=!1){if(n){const e=n[r]||(n[r]=[]),a=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;ha(),ea(n);const s=vn(t,n,r,o);return ai(),ca(),s});return i?e.unshift(a):e.push(a),a}}const or=r=>(t,n=pt)=>(!Po||r==="sp")&&Al(r,t,n),Vm=or("bm"),bt=or("m"),Zm=or("bu"),da=or("u"),en=or("bum"),vi=or("um"),Fw=or("sp"),Hw=or("rtg"),Bw=or("rtc");function $w(r,t=pt){Al("ec",r,t)}let _f=!0;function Ww(r){const t=Km(r),n=r.proxy,i=r.ctx;_f=!1,t.beforeCreate&&md(t.beforeCreate,r,"bc");const{data:e,computed:a,methods:o,watch:s,provide:l,inject:u,created:f,beforeMount:h,mounted:c,beforeUpdate:d,updated:v,activated:g,deactivated:m,beforeDestroy:p,beforeUnmount:_,destroyed:b,unmounted:x,render:C,renderTracked:y,renderTriggered:w,errorCaptured:P,serverPrefetch:T,expose:L,inheritAttrs:j,components:M,directives:D,filters:R}=t;if(u&&Gw(u,i,null,r.appContext.config.unwrapInjectedRef),o)for(const F in o){const O=o[F];Le(O)&&(i[F]=O.bind(n))}if(e){const F=e.call(n,n);Mt(F)&&(r.data=Mn(F))}if(_f=!0,a)for(const F in a){const O=a[F],A=Le(O)?O.bind(n,n):Le(O.get)?O.get.bind(n,n):Cn,$=!Le(O)&&Le(O.set)?O.set.bind(n):Cn,J=q({get:A,set:$});Object.defineProperty(i,F,{enumerable:!0,configurable:!0,get:()=>J.value,set:Z=>J.value=Z})}if(s)for(const F in s)Um(s[F],i,n,F);if(l){const F=Le(l)?l.call(n):l;Reflect.ownKeys(F).forEach(O=>{Ut(O,F[O])})}f&&md(f,r,"c");function z(F,O){Ie(O)?O.forEach(A=>F(A.bind(n))):O&&F(O.bind(n))}if(z(Vm,h),z(bt,c),z(Zm,d),z(da,v),z(jw,g),z(Nw,m),z($w,P),z(Bw,y),z(Hw,w),z(en,_),z(vi,x),z(Fw,T),Ie(L))if(L.length){const F=r.exposed||(r.exposed={});L.forEach(O=>{Object.defineProperty(F,O,{get:()=>n[O],set:A=>n[O]=A})})}else r.exposed||(r.exposed={});C&&r.render===Cn&&(r.render=C),j!=null&&(r.inheritAttrs=j),M&&(r.components=M),D&&(r.directives=D)}function Gw(r,t,n=Cn,i=!1){Ie(r)&&(r=yf(r));for(const e in r){const a=r[e];let o;Mt(a)?"default"in a?o=_t(a.from||e,a.default,!0):o=_t(a.from||e):o=_t(a),mt(o)&&i?Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[e]=o}}function md(r,t,n){vn(Ie(r)?r.map(i=>i.bind(t.proxy)):r.bind(t.proxy),t,n)}function Um(r,t,n,i){const e=i.includes(".")?Hm(n,i):()=>n[i];if(St(r)){const a=t[r];Le(a)&&ke(e,a)}else if(Le(r))ke(e,r.bind(n));else if(Mt(r))if(Ie(r))r.forEach(a=>Um(a,t,n,i));else{const a=Le(r.handler)?r.handler.bind(n):t[r.handler];Le(a)&&ke(e,a,r)}}function Km(r){const t=r.type,{mixins:n,extends:i}=t,{mixins:e,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(t);let l;return s?l=s:!e.length&&!n&&!i?l=t:(l={},e.length&&e.forEach(u=>Ys(l,u,o,!0)),Ys(l,t,o)),a.set(t,l),l}function Ys(r,t,n,i=!1){const{mixins:e,extends:a}=t;a&&Ys(r,a,n,!0),e&&e.forEach(o=>Ys(r,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const s=Vw[o]||n&&n[o];r[o]=s?s(r[o],t[o]):t[o]}return r}const Vw={data:_d,props:Kr,emits:Kr,methods:Kr,computed:Kr,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:Kr,directives:Kr,watch:Uw,provide:_d,inject:Zw};function _d(r,t){return t?r?function(){return yt(Le(r)?r.call(this,this):r,Le(t)?t.call(this,this):t)}:t:r}function Zw(r,t){return Kr(yf(r),yf(t))}function yf(r){if(Ie(r)){const t={};for(let n=0;n<r.length;n++)t[r[n]]=r[n];return t}return r}function jt(r,t){return r?[...new Set([].concat(r,t))]:t}function Kr(r,t){return r?yt(yt(Object.create(null),r),t):t}function Uw(r,t){if(!r)return t;if(!t)return r;const n=yt(Object.create(null),r);for(const i in t)n[i]=jt(r[i],t[i]);return n}function Kw(r,t,n,i=!1){const e={},a={};Vs(a,Il,1),r.propsDefaults=Object.create(null),Ym(r,t,e,a);for(const o in r.propsOptions[0])o in e||(e[o]=void 0);n?r.props=i?e:cw(e):r.type.props?r.props=e:r.props=a,r.attrs=a}function Yw(r,t,n,i){const{props:e,attrs:a,vnode:{patchFlag:o}}=r,s=ze(e),[l]=r.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const f=r.vnode.dynamicProps;for(let h=0;h<f.length;h++){let c=f[h];const d=t[c];if(l)if($e(a,c))d!==a[c]&&(a[c]=d,u=!0);else{const v=Tn(c);e[v]=bf(l,s,v,d,r,!1)}else d!==a[c]&&(a[c]=d,u=!0)}}}else{Ym(r,t,e,a)&&(u=!0);let f;for(const h in s)(!t||!$e(t,h)&&((f=fa(h))===h||!$e(t,f)))&&(l?n&&(n[h]!==void 0||n[f]!==void 0)&&(e[h]=bf(l,s,h,void 0,r,!0)):delete e[h]);if(a!==s)for(const h in a)(!t||!$e(t,h)&&!0)&&(delete a[h],u=!0)}u&&tr(r,"set","$attrs")}function Ym(r,t,n,i){const[e,a]=r.propsOptions;let o=!1,s;if(t)for(let l in t){if(Is(l))continue;const u=t[l];let f;e&&$e(e,f=Tn(l))?!a||!a.includes(f)?n[f]=u:(s||(s={}))[f]=u:Lh(r.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(a){const l=ze(n),u=s||Ke;for(let f=0;f<a.length;f++){const h=a[f];n[h]=bf(e,l,h,u[h],r,!$e(u,h))}}return o}function bf(r,t,n,i,e,a){const o=r[n];if(o!=null){const s=$e(o,"default");if(s&&i===void 0){const l=o.default;if(o.type!==Function&&Le(l)){const{propsDefaults:u}=e;n in u?i=u[n]:(ea(e),i=u[n]=l.call(null,t),ai())}else i=l}o[0]&&(a&&!s?i=!1:o[1]&&(i===""||i===fa(n))&&(i=!0))}return i}function qm(r,t,n=!1){const i=t.propsCache,e=i.get(r);if(e)return e;const a=r.props,o={},s=[];let l=!1;if(!Le(r)){const f=h=>{l=!0;const[c,d]=qm(h,t,!0);yt(o,c),d&&s.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(f),r.extends&&f(r.extends),r.mixins&&r.mixins.forEach(f)}if(!a&&!l)return i.set(r,Fi),Fi;if(Ie(a))for(let f=0;f<a.length;f++){const h=Tn(a[f]);yd(h)&&(o[h]=Ke)}else if(a)for(const f in a){const h=Tn(f);if(yd(h)){const c=a[f],d=o[h]=Ie(c)||Le(c)?{type:c}:c;if(d){const v=wd(Boolean,d.type),g=wd(String,d.type);d[0]=v>-1,d[1]=g<0||v<g,(v>-1||$e(d,"default"))&&s.push(h)}}}const u=[o,s];return i.set(r,u),u}function yd(r){return r[0]!=="$"}function bd(r){const t=r&&r.toString().match(/^\s*function (\w+)/);return t?t[1]:r===null?"null":""}function xd(r,t){return bd(r)===bd(t)}function wd(r,t){return Ie(t)?t.findIndex(n=>xd(n,r)):Le(t)&&xd(t,r)?0:-1}const Xm=r=>r[0]==="_"||r==="$stable",zh=r=>Ie(r)?r.map(kn):[kn(r)],qw=(r,t,n)=>{const i=ht((...e)=>zh(t(...e)),n);return i._c=!1,i},Jm=(r,t,n)=>{const i=r._ctx;for(const e in r){if(Xm(e))continue;const a=r[e];if(Le(a))t[e]=qw(e,a,i);else if(a!=null){const o=zh(a);t[e]=()=>o}}},Qm=(r,t)=>{const n=zh(t);r.slots.default=()=>n},Xw=(r,t)=>{if(r.vnode.shapeFlag&32){const n=t._;n?(r.slots=ze(t),Vs(t,"_",n)):Jm(t,r.slots={})}else r.slots={},t&&Qm(r,t);Vs(r.slots,Il,1)},Jw=(r,t,n)=>{const{vnode:i,slots:e}=r;let a=!0,o=Ke;if(i.shapeFlag&32){const s=t._;s?n&&s===1?a=!1:(yt(e,t),!n&&s===1&&delete e._):(a=!t.$stable,Jm(t,e)),o=t}else t&&(Qm(r,t),o={default:1});if(a)for(const s in e)!Xm(s)&&!(s in o)&&delete e[s]};function Rl(r,t){const n=Xt;if(n===null)return r;const i=n.proxy,e=r.dirs||(r.dirs=[]);for(let a=0;a<t.length;a++){let[o,s,l,u=Ke]=t[a];Le(o)&&(o={mounted:o,updated:o}),o.deep&&ei(s),e.push({dir:o,instance:i,value:s,oldValue:void 0,arg:l,modifiers:u})}return r}function Br(r,t,n,i){const e=r.dirs,a=t&&t.dirs;for(let o=0;o<e.length;o++){const s=e[o];a&&(s.oldValue=a[o].value);let l=s.dir[i];l&&(ha(),vn(l,n,8,[r.el,s,r,t]),ca())}}function e_(){return{app:null,config:{isNativeTag:Ox,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qw=0;function eC(r,t){return function(i,e=null){e!=null&&!Mt(e)&&(e=null);const a=e_(),o=new Set;let s=!1;const l=a.app={_uid:Qw++,_component:i,_props:e,_container:null,_context:a,_instance:null,version:SC,get config(){return a.config},set config(u){},use(u,...f){return o.has(u)||(u&&Le(u.install)?(o.add(u),u.install(l,...f)):Le(u)&&(o.add(u),u(l,...f))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,f){return f?(a.components[u]=f,l):a.components[u]},directive(u,f){return f?(a.directives[u]=f,l):a.directives[u]},mount(u,f,h){if(!s){const c=E(i,e);return c.appContext=a,f&&t?t(c,u):r(c,u,h),s=!0,l._container=u,u.__vue_app__=l,Gh(c.component)||c.component.proxy}},unmount(){s&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,f){return a.provides[u]=f,l}};return l}}function xf(r,t,n,i,e=!1){if(Ie(r)){r.forEach((c,d)=>xf(c,t&&(Ie(t)?t[d]:t),n,i,e));return}if(mf(i)&&!e)return;const a=i.shapeFlag&4?Gh(i.component)||i.component.proxy:i.el,o=e?null:a,{i:s,r:l}=r,u=t&&t.r,f=s.refs===Ke?s.refs={}:s.refs,h=s.setupState;if(u!=null&&u!==l&&(St(u)?(f[u]=null,$e(h,u)&&(h[u]=null)):mt(u)&&(u.value=null)),Le(l))Ar(l,s,12,[o,f]);else{const c=St(l),d=mt(l);if(c||d){const v=()=>{if(r.f){const g=c?f[l]:l.value;e?Ie(g)&&Ch(g,a):Ie(g)?g.includes(a)||g.push(a):c?f[l]=[a]:(l.value=[a],r.k&&(f[r.k]=l.value))}else c?(f[l]=o,$e(h,l)&&(h[l]=o)):mt(l)&&(l.value=o,r.k&&(f[r.k]=o))};o?(v.id=-1,Vt(v,n)):v()}}}const Vt=kw;function tC(r){return nC(r)}function nC(r,t){const n=zx();n.__VUE__=!0;const{insert:i,remove:e,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:f,parentNode:h,nextSibling:c,setScopeId:d=Cn,cloneNode:v,insertStaticContent:g}=r,m=(S,k,H,K=null,G=null,X=null,se=!1,ie=null,oe=!!k.dynamicChildren)=>{if(S===k)return;S&&!Xr(S,k)&&(K=ge(S),ae(S,G,X,!0),S=null),k.patchFlag===-2&&(oe=!1,k.dynamicChildren=null);const{type:Y,ref:le,shapeFlag:he}=k;switch(Y){case No:p(S,k,H,K);break;case zn:_(S,k,H,K);break;case tu:S==null&&b(k,H,K,se);break;case Ze:D(S,k,H,K,G,X,se,ie,oe);break;default:he&1?y(S,k,H,K,G,X,se,ie,oe):he&6?R(S,k,H,K,G,X,se,ie,oe):(he&64||he&128)&&Y.process(S,k,H,K,G,X,se,ie,oe,ce)}le!=null&&G&&xf(le,S&&S.ref,X,k||S,!k)},p=(S,k,H,K)=>{if(S==null)i(k.el=s(k.children),H,K);else{const G=k.el=S.el;k.children!==S.children&&u(G,k.children)}},_=(S,k,H,K)=>{S==null?i(k.el=l(k.children||""),H,K):k.el=S.el},b=(S,k,H,K)=>{[S.el,S.anchor]=g(S.children,k,H,K,S.el,S.anchor)},x=({el:S,anchor:k},H,K)=>{let G;for(;S&&S!==k;)G=c(S),i(S,H,K),S=G;i(k,H,K)},C=({el:S,anchor:k})=>{let H;for(;S&&S!==k;)H=c(S),e(S),S=H;e(k)},y=(S,k,H,K,G,X,se,ie,oe)=>{se=se||k.type==="svg",S==null?w(k,H,K,G,X,se,ie,oe):L(S,k,G,X,se,ie,oe)},w=(S,k,H,K,G,X,se,ie)=>{let oe,Y;const{type:le,props:he,shapeFlag:pe,transition:xe,patchFlag:Oe,dirs:Ne}=S;if(S.el&&v!==void 0&&Oe===-1)oe=S.el=v(S.el);else{if(oe=S.el=o(S.type,X,he&&he.is,he),pe&8?f(oe,S.children):pe&16&&T(S.children,oe,null,K,G,X&&le!=="foreignObject",se,ie),Ne&&Br(S,null,K,"created"),he){for(const Ge in he)Ge!=="value"&&!Is(Ge)&&a(oe,Ge,null,he[Ge],X,S.children,K,G,de);"value"in he&&a(oe,"value",null,he.value),(Y=he.onVnodeBeforeMount)&&Rn(Y,K,S)}P(oe,S,S.scopeId,se,K)}Ne&&Br(S,null,K,"beforeMount");const Fe=(!G||G&&!G.pendingBranch)&&xe&&!xe.persisted;Fe&&xe.beforeEnter(oe),i(oe,k,H),((Y=he&&he.onVnodeMounted)||Fe||Ne)&&Vt(()=>{Y&&Rn(Y,K,S),Fe&&xe.enter(oe),Ne&&Br(S,null,K,"mounted")},G)},P=(S,k,H,K,G)=>{if(H&&d(S,H),K)for(let X=0;X<K.length;X++)d(S,K[X]);if(G){let X=G.subTree;if(k===X){const se=G.vnode;P(S,se,se.scopeId,se.slotScopeIds,G.parent)}}},T=(S,k,H,K,G,X,se,ie,oe=0)=>{for(let Y=oe;Y<S.length;Y++){const le=S[Y]=ie?wr(S[Y]):kn(S[Y]);m(null,le,k,H,K,G,X,se,ie)}},L=(S,k,H,K,G,X,se)=>{const ie=k.el=S.el;let{patchFlag:oe,dynamicChildren:Y,dirs:le}=k;oe|=S.patchFlag&16;const he=S.props||Ke,pe=k.props||Ke;let xe;H&&$r(H,!1),(xe=pe.onVnodeBeforeUpdate)&&Rn(xe,H,k,S),le&&Br(k,S,H,"beforeUpdate"),H&&$r(H,!0);const Oe=G&&k.type!=="foreignObject";if(Y?j(S.dynamicChildren,Y,ie,H,K,Oe,X):se||A(S,k,ie,null,H,K,Oe,X,!1),oe>0){if(oe&16)M(ie,k,he,pe,H,K,G);else if(oe&2&&he.class!==pe.class&&a(ie,"class",null,pe.class,G),oe&4&&a(ie,"style",he.style,pe.style,G),oe&8){const Ne=k.dynamicProps;for(let Fe=0;Fe<Ne.length;Fe++){const Ge=Ne[Fe],gt=he[Ge],wt=pe[Ge];(wt!==gt||Ge==="value")&&a(ie,Ge,gt,wt,G,S.children,H,K,de)}}oe&1&&S.children!==k.children&&f(ie,k.children)}else!se&&Y==null&&M(ie,k,he,pe,H,K,G);((xe=pe.onVnodeUpdated)||le)&&Vt(()=>{xe&&Rn(xe,H,k,S),le&&Br(k,S,H,"updated")},K)},j=(S,k,H,K,G,X,se)=>{for(let ie=0;ie<k.length;ie++){const oe=S[ie],Y=k[ie],le=oe.el&&(oe.type===Ze||!Xr(oe,Y)||oe.shapeFlag&70)?h(oe.el):H;m(oe,Y,le,null,K,G,X,se,!0)}},M=(S,k,H,K,G,X,se)=>{if(H!==K){for(const ie in K){if(Is(ie))continue;const oe=K[ie],Y=H[ie];oe!==Y&&ie!=="value"&&a(S,ie,Y,oe,se,k.children,G,X,de)}if(H!==Ke)for(const ie in H)!Is(ie)&&!(ie in K)&&a(S,ie,H[ie],null,se,k.children,G,X,de);"value"in K&&a(S,"value",H.value,K.value)}},D=(S,k,H,K,G,X,se,ie,oe)=>{const Y=k.el=S?S.el:s(""),le=k.anchor=S?S.anchor:s("");let{patchFlag:he,dynamicChildren:pe,slotScopeIds:xe}=k;xe&&(ie=ie?ie.concat(xe):xe),S==null?(i(Y,H,K),i(le,H,K),T(k.children,H,le,G,X,se,ie,oe)):he>0&&he&64&&pe&&S.dynamicChildren?(j(S.dynamicChildren,pe,H,G,X,se,ie),(k.key!=null||G&&k===G.subTree)&&Fh(S,k,!0)):A(S,k,H,le,G,X,se,ie,oe)},R=(S,k,H,K,G,X,se,ie,oe)=>{k.slotScopeIds=ie,S==null?k.shapeFlag&512?G.ctx.activate(k,H,K,se,oe):I(k,H,K,G,X,se,oe):z(S,k,oe)},I=(S,k,H,K,G,X,se)=>{const ie=S.component=yC(S,K,G);if(Ol(S)&&(ie.ctx.renderer=ce),bC(ie),ie.asyncDep){if(G&&G.registerDep(ie,F),!S.el){const oe=ie.subTree=E(zn);_(null,oe,k,H)}return}F(ie,S,k,H,G,X,se)},z=(S,k,H)=>{const K=k.component=S.component;if(Aw(S,k,H))if(K.asyncDep&&!K.asyncResolved){O(K,k,H);return}else K.next=k,ww(K.update),K.update();else k.component=S.component,k.el=S.el,K.vnode=k},F=(S,k,H,K,G,X,se)=>{const ie=()=>{if(S.isMounted){let{next:le,bu:he,u:pe,parent:xe,vnode:Oe}=S,Ne=le,Fe;$r(S,!1),le?(le.el=Oe.el,O(S,le,se)):le=Oe,he&&Jl(he),(Fe=le.props&&le.props.onVnodeBeforeUpdate)&&Rn(Fe,xe,le,Oe),$r(S,!0);const Ge=Ql(S),gt=S.subTree;S.subTree=Ge,m(gt,Ge,h(gt.el),ge(gt),S,G,X),le.el=Ge.el,Ne===null&&Rw(S,Ge.el),pe&&Vt(pe,G),(Fe=le.props&&le.props.onVnodeUpdated)&&Vt(()=>Rn(Fe,xe,le,Oe),G)}else{let le;const{el:he,props:pe}=k,{bm:xe,m:Oe,parent:Ne}=S,Fe=mf(k);if($r(S,!1),xe&&Jl(xe),!Fe&&(le=pe&&pe.onVnodeBeforeMount)&&Rn(le,Ne,k),$r(S,!0),he&&Ce){const Ge=()=>{S.subTree=Ql(S),Ce(he,S.subTree,S,G,null)};Fe?k.type.__asyncLoader().then(()=>!S.isUnmounted&&Ge()):Ge()}else{const Ge=S.subTree=Ql(S);m(null,Ge,H,K,S,G,X),k.el=Ge.el}if(Oe&&Vt(Oe,G),!Fe&&(le=pe&&pe.onVnodeMounted)){const Ge=k;Vt(()=>Rn(le,Ne,Ge),G)}k.shapeFlag&256&&S.a&&Vt(S.a,G),S.isMounted=!0,k=H=K=null}},oe=S.effect=new Mh(ie,()=>Dm(S.update),S.scope),Y=S.update=oe.run.bind(oe);Y.id=S.uid,$r(S,!0),Y()},O=(S,k,H)=>{k.component=S;const K=S.vnode.props;S.vnode=k,S.next=null,Yw(S,k.props,K,H),Jw(S,k.children,H),ha(),Dh(void 0,S.update),ca()},A=(S,k,H,K,G,X,se,ie,oe=!1)=>{const Y=S&&S.children,le=S?S.shapeFlag:0,he=k.children,{patchFlag:pe,shapeFlag:xe}=k;if(pe>0){if(pe&128){J(Y,he,H,K,G,X,se,ie,oe);return}else if(pe&256){$(Y,he,H,K,G,X,se,ie,oe);return}}xe&8?(le&16&&de(Y,G,X),he!==Y&&f(H,he)):le&16?xe&16?J(Y,he,H,K,G,X,se,ie,oe):de(Y,G,X,!0):(le&8&&f(H,""),xe&16&&T(he,H,K,G,X,se,ie,oe))},$=(S,k,H,K,G,X,se,ie,oe)=>{S=S||Fi,k=k||Fi;const Y=S.length,le=k.length,he=Math.min(Y,le);let pe;for(pe=0;pe<he;pe++){const xe=k[pe]=oe?wr(k[pe]):kn(k[pe]);m(S[pe],xe,H,null,G,X,se,ie,oe)}Y>le?de(S,G,X,!0,!1,he):T(k,H,K,G,X,se,ie,oe,he)},J=(S,k,H,K,G,X,se,ie,oe)=>{let Y=0;const le=k.length;let he=S.length-1,pe=le-1;for(;Y<=he&&Y<=pe;){const xe=S[Y],Oe=k[Y]=oe?wr(k[Y]):kn(k[Y]);if(Xr(xe,Oe))m(xe,Oe,H,null,G,X,se,ie,oe);else break;Y++}for(;Y<=he&&Y<=pe;){const xe=S[he],Oe=k[pe]=oe?wr(k[pe]):kn(k[pe]);if(Xr(xe,Oe))m(xe,Oe,H,null,G,X,se,ie,oe);else break;he--,pe--}if(Y>he){if(Y<=pe){const xe=pe+1,Oe=xe<le?k[xe].el:K;for(;Y<=pe;)m(null,k[Y]=oe?wr(k[Y]):kn(k[Y]),H,Oe,G,X,se,ie,oe),Y++}}else if(Y>pe)for(;Y<=he;)ae(S[Y],G,X,!0),Y++;else{const xe=Y,Oe=Y,Ne=new Map;for(Y=Oe;Y<=pe;Y++){const Et=k[Y]=oe?wr(k[Y]):kn(k[Y]);Et.key!=null&&Ne.set(Et.key,Y)}let Fe,Ge=0;const gt=pe-Oe+1;let wt=!1,yn=0;const hr=new Array(gt);for(Y=0;Y<gt;Y++)hr[Y]=0;for(Y=xe;Y<=he;Y++){const Et=S[Y];if(Ge>=gt){ae(Et,G,X,!0);continue}let nn;if(Et.key!=null)nn=Ne.get(Et.key);else for(Fe=Oe;Fe<=pe;Fe++)if(hr[Fe-Oe]===0&&Xr(Et,k[Fe])){nn=Fe;break}nn===void 0?ae(Et,G,X,!0):(hr[nn-Oe]=Y+1,nn>=yn?yn=nn:wt=!0,m(Et,k[nn],H,null,G,X,se,ie,oe),Ge++)}const Vo=wt?rC(hr):Fi;for(Fe=Vo.length-1,Y=gt-1;Y>=0;Y--){const Et=Oe+Y,nn=k[Et],Zo=Et+1<le?k[Et+1].el:K;hr[Y]===0?m(null,nn,H,Zo,G,X,se,ie,oe):wt&&(Fe<0||Y!==Vo[Fe]?Z(nn,H,Zo,2):Fe--)}}},Z=(S,k,H,K,G=null)=>{const{el:X,type:se,transition:ie,children:oe,shapeFlag:Y}=S;if(Y&6){Z(S.component.subTree,k,H,K);return}if(Y&128){S.suspense.move(k,H,K);return}if(Y&64){se.move(S,k,H,ce);return}if(se===Ze){i(X,k,H);for(let he=0;he<oe.length;he++)Z(oe[he],k,H,K);i(S.anchor,k,H);return}if(se===tu){x(S,k,H);return}if(K!==2&&Y&1&&ie)if(K===0)ie.beforeEnter(X),i(X,k,H),Vt(()=>ie.enter(X),G);else{const{leave:he,delayLeave:pe,afterLeave:xe}=ie,Oe=()=>i(X,k,H),Ne=()=>{he(X,()=>{Oe(),xe&&xe()})};pe?pe(X,Oe,Ne):Ne()}else i(X,k,H)},ae=(S,k,H,K=!1,G=!1)=>{const{type:X,props:se,ref:ie,children:oe,dynamicChildren:Y,shapeFlag:le,patchFlag:he,dirs:pe}=S;if(ie!=null&&xf(ie,null,H,S,!0),le&256){k.ctx.deactivate(S);return}const xe=le&1&&pe,Oe=!mf(S);let Ne;if(Oe&&(Ne=se&&se.onVnodeBeforeUnmount)&&Rn(Ne,k,S),le&6)ne(S.component,H,K);else{if(le&128){S.suspense.unmount(H,K);return}xe&&Br(S,null,k,"beforeUnmount"),le&64?S.type.remove(S,k,H,G,ce,K):Y&&(X!==Ze||he>0&&he&64)?de(Y,k,H,!1,!0):(X===Ze&&he&384||!G&&le&16)&&de(oe,k,H),K&&U(S)}(Oe&&(Ne=se&&se.onVnodeUnmounted)||xe)&&Vt(()=>{Ne&&Rn(Ne,k,S),xe&&Br(S,null,k,"unmounted")},H)},U=S=>{const{type:k,el:H,anchor:K,transition:G}=S;if(k===Ze){W(H,K);return}if(k===tu){C(S);return}const X=()=>{e(H),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(S.shapeFlag&1&&G&&!G.persisted){const{leave:se,delayLeave:ie}=G,oe=()=>se(H,X);ie?ie(S.el,X,oe):oe()}else X()},W=(S,k)=>{let H;for(;S!==k;)H=c(S),e(S),S=H;e(k)},ne=(S,k,H)=>{const{bum:K,scope:G,update:X,subTree:se,um:ie}=S;K&&Jl(K),G.stop(),X&&(X.active=!1,ae(se,S,k,H)),ie&&Vt(ie,k),Vt(()=>{S.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},de=(S,k,H,K=!1,G=!1,X=0)=>{for(let se=X;se<S.length;se++)ae(S[se],k,H,K,G)},ge=S=>S.shapeFlag&6?ge(S.component.subTree):S.shapeFlag&128?S.suspense.next():c(S.anchor||S.el),ve=(S,k,H)=>{S==null?k._vnode&&ae(k._vnode,null,null,!0):m(k._vnode||null,S,k,null,null,null,H),Nm(),k._vnode=S},ce={p:m,um:ae,m:Z,r:U,mt:I,mc:T,pc:A,pbc:j,n:ge,o:r};let Me,Ce;return t&&([Me,Ce]=t(ce)),{render:ve,hydrate:Me,createApp:eC(ve,Me)}}function $r({effect:r,update:t},n){r.allowRecurse=t.allowRecurse=n}function Fh(r,t,n=!1){const i=r.children,e=t.children;if(Ie(i)&&Ie(e))for(let a=0;a<i.length;a++){const o=i[a];let s=e[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=e[a]=wr(e[a]),s.el=o.el),n||Fh(o,s))}}function rC(r){const t=r.slice(),n=[0];let i,e,a,o,s;const l=r.length;for(i=0;i<l;i++){const u=r[i];if(u!==0){if(e=n[n.length-1],r[e]<u){t[i]=e,n.push(i);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,r[n[s]]<u?a=s+1:o=s;u<r[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}const iC=r=>r.__isTeleport,lo=r=>r&&(r.disabled||r.disabled===""),Cd=r=>typeof SVGElement!="undefined"&&r instanceof SVGElement,wf=(r,t)=>{const n=r&&r.to;return St(n)?t?t(n):null:n},aC={__isTeleport:!0,process(r,t,n,i,e,a,o,s,l,u){const{mc:f,pc:h,pbc:c,o:{insert:d,querySelector:v,createText:g,createComment:m}}=u,p=lo(t.props);let{shapeFlag:_,children:b,dynamicChildren:x}=t;if(r==null){const C=t.el=g(""),y=t.anchor=g("");d(C,n,i),d(y,n,i);const w=t.target=wf(t.props,v),P=t.targetAnchor=g("");w&&(d(P,w),o=o||Cd(w));const T=(L,j)=>{_&16&&f(b,L,j,e,a,o,s,l)};p?T(n,y):w&&T(w,P)}else{t.el=r.el;const C=t.anchor=r.anchor,y=t.target=r.target,w=t.targetAnchor=r.targetAnchor,P=lo(r.props),T=P?n:y,L=P?C:w;if(o=o||Cd(y),x?(c(r.dynamicChildren,x,T,e,a,o,s),Fh(r,t,!0)):l||h(r,t,T,L,e,a,o,s,!1),p)P||Qo(t,n,C,u,1);else if((t.props&&t.props.to)!==(r.props&&r.props.to)){const j=t.target=wf(t.props,v);j&&Qo(t,j,null,u,0)}else P&&Qo(t,y,w,u,1)}},remove(r,t,n,i,{um:e,o:{remove:a}},o){const{shapeFlag:s,children:l,anchor:u,targetAnchor:f,target:h,props:c}=r;if(h&&a(f),(o||!lo(c))&&(a(u),s&16))for(let d=0;d<l.length;d++){const v=l[d];e(v,t,n,!0,!!v.dynamicChildren)}},move:Qo,hydrate:oC};function Qo(r,t,n,{o:{insert:i},m:e},a=2){a===0&&i(r.targetAnchor,t,n);const{el:o,anchor:s,shapeFlag:l,children:u,props:f}=r,h=a===2;if(h&&i(o,t,n),(!h||lo(f))&&l&16)for(let c=0;c<u.length;c++)e(u[c],t,n,2);h&&i(s,t,n)}function oC(r,t,n,i,e,a,{o:{nextSibling:o,parentNode:s,querySelector:l}},u){const f=t.target=wf(t.props,l);if(f){const h=f._lpa||f.firstChild;t.shapeFlag&16&&(lo(t.props)?(t.anchor=u(o(r),t,s(r),n,i,e,a),t.targetAnchor=h):(t.anchor=o(r),t.targetAnchor=u(h,t,f,n,i,e,a)),f._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const Hh=aC,sC="components",lC="directives",uC=Symbol();function fC(r){return hC(lC,r)}function hC(r,t,n=!0,i=!1){const e=Xt||pt;if(e){const a=e.type;if(r===sC){const s=PC(a);if(s&&(s===t||s===Tn(t)||s===Tl(Tn(t))))return a}const o=Pd(e[r]||a[r],t)||Pd(e.appContext[r],t);return!o&&i?a:o}}function Pd(r,t){return r&&(r[t]||r[Tn(t)]||r[Tl(Tn(t))])}const Ze=Symbol(void 0),No=Symbol(void 0),zn=Symbol(void 0),tu=Symbol(void 0),uo=[];let ri=null;function Qi(r=!1){uo.push(ri=r?null:[])}function cC(){uo.pop(),ri=uo[uo.length-1]||null}let qs=1;function Td(r){qs+=r}function t_(r){return r.dynamicChildren=qs>0?ri||Fi:null,cC(),qs>0&&ri&&ri.push(r),r}function Bh(r,t,n,i,e,a){return t_(ii(r,t,n,i,e,a,!0))}function $h(r,t,n,i,e){return t_(E(r,t,n,i,e,!0))}function nr(r){return r?r.__v_isVNode===!0:!1}function Xr(r,t){return r.type===t.type&&r.key===t.key}const Il="__vInternal",n_=({key:r})=>r!=null?r:null,ks=({ref:r,ref_key:t,ref_for:n})=>r!=null?St(r)||mt(r)||Le(r)?{i:Xt,r,k:t,f:!!n}:r:null;function ii(r,t=null,n=null,i=0,e=null,a=r===Ze?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&n_(t),ref:t&&ks(t),scopeId:El,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:e,dynamicChildren:null,appContext:null};return s?(Wh(l,n),a&128&&r.normalize(l)):n&&(l.shapeFlag|=St(n)?8:16),qs>0&&!o&&ri&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&ri.push(l),l}const E=dC;function dC(r,t=null,n=null,i=0,e=null,a=!1){if((!r||r===uC)&&(r=zn),nr(r)){const s=si(r,t,!0);return n&&Wh(s,n),s}if(TC(r)&&(r=r.__vccOpts),t){t=vC(t);let{class:s,style:l}=t;s&&!St(s)&&(t.class=xh(s)),Mt(l)&&(Mm(l)&&!Ie(l)&&(l=yt({},l)),t.style=bh(l))}const o=St(r)?1:Iw(r)?128:iC(r)?64:Mt(r)?4:Le(r)?2:0;return ii(r,t,n,i,e,o,a,!0)}function vC(r){return r?Mm(r)||Il in r?yt({},r):r:null}function si(r,t,n=!1){const{props:i,ref:e,patchFlag:a,children:o}=r,s=t?gC(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:s,key:s&&n_(s),ref:t&&t.ref?n&&e?Ie(e)?e.concat(ks(t)):[e,ks(t)]:ks(t):e,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==Ze?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&si(r.ssContent),ssFallback:r.ssFallback&&si(r.ssFallback),el:r.el,anchor:r.anchor}}function $t(r=" ",t=0){return E(No,null,r,t)}function kn(r){return r==null||typeof r=="boolean"?E(zn):Ie(r)?E(Ze,null,r.slice()):typeof r=="object"?wr(r):E(No,null,String(r))}function wr(r){return r.el===null||r.memo?r:si(r)}function Wh(r,t){let n=0;const{shapeFlag:i}=r;if(t==null)t=null;else if(Ie(t))n=16;else if(typeof t=="object")if(i&65){const e=t.default;e&&(e._c&&(e._d=!1),Wh(r,e()),e._c&&(e._d=!0));return}else{n=32;const e=t._;!e&&!(Il in t)?t._ctx=Xt:e===3&&Xt&&(Xt.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else Le(t)?(t={default:t,_ctx:Xt},n=32):(t=String(t),i&64?(n=16,t=[$t(t)]):n=8);r.children=t,r.shapeFlag|=n}function gC(...r){const t={};for(let n=0;n<r.length;n++){const i=r[n];for(const e in i)if(e==="class")t.class!==i.class&&(t.class=xh([t.class,i.class]));else if(e==="style")t.style=bh([t.style,i.style]);else if(wl(e)){const a=t[e],o=i[e];o&&a!==o&&!(Ie(a)&&a.includes(o))&&(t[e]=a?[].concat(a,o):o)}else e!==""&&(t[e]=i[e])}return t}function Rn(r,t,n,i=null){vn(r,t,7,[n,i])}function nu(r,t,n={},i,e){if(Xt.isCE)return E("slot",t==="default"?null:{name:t},i&&i());let a=r[t];a&&a._c&&(a._d=!1),Qi();const o=a&&r_(a(n)),s=$h(Ze,{key:n.key||`_${t}`},o||(i?i():[]),o&&r._===1?64:-2);return!e&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function r_(r){return r.some(t=>nr(t)?!(t.type===zn||t.type===Ze&&!r_(t.children)):!0)?r:null}const Cf=r=>r?i_(r)?Gh(r)||r.proxy:Cf(r.parent):null,Xs=yt(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Cf(r.parent),$root:r=>Cf(r.root),$emit:r=>r.emit,$options:r=>Km(r),$forceUpdate:r=>()=>Dm(r.update),$nextTick:r=>gn.bind(r.proxy),$watch:r=>Dw.bind(r)}),pC={get({_:r},t){const{ctx:n,setupState:i,data:e,props:a,accessCache:o,type:s,appContext:l}=r;let u;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return e[t];case 4:return n[t];case 3:return a[t]}else{if(i!==Ke&&$e(i,t))return o[t]=1,i[t];if(e!==Ke&&$e(e,t))return o[t]=2,e[t];if((u=r.propsOptions[0])&&$e(u,t))return o[t]=3,a[t];if(n!==Ke&&$e(n,t))return o[t]=4,n[t];_f&&(o[t]=0)}}const f=Xs[t];let h,c;if(f)return t==="$attrs"&&Qt(r,"get",t),f(r);if((h=s.__cssModules)&&(h=h[t]))return h;if(n!==Ke&&$e(n,t))return o[t]=4,n[t];if(c=l.config.globalProperties,$e(c,t))return c[t]},set({_:r},t,n){const{data:i,setupState:e,ctx:a}=r;return e!==Ke&&$e(e,t)?(e[t]=n,!0):i!==Ke&&$e(i,t)?(i[t]=n,!0):$e(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(a[t]=n,!0)},has({_:{data:r,setupState:t,accessCache:n,ctx:i,appContext:e,propsOptions:a}},o){let s;return!!n[o]||r!==Ke&&$e(r,o)||t!==Ke&&$e(t,o)||(s=a[0])&&$e(s,o)||$e(i,o)||$e(Xs,o)||$e(e.config.globalProperties,o)},defineProperty(r,t,n){return n.get!=null?this.set(r,t,n.get(),null):n.value!=null&&this.set(r,t,n.value,null),Reflect.defineProperty(r,t,n)}},mC=e_();let _C=0;function yC(r,t,n){const i=r.type,e=(t?t.appContext:r.appContext)||mC,a={uid:_C++,vnode:r,type:i,parent:t,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new Fx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qm(i,e),emitsOptions:Fm(i,e),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:i.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Tw.bind(null,a),r.ce&&r.ce(a),a}let pt=null;const va=()=>pt||Xt,ea=r=>{pt=r,r.scope.on()},ai=()=>{pt&&pt.scope.off(),pt=null};function i_(r){return r.vnode.shapeFlag&4}let Po=!1;function bC(r,t=!1){Po=t;const{props:n,children:i}=r.vnode,e=i_(r);Kw(r,n,e,t),Xw(r,i);const a=e?xC(r,t):void 0;return Po=!1,a}function xC(r,t){const n=r.type;r.accessCache=Object.create(null),r.proxy=Em(new Proxy(r.ctx,pC));const{setup:i}=n;if(i){const e=r.setupContext=i.length>1?CC(r):null;ea(r),ha();const a=Ar(i,r,0,[r.props,e]);if(ca(),ai(),dm(a)){if(a.then(ai,ai),t)return a.then(o=>{Sd(r,o,t)}).catch(o=>{Ml(o,r,0)});r.asyncDep=a}else Sd(r,a,t)}else a_(r,t)}function Sd(r,t,n){Le(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:Mt(t)&&(r.setupState=Im(t)),a_(r,n)}let Md;function a_(r,t,n){const i=r.type;if(!r.render){if(!t&&Md&&!i.render){const e=i.template;if(e){const{isCustomElement:a,compilerOptions:o}=r.appContext.config,{delimiters:s,compilerOptions:l}=i,u=yt(yt({isCustomElement:a,delimiters:s},o),l);i.render=Md(e,u)}}r.render=i.render||Cn}ea(r),ha(),Ww(r),ca(),ai()}function wC(r){return new Proxy(r.attrs,{get(t,n){return Qt(r,"get","$attrs"),t[n]}})}function CC(r){const t=i=>{r.exposed=i||{}};let n;return{get attrs(){return n||(n=wC(r))},slots:r.slots,emit:r.emit,expose:t}}function Gh(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(Im(Em(r.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xs)return Xs[n](r)}}))}function PC(r){return Le(r)&&r.displayName||r.name}function TC(r){return Le(r)&&"__vccOpts"in r}const q=(r,t)=>yw(r,t,Po);function Pf(r,t,n){const i=arguments.length;return i===2?Mt(t)&&!Ie(t)?nr(t)?E(r,null,[t]):E(r,t):E(r,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&nr(n)&&(n=[n]),E(r,t,n))}const SC="3.2.31",MC="http://www.w3.org/2000/svg",Jr=typeof document!="undefined"?document:null,Ed=Jr&&Jr.createElement("template"),EC={insert:(r,t,n)=>{t.insertBefore(r,n||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,n,i)=>{const e=t?Jr.createElementNS(MC,r):Jr.createElement(r,n?{is:n}:void 0);return r==="select"&&i&&i.multiple!=null&&e.setAttribute("multiple",i.multiple),e},createText:r=>Jr.createTextNode(r),createComment:r=>Jr.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Jr.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},cloneNode(r){const t=r.cloneNode(!0);return"_value"in r&&(t._value=r._value),t},insertStaticContent(r,t,n,i,e,a){const o=n?n.previousSibling:t.lastChild;if(e&&(e===a||e.nextSibling))for(;t.insertBefore(e.cloneNode(!0),n),!(e===a||!(e=e.nextSibling)););else{Ed.innerHTML=i?`<svg>${r}</svg>`:r;const s=Ed.content;if(i){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function OC(r,t,n){const i=r._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?r.removeAttribute("class"):n?r.setAttribute("class",t):r.className=t}function AC(r,t,n){const i=r.style,e=St(n);if(n&&!e){for(const a in n)Tf(i,a,n[a]);if(t&&!St(t))for(const a in t)n[a]==null&&Tf(i,a,"")}else{const a=i.display;e?t!==n&&(i.cssText=n):t&&r.removeAttribute("style"),"_vod"in r&&(i.display=a)}}const Od=/\s*!important$/;function Tf(r,t,n){if(Ie(n))n.forEach(i=>Tf(r,t,i));else if(t.startsWith("--"))r.setProperty(t,n);else{const i=RC(r,t);Od.test(n)?r.setProperty(fa(i),n.replace(Od,""),"important"):r[i]=n}}const Ad=["Webkit","Moz","ms"],ru={};function RC(r,t){const n=ru[t];if(n)return n;let i=Tn(t);if(i!=="filter"&&i in r)return ru[t]=i;i=Tl(i);for(let e=0;e<Ad.length;e++){const a=Ad[e]+i;if(a in r)return ru[t]=a}return t}const Rd="http://www.w3.org/1999/xlink";function IC(r,t,n,i,e){if(i&&t.startsWith("xlink:"))n==null?r.removeAttributeNS(Rd,t.slice(6,t.length)):r.setAttributeNS(Rd,t,n);else{const a=Tx(t);n==null||a&&!cm(n)?r.removeAttribute(t):r.setAttribute(t,a?"":n)}}function kC(r,t,n,i,e,a,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,e,a),r[t]=n==null?"":n;return}if(t==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=n;const s=n==null?"":n;(r.value!==s||r.tagName==="OPTION")&&(r.value=s),n==null&&r.removeAttribute(t);return}if(n===""||n==null){const s=typeof r[t];if(s==="boolean"){r[t]=cm(n);return}else if(n==null&&s==="string"){r[t]="",r.removeAttribute(t);return}else if(s==="number"){try{r[t]=0}catch{}r.removeAttribute(t);return}}try{r[t]=n}catch{}}let Js=Date.now,o_=!1;if(typeof window!="undefined"){Js()>document.createEvent("Event").timeStamp&&(Js=()=>performance.now());const r=navigator.userAgent.match(/firefox\/(\d+)/i);o_=!!(r&&Number(r[1])<=53)}let Sf=0;const DC=Promise.resolve(),LC=()=>{Sf=0},jC=()=>Sf||(DC.then(LC),Sf=Js());function NC(r,t,n,i){r.addEventListener(t,n,i)}function zC(r,t,n,i){r.removeEventListener(t,n,i)}function FC(r,t,n,i,e=null){const a=r._vei||(r._vei={}),o=a[t];if(i&&o)o.value=i;else{const[s,l]=HC(t);if(i){const u=a[t]=BC(i,e);NC(r,s,u,l)}else o&&(zC(r,s,o,l),a[t]=void 0)}}const Id=/(?:Once|Passive|Capture)$/;function HC(r){let t;if(Id.test(r)){t={};let n;for(;n=r.match(Id);)r=r.slice(0,r.length-n[0].length),t[n[0].toLowerCase()]=!0}return[fa(r.slice(2)),t]}function BC(r,t){const n=i=>{const e=i.timeStamp||Js();(o_||e>=n.attached-1)&&vn($C(i,n.value),t,5,[i])};return n.value=r,n.attached=jC(),n}function $C(r,t){if(Ie(t)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},t.map(i=>e=>!e._stopped&&i&&i(e))}else return t}const kd=/^on[a-z]/,WC=(r,t,n,i,e=!1,a,o,s,l)=>{t==="class"?OC(r,i,e):t==="style"?AC(r,n,i):wl(t)?wh(t)||FC(r,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):GC(r,t,i,e))?kC(r,t,i,a,o,s,l):(t==="true-value"?r._trueValue=i:t==="false-value"&&(r._falseValue=i),IC(r,t,i,e))};function GC(r,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in r&&kd.test(t)&&Le(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||kd.test(t)&&St(n)?!1:t in r}const gr="transition",Ea="animation",ga=(r,{slots:t})=>Pf($m,l_(r),t);ga.displayName="Transition";const s_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},VC=ga.props=yt({},$m.props,s_),Wr=(r,t=[])=>{Ie(r)?r.forEach(n=>n(...t)):r&&r(...t)},Dd=r=>r?Ie(r)?r.some(t=>t.length>1):r.length>1:!1;function l_(r){const t={};for(const M in r)M in s_||(t[M]=r[M]);if(r.css===!1)return t;const{name:n="v",type:i,duration:e,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:f=s,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:c=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=r,v=ZC(e),g=v&&v[0],m=v&&v[1],{onBeforeEnter:p,onEnter:_,onEnterCancelled:b,onLeave:x,onLeaveCancelled:C,onBeforeAppear:y=p,onAppear:w=_,onAppearCancelled:P=b}=t,T=(M,D,R)=>{Yr(M,D?f:s),Yr(M,D?u:o),R&&R()},L=(M,D)=>{Yr(M,d),Yr(M,c),D&&D()},j=M=>(D,R)=>{const I=M?w:_,z=()=>T(D,M,R);Wr(I,[D,z]),Ld(()=>{Yr(D,M?l:a),qn(D,M?f:s),Dd(I)||jd(D,i,g,z)})};return yt(t,{onBeforeEnter(M){Wr(p,[M]),qn(M,a),qn(M,o)},onBeforeAppear(M){Wr(y,[M]),qn(M,l),qn(M,u)},onEnter:j(!1),onAppear:j(!0),onLeave(M,D){const R=()=>L(M,D);qn(M,h),f_(),qn(M,c),Ld(()=>{Yr(M,h),qn(M,d),Dd(x)||jd(M,i,m,R)}),Wr(x,[M,R])},onEnterCancelled(M){T(M,!1),Wr(b,[M])},onAppearCancelled(M){T(M,!0),Wr(P,[M])},onLeaveCancelled(M){L(M),Wr(C,[M])}})}function ZC(r){if(r==null)return null;if(Mt(r))return[iu(r.enter),iu(r.leave)];{const t=iu(r);return[t,t]}}function iu(r){return vm(r)}function qn(r,t){t.split(/\s+/).forEach(n=>n&&r.classList.add(n)),(r._vtc||(r._vtc=new Set)).add(t)}function Yr(r,t){t.split(/\s+/).forEach(i=>i&&r.classList.remove(i));const{_vtc:n}=r;n&&(n.delete(t),n.size||(r._vtc=void 0))}function Ld(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let UC=0;function jd(r,t,n,i){const e=r._endId=++UC,a=()=>{e===r._endId&&i()};if(n)return setTimeout(a,n);const{type:o,timeout:s,propCount:l}=u_(r,t);if(!o)return i();const u=o+"end";let f=0;const h=()=>{r.removeEventListener(u,c),a()},c=d=>{d.target===r&&++f>=l&&h()};setTimeout(()=>{f<l&&h()},s+1),r.addEventListener(u,c)}function u_(r,t){const n=window.getComputedStyle(r),i=v=>(n[v]||"").split(", "),e=i(gr+"Delay"),a=i(gr+"Duration"),o=Nd(e,a),s=i(Ea+"Delay"),l=i(Ea+"Duration"),u=Nd(s,l);let f=null,h=0,c=0;t===gr?o>0&&(f=gr,h=o,c=a.length):t===Ea?u>0&&(f=Ea,h=u,c=l.length):(h=Math.max(o,u),f=h>0?o>u?gr:Ea:null,c=f?f===gr?a.length:l.length:0);const d=f===gr&&/\b(transform|all)(,|$)/.test(n[gr+"Property"]);return{type:f,timeout:h,propCount:c,hasTransform:d}}function Nd(r,t){for(;r.length<t.length;)r=r.concat(r);return Math.max(...t.map((n,i)=>zd(n)+zd(r[i])))}function zd(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function f_(){return document.body.offsetHeight}const h_=new WeakMap,c_=new WeakMap,KC={name:"TransitionGroup",props:yt({},VC,{tag:String,moveClass:String}),setup(r,{slots:t}){const n=va(),i=Bm();let e,a;return da(()=>{if(!e.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!QC(e[0].el,n.vnode.el,o))return;e.forEach(qC),e.forEach(XC);const s=e.filter(JC);f_(),s.forEach(l=>{const u=l.el,f=u.style;qn(u,o),f.transform=f.webkitTransform=f.transitionDuration="";const h=u._moveCb=c=>{c&&c.target!==u||(!c||/transform$/.test(c.propertyName))&&(u.removeEventListener("transitionend",h),u._moveCb=null,Yr(u,o))};u.addEventListener("transitionend",h)})}),()=>{const o=ze(r),s=l_(o);let l=o.tag||Ze;e=a,a=t.default?Nh(t.default()):[];for(let u=0;u<a.length;u++){const f=a[u];f.key!=null&&Co(f,wo(f,s,i,n))}if(e)for(let u=0;u<e.length;u++){const f=e[u];Co(f,wo(f,s,i,n)),h_.set(f,f.el.getBoundingClientRect())}return E(l,null,a)}}},YC=KC;function qC(r){const t=r.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function XC(r){c_.set(r,r.el.getBoundingClientRect())}function JC(r){const t=h_.get(r),n=c_.get(r),i=t.left-n.left,e=t.top-n.top;if(i||e){const a=r.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${e}px)`,a.transitionDuration="0s",r}}function QC(r,t,n){const i=r.cloneNode();r._vtc&&r._vtc.forEach(o=>{o.split(/\s+/).forEach(s=>s&&i.classList.remove(s))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const e=t.nodeType===1?t:t.parentNode;e.appendChild(i);const{hasTransform:a}=u_(i);return e.removeChild(i),a}const eP=["ctrl","shift","alt","meta"],tP={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,t)=>eP.some(n=>r[`${n}Key`]&&!t.includes(n))},Fd=(r,t)=>(n,...i)=>{for(let e=0;e<t.length;e++){const a=tP[t[e]];if(a&&a(n,t))return}return r(n,...i)},Vh={beforeMount(r,{value:t},{transition:n}){r._vod=r.style.display==="none"?"":r.style.display,n&&t?n.beforeEnter(r):Oa(r,t)},mounted(r,{value:t},{transition:n}){n&&t&&n.enter(r)},updated(r,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(r),Oa(r,!0),i.enter(r)):i.leave(r,()=>{Oa(r,!1)}):Oa(r,t))},beforeUnmount(r,{value:t}){Oa(r,t)}};function Oa(r,t){r.style.display=t?r._vod:"none"}const nP=yt({patchProp:WC},EC);let Hd;function d_(){return Hd||(Hd=tC(nP))}const Bd=(...r)=>{d_().render(...r)},rP=(...r)=>{const t=d_().createApp(...r),{mount:n}=t;return t.mount=i=>{const e=iP(i);if(!e)return;const a=t._component;!Le(a)&&!a.render&&!a.template&&(a.template=e.innerHTML),e.innerHTML="";const o=n(e,!1,e instanceof SVGElement);return e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),o},t};function iP(r){return St(r)?document.querySelector(r):r}function ue(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function $d(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,i)}return n}function _e(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$d(Object(n),!0).forEach(function(i){ue(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):$d(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function V(){return V=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},V.apply(this,arguments)}function ft(r){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(r)}var aP=function(t){return typeof t=="function"},oP=Array.isArray,sP=function(t){return typeof t=="string"},lP=function(t){return t!==null&&ft(t)==="object"},uP=/^on[^a-z]/,fP=function(t){return uP.test(t)},v_=function(t){var n=Object.create(null);return function(i){var e=n[i];return e||(n[i]=t(i))}},hP=/-(\w)/g,Zh=v_(function(r){return r.replace(hP,function(t,n){return n?n.toUpperCase():""})}),cP=/\B([A-Z])/g,dP=v_(function(r){return r.replace(cP,"-$1").toLowerCase()}),vP=Object.prototype.hasOwnProperty,Wd=function(t,n){return vP.call(t,n)};function gP(r,t,n,i){var e=r[n];if(e!=null){var a=Wd(e,"default");if(a&&i===void 0){var o=e.default;i=e.type!==Function&&aP(o)?o():o}e.type===Boolean&&(!Wd(t,n)&&!a?i=!1:i===""&&(i=!0))}return i}function Aa(r){return typeof r=="number"?"".concat(r,"px"):r}function Xa(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return typeof r=="function"?r(t):r!=null?r:n}function qe(){for(var r=[],t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];if(!!n){if(sP(n))r.push(n);else if(oP(n))for(var i=0;i<n.length;i++){var e=qe(n[i]);e&&r.push(e)}else if(lP(n))for(var a in n)n[a]&&r.push(a)}}return r.join(" ")}var g_=function(){if(typeof Map!="undefined")return Map;function r(t,n){var i=-1;return t.some(function(e,a){return e[0]===n?(i=a,!0):!1}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var i=r(this.__entries__,n),e=this.__entries__[i];return e&&e[1]},t.prototype.set=function(n,i){var e=r(this.__entries__,n);~e?this.__entries__[e][1]=i:this.__entries__.push([n,i])},t.prototype.delete=function(n){var i=this.__entries__,e=r(i,n);~e&&i.splice(e,1)},t.prototype.has=function(n){return!!~r(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var e=0,a=this.__entries__;e<a.length;e++){var o=a[e];n.call(i,o[1],o[0])}},t}()}(),Mf=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Qs=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),pP=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Qs):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),mP=2;function _P(r,t){var n=!1,i=!1,e=0;function a(){n&&(n=!1,r()),i&&s()}function o(){pP(a)}function s(){var l=Date.now();if(n){if(l-e<mP)return;i=!0}else n=!0,i=!1,setTimeout(o,t);e=l}return s}var yP=20,bP=["top","right","bottom","left","width","height","size","weight"],xP=typeof MutationObserver!="undefined",wP=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=_P(this.refresh.bind(this),yP)}return r.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},r.prototype.removeObserver=function(t){var n=this.observers_,i=n.indexOf(t);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},r.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},r.prototype.connect_=function(){!Mf||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),xP?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!Mf||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(t){var n=t.propertyName,i=n===void 0?"":n,e=bP.some(function(a){return!!~i.indexOf(a)});e&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),p_=function(r,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var e=i[n];Object.defineProperty(r,e,{value:t[e],enumerable:!1,writable:!1,configurable:!0})}return r},ta=function(r){var t=r&&r.ownerDocument&&r.ownerDocument.defaultView;return t||Qs},m_=kl(0,0,0,0);function el(r){return parseFloat(r)||0}function Gd(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(i,e){var a=r["border-"+e+"-width"];return i+el(a)},0)}function CP(r){for(var t=["top","right","bottom","left"],n={},i=0,e=t;i<e.length;i++){var a=e[i],o=r["padding-"+a];n[a]=el(o)}return n}function PP(r){var t=r.getBBox();return kl(0,0,t.width,t.height)}function TP(r){var t=r.clientWidth,n=r.clientHeight;if(!t&&!n)return m_;var i=ta(r).getComputedStyle(r),e=CP(i),a=e.left+e.right,o=e.top+e.bottom,s=el(i.width),l=el(i.height);if(i.boxSizing==="border-box"&&(Math.round(s+a)!==t&&(s-=Gd(i,"left","right")+a),Math.round(l+o)!==n&&(l-=Gd(i,"top","bottom")+o)),!MP(r)){var u=Math.round(s+a)-t,f=Math.round(l+o)-n;Math.abs(u)!==1&&(s-=u),Math.abs(f)!==1&&(l-=f)}return kl(e.left,e.top,s,l)}var SP=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof ta(r).SVGGraphicsElement}:function(r){return r instanceof ta(r).SVGElement&&typeof r.getBBox=="function"}}();function MP(r){return r===ta(r).document.documentElement}function EP(r){return Mf?SP(r)?PP(r):TP(r):m_}function OP(r){var t=r.x,n=r.y,i=r.width,e=r.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return p_(o,{x:t,y:n,width:i,height:e,top:n,right:t+i,bottom:e+n,left:t}),o}function kl(r,t,n,i){return{x:r,y:t,width:n,height:i}}var AP=function(){function r(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=kl(0,0,0,0),this.target=t}return r.prototype.isActive=function(){var t=EP(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},r}(),RP=function(){function r(t,n){var i=OP(n);p_(this,{target:t,contentRect:i})}return r}(),IP=function(){function r(t,n,i){if(this.activeObservations_=[],this.observations_=new g_,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=i}return r.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof ta(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new AP(t)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof ta(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},r.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new RP(i.target,i.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),__=typeof WeakMap!="undefined"?new WeakMap:new g_,y_=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=wP.getInstance(),i=new IP(t,n,this);__.set(this,i)}return r}();["observe","unobserve","disconnect"].forEach(function(r){y_.prototype[r]=function(){var t;return(t=__.get(this))[r].apply(t,arguments)}});var b_=function(){return typeof Qs.ResizeObserver!="undefined"?Qs.ResizeObserver:y_}();function kP(r){if(Array.isArray(r))return r}function DP(r,t){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i=[],e=!0,a=!1,o,s;try{for(n=n.call(r);!(e=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));e=!0);}catch(l){a=!0,s=l}finally{try{!e&&n.return!=null&&n.return()}finally{if(a)throw s}}return i}}function Ef(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=r[n];return i}function x_(r,t){if(!!r){if(typeof r=="string")return Ef(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ef(r,t)}}function LP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ve(r,t){return kP(r)||DP(r,t)||x_(r,t)||LP()}function jP(r){if(Array.isArray(r))return Ef(r)}function NP(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function zP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bt(r){return jP(r)||NP(r)||x_(r)||zP()}var FP=typeof global=="object"&&global&&global.Object===Object&&global,w_=FP,HP=typeof self=="object"&&self&&self.Object===Object&&self,BP=w_||HP||Function("return this")(),sr=BP,$P=sr.Symbol,Fn=$P,C_=Object.prototype,WP=C_.hasOwnProperty,GP=C_.toString,Ra=Fn?Fn.toStringTag:void 0;function VP(r){var t=WP.call(r,Ra),n=r[Ra];try{r[Ra]=void 0;var i=!0}catch{}var e=GP.call(r);return i&&(t?r[Ra]=n:delete r[Ra]),e}var ZP=Object.prototype,UP=ZP.toString;function KP(r){return UP.call(r)}var YP="[object Null]",qP="[object Undefined]",Vd=Fn?Fn.toStringTag:void 0;function pa(r){return r==null?r===void 0?qP:YP:Vd&&Vd in Object(r)?VP(r):KP(r)}function XP(r,t){return function(n){return r(t(n))}}function na(r){return r!=null&&typeof r=="object"}var JP=function(t){return t!=null&&t!==""},Of=JP,QP=function(t,n){var i=V({},t);return Object.keys(n).forEach(function(e){var a=i[e];if(a)a.type||a.default?a.default=n[e]:a.def?a.def(n[e]):i[e]={type:a,default:n[e]};else throw new Error("not have ".concat(e," prop"))}),i},zo=QP,e1=function(t){for(var n=Object.keys(t),i={},e={},a={},o=0,s=n.length;o<s;o++){var l=n[o];fP(l)?(i[l[2].toLowerCase()+l.slice(3)]=t[l],e[l]=t[l]):a[l]=t[l]}return{onEvents:e,events:i,extraAttrs:a}},t1=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i={},e=/;(?![^(]*\))/g,a=/:(.+)/;return ft(t)==="object"?t:(t.split(e).forEach(function(o){if(o){var s=o.split(a);if(s.length>1){var l=n?Zh(s[0].trim()):s[0].trim();i[l]=s[1].trim()}}}),i)},n1=function(t,n){return t[n]!==void 0},pn=function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=Array.isArray(t)?t:[t],e=[];return i.forEach(function(a){Array.isArray(a)?e.push.apply(e,Bt(r(a,n))):a&&a.type===Ze?e.push.apply(e,Bt(r(a.children,n))):a&&nr(a)?n&&!P_(a)?e.push(a):n||e.push(a):Of(a)&&e.push(a)}),e},r1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(nr(t))return t.type===Ze?n==="default"?pn(t.children):[]:t.children&&t.children[n]?pn(t.children[n](i)):[];var e=t.$slots[n]&&t.$slots[n](i);return pn(e)},To=function(t){for(var n,i=((n=t==null?void 0:t.vnode)===null||n===void 0?void 0:n.el)||t&&(t.$el||t);i&&!i.tagName;)i=i.nextSibling;return i},i1=function(t){var n={};if(t.$&&t.$.vnode){var i=t.$.vnode.props||{};Object.keys(t.$props).forEach(function(s){var l=t.$props[s],u=dP(s);(l!==void 0||u in i)&&(n[s]=l)})}else if(nr(t)&&ft(t.type)==="object"){var e=t.props||{},a={};Object.keys(e).forEach(function(s){a[Zh(s)]=e[s]});var o=t.type.props||{};Object.keys(o).forEach(function(s){var l=gP(o,a,s,a[s]);(l!==void 0||s in a)&&(n[s]=l)})}return n},a1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=void 0;if(t.$){var o=t[n];if(o!==void 0)return typeof o=="function"&&e?o(i):o;a=t.$slots[n],a=e&&a?a(i):a}else if(nr(t)){var s=t.props&&t.props[n];if(s!==void 0&&t.props!==null)return typeof s=="function"&&e?s(i):s;t.type===Ze?a=t.children:t.children&&t.children[n]&&(a=t.children[n],a=e&&a?a(i):a)}return Array.isArray(a)&&(a=pn(a),a=a.length===1?a[0]:a,a=a.length===0?void 0:a),a};function Zd(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n={};return r.$?n=V(V({},n),r.$attrs):n=V(V({},n),r.props),e1(n)[t?"onEvents":"events"]}function o1(r,t){var n=(nr(r)?r.props:r.$attrs)||{},i=n.style||{};if(typeof i=="string")i=t1(i,t);else if(t&&i){var e={};return Object.keys(i).forEach(function(a){return e[Zh(a)]=i[a]}),e}return i}function P_(r){return r&&(r.type===zn||r.type===Ze&&r.children.length===0||r.type===No&&r.children.trim()==="")}function ra(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return r.forEach(function(n){Array.isArray(n)?t.push.apply(t,Bt(n)):n.type===Ze?t.push.apply(t,Bt(n.children)):t.push(n)}),t.filter(function(n){return!P_(n)})}function Dl(r){return Array.isArray(r)&&r.length===1&&(r=r[0]),r&&r.__v_isVNode&&ft(r.type)!=="symbol"}function li(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"default",i,e;return(i=t[n])!==null&&i!==void 0?i:(e=r[n])===null||e===void 0?void 0:e.call(r)}var So=Se({name:"ResizeObserver",props:{disabled:Boolean,onResize:Function},emits:["resize"],setup:function(t,n){var i=n.slots,e=Mn({width:0,height:0,offsetHeight:0,offsetWidth:0}),a=null,o=null,s=function(){o&&(o.disconnect(),o=null)},l=function(c){var d=t.onResize,v=c[0].target,g=v.getBoundingClientRect(),m=g.width,p=g.height,_=v.offsetWidth,b=v.offsetHeight,x=Math.floor(m),C=Math.floor(p);if(e.width!==x||e.height!==C||e.offsetWidth!==_||e.offsetHeight!==b){var y={width:x,height:C,offsetWidth:_,offsetHeight:b};V(e,y),d&&Promise.resolve().then(function(){d(V(V({},y),{offsetWidth:_,offsetHeight:b}),v)})}},u=va(),f=function(){var c=t.disabled;if(c){s();return}var d=To(u),v=d!==a;v&&(s(),a=d),!o&&d&&(o=new b_(l),o.observe(d))};return bt(function(){f()}),da(function(){f()}),vi(function(){s()}),ke(function(){return t.disabled},function(){f()},{flush:"post"}),function(){var h;return(h=i.default)===null||h===void 0?void 0:h.call(i)[0]}}}),T_=function(t){return+setTimeout(t,16)},S_=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(T_=function(t){return window.requestAnimationFrame(t)},S_=function(t){return window.cancelAnimationFrame(t)});var Ud=0,Uh=new Map;function M_(r){Uh.delete(r)}function vt(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Ud+=1;var n=Ud;function i(e){if(e===0)M_(n),r();else{var a=T_(function(){i(e-1)});Uh.set(n,a)}}return i(t),n}vt.cancel=function(r){var t=Uh.get(r);return M_(t),S_(t)};var E_=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n},Ll=function(t){var n=t;return n.install=function(i){i.component(n.displayName||n.name,t)},t},O_=!1;try{var Kd=Object.defineProperty({},"passive",{get:function(){O_=!0}});window.addEventListener("testPassive",null,Kd),window.removeEventListener("testPassive",null,Kd)}catch{}var Ni=O_;function Ja(r,t,n,i){if(r&&r.addEventListener){var e=i;e===void 0&&Ni&&(t==="touchstart"||t==="touchmove"||t==="wheel")&&(e={passive:!1}),r.addEventListener(t,n,e)}return{remove:function(){r&&r.removeEventListener&&r.removeEventListener(t,n)}}}var s1={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},l1={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},u1=l1,f1={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},A_=f1,h1={lang:V({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},u1),timePickerLocale:V({},A_)},Yd=h1,Kt="${label} is not a valid ${type}",c1={locale:"en",Pagination:s1,DatePicker:Yd,TimePicker:A_,Calendar:Yd,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Kt,method:Kt,array:Kt,object:Kt,number:Kt,date:Kt,boolean:Kt,integer:Kt,float:Kt,regexp:Kt,email:Kt,url:Kt,hex:Kt},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},Af=c1,R_=Se({name:"LocaleReceiver",props:{componentName:String,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup:function(t,n){var i=n.slots,e=_t("localeData",{}),a=q(function(){var s=t.componentName,l=s===void 0?"global":s,u=t.defaultLocale,f=u||Af[l||"global"],h=e.antLocale,c=l&&h?h[l]:{};return V(V({},typeof f=="function"?f():f),c||{})}),o=q(function(){var s=e.antLocale,l=s&&s.locale;return s&&s.exist&&!l?Af.locale:l});return function(){var s=t.children||i.default,l=e.antLocale;return s==null?void 0:s(a.value,o.value,l)}}}),I_=function(){var t=Dt("empty",{}),n=t.getPrefixCls,i=n("empty-img-default");return E("svg",{class:i,width:"184",height:"152",viewBox:"0 0 184 152"},[E("g",{fill:"none","fill-rule":"evenodd"},[E("g",{transform:"translate(24 31.67)"},[E("ellipse",{class:"".concat(i,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),E("path",{class:"".concat(i,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},null),E("path",{class:"".concat(i,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"},null),E("path",{class:"".concat(i,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},null),E("path",{class:"".concat(i,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},null)]),E("path",{class:"".concat(i,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},null),E("g",{class:"".concat(i,"-g"),transform:"translate(149.65 15.383)"},[E("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),E("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])};I_.PRESENTED_IMAGE_DEFAULT=!0;var d1=I_,k_=function(){var t=Dt("empty",{}),n=t.getPrefixCls,i=n("empty-img-simple");return E("svg",{class:i,width:"64",height:"41",viewBox:"0 0 64 41"},[E("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[E("ellipse",{class:"".concat(i,"-ellipse"),fill:"#F5F5F5",cx:"32",cy:"33",rx:"32",ry:"7"},null),E("g",{class:"".concat(i,"-g"),"fill-rule":"nonzero",stroke:"#D9D9D9"},[E("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),E("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:"#FAFAFA",class:"".concat(i,"-path")},null)])])])};k_.PRESENTED_IMAGE_SIMPLE=!0;var v1=k_;function qd(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function D_(r,t,n){return t&&qd(r.prototype,t),n&&qd(r,n),r}function Ds(){return(Ds=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r}).apply(this,arguments)}function L_(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}function j_(r,t){if(r==null)return{};var n,i,e={},a=Object.keys(r);for(i=0;i<a.length;i++)t.indexOf(n=a[i])>=0||(e[n]=r[n]);return e}function Xd(r){return((t=r)!=null&&typeof t=="object"&&Array.isArray(t)===!1)==1&&Object.prototype.toString.call(r)==="[object Object]";var t}var N_=Object.prototype,z_=N_.toString,g1=N_.hasOwnProperty,F_=/^\s*function (\w+)/;function Jd(r){var t,n=(t=r==null?void 0:r.type)!==null&&t!==void 0?t:r;if(n){var i=n.toString().match(F_);return i?i[1]:""}return""}var ui=function(r){var t,n;return Xd(r)!==!1&&typeof(t=r.constructor)=="function"&&Xd(n=t.prototype)!==!1&&n.hasOwnProperty("isPrototypeOf")!==!1},p1=function(r){return r},Nt=p1,Mo=function(r,t){return g1.call(r,t)},m1=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r},ia=Array.isArray||function(r){return z_.call(r)==="[object Array]"},aa=function(r){return z_.call(r)==="[object Function]"},tl=function(r){return ui(r)&&Mo(r,"_vueTypes_name")},H_=function(r){return ui(r)&&(Mo(r,"type")||["_vueTypes_name","validator","default","required"].some(function(t){return Mo(r,t)}))};function Kh(r,t){return Object.defineProperty(r.bind(t),"__original",{value:r})}function gi(r,t,n){var i;n===void 0&&(n=!1);var e=!0,a="";i=ui(r)?r:{type:r};var o=tl(i)?i._vueTypes_name+" - ":"";if(H_(i)&&i.type!==null){if(i.type===void 0||i.type===!0||!i.required&&t===void 0)return e;ia(i.type)?(e=i.type.some(function(h){return gi(h,t,!0)===!0}),a=i.type.map(function(h){return Jd(h)}).join(" or ")):e=(a=Jd(i))==="Array"?ia(t):a==="Object"?ui(t):a==="String"||a==="Number"||a==="Boolean"||a==="Function"?function(h){if(h==null)return"";var c=h.constructor.toString().match(F_);return c?c[1]:""}(t)===a:t instanceof i.type}if(!e){var s=o+'value "'+t+'" should be of type "'+a+'"';return n===!1?(Nt(s),!1):s}if(Mo(i,"validator")&&aa(i.validator)){var l=Nt,u=[];if(Nt=function(h){u.push(h)},e=i.validator(t),Nt=l,!e){var f=(u.length>1?"* ":"")+u.join(`
* `);return u.length=0,n===!1?(Nt(f),e):f}}return e}function tn(r,t){var n=Object.defineProperties(t,{_vueTypes_name:{value:r,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(e){return e!==void 0||this.default?aa(e)||gi(this,e,!0)===!0?(this.default=ia(e)?function(){return[].concat(e)}:ui(e)?function(){return Object.assign({},e)}:e,this):(Nt(this._vueTypes_name+' - invalid default value: "'+e+'"'),this):this}}}),i=n.validator;return aa(i)&&(n.validator=Kh(i,n)),n}function Hn(r,t){var n=tn(r,t);return Object.defineProperty(n,"validate",{value:function(i){return aa(this.validator)&&Nt(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=Kh(i,this),this}})}function Qd(r,t,n){var i,e,a=(i=t,e={},Object.getOwnPropertyNames(i).forEach(function(h){e[h]=Object.getOwnPropertyDescriptor(i,h)}),Object.defineProperties({},e));if(a._vueTypes_name=r,!ui(n))return a;var o,s,l=n.validator,u=j_(n,["validator"]);if(aa(l)){var f=a.validator;f&&(f=(s=(o=f).__original)!==null&&s!==void 0?s:o),a.validator=Kh(f?function(h){return f.call(this,h)&&l.call(this,h)}:l,a)}return Object.assign(a,u)}function jl(r){return r.replace(/^(?!\s*$)/gm,"  ")}var _1=function(){return Hn("any",{})},y1=function(){return Hn("function",{type:Function})},b1=function(){return Hn("boolean",{type:Boolean})},x1=function(){return Hn("string",{type:String})},w1=function(){return Hn("number",{type:Number})},C1=function(){return Hn("array",{type:Array})},P1=function(){return Hn("object",{type:Object})},T1=function(){return tn("integer",{type:Number,validator:function(r){return m1(r)}})},S1=function(){return tn("symbol",{validator:function(r){return typeof r=="symbol"}})};function M1(r,t){if(t===void 0&&(t="custom validation failed"),typeof r!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return tn(r.name||"<<anonymous function>>",{validator:function(n){var i=r(n);return i||Nt(this._vueTypes_name+" - "+t),i}})}function E1(r){if(!ia(r))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var t='oneOf - value should be one of "'+r.join('", "')+'".',n=r.reduce(function(i,e){if(e!=null){var a=e.constructor;i.indexOf(a)===-1&&i.push(a)}return i},[]);return tn("oneOf",{type:n.length>0?n:void 0,validator:function(i){var e=r.indexOf(i)!==-1;return e||Nt(t),e}})}function O1(r){if(!ia(r))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var t=!1,n=[],i=0;i<r.length;i+=1){var e=r[i];if(H_(e)){if(tl(e)&&e._vueTypes_name==="oneOf"){n=n.concat(e.type);continue}if(aa(e.validator)&&(t=!0),e.type!==!0&&e.type){n=n.concat(e.type);continue}}n.push(e)}return n=n.filter(function(a,o){return n.indexOf(a)===o}),tn("oneOfType",t?{type:n,validator:function(a){var o=[],s=r.some(function(l){var u=gi(tl(l)&&l._vueTypes_name==="oneOf"?l.type||null:l,a,!0);return typeof u=="string"&&o.push(u),u===!0});return s||Nt("oneOfType - provided value does not match any of the "+o.length+` passed-in validators:
`+jl(o.join(`
`))),s}}:{type:n})}function A1(r){return tn("arrayOf",{type:Array,validator:function(t){var n,i=t.every(function(e){return(n=gi(r,e,!0))===!0});return i||Nt(`arrayOf - value validation error:
`+jl(n)),i}})}function R1(r){return tn("instanceOf",{type:r})}function I1(r){return tn("objectOf",{type:Object,validator:function(t){var n,i=Object.keys(t).every(function(e){return(n=gi(r,t[e],!0))===!0});return i||Nt(`objectOf - value validation error:
`+jl(n)),i}})}function k1(r){var t=Object.keys(r),n=t.filter(function(e){var a;return!!(!((a=r[e])===null||a===void 0)&&a.required)}),i=tn("shape",{type:Object,validator:function(e){var a=this;if(!ui(e))return!1;var o=Object.keys(e);if(n.length>0&&n.some(function(l){return o.indexOf(l)===-1})){var s=n.filter(function(l){return o.indexOf(l)===-1});return Nt(s.length===1?'shape - required property "'+s[0]+'" is not defined.':'shape - required properties "'+s.join('", "')+'" are not defined.'),!1}return o.every(function(l){if(t.indexOf(l)===-1)return a._vueTypes_isLoose===!0||(Nt('shape - shape definition does not include a "'+l+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var u=gi(r[l],e[l],!0);return typeof u=="string"&&Nt('shape - "'+l+`" property validation error:
 `+jl(u)),u===!0})}});return Object.defineProperty(i,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(i,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),i}var In=function(){function r(){}return r.extend=function(t){var n=this;if(ia(t))return t.forEach(function(h){return n.extend(h)}),this;var i=t.name,e=t.validate,a=e!==void 0&&e,o=t.getter,s=o!==void 0&&o,l=j_(t,["name","validate","getter"]);if(Mo(this,i))throw new TypeError('[VueTypes error]: Type "'+i+'" already defined');var u,f=l.type;return tl(f)?(delete l.type,Object.defineProperty(this,i,s?{get:function(){return Qd(i,f,l)}}:{value:function(){var h,c=Qd(i,f,l);return c.validator&&(c.validator=(h=c.validator).bind.apply(h,[c].concat([].slice.call(arguments)))),c}})):(u=s?{get:function(){var h=Object.assign({},l);return a?Hn(i,h):tn(i,h)},enumerable:!0}:{value:function(){var h,c,d=Object.assign({},l);return h=a?Hn(i,d):tn(i,d),d.validator&&(h.validator=(c=d.validator).bind.apply(c,[h].concat([].slice.call(arguments)))),h},enumerable:!0},Object.defineProperty(this,i,u))},D_(r,null,[{key:"any",get:function(){return _1()}},{key:"func",get:function(){return y1().def(this.defaults.func)}},{key:"bool",get:function(){return b1().def(this.defaults.bool)}},{key:"string",get:function(){return x1().def(this.defaults.string)}},{key:"number",get:function(){return w1().def(this.defaults.number)}},{key:"array",get:function(){return C1().def(this.defaults.array)}},{key:"object",get:function(){return P1().def(this.defaults.object)}},{key:"integer",get:function(){return T1().def(this.defaults.integer)}},{key:"symbol",get:function(){return S1()}}]),r}();function B_(r){var t;return r===void 0&&(r={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(t=function(n){function i(){return n.apply(this,arguments)||this}return L_(i,n),D_(i,null,[{key:"sensibleDefaults",get:function(){return Ds({},this.defaults)},set:function(e){this.defaults=e!==!1?Ds({},e!==!0?e:r):{}}}]),i}(In)).defaults=Ds({},r),t}In.defaults={},In.custom=M1,In.oneOf=E1,In.instanceOf=R1,In.oneOfType=O1,In.arrayOf=A1,In.objectOf=I1,In.shape=k1,In.utils={validate:function(r,t){return gi(t,r,!0)===!0},toType:function(r,t,n){return n===void 0&&(n=!1),n?Hn(r,t):tn(r,t)}};(function(r){function t(){return r.apply(this,arguments)||this}return L_(t,r),t})(B_());var $_=B_({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});$_.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VueNode",getter:!0,type:null}]);var me=$_,D1=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},W_=E(d1,null,null),G_=E(v1,null,null),ma=function(t,n){var i=n.slots,e=i===void 0?{}:i,a=n.attrs,o,s=Dt("empty",t),l=s.direction,u=s.prefixCls,f=u.value,h=V(V({},t),a),c=h.image,d=c===void 0?W_:c,v=h.description,g=v===void 0?((o=e.description)===null||o===void 0?void 0:o.call(e))||void 0:v,m=h.imageStyle,p=h.class,_=p===void 0?"":p,b=D1(h,["image","description","imageStyle","class"]);return E(R_,{componentName:"Empty",children:function(C){var y,w=typeof g!="undefined"?g:C.description,P=typeof w=="string"?w:"empty",T=null;return typeof d=="string"?T=E("img",{alt:P,src:d},null):T=d,E("div",_e({class:qe(f,_,(y={},ue(y,"".concat(f,"-normal"),d===G_),ue(y,"".concat(f,"-rtl"),l.value==="rtl"),y))},b),[E("div",{class:"".concat(f,"-image"),style:m},[T]),w&&E("p",{class:"".concat(f,"-description")},[w]),e.default&&E("div",{class:"".concat(f,"-footer")},[ra(e.default())])])}},null)};ma.displayName="AEmpty";ma.PRESENTED_IMAGE_DEFAULT=W_;ma.PRESENTED_IMAGE_SIMPLE=G_;ma.inheritAttrs=!1;ma.props={prefixCls:String,image:me.any,description:me.any,imageStyle:{type:Object,default:void 0}};var Ia=Ll(ma),L1=function(t){var n=Dt("empty",t),i=n.prefixCls,e=function(o){switch(o){case"Table":case"List":return E(Ia,{image:Ia.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return E(Ia,{image:Ia.PRESENTED_IMAGE_SIMPLE,class:"".concat(i.value,"-small")},null);default:return E(Ia,null,null)}};return e(t.componentName)};function V_(r){return E(L1,{componentName:r},null)}var ev={};function j1(r,t){}function N1(r,t,n){!t&&!ev[n]&&(r(!1,n),ev[n]=!0)}function Z_(r,t){N1(j1,r,t)}var Yh=function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";Z_(r,"[antdv: ".concat(t,"] ").concat(n))},Rf="internalMark",Ls=Se({name:"ALocaleProvider",props:{locale:{type:Object},ANT_MARK__:String},setup:function(t,n){var i=n.slots;Yh(t.ANT_MARK__===Rf,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead");var e=Mn({antLocale:V(V({},t.locale),{exist:!0}),ANT_MARK__:Rf});return Ut("localeData",e),ke(function(){return t.locale},function(){e.antLocale=V(V({},t.locale),{exist:!0})},{immediate:!0}),function(){var a;return(a=i.default)===null||a===void 0?void 0:a.call(i)}}});Ls.install=function(r){return r.component(Ls.name,Ls),r};var z1=Ll(Ls);globalThis&&globalThis.__rest;var U_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=V(t?{name:t,appear:!0,enterFromClass:"".concat(t,"-enter ").concat(t,"-enter-prepare"),enterActiveClass:"".concat(t,"-enter ").concat(t,"-enter-prepare"),enterToClass:"".concat(t,"-enter ").concat(t,"-enter-active"),leaveFromClass:" ".concat(t,"-leave"),leaveActiveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave ").concat(t,"-leave-active")}:{css:!1},n);return i},F1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=V(t?{name:t,appear:!0,appearActiveClass:"".concat(t),appearToClass:"".concat(t,"-appear ").concat(t,"-appear-active"),enterFromClass:"".concat(t,"-appear ").concat(t,"-enter ").concat(t,"-appear-prepare ").concat(t,"-enter-prepare"),enterActiveClass:"".concat(t),enterToClass:"".concat(t,"-enter ").concat(t,"-appear ").concat(t,"-appear-active ").concat(t,"-enter-active"),leaveActiveClass:"".concat(t," ").concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-active")}:{css:!1},n);return i},H1=ga,B1=function(t,n,i){return i!==void 0?i:"".concat(t,"-").concat(n)},K_=H1,$1=Se({name:"Notice",inheritAttrs:!1,props:["prefixCls","duration","updateMark","noticeKey","closeIcon","closable","props","onClick","onClose","holder","visible"],setup:function(t,n){var i=n.attrs,e=n.slots,a,o=q(function(){return t.duration===void 0?1.5:t.duration}),s=function(){o.value&&(a=setTimeout(function(){u()},o.value*1e3))},l=function(){a&&(clearTimeout(a),a=null)},u=function(c){c&&c.stopPropagation(),l();var d=t.onClose,v=t.noticeKey;d&&d(v)},f=function(){l(),s()};return bt(function(){s()}),vi(function(){l()}),ke([o,function(){return t.updateMark},function(){return t.visible}],function(h,c){var d=Ve(h,3),v=d[0],g=d[1],m=d[2],p=Ve(c,3),_=p[0],b=p[1],x=p[2];(v!==_||g!==b||m!==x&&x)&&f()},{flush:"post"}),function(){var h,c,d=t.prefixCls,v=t.closable,g=t.closeIcon,m=g===void 0?(h=e.closeIcon)===null||h===void 0?void 0:h.call(e):g,p=t.onClick,_=t.holder,b=i.class,x=i.style,C="".concat(d,"-notice"),y=Object.keys(i).reduce(function(P,T){return(T.substr(0,5)==="data-"||T.substr(0,5)==="aria-"||T==="role")&&(P[T]=i[T]),P},{}),w=E("div",_e({class:qe(C,b,ue({},"".concat(C,"-closable"),v)),style:x,onMouseenter:l,onMouseleave:s,onClick:p},y),[E("div",{class:"".concat(C,"-content")},[(c=e.default)===null||c===void 0?void 0:c.call(e)]),v?E("a",{tabindex:0,onClick:u,class:"".concat(C,"-close")},[m||E("span",{class:"".concat(C,"-close-x")},null)]):null]);return _?E(Hh,{to:_},{default:function(){return w}}):w}}}),W1=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},tv=0,G1=Date.now();function nv(){var r=tv;return tv+=1,"rcNotification_".concat(G1,"_").concat(r)}var If=Se({name:"Notification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon"],setup:function(t,n){var i=n.attrs,e=n.expose,a=n.slots,o=new Map,s=ee([]),l=q(function(){var h=t.prefixCls,c=t.animation,d=c===void 0?"fade":c,v=t.transitionName;return!v&&d&&(v="".concat(h,"-").concat(d)),F1(v)}),u=function(c,d){var v=c.key||nv(),g=V(V({},c),{key:v}),m=t.maxCount,p=s.value.map(function(b){return b.notice.key}).indexOf(v),_=s.value.concat();p!==-1?_.splice(p,1,{notice:g,holderCallback:d}):(m&&s.value.length>=m&&(g.key=_[0].notice.key,g.updateMark=nv(),g.userPassKey=v,_.shift()),_.push({notice:g,holderCallback:d})),s.value=_},f=function(c){s.value=s.value.filter(function(d){var v=d.notice,g=v.key,m=v.userPassKey,p=m||g;return p!==c})};return e({add:u,remove:f,notices:s}),function(){var h,c,d=t.prefixCls,v=t.closeIcon,g=v===void 0?(c=a.closeIcon)===null||c===void 0?void 0:c.call(a,{prefixCls:d}):v,m=s.value.map(function(_,b){var x=_.notice,C=_.holderCallback,y=b===s.value.length-1?x.updateMark:void 0,w=x.key,P=x.userPassKey,T=x.content,L=V(V(V({prefixCls:d,closeIcon:typeof g=="function"?g({prefixCls:d}):g},x),x.props),{key:w,noticeKey:P||w,updateMark:y,onClose:function(M){var D;f(M),(D=x.onClose)===null||D===void 0||D.call(x)},onClick:x.onClick});return C?E("div",{key:w,class:"".concat(d,"-hook-holder"),ref:function(M){typeof w!="undefined"&&(M?(o.set(w,M),C(M,L)):o.delete(w))}},null):E($1,L,{default:function(){return[typeof T=="function"?T({prefixCls:d}):T]}})}),p=(h={},ue(h,d,1),ue(h,i.class,!!i.class),h);return E("div",{class:p,style:i.style||{top:"65px",left:"50%"}},[E(YC,_e({tag:"div"},l.value),{default:function(){return[m]}})])}}});If.newInstance=function(t,n){var i=t||{},e=i.name,a=e===void 0?"notification":e,o=i.getContainer,s=i.appContext,l=i.prefixCls,u=i.rootPrefixCls,f=i.transitionName,h=i.hasTransitionName,c=W1(i,["name","getContainer","appContext","prefixCls","rootPrefixCls","transitionName","hasTransitionName"]),d=document.createElement("div");if(o){var v=o();v.appendChild(d)}else document.body.appendChild(d);var g=Se({name:"NotificationWrapper",setup:function(_,b){var x=b.attrs,C=ee();return bt(function(){n({notice:function(w){var P;(P=C.value)===null||P===void 0||P.add(w)},removeNotice:function(w){var P;(P=C.value)===null||P===void 0||P.remove(w)},destroy:function(){Bd(null,d),d.parentNode&&d.parentNode.removeChild(d)},component:C})}),function(){var y=cn,w=y.getPrefixCls(a,l),P=y.getRootPrefixCls(u,w),T=h?f:"".concat(P,"-").concat(f);return E(ho,_e(_e({},y),{},{notUpdateGlobalConfig:!0,prefixCls:P}),{default:function(){return[E(If,_e(_e({ref:C},x),{},{prefixCls:w,transitionName:T}),null)]}})}}}),m=E(g,c);m.appContext=s||m.appContext,Bd(m,d)};var Y_=If,V1={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},Z1=V1;function Tt(r,t){U1(r)&&(r="100%");var n=K1(r);return r=t===360?r:Math.min(t,Math.max(0,parseFloat(r))),n&&(r=parseInt(String(r*t),10)/100),Math.abs(r-t)<1e-6?1:(t===360?r=(r<0?r%t+t:r%t)/parseFloat(String(t)):r=r%t/parseFloat(String(t)),r)}function es(r){return Math.min(1,Math.max(0,r))}function U1(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function K1(r){return typeof r=="string"&&r.indexOf("%")!==-1}function q_(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function ts(r){return r<=1?Number(r)*100+"%":r}function ti(r){return r.length===1?"0"+r:String(r)}function Y1(r,t,n){return{r:Tt(r,255)*255,g:Tt(t,255)*255,b:Tt(n,255)*255}}function rv(r,t,n){r=Tt(r,255),t=Tt(t,255),n=Tt(n,255);var i=Math.max(r,t,n),e=Math.min(r,t,n),a=0,o=0,s=(i+e)/2;if(i===e)o=0,a=0;else{var l=i-e;switch(o=s>.5?l/(2-i-e):l/(i+e),i){case r:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-r)/l+2;break;case n:a=(r-t)/l+4;break}a/=6}return{h:a,s:o,l:s}}function au(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(t-r)*(6*n):n<1/2?t:n<2/3?r+(t-r)*(2/3-n)*6:r}function q1(r,t,n){var i,e,a;if(r=Tt(r,360),t=Tt(t,100),n=Tt(n,100),t===0)e=n,a=n,i=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;i=au(s,o,r+1/3),e=au(s,o,r),a=au(s,o,r-1/3)}return{r:i*255,g:e*255,b:a*255}}function kf(r,t,n){r=Tt(r,255),t=Tt(t,255),n=Tt(n,255);var i=Math.max(r,t,n),e=Math.min(r,t,n),a=0,o=i,s=i-e,l=i===0?0:s/i;if(i===e)a=0;else{switch(i){case r:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-r)/s+2;break;case n:a=(r-t)/s+4;break}a/=6}return{h:a,s:l,v:o}}function X1(r,t,n){r=Tt(r,360)*6,t=Tt(t,100),n=Tt(n,100);var i=Math.floor(r),e=r-i,a=n*(1-t),o=n*(1-e*t),s=n*(1-(1-e)*t),l=i%6,u=[n,o,a,a,s,n][l],f=[s,n,n,o,a,a][l],h=[a,a,s,n,n,o][l];return{r:u*255,g:f*255,b:h*255}}function Df(r,t,n,i){var e=[ti(Math.round(r).toString(16)),ti(Math.round(t).toString(16)),ti(Math.round(n).toString(16))];return i&&e[0].startsWith(e[0].charAt(1))&&e[1].startsWith(e[1].charAt(1))&&e[2].startsWith(e[2].charAt(1))?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function J1(r,t,n,i,e){var a=[ti(Math.round(r).toString(16)),ti(Math.round(t).toString(16)),ti(Math.round(n).toString(16)),ti(Q1(i))];return e&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Q1(r){return Math.round(parseFloat(r)*255).toString(16)}function iv(r){return Yt(r)/255}function Yt(r){return parseInt(r,16)}function eT(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var Lf={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ai(r){var t={r:0,g:0,b:0},n=1,i=null,e=null,a=null,o=!1,s=!1;return typeof r=="string"&&(r=rT(r)),typeof r=="object"&&(Zn(r.r)&&Zn(r.g)&&Zn(r.b)?(t=Y1(r.r,r.g,r.b),o=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Zn(r.h)&&Zn(r.s)&&Zn(r.v)?(i=ts(r.s),e=ts(r.v),t=X1(r.h,i,e),o=!0,s="hsv"):Zn(r.h)&&Zn(r.s)&&Zn(r.l)&&(i=ts(r.s),a=ts(r.l),t=q1(r.h,i,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(n=r.a)),n=q_(n),{ok:o,format:r.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var tT="[-\\+]?\\d+%?",nT="[-\\+]?\\d*\\.\\d+%?",Mr="(?:"+nT+")|(?:"+tT+")",ou="[\\s|\\(]+("+Mr+")[,|\\s]+("+Mr+")[,|\\s]+("+Mr+")\\s*\\)?",su="[\\s|\\(]+("+Mr+")[,|\\s]+("+Mr+")[,|\\s]+("+Mr+")[,|\\s]+("+Mr+")\\s*\\)?",bn={CSS_UNIT:new RegExp(Mr),rgb:new RegExp("rgb"+ou),rgba:new RegExp("rgba"+su),hsl:new RegExp("hsl"+ou),hsla:new RegExp("hsla"+su),hsv:new RegExp("hsv"+ou),hsva:new RegExp("hsva"+su),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function rT(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var t=!1;if(Lf[r])r=Lf[r],t=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=bn.rgb.exec(r);return n?{r:n[1],g:n[2],b:n[3]}:(n=bn.rgba.exec(r),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=bn.hsl.exec(r),n?{h:n[1],s:n[2],l:n[3]}:(n=bn.hsla.exec(r),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=bn.hsv.exec(r),n?{h:n[1],s:n[2],v:n[3]}:(n=bn.hsva.exec(r),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=bn.hex8.exec(r),n?{r:Yt(n[1]),g:Yt(n[2]),b:Yt(n[3]),a:iv(n[4]),format:t?"name":"hex8"}:(n=bn.hex6.exec(r),n?{r:Yt(n[1]),g:Yt(n[2]),b:Yt(n[3]),format:t?"name":"hex"}:(n=bn.hex4.exec(r),n?{r:Yt(n[1]+n[1]),g:Yt(n[2]+n[2]),b:Yt(n[3]+n[3]),a:iv(n[4]+n[4]),format:t?"name":"hex8"}:(n=bn.hex3.exec(r),n?{r:Yt(n[1]+n[1]),g:Yt(n[2]+n[2]),b:Yt(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Zn(r){return Boolean(bn.CSS_UNIT.exec(String(r)))}var lu=function(){function r(t,n){t===void 0&&(t=""),n===void 0&&(n={});var i;if(t instanceof r)return t;typeof t=="number"&&(t=eT(t)),this.originalInput=t;var e=Ai(t);this.originalInput=t,this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:e.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=e.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},r.prototype.getLuminance=function(){var t=this.toRgb(),n,i,e,a=t.r/255,o=t.g/255,s=t.b/255;return a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),s<=.03928?e=s/12.92:e=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*i+.0722*e},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(t){return this.a=q_(t),this.roundA=Math.round(100*this.a)/100,this},r.prototype.toHsv=function(){var t=kf(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},r.prototype.toHsvString=function(){var t=kf(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),e=Math.round(t.v*100);return this.a===1?"hsv("+n+", "+i+"%, "+e+"%)":"hsva("+n+", "+i+"%, "+e+"%, "+this.roundA+")"},r.prototype.toHsl=function(){var t=rv(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},r.prototype.toHslString=function(){var t=rv(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),e=Math.round(t.l*100);return this.a===1?"hsl("+n+", "+i+"%, "+e+"%)":"hsla("+n+", "+i+"%, "+e+"%, "+this.roundA+")"},r.prototype.toHex=function(t){return t===void 0&&(t=!1),Df(this.r,this.g,this.b,t)},r.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},r.prototype.toHex8=function(t){return t===void 0&&(t=!1),J1(this.r,this.g,this.b,this.a,t)},r.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb("+t+", "+n+", "+i+")":"rgba("+t+", "+n+", "+i+", "+this.roundA+")"},r.prototype.toPercentageRgb=function(){var t=function(n){return Math.round(Tt(n,255)*100)+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Tt(n,255)*100)};return this.a===1?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+Df(this.r,this.g,this.b,!1),n=0,i=Object.entries(Lf);n<i.length;n++){var e=i[n],a=e[0],o=e[1];if(t===o)return a}return!1},r.prototype.toString=function(t){var n=Boolean(t);t=t!=null?t:this.format;var i=!1,e=this.a<1&&this.a>=0,a=!n&&e&&(t.startsWith("hex")||t==="name");return a?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=es(n.l),new r(n)},r.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new r(n)},r.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=es(n.l),new r(n)},r.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},r.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},r.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=es(n.s),new r(n)},r.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=es(n.s),new r(n)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(t){var n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new r(n)},r.prototype.mix=function(t,n){n===void 0&&(n=50);var i=this.toRgb(),e=new r(t).toRgb(),a=n/100,o={r:(e.r-i.r)*a+i.r,g:(e.g-i.g)*a+i.g,b:(e.b-i.b)*a+i.b,a:(e.a-i.a)*a+i.a};return new r(o)},r.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var i=this.toHsl(),e=360/n,a=[this];for(i.h=(i.h-(e*t>>1)+720)%360;--t;)i.h=(i.h+e)%360,a.push(new r(i));return a},r.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new r(t)},r.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),i=n.h,e=n.s,a=n.v,o=[],s=1/t;t--;)o.push(new r({h:i,s:e,v:a})),a=(a+s)%1;return o},r.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new r({h:(n+72)%360,s:t.s,l:t.l}),new r({h:(n+216)%360,s:t.s,l:t.l})]},r.prototype.onBackground=function(t){var n=this.toRgb(),i=new r(t).toRgb();return new r({r:i.r+(n.r-i.r)*n.a,g:i.g+(n.g-i.g)*n.a,b:i.b+(n.b-i.b)*n.a})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(t){for(var n=this.toHsl(),i=n.h,e=[this],a=360/t,o=1;o<t;o++)e.push(new r({h:(i+o*a)%360,s:n.s,l:n.l}));return e},r.prototype.equals=function(t){return this.toRgbString()===new r(t).toRgbString()},r}(),ns=2,av=.16,iT=.05,aT=.05,oT=.15,X_=5,J_=4,sT=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ov(r){var t=r.r,n=r.g,i=r.b,e=kf(t,n,i);return{h:e.h*360,s:e.s,v:e.v}}function rs(r){var t=r.r,n=r.g,i=r.b;return"#".concat(Df(t,n,i,!1))}function lT(r,t,n){var i=n/100,e={r:(t.r-r.r)*i+r.r,g:(t.g-r.g)*i+r.g,b:(t.b-r.b)*i+r.b};return e}function sv(r,t,n){var i;return Math.round(r.h)>=60&&Math.round(r.h)<=240?i=n?Math.round(r.h)-ns*t:Math.round(r.h)+ns*t:i=n?Math.round(r.h)+ns*t:Math.round(r.h)-ns*t,i<0?i+=360:i>=360&&(i-=360),i}function lv(r,t,n){if(r.h===0&&r.s===0)return r.s;var i;return n?i=r.s-av*t:t===J_?i=r.s+av:i=r.s+iT*t,i>1&&(i=1),n&&t===X_&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2))}function uv(r,t,n){var i;return n?i=r.v+aT*t:i=r.v-oT*t,i>1&&(i=1),Number(i.toFixed(2))}function Eo(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],i=Ai(r),e=X_;e>0;e-=1){var a=ov(i),o=rs(Ai({h:sv(a,e,!0),s:lv(a,e,!0),v:uv(a,e,!0)}));n.push(o)}n.push(rs(i));for(var s=1;s<=J_;s+=1){var l=ov(i),u=rs(Ai({h:sv(l,s),s:lv(l,s),v:uv(l,s)}));n.push(u)}return t.theme==="dark"?sT.map(function(f){var h=f.index,c=f.opacity,d=rs(lT(Ai(t.backgroundColor||"#141414"),Ai(n[h]),c*100));return d}):n}var uu={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Rt={},fu={};Object.keys(uu).forEach(function(r){Rt[r]=Eo(uu[r]),Rt[r].primary=Rt[r][5],fu[r]=Eo(uu[r],{theme:"dark",backgroundColor:"#141414"}),fu[r].primary=fu[r][5]});Rt.red;Rt.volcano;Rt.gold;Rt.orange;Rt.yellow;Rt.lime;Rt.green;Rt.cyan;Rt.blue;Rt.geekblue;Rt.purple;Rt.magenta;Rt.grey;var fv=[],ka=[],uT="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function fT(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}function hT(r,t){if(t=t||{},r===void 0)throw new Error(uT);var n=t.prepend===!0?"prepend":"append",i=t.container!==void 0?t.container:document.querySelector("head"),e=fv.indexOf(i);e===-1&&(e=fv.push(i)-1,ka[e]={});var a;return ka[e]!==void 0&&ka[e][n]!==void 0?a=ka[e][n]:(a=ka[e][n]=fT(),n==="prepend"?i.insertBefore(a,i.childNodes[0]):i.appendChild(a)),r.charCodeAt(0)===65279&&(r=r.substr(1,r.length)),a.styleSheet?a.styleSheet.cssText+=r:a.textContent+=r,a}function hv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){cT(r,e,n[e])})}return r}function cT(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function cv(r){return typeof r=="object"&&typeof r.name=="string"&&typeof r.theme=="string"&&(typeof r.icon=="object"||typeof r.icon=="function")}function jf(r,t,n){return n?Pf(r.tag,hv({key:t},n,r.attrs),(r.children||[]).map(function(i,e){return jf(i,"".concat(t,"-").concat(r.tag,"-").concat(e))})):Pf(r.tag,hv({key:t},r.attrs),(r.children||[]).map(function(i,e){return jf(i,"".concat(t,"-").concat(r.tag,"-").concat(e))}))}function Q_(r){return Eo(r)[0]}function ey(r){return r?Array.isArray(r)?r:[r]:[]}var dT=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,dv=!1,vT=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dT;gn(function(){dv||(typeof window!="undefined"&&window.document&&window.document.documentElement&&hT(t,{prepend:!0}),dv=!0)})},gT=["icon","primaryColor","secondaryColor"];function pT(r,t){if(r==null)return{};var n=mT(r,t),i,e;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(e=0;e<a.length;e++)i=a[e],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,i)||(n[i]=r[i]))}return n}function mT(r,t){if(r==null)return{};var n={},i=Object.keys(r),e,a;for(a=0;a<i.length;a++)e=i[a],!(t.indexOf(e)>=0)&&(n[e]=r[e]);return n}function js(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){_T(r,e,n[e])})}return r}function _T(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var fo={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function yT(r){var t=r.primaryColor,n=r.secondaryColor;fo.primaryColor=t,fo.secondaryColor=n||Q_(t),fo.calculated=!!n}function bT(){return js({},fo)}var _a=function(t,n){var i=js({},t,n.attrs),e=i.icon,a=i.primaryColor,o=i.secondaryColor,s=pT(i,gT),l=fo;if(a&&(l={primaryColor:a,secondaryColor:o||Q_(a)}),vT(),cv(e),!cv(e))return null;var u=e;return u&&typeof u.icon=="function"&&(u=js({},u,{icon:u.icon(l.primaryColor,l.secondaryColor)})),jf(u.icon,"svg-".concat(u.name),js({},s,{"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};_a.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};_a.inheritAttrs=!1;_a.displayName="IconBase";_a.getTwoToneColors=bT;_a.setTwoToneColors=yT;var qh=_a;function xT(r,t){return TT(r)||PT(r,t)||CT(r,t)||wT()}function wT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CT(r,t){if(!!r){if(typeof r=="string")return vv(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vv(r,t)}}function vv(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=r[n];return i}function PT(r,t){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i=[],e=!0,a=!1,o,s;try{for(n=n.call(r);!(e=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));e=!0);}catch(l){a=!0,s=l}finally{try{!e&&n.return!=null&&n.return()}finally{if(a)throw s}}return i}}function TT(r){if(Array.isArray(r))return r}function ty(r){var t=ey(r),n=xT(t,2),i=n[0],e=n[1];return qh.setTwoToneColors({primaryColor:i,secondaryColor:e})}function ST(){var r=qh.getTwoToneColors();return r.calculated?[r.primaryColor,r.secondaryColor]:r.primaryColor}var MT=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function ET(r,t){return IT(r)||RT(r,t)||AT(r,t)||OT()}function OT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AT(r,t){if(!!r){if(typeof r=="string")return gv(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gv(r,t)}}function gv(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=r[n];return i}function RT(r,t){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i=[],e=!0,a=!1,o,s;try{for(n=n.call(r);!(e=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));e=!0);}catch(l){a=!0,s=l}finally{try{!e&&n.return!=null&&n.return()}finally{if(a)throw s}}return i}}function IT(r){if(Array.isArray(r))return r}function pv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){Nf(r,e,n[e])})}return r}function Nf(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function kT(r,t){if(r==null)return{};var n=DT(r,t),i,e;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(e=0;e<a.length;e++)i=a[e],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,i)||(n[i]=r[i]))}return n}function DT(r,t){if(r==null)return{};var n={},i=Object.keys(r),e,a;for(a=0;a<i.length;a++)e=i[a],!(t.indexOf(e)>=0)&&(n[e]=r[e]);return n}ty("#1890ff");var ya=function(t,n){var i,e=pv({},t,n.attrs),a=e.class,o=e.icon,s=e.spin,l=e.rotate,u=e.tabindex,f=e.twoToneColor,h=e.onClick,c=kT(e,MT),d=(i={anticon:!0},Nf(i,"anticon-".concat(o.name),Boolean(o.name)),Nf(i,a,a),i),v=s===""||!!s||o.name==="loading"?"anticon-spin":"",g=u;g===void 0&&h&&(g=-1,c.tabindex=g);var m=l?{msTransform:"rotate(".concat(l,"deg)"),transform:"rotate(".concat(l,"deg)")}:void 0,p=ey(f),_=ET(p,2),b=_[0],x=_[1];return E("span",pv({role:"img","aria-label":o.name},c,{onClick:h,class:d}),[E(qh,{class:v,icon:o,primaryColor:b,secondaryColor:x,style:m},null)])};ya.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:String};ya.displayName="AntdIcon";ya.inheritAttrs=!1;ya.getTwoToneColor=ST;ya.setTwoToneColor=ty;var mn=ya;function mv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){LT(r,e,n[e])})}return r}function LT(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var Xh=function(t,n){var i=mv({},t,n.attrs);return E(mn,mv({},i,{icon:Z1}),null)};Xh.displayName="LoadingOutlined";Xh.inheritAttrs=!1;var zf=Xh,jT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},NT=jT;function _v(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){zT(r,e,n[e])})}return r}function zT(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var Jh=function(t,n){var i=_v({},t,n.attrs);return E(mn,_v({},i,{icon:NT}),null)};Jh.displayName="ExclamationCircleFilled";Jh.inheritAttrs=!1;var FT=Jh,HT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},BT=HT;function yv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){$T(r,e,n[e])})}return r}function $T(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var Qh=function(t,n){var i=yv({},t,n.attrs);return E(mn,yv({},i,{icon:BT}),null)};Qh.displayName="CloseCircleFilled";Qh.inheritAttrs=!1;var WT=Qh,GT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},VT=GT;function bv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){ZT(r,e,n[e])})}return r}function ZT(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var ec=function(t,n){var i=bv({},t,n.attrs);return E(mn,bv({},i,{icon:VT}),null)};ec.displayName="CheckCircleFilled";ec.inheritAttrs=!1;var UT=ec,KT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},YT=KT;function xv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){qT(r,e,n[e])})}return r}function qT(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var tc=function(t,n){var i=xv({},t,n.attrs);return E(mn,xv({},i,{icon:YT}),null)};tc.displayName="InfoCircleFilled";tc.inheritAttrs=!1;var XT=tc,ny=3,ry,zt,JT=1,iy="",ay="move-up",oy=!1,sy=function(){return document.body},ly,uy=!1;function QT(){return JT++}function eS(r){r.top!==void 0&&(ry=r.top,zt=null),r.duration!==void 0&&(ny=r.duration),r.prefixCls!==void 0&&(iy=r.prefixCls),r.getContainer!==void 0&&(sy=r.getContainer,zt=null),r.transitionName!==void 0&&(ay=r.transitionName,zt=null,oy=!0),r.maxCount!==void 0&&(ly=r.maxCount,zt=null),r.rtl!==void 0&&(uy=r.rtl)}function tS(r,t){if(zt){t(zt);return}Y_.newInstance({appContext:r.appContext,prefixCls:r.prefixCls||iy,rootPrefixCls:r.rootPrefixCls,transitionName:ay,hasTransitionName:oy,style:{top:ry},getContainer:sy||r.getPopupContainer,maxCount:ly,name:"message"},function(n){if(zt){t(zt);return}zt=n,t(n)})}var nS={info:XT,success:UT,error:WT,warning:FT,loading:zf};function rS(r){var t=r.duration!==void 0?r.duration:ny,n=r.key||QT(),i=new Promise(function(a){var o=function(){return typeof r.onClose=="function"&&r.onClose(),a(!0)};tS(r,function(s){s.notice({key:n,duration:t,style:r.style||{},class:r.class,content:function(u){var f,h=u.prefixCls,c=nS[r.type],d=c?E(c,null,null):"",v=qe("".concat(h,"-custom-content"),(f={},ue(f,"".concat(h,"-").concat(r.type),r.type),ue(f,"".concat(h,"-rtl"),uy===!0),f));return E("div",{class:v},[typeof r.icon=="function"?r.icon():r.icon||d,E("span",null,[typeof r.content=="function"?r.content():r.content])])},onClose:o,onClick:r.onClick})})}),e=function(){zt&&zt.removeNotice(n)};return e.then=function(a,o){return i.then(a,o)},e.promise=i,e}function iS(r){return Object.prototype.toString.call(r)==="[object Object]"&&!!r.content}var nl={open:rS,config:eS,destroy:function(t){if(zt)if(t){var n=zt,i=n.removeNotice;i(t)}else{var e=zt,a=e.destroy;a(),zt=null}}};function aS(r,t){r[t]=function(n,i,e){return iS(n)?r.open(V(V({},n),{type:t})):(typeof i=="function"&&(e=i,i=void 0),r.open({content:n,duration:i,type:t,onClose:e}))}}["success","info","warning","error","loading"].forEach(function(r){return aS(nl,r)});nl.warn=nl.warning;var oS=nl,Ns=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},fy={exports:{}};(function(r){var t=function(n){var i=Object.prototype,e=i.hasOwnProperty,a,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function f(O,A,$){return Object.defineProperty(O,A,{value:$,enumerable:!0,configurable:!0,writable:!0}),O[A]}try{f({},"")}catch{f=function(A,$,J){return A[$]=J}}function h(O,A,$,J){var Z=A&&A.prototype instanceof _?A:_,ae=Object.create(Z.prototype),U=new I(J||[]);return ae._invoke=j(O,$,U),ae}n.wrap=h;function c(O,A,$){try{return{type:"normal",arg:O.call(A,$)}}catch(J){return{type:"throw",arg:J}}}var d="suspendedStart",v="suspendedYield",g="executing",m="completed",p={};function _(){}function b(){}function x(){}var C={};f(C,s,function(){return this});var y=Object.getPrototypeOf,w=y&&y(y(z([])));w&&w!==i&&e.call(w,s)&&(C=w);var P=x.prototype=_.prototype=Object.create(C);b.prototype=x,f(P,"constructor",x),f(x,"constructor",b),b.displayName=f(x,u,"GeneratorFunction");function T(O){["next","throw","return"].forEach(function(A){f(O,A,function($){return this._invoke(A,$)})})}n.isGeneratorFunction=function(O){var A=typeof O=="function"&&O.constructor;return A?A===b||(A.displayName||A.name)==="GeneratorFunction":!1},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,x):(O.__proto__=x,f(O,u,"GeneratorFunction")),O.prototype=Object.create(P),O},n.awrap=function(O){return{__await:O}};function L(O,A){function $(ae,U,W,ne){var de=c(O[ae],O,U);if(de.type==="throw")ne(de.arg);else{var ge=de.arg,ve=ge.value;return ve&&typeof ve=="object"&&e.call(ve,"__await")?A.resolve(ve.__await).then(function(ce){$("next",ce,W,ne)},function(ce){$("throw",ce,W,ne)}):A.resolve(ve).then(function(ce){ge.value=ce,W(ge)},function(ce){return $("throw",ce,W,ne)})}}var J;function Z(ae,U){function W(){return new A(function(ne,de){$(ae,U,ne,de)})}return J=J?J.then(W,W):W()}this._invoke=Z}T(L.prototype),f(L.prototype,l,function(){return this}),n.AsyncIterator=L,n.async=function(O,A,$,J,Z){Z===void 0&&(Z=Promise);var ae=new L(h(O,A,$,J),Z);return n.isGeneratorFunction(A)?ae:ae.next().then(function(U){return U.done?U.value:ae.next()})};function j(O,A,$){var J=d;return function(ae,U){if(J===g)throw new Error("Generator is already running");if(J===m){if(ae==="throw")throw U;return F()}for($.method=ae,$.arg=U;;){var W=$.delegate;if(W){var ne=M(W,$);if(ne){if(ne===p)continue;return ne}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(J===d)throw J=m,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);J=g;var de=c(O,A,$);if(de.type==="normal"){if(J=$.done?m:v,de.arg===p)continue;return{value:de.arg,done:$.done}}else de.type==="throw"&&(J=m,$.method="throw",$.arg=de.arg)}}}function M(O,A){var $=O.iterator[A.method];if($===a){if(A.delegate=null,A.method==="throw"){if(O.iterator.return&&(A.method="return",A.arg=a,M(O,A),A.method==="throw"))return p;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var J=c($,O.iterator,A.arg);if(J.type==="throw")return A.method="throw",A.arg=J.arg,A.delegate=null,p;var Z=J.arg;if(!Z)return A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,p;if(Z.done)A[O.resultName]=Z.value,A.next=O.nextLoc,A.method!=="return"&&(A.method="next",A.arg=a);else return Z;return A.delegate=null,p}T(P),f(P,u,"Generator"),f(P,s,function(){return this}),f(P,"toString",function(){return"[object Generator]"});function D(O){var A={tryLoc:O[0]};1 in O&&(A.catchLoc=O[1]),2 in O&&(A.finallyLoc=O[2],A.afterLoc=O[3]),this.tryEntries.push(A)}function R(O){var A=O.completion||{};A.type="normal",delete A.arg,O.completion=A}function I(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(D,this),this.reset(!0)}n.keys=function(O){var A=[];for(var $ in O)A.push($);return A.reverse(),function J(){for(;A.length;){var Z=A.pop();if(Z in O)return J.value=Z,J.done=!1,J}return J.done=!0,J}};function z(O){if(O){var A=O[s];if(A)return A.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var $=-1,J=function Z(){for(;++$<O.length;)if(e.call(O,$))return Z.value=O[$],Z.done=!1,Z;return Z.value=a,Z.done=!0,Z};return J.next=J}}return{next:F}}n.values=z;function F(){return{value:a,done:!0}}return I.prototype={constructor:I,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(R),!O)for(var A in this)A.charAt(0)==="t"&&e.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=a)},stop:function(){this.done=!0;var O=this.tryEntries[0],A=O.completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var A=this;function $(ne,de){return ae.type="throw",ae.arg=O,A.next=ne,de&&(A.method="next",A.arg=a),!!de}for(var J=this.tryEntries.length-1;J>=0;--J){var Z=this.tryEntries[J],ae=Z.completion;if(Z.tryLoc==="root")return $("end");if(Z.tryLoc<=this.prev){var U=e.call(Z,"catchLoc"),W=e.call(Z,"finallyLoc");if(U&&W){if(this.prev<Z.catchLoc)return $(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return $(Z.finallyLoc)}else if(U){if(this.prev<Z.catchLoc)return $(Z.catchLoc,!0)}else if(W){if(this.prev<Z.finallyLoc)return $(Z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,A){for(var $=this.tryEntries.length-1;$>=0;--$){var J=this.tryEntries[$];if(J.tryLoc<=this.prev&&e.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var Z=J;break}}Z&&(O==="break"||O==="continue")&&Z.tryLoc<=A&&A<=Z.finallyLoc&&(Z=null);var ae=Z?Z.completion:{};return ae.type=O,ae.arg=A,Z?(this.method="next",this.next=Z.finallyLoc,p):this.complete(ae)},complete:function(O,A){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&A&&(this.next=A),p},finish:function(O){for(var A=this.tryEntries.length-1;A>=0;--A){var $=this.tryEntries[A];if($.finallyLoc===O)return this.complete($.completion,$.afterLoc),R($),p}},catch:function(O){for(var A=this.tryEntries.length-1;A>=0;--A){var $=this.tryEntries[A];if($.tryLoc===O){var J=$.completion;if(J.type==="throw"){var Z=J.arg;R($)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(O,A,$){return this.delegate={iterator:z(O),resultName:A,nextLoc:$},this.method==="next"&&(this.arg=a),p}},n}(r.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(fy);var wv=fy.exports,sS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},lS=sS;function Cv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){uS(r,e,n[e])})}return r}function uS(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var nc=function(t,n){var i=Cv({},t,n.attrs);return E(mn,Cv({},i,{icon:lS}),null)};nc.displayName="CheckCircleOutlined";nc.inheritAttrs=!1;var fS=nc,hS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},cS=hS;function Pv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){dS(r,e,n[e])})}return r}function dS(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var rc=function(t,n){var i=Pv({},t,n.attrs);return E(mn,Pv({},i,{icon:cS}),null)};rc.displayName="InfoCircleOutlined";rc.inheritAttrs=!1;var vS=rc,gS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},pS=gS;function Tv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){mS(r,e,n[e])})}return r}function mS(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var ic=function(t,n){var i=Tv({},t,n.attrs);return E(mn,Tv({},i,{icon:pS}),null)};ic.displayName="CloseCircleOutlined";ic.inheritAttrs=!1;var _S=ic,yS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},bS=yS;function Sv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){xS(r,e,n[e])})}return r}function xS(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var ac=function(t,n){var i=Sv({},t,n.attrs);return E(mn,Sv({},i,{icon:bS}),null)};ac.displayName="ExclamationCircleOutlined";ac.inheritAttrs=!1;var wS=ac,CS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},PS=CS;function Mv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){TS(r,e,n[e])})}return r}function TS(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var oc=function(t,n){var i=Mv({},t,n.attrs);return E(mn,Mv({},i,{icon:PS}),null)};oc.displayName="CloseOutlined";oc.inheritAttrs=!1;var sc=oc;globalThis&&globalThis.__awaiter;var Qr={},hy=4.5,cy="24px",dy="24px",Ff="",vy="topRight",gy=function(){return document.body},py=null,Hf=!1,my;function SS(r){var t=r.duration,n=r.placement,i=r.bottom,e=r.top,a=r.getContainer,o=r.closeIcon,s=r.prefixCls;s!==void 0&&(Ff=s),t!==void 0&&(hy=t),n!==void 0&&(vy=n),i!==void 0&&(dy=typeof i=="number"?"".concat(i,"px"):i),e!==void 0&&(cy=typeof e=="number"?"".concat(e,"px"):e),a!==void 0&&(gy=a),o!==void 0&&(py=o),r.rtl!==void 0&&(Hf=r.rtl),r.maxCount!==void 0&&(my=r.maxCount)}function MS(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cy,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dy,i;switch(r){case"topLeft":i={left:"0px",top:t,bottom:"auto"};break;case"topRight":i={right:"0px",top:t,bottom:"auto"};break;case"bottomLeft":i={left:"0px",top:"auto",bottom:n};break;default:i={right:"0px",top:"auto",bottom:n};break}return i}function ES(r,t){var n=r.prefixCls,i=r.placement,e=i===void 0?vy:i,a=r.getContainer,o=a===void 0?gy:a,s=r.top,l=r.bottom,u=r.closeIcon,f=u===void 0?py:u,h=r.appContext,c=WS(),d=c.getPrefixCls,v=d("notification",n||Ff),g="".concat(v,"-").concat(e,"-").concat(Hf),m=Qr[g];if(m){Promise.resolve(m).then(function(_){t(_)});return}var p=qe("".concat(v,"-").concat(e),ue({},"".concat(v,"-rtl"),Hf===!0));Y_.newInstance({name:"notification",prefixCls:n||Ff,class:p,style:MS(e,s,l),appContext:h,getContainer:o,closeIcon:function(b){var x=b.prefixCls,C=E("span",{class:"".concat(x,"-close-x")},[Xa(f,{},E(sc,{class:"".concat(x,"-close-icon")},null))]);return C},maxCount:my,hasTransitionName:!0},function(_){Qr[g]=_,t(_)})}var OS={success:fS,info:vS,error:_S,warning:wS};function AS(r){var t=r.icon,n=r.type,i=r.description,e=r.message,a=r.btn,o=r.duration===void 0?hy:r.duration;ES(r,function(s){s.notice({content:function(u){var f=u.prefixCls,h="".concat(f,"-notice"),c=null;if(t)c=function(){return E("span",{class:"".concat(h,"-icon")},[Xa(t)])};else if(n){var d=OS[n];c=function(){return E(d,{class:"".concat(h,"-icon ").concat(h,"-icon-").concat(n)},null)}}return E("div",{class:c?"".concat(h,"-with-icon"):""},[c&&c(),E("div",{class:"".concat(h,"-message")},[!i&&c?E("span",{class:"".concat(h,"-message-single-line-auto-margin")},null):null,Xa(e)]),E("div",{class:"".concat(h,"-description")},[Xa(i)]),a?E("span",{class:"".concat(h,"-btn")},[Xa(a)]):null])},duration:o,closable:!0,onClose:r.onClose,onClick:r.onClick,key:r.key,style:r.style||{},class:r.class})})}var Oo={open:AS,close:function(t){Object.keys(Qr).forEach(function(n){return Promise.resolve(Qr[n]).then(function(i){i.removeNotice(t)})})},config:SS,destroy:function(){Object.keys(Qr).forEach(function(t){Promise.resolve(Qr[t]).then(function(n){n.destroy()}),delete Qr[t]})}},RS=["success","info","warning","error"];RS.forEach(function(r){Oo[r]=function(t){return Oo.open(V(V({},t),{type:r}))}});Oo.warn=Oo.warning;var IS=Oo;function _y(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var kS="vc-util-key";function yy(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=r.mark;return t?t.startsWith("data-")?t:"data-".concat(t):kS}function lc(r){if(r.attachTo)return r.attachTo;var t=document.querySelector("head");return t||document.body}function Ev(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i;if(!_y())return null;var e=document.createElement("style");!((n=t.csp)===null||n===void 0)&&n.nonce&&(e.nonce=(i=t.csp)===null||i===void 0?void 0:i.nonce),e.innerHTML=r;var a=lc(t),o=a.firstChild;return t.prepend&&a.prepend?a.prepend(e):t.prepend&&o?a.insertBefore(e,o):a.appendChild(e),e}var Bf=new Map;function DS(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=lc(t);return Array.from(Bf.get(n).children).find(function(i){return i.tagName==="STYLE"&&i.getAttribute(yy(t))===r})}function LS(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,e,a,o=lc(n);if(!Bf.has(o)){var s=Ev("",n),l=s.parentNode;Bf.set(o,l),l.removeChild(s)}var u=DS(t,n);if(u)return((i=n.csp)===null||i===void 0?void 0:i.nonce)&&u.nonce!==((e=n.csp)===null||e===void 0?void 0:e.nonce)&&(u.nonce=(a=n.csp)===null||a===void 0?void 0:a.nonce),u.innerHTML!==r&&(u.innerHTML=r),u;var f=Ev(r,n);return f.setAttribute(yy(n),t),f}var er=function(r,t,n){Z_(r,"[ant-design-vue: ".concat(t,"] ").concat(n))},jS="-ant-".concat(Date.now(),"-").concat(Math.random());function NS(r,t){var n={},i=function(f,h){var c=f.clone();return c=(h==null?void 0:h(c))||c,c.toRgbString()},e=function(f,h){var c=new lu(f),d=Eo(c.toRgbString());n["".concat(h,"-color")]=i(c),n["".concat(h,"-color-disabled")]=d[1],n["".concat(h,"-color-hover")]=d[4],n["".concat(h,"-color-active")]=d[7],n["".concat(h,"-color-outline")]=c.clone().setAlpha(.2).toRgbString(),n["".concat(h,"-color-deprecated-bg")]=d[1],n["".concat(h,"-color-deprecated-border")]=d[3]};if(t.primaryColor){e(t.primaryColor,"primary");var a=new lu(t.primaryColor),o=Eo(a.toRgbString());o.forEach(function(u,f){n["primary-".concat(f+1)]=u}),n["primary-color-deprecated-l-35"]=i(a,function(u){return u.lighten(35)}),n["primary-color-deprecated-l-20"]=i(a,function(u){return u.lighten(20)}),n["primary-color-deprecated-t-20"]=i(a,function(u){return u.tint(20)}),n["primary-color-deprecated-t-50"]=i(a,function(u){return u.tint(50)}),n["primary-color-deprecated-f-12"]=i(a,function(u){return u.setAlpha(u.getAlpha()*.12)});var s=new lu(o[0]);n["primary-color-active-deprecated-f-30"]=i(s,function(u){return u.setAlpha(u.getAlpha()*.3)}),n["primary-color-active-deprecated-d-02"]=i(s,function(u){return u.darken(2)})}t.successColor&&e(t.successColor,"success"),t.warningColor&&e(t.warningColor,"warning"),t.errorColor&&e(t.errorColor,"error"),t.infoColor&&e(t.infoColor,"info");var l=Object.keys(n).map(function(u){return"--".concat(r,"-").concat(u,": ").concat(n[u],";")});_y()?LS(`
  :root {
    `.concat(l.join(`
`),`
  }
  `),"".concat(jS,"-dynamic-theme")):er(!1,"ConfigProvider","SSR do not support dynamic theme with css variables.")}var zS=Symbol("GlobalFormContextKey"),FS=function(t){Ut(zS,t)},HS=function(){return{getTargetContainer:{type:Function},getPopupContainer:{type:Function},prefixCls:String,getPrefixCls:{type:Function},renderEmpty:{type:Function},transformCellText:{type:Function},csp:{type:Object,default:void 0},input:{type:Object},autoInsertSpaceInButton:{type:Boolean,default:void 0},locale:{type:Object,default:void 0},pageHeader:{type:Object},componentSize:{type:String},direction:{type:String},space:{type:Object},virtual:{type:Boolean,default:void 0},dropdownMatchSelectWidth:{type:[Number,Boolean],default:!0},form:{type:Object,default:void 0},notUpdateGlobalConfig:Boolean}},BS="ant";function Bi(){return cn.prefixCls||BS}var $f=Mn({}),by=Mn({}),cn=Mn({});Ht(function(){V(cn,$f,by),cn.prefixCls=Bi(),cn.getPrefixCls=function(r,t){return t||(r?"".concat(cn.prefixCls,"-").concat(r):cn.prefixCls)},cn.getRootPrefixCls=function(r,t){return r||(cn.prefixCls?cn.prefixCls:t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):Bi())}});var hu,$S=function(t){hu&&hu(),hu=Ht(function(){V(by,Mn(t))}),t.theme&&NS(Bi(),t.theme)},WS=function(){return{getPrefixCls:function(n,i){return i||(n?"".concat(Bi(),"-").concat(n):Bi())},getRootPrefixCls:function(n,i){return n||(cn.prefixCls?cn.prefixCls:i&&i.includes("-")?i.replace(/^(.*)-[^-]*$/,"$1"):Bi())}}},ho=Se({name:"AConfigProvider",inheritAttrs:!1,props:HS(),setup:function(t,n){var i=n.slots,e=function(h,c){var d=t.prefixCls,v=d===void 0?"ant":d;return c||(h?"".concat(v,"-").concat(h):v)},a=function(h){var c=t.renderEmpty||i.renderEmpty||V_;return c(h)},o=function(h,c){var d=t.prefixCls;if(c)return c;var v=d||e("");return h?"".concat(v,"-").concat(h):v},s=Mn(V(V({},t),{getPrefixCls:o,renderEmpty:a}));Object.keys(t).forEach(function(f){ke(function(){return t[f]},function(){s[f]=t[f]})}),t.notUpdateGlobalConfig||(V($f,s),ke(s,function(){V($f,s)}));var l=q(function(){var f,h,c={};return t.locale&&(c=((f=t.locale.Form)===null||f===void 0?void 0:f.defaultValidateMessages)||((h=Af.Form)===null||h===void 0?void 0:h.defaultValidateMessages)||{}),t.form&&t.form.validateMessages&&(c=V(V({},c),t.form.validateMessages)),c});FS({validateMessages:l}),Ut("configProvider",s);var u=function(h){var c;return E(z1,{locale:t.locale||h,ANT_MARK__:Rf},{default:function(){return[(c=i.default)===null||c===void 0?void 0:c.call(i)]}})};return Ht(function(){t.direction&&(oS.config({rtl:t.direction==="rtl"}),IS.config({rtl:t.direction==="rtl"}))}),function(){return E(R_,{children:function(h,c,d){return u(d)}},null)}}}),xy=Mn({getPrefixCls:function(t,n){return n||(t?"ant-".concat(t):"ant")},renderEmpty:V_,direction:"ltr"});ho.config=$S;ho.install=function(r){r.component(ho.name,ho)};var Dt=function(r,t){var n=_t("configProvider",xy),i=q(function(){return n.getPrefixCls(r,t.prefixCls)}),e=q(function(){var _;return(_=t.direction)!==null&&_!==void 0?_:n.direction}),a=q(function(){return n.getPrefixCls()}),o=q(function(){return n.autoInsertSpaceInButton}),s=q(function(){return n.renderEmpty}),l=q(function(){return n.space}),u=q(function(){return n.pageHeader}),f=q(function(){return n.form}),h=q(function(){return t.getTargetContainer||n.getTargetContainer}),c=q(function(){return t.getPopupContainer||n.getPopupContainer}),d=q(function(){var _;return(_=t.dropdownMatchSelectWidth)!==null&&_!==void 0?_:n.dropdownMatchSelectWidth}),v=q(function(){return(t.virtual===void 0?n.virtual!==!1:t.virtual!==!1)&&d.value!==!1}),g=q(function(){return t.size||n.componentSize}),m=q(function(){var _;return t.autocomplete||((_=n.input)===null||_===void 0?void 0:_.autocomplete)}),p=q(function(){return n.csp});return{configProvider:n,prefixCls:i,direction:e,size:g,getTargetContainer:h,getPopupContainer:c,space:l,pageHeader:u,form:f,autoInsertSpaceInButton:o,renderEmpty:s,virtual:v,dropdownMatchSelectWidth:d,rootPrefixCls:a,getPrefixCls:n.getPrefixCls,autocomplete:m,csp:p}};function wy(r,t){for(var n=V({},r),i=0;i<t.length;i+=1){var e=t[i];delete n[e]}return n}function Ri(r,t){return r?r.contains(t):!1}var Cy=["moz","ms","webkit"];function GS(){var r=0;return function(t){var n=new Date().getTime(),i=Math.max(0,16-(n-r)),e=window.setTimeout(function(){t(n+i)},i);return r=n+i,e}}function VS(){if(typeof window=="undefined")return function(){};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);var r=Cy.filter(function(t){return"".concat(t,"RequestAnimationFrame")in window})[0];return r?window["".concat(r,"RequestAnimationFrame")]:GS()}function ZS(r){if(typeof window=="undefined")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(r);var t=Cy.filter(function(n){return"".concat(n,"CancelAnimationFrame")in window||"".concat(n,"CancelRequestAnimationFrame")in window})[0];return t?(window["".concat(t,"CancelAnimationFrame")]||window["".concat(t,"CancelRequestAnimationFrame")]).call(this,r):clearTimeout(r)}var Ov=VS(),US=function(t){return ZS(t.id)},KS=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Date.now();function e(){Date.now()-i>=n?t.call():a.id=Ov(e)}var a={id:Ov(e)};return a},uc={visible:Boolean,prefixCls:String,zIndex:Number,destroyPopupOnHide:Boolean,forceRender:Boolean,animation:[String,Object],transitionName:String,stretch:{type:String},align:{type:Object},point:{type:Object},getRootDomNode:{type:Function},getClassNameFromAlign:{type:Function},onMouseenter:{type:Function},onMouseleave:{type:Function},onMousedown:{type:Function},onTouchstart:{type:Function}},YS=V(V({},uc),{mobile:{type:Object}}),qS=V(V({},uc),{mask:Boolean,mobile:{type:Object},maskAnimation:String,maskTransitionName:String});function Py(r){var t=r.prefixCls,n=r.animation,i=r.transitionName;return n?{name:"".concat(t,"-").concat(n)}:i?{name:i}:{}}function Ty(r){var t=r.prefixCls,n=r.visible,i=r.zIndex,e=r.mask,a=r.maskAnimation,o=r.maskTransitionName;if(!e)return null;var s={};return(o||a)&&(s=Py({prefixCls:t,transitionName:o,animation:a})),E(ga,_e({appear:!0},s),{default:function(){return[Rl(E("div",{style:{zIndex:i},class:"".concat(t,"-mask")},null),[[fC("if"),n]])]}})}Ty.displayName="Mask";var XS=Se({name:"MobilePopupInner",inheritAttrs:!1,props:YS,emits:["mouseenter","mouseleave","mousedown","touchstart","align"],setup:function(t,n){var i=n.expose,e=n.slots,a=ee();return i({forceAlign:function(){},getElement:function(){return a.value}}),function(){var o,s=t.zIndex,l=t.visible,u=t.prefixCls,f=t.mobile;f=f===void 0?{}:f;var h=f.popupClassName,c=f.popupStyle,d=f.popupMotion,v=d===void 0?{}:d,g=f.popupRender,m=V({zIndex:s},c),p=pn((o=e.default)===null||o===void 0?void 0:o.call(e));p.length>1&&(p=E("div",{class:"".concat(u,"-content")},[p])),g&&(p=g(p));var _=qe(u,h);return E(ga,_e({ref:a},v),{default:function(){return[l?E("div",{class:_,style:m},[p]):null]}})}}}),JS=globalThis&&globalThis.__awaiter||function(r,t,n,i){function e(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(f){try{u(i.next(f))}catch(h){o(h)}}function l(f){try{u(i.throw(f))}catch(h){o(h)}}function u(f){f.done?a(f.value):e(f.value).then(s,l)}u((i=i.apply(r,t||[])).next())})},Av=["measure","align",null,"motion"],QS=function(r,t){var n=ee(null),i=ee(),e=ee(!1);function a(l){e.value||(n.value=l)}function o(){vt.cancel(i.value)}function s(l){o(),i.value=vt(function(){var u=n.value;switch(n.value){case"align":u="motion";break;case"motion":u="stable";break}a(u),l==null||l()})}return ke(r,function(){a("measure")},{immediate:!0,flush:"post"}),bt(function(){ke(n,function(){switch(n.value){case"measure":t();break}n.value&&(i.value=vt(function(){return JS(void 0,void 0,void 0,wv.mark(function l(){var u,f;return wv.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:u=Av.indexOf(n.value),f=Av[u+1],f&&u!==-1&&a(f);case 3:case"end":return c.stop()}},l)}))}))},{immediate:!0,flush:"post"})}),en(function(){e.value=!0,o()}),[n,s]},eM=function(r){var t=ee({width:0,height:0});function n(e){t.value={width:e.offsetWidth,height:e.offsetHeight}}var i=q(function(){var e={};if(r.value){var a=t.value,o=a.width,s=a.height;r.value.indexOf("height")!==-1&&s?e.height="".concat(s,"px"):r.value.indexOf("minHeight")!==-1&&s&&(e.minHeight="".concat(s,"px")),r.value.indexOf("width")!==-1&&o?e.width="".concat(o,"px"):r.value.indexOf("minWidth")!==-1&&o&&(e.minWidth="".concat(o,"px"))}return e});return[i,n]};function Rv(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,i)}return n}function Iv(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rv(Object(n),!0).forEach(function(i){tM(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rv(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function zs(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zs=function(t){return typeof t}:zs=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(r)}function tM(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var Da,nM={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function rl(){if(Da!==void 0)return Da;Da="";var r=document.createElement("p").style,t="Transform";for(var n in nM)n+t in r&&(Da=n);return Da}function Sy(){return rl()?"".concat(rl(),"TransitionProperty"):"transitionProperty"}function Nl(){return rl()?"".concat(rl(),"Transform"):"transform"}function kv(r,t){var n=Sy();n&&(r.style[n]=t,n!=="transitionProperty"&&(r.style.transitionProperty=t))}function cu(r,t){var n=Nl();n&&(r.style[n]=t,n!=="transform"&&(r.style.transform=t))}function rM(r){return r.style.transitionProperty||r.style[Sy()]}function iM(r){var t=window.getComputedStyle(r,null),n=t.getPropertyValue("transform")||t.getPropertyValue(Nl());if(n&&n!=="none"){var i=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(i[12]||i[4],0),y:parseFloat(i[13]||i[5],0)}}return{x:0,y:0}}var aM=/matrix\((.*)\)/,oM=/matrix3d\((.*)\)/;function sM(r,t){var n=window.getComputedStyle(r,null),i=n.getPropertyValue("transform")||n.getPropertyValue(Nl());if(i&&i!=="none"){var e,a=i.match(aM);if(a)a=a[1],e=a.split(",").map(function(s){return parseFloat(s,10)}),e[4]=t.x,e[5]=t.y,cu(r,"matrix(".concat(e.join(","),")"));else{var o=i.match(oM)[1];e=o.split(",").map(function(s){return parseFloat(s,10)}),e[12]=t.x,e[13]=t.y,cu(r,"matrix3d(".concat(e.join(","),")"))}}else cu(r,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var lM=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Fo;function Dv(r){var t=r.style.display;r.style.display="none",r.offsetHeight,r.style.display=t}function $i(r,t,n){var i=n;if(zs(t)==="object"){for(var e in t)t.hasOwnProperty(e)&&$i(r,e,t[e]);return}if(typeof i!="undefined"){typeof i=="number"&&(i="".concat(i,"px")),r.style[t]=i;return}return Fo(r,t)}function uM(r){var t,n,i,e=r.ownerDocument,a=e.body,o=e&&e.documentElement;return t=r.getBoundingClientRect(),n=t.left,i=t.top,n-=o.clientLeft||a.clientLeft||0,i-=o.clientTop||a.clientTop||0,{left:n,top:i}}function My(r,t){var n=r["page".concat(t?"Y":"X","Offset")],i="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var e=r.document;n=e.documentElement[i],typeof n!="number"&&(n=e.body[i])}return n}function Ey(r){return My(r)}function Oy(r){return My(r,!0)}function Ao(r){var t=uM(r),n=r.ownerDocument,i=n.defaultView||n.parentWindow;return t.left+=Ey(i),t.top+=Oy(i),t}function fc(r){return r!=null&&r==r.window}function Ay(r){return fc(r)?r.document:r.nodeType===9?r:r.ownerDocument}function fM(r,t,n){var i=n,e="",a=Ay(r);return i=i||a.defaultView.getComputedStyle(r,null),i&&(e=i.getPropertyValue(t)||i[t]),e}var hM=new RegExp("^(".concat(lM,")(?!px)[a-z%]+$"),"i"),cM=/^(top|right|bottom|left)$/,du="currentStyle",vu="runtimeStyle",Gr="left",dM="px";function vM(r,t){var n=r[du]&&r[du][t];if(hM.test(n)&&!cM.test(t)){var i=r.style,e=i[Gr],a=r[vu][Gr];r[vu][Gr]=r[du][Gr],i[Gr]=t==="fontSize"?"1em":n||0,n=i.pixelLeft+dM,i[Gr]=e,r[vu][Gr]=a}return n===""?"auto":n}typeof window!="undefined"&&(Fo=window.getComputedStyle?fM:vM);function is(r,t){return r==="left"?t.useCssRight?"right":r:t.useCssBottom?"bottom":r}function Lv(r){if(r==="left")return"right";if(r==="right")return"left";if(r==="top")return"bottom";if(r==="bottom")return"top"}function jv(r,t,n){$i(r,"position")==="static"&&(r.style.position="relative");var i=-999,e=-999,a=is("left",n),o=is("top",n),s=Lv(a),l=Lv(o);a!=="left"&&(i=999),o!=="top"&&(e=999);var u="",f=Ao(r);("left"in t||"top"in t)&&(u=rM(r)||"",kv(r,"none")),"left"in t&&(r.style[s]="",r.style[a]="".concat(i,"px")),"top"in t&&(r.style[l]="",r.style[o]="".concat(e,"px")),Dv(r);var h=Ao(r),c={};for(var d in t)if(t.hasOwnProperty(d)){var v=is(d,n),g=d==="left"?i:e,m=f[d]-h[d];v===d?c[v]=g+m:c[v]=g-m}$i(r,c),Dv(r),("left"in t||"top"in t)&&kv(r,u);var p={};for(var _ in t)if(t.hasOwnProperty(_)){var b=is(_,n),x=t[_]-f[_];_===b?p[b]=c[b]+x:p[b]=c[b]-x}$i(r,p)}function gM(r,t){var n=Ao(r),i=iM(r),e={x:i.x,y:i.y};"left"in t&&(e.x=i.x+t.left-n.left),"top"in t&&(e.y=i.y+t.top-n.top),sM(r,e)}function pM(r,t,n){if(n.ignoreShake){var i=Ao(r),e=i.left.toFixed(0),a=i.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(e===o&&a===s)return}n.useCssRight||n.useCssBottom?jv(r,t,n):n.useCssTransform&&Nl()in document.body.style?gM(r,t):jv(r,t,n)}function hc(r,t){for(var n=0;n<r.length;n++)t(r[n])}function Ry(r){return Fo(r,"boxSizing")==="border-box"}var mM=["margin","border","padding"],Wf=-1,_M=2,Gf=1,yM=0;function bM(r,t,n){var i={},e=r.style,a;for(a in t)t.hasOwnProperty(a)&&(i[a]=e[a],e[a]=t[a]);n.call(r);for(a in t)t.hasOwnProperty(a)&&(e[a]=i[a])}function Qa(r,t,n){var i=0,e,a,o;for(a=0;a<t.length;a++)if(e=t[a],e)for(o=0;o<n.length;o++){var s=void 0;e==="border"?s="".concat(e).concat(n[o],"Width"):s=e+n[o],i+=parseFloat(Fo(r,s))||0}return i}var Ln={getParent:function(t){var n=t;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};hc(["Width","Height"],function(r){Ln["doc".concat(r)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(r)],n.body["scroll".concat(r)],Ln["viewport".concat(r)](n))},Ln["viewport".concat(r)]=function(t){var n="client".concat(r),i=t.document,e=i.body,a=i.documentElement,o=a[n];return i.compatMode==="CSS1Compat"&&o||e&&e[n]||o}});function Nv(r,t,n){var i=n;if(fc(r))return t==="width"?Ln.viewportWidth(r):Ln.viewportHeight(r);if(r.nodeType===9)return t==="width"?Ln.docWidth(r):Ln.docHeight(r);var e=t==="width"?["Left","Right"]:["Top","Bottom"],a=t==="width"?r.getBoundingClientRect().width:r.getBoundingClientRect().height,o=Ry(r),s=0;(a==null||a<=0)&&(a=void 0,s=Fo(r,t),(s==null||Number(s)<0)&&(s=r.style[t]||0),s=parseFloat(s)||0),i===void 0&&(i=o?Gf:Wf);var l=a!==void 0||o,u=a||s;return i===Wf?l?u-Qa(r,["border","padding"],e):s:l?i===Gf?u:u+(i===_M?-Qa(r,["border"],e):Qa(r,["margin"],e)):s+Qa(r,mM.slice(i),e)}var xM={position:"absolute",visibility:"hidden",display:"block"};function zv(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];var i,e=t[0];return e.offsetWidth!==0?i=Nv.apply(void 0,t):bM(e,xM,function(){i=Nv.apply(void 0,t)}),i}hc(["width","height"],function(r){var t=r.charAt(0).toUpperCase()+r.slice(1);Ln["outer".concat(t)]=function(i,e){return i&&zv(i,r,e?yM:Gf)};var n=r==="width"?["Left","Right"]:["Top","Bottom"];Ln[r]=function(i,e){var a=e;if(a!==void 0){if(i){var o=Ry(i);return o&&(a+=Qa(i,["padding","border"],n)),$i(i,r,a)}return}return i&&zv(i,r,Wf)}});function Iy(r,t){for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}var Ae={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var n=t.ownerDocument||t;return n.defaultView||n.parentWindow},getDocument:Ay,offset:function(t,n,i){if(typeof n!="undefined")pM(t,n,i||{});else return Ao(t)},isWindow:fc,each:hc,css:$i,clone:function(t){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);var e=t.overflow;if(e)for(n in t)t.hasOwnProperty(n)&&(i.overflow[n]=t.overflow[n]);return i},mix:Iy,getWindowScrollLeft:function(t){return Ey(t)},getWindowScrollTop:function(t){return Oy(t)},merge:function(){for(var t={},n=0;n<arguments.length;n++)Ae.mix(t,n<0||arguments.length<=n?void 0:arguments[n]);return t},viewportWidth:0,viewportHeight:0};Iy(Ae,Ln);var gu=Ae.getParent;function Vf(r){if(Ae.isWindow(r)||r.nodeType===9)return null;var t=Ae.getDocument(r),n=t.body,i,e=Ae.css(r,"position"),a=e==="fixed"||e==="absolute";if(!a)return r.nodeName.toLowerCase()==="html"?null:gu(r);for(i=gu(r);i&&i!==n&&i.nodeType!==9;i=gu(i))if(e=Ae.css(i,"position"),e!=="static")return i;return null}var Fv=Ae.getParent;function wM(r){if(Ae.isWindow(r)||r.nodeType===9)return!1;var t=Ae.getDocument(r),n=t.body,i=null;for(i=Fv(r);i&&i!==n&&i!==t;i=Fv(i)){var e=Ae.css(i,"position");if(e==="fixed")return!0}return!1}function cc(r,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},i=Vf(r),e=Ae.getDocument(r),a=e.defaultView||e.parentWindow,o=e.body,s=e.documentElement;i;){if((navigator.userAgent.indexOf("MSIE")===-1||i.clientWidth!==0)&&i!==o&&i!==s&&Ae.css(i,"overflow")!=="visible"){var l=Ae.offset(i);l.left+=i.clientLeft,l.top+=i.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+i.clientWidth),n.bottom=Math.min(n.bottom,l.top+i.clientHeight),n.left=Math.max(n.left,l.left)}else if(i===o||i===s)break;i=Vf(i)}var u=null;if(!Ae.isWindow(r)&&r.nodeType!==9){u=r.style.position;var f=Ae.css(r,"position");f==="absolute"&&(r.style.position="fixed")}var h=Ae.getWindowScrollLeft(a),c=Ae.getWindowScrollTop(a),d=Ae.viewportWidth(a),v=Ae.viewportHeight(a),g=s.scrollWidth,m=s.scrollHeight,p=window.getComputedStyle(o);if(p.overflowX==="hidden"&&(g=a.innerWidth),p.overflowY==="hidden"&&(m=a.innerHeight),r.style&&(r.style.position=u),t||wM(r))n.left=Math.max(n.left,h),n.top=Math.max(n.top,c),n.right=Math.min(n.right,h+d),n.bottom=Math.min(n.bottom,c+v);else{var _=Math.max(g,h+d);n.right=Math.min(n.right,_);var b=Math.max(m,c+v);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function CM(r,t,n,i){var e=Ae.clone(r),a={width:t.width,height:t.height};return i.adjustX&&e.left<n.left&&(e.left=n.left),i.resizeWidth&&e.left>=n.left&&e.left+a.width>n.right&&(a.width-=e.left+a.width-n.right),i.adjustX&&e.left+a.width>n.right&&(e.left=Math.max(n.right-a.width,n.left)),i.adjustY&&e.top<n.top&&(e.top=n.top),i.resizeHeight&&e.top>=n.top&&e.top+a.height>n.bottom&&(a.height-=e.top+a.height-n.bottom),i.adjustY&&e.top+a.height>n.bottom&&(e.top=Math.max(n.bottom-a.height,n.top)),Ae.mix(e,a)}function dc(r){var t,n,i;if(!Ae.isWindow(r)&&r.nodeType!==9)t=Ae.offset(r),n=Ae.outerWidth(r),i=Ae.outerHeight(r);else{var e=Ae.getWindow(r);t={left:Ae.getWindowScrollLeft(e),top:Ae.getWindowScrollTop(e)},n=Ae.viewportWidth(e),i=Ae.viewportHeight(e)}return t.width=n,t.height=i,t}function Hv(r,t){var n=t.charAt(0),i=t.charAt(1),e=r.width,a=r.height,o=r.left,s=r.top;return n==="c"?s+=a/2:n==="b"&&(s+=a),i==="c"?o+=e/2:i==="r"&&(o+=e),{left:o,top:s}}function as(r,t,n,i,e){var a=Hv(t,n[1]),o=Hv(r,n[0]),s=[o.left-a.left,o.top-a.top];return{left:Math.round(r.left-s[0]+i[0]-e[0]),top:Math.round(r.top-s[1]+i[1]-e[1])}}function Bv(r,t,n){return r.left<n.left||r.left+t.width>n.right}function $v(r,t,n){return r.top<n.top||r.top+t.height>n.bottom}function PM(r,t,n){return r.left>n.right||r.left+t.width<n.left}function TM(r,t,n){return r.top>n.bottom||r.top+t.height<n.top}function os(r,t,n){var i=[];return Ae.each(r,function(e){i.push(e.replace(t,function(a){return n[a]}))}),i}function ss(r,t){return r[t]=-r[t],r}function Wv(r,t){var n;return/%$/.test(r)?n=parseInt(r.substring(0,r.length-1),10)/100*t:n=parseInt(r,10),n||0}function Gv(r,t){r[0]=Wv(r[0],t.width),r[1]=Wv(r[1],t.height)}function ky(r,t,n,i){var e=n.points,a=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,l=n.source||r;a=[].concat(a),o=[].concat(o),s=s||{};var u={},f=0,h=!!(s&&s.alwaysByViewport),c=cc(l,h),d=dc(l);Gv(a,d),Gv(o,t);var v=as(d,t,e,a,o),g=Ae.merge(d,v);if(c&&(s.adjustX||s.adjustY)&&i){if(s.adjustX&&Bv(v,d,c)){var m=os(e,/[lr]/gi,{l:"r",r:"l"}),p=ss(a,0),_=ss(o,0),b=as(d,t,m,p,_);PM(b,d,c)||(f=1,e=m,a=p,o=_)}if(s.adjustY&&$v(v,d,c)){var x=os(e,/[tb]/gi,{t:"b",b:"t"}),C=ss(a,1),y=ss(o,1),w=as(d,t,x,C,y);TM(w,d,c)||(f=1,e=x,a=C,o=y)}f&&(v=as(d,t,e,a,o),Ae.mix(g,v));var P=Bv(v,d,c),T=$v(v,d,c);if(P||T){var L=e;P&&(L=os(e,/[lr]/gi,{l:"r",r:"l"})),T&&(L=os(e,/[tb]/gi,{t:"b",b:"t"})),e=L,a=n.offset||[0,0],o=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&P,u.adjustY=s.adjustY&&T,(u.adjustX||u.adjustY)&&(g=CM(v,d,c,u))}return g.width!==d.width&&Ae.css(l,"width",Ae.width(l)+g.width-d.width),g.height!==d.height&&Ae.css(l,"height",Ae.height(l)+g.height-d.height),Ae.offset(l,{left:g.left,top:g.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:e,offset:a,targetOffset:o,overflow:u}}function SM(r,t){var n=cc(r,t),i=dc(r);return!n||i.left+i.width<=n.left||i.top+i.height<=n.top||i.left>=n.right||i.top>=n.bottom}function vc(r,t,n){var i=n.target||t,e=dc(i),a=!SM(i,n.overflow&&n.overflow.alwaysByViewport);return ky(r,e,n,a)}vc.__getOffsetParent=Vf;vc.__getVisibleRectForElement=cc;function MM(r,t,n){var i,e,a=Ae.getDocument(r),o=a.defaultView||a.parentWindow,s=Ae.getWindowScrollLeft(o),l=Ae.getWindowScrollTop(o),u=Ae.viewportWidth(o),f=Ae.viewportHeight(o);"pageX"in t?i=t.pageX:i=s+t.clientX,"pageY"in t?e=t.pageY:e=l+t.clientY;var h={left:i,top:e,width:0,height:0},c=i>=0&&i<=s+u&&e>=0&&e<=l+f,d=[n.points[0],"cc"];return ky(r,h,Iv(Iv({},n),{},{points:d}),c)}function Sn(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,e=r;if(Array.isArray(r)&&(e=ra(r)[0]),!e)return null;var a=si(e,t,i);return a.props=n?V(V({},a.props),t):a.props,Yh(ft(a.props.class)!=="object","class must be string"),a}var EM=function(r){if(!r)return!1;if(r.offsetParent)return!0;if(r.getBBox){var t=r.getBBox();if(t.width||t.height)return!0}if(r.getBoundingClientRect){var n=r.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function OM(r,t){return r===t?!0:!r||!t?!1:"pageX"in t&&"pageY"in t?r.pageX===t.pageX&&r.pageY===t.pageY:"clientX"in t&&"clientY"in t?r.clientX===t.clientX&&r.clientY===t.clientY:!1}function AM(r,t){r!==document.activeElement&&Ri(t,r)&&typeof r.focus=="function"&&r.focus()}function Vv(r,t){var n=null,i=null;function e(o){var s=Ve(o,1),l=s[0].target;if(!!document.documentElement.contains(l)){var u=l.getBoundingClientRect(),f=u.width,h=u.height,c=Math.floor(f),d=Math.floor(h);(n!==c||i!==d)&&Promise.resolve().then(function(){t({width:c,height:d})}),n=c,i=d}}var a=new b_(e);return r&&a.observe(r),function(){a.disconnect()}}var RM=function(r,t){var n=!1,i=null;function e(){clearTimeout(i)}function a(o){if(!n||o===!0){if(r()===!1)return;n=!0,e(),i=setTimeout(function(){n=!1},t.value)}else e(),i=setTimeout(function(){n=!1,a()},t.value)}return[a,function(){n=!1,e()}]};function IM(){this.__data__=[],this.size=0}function gc(r,t){return r===t||r!==r&&t!==t}function zl(r,t){for(var n=r.length;n--;)if(gc(r[n][0],t))return n;return-1}var kM=Array.prototype,DM=kM.splice;function LM(r){var t=this.__data__,n=zl(t,r);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():DM.call(t,n,1),--this.size,!0}function jM(r){var t=this.__data__,n=zl(t,r);return n<0?void 0:t[n][1]}function NM(r){return zl(this.__data__,r)>-1}function zM(r,t){var n=this.__data__,i=zl(n,r);return i<0?(++this.size,n.push([r,t])):n[i][1]=t,this}function lr(r){var t=-1,n=r==null?0:r.length;for(this.clear();++t<n;){var i=r[t];this.set(i[0],i[1])}}lr.prototype.clear=IM;lr.prototype.delete=LM;lr.prototype.get=jM;lr.prototype.has=NM;lr.prototype.set=zM;function FM(){this.__data__=new lr,this.size=0}function HM(r){var t=this.__data__,n=t.delete(r);return this.size=t.size,n}function BM(r){return this.__data__.get(r)}function $M(r){return this.__data__.has(r)}function il(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var WM="[object AsyncFunction]",GM="[object Function]",VM="[object GeneratorFunction]",ZM="[object Proxy]";function Dy(r){if(!il(r))return!1;var t=pa(r);return t==GM||t==VM||t==WM||t==ZM}var UM=sr["__core-js_shared__"],pu=UM,Zv=function(){var r=/[^.]+$/.exec(pu&&pu.keys&&pu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function KM(r){return!!Zv&&Zv in r}var YM=Function.prototype,qM=YM.toString;function pi(r){if(r!=null){try{return qM.call(r)}catch{}try{return r+""}catch{}}return""}var XM=/[\\^$.*+?()[\]{}|]/g,JM=/^\[object .+?Constructor\]$/,QM=Function.prototype,eE=Object.prototype,tE=QM.toString,nE=eE.hasOwnProperty,rE=RegExp("^"+tE.call(nE).replace(XM,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function iE(r){if(!il(r)||KM(r))return!1;var t=Dy(r)?rE:JM;return t.test(pi(r))}function aE(r,t){return r==null?void 0:r[t]}function mi(r,t){var n=aE(r,t);return iE(n)?n:void 0}var oE=mi(sr,"Map"),Ro=oE,sE=mi(Object,"create"),Io=sE;function lE(){this.__data__=Io?Io(null):{},this.size=0}function uE(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var fE="__lodash_hash_undefined__",hE=Object.prototype,cE=hE.hasOwnProperty;function dE(r){var t=this.__data__;if(Io){var n=t[r];return n===fE?void 0:n}return cE.call(t,r)?t[r]:void 0}var vE=Object.prototype,gE=vE.hasOwnProperty;function pE(r){var t=this.__data__;return Io?t[r]!==void 0:gE.call(t,r)}var mE="__lodash_hash_undefined__";function _E(r,t){var n=this.__data__;return this.size+=this.has(r)?0:1,n[r]=Io&&t===void 0?mE:t,this}function fi(r){var t=-1,n=r==null?0:r.length;for(this.clear();++t<n;){var i=r[t];this.set(i[0],i[1])}}fi.prototype.clear=lE;fi.prototype.delete=uE;fi.prototype.get=dE;fi.prototype.has=pE;fi.prototype.set=_E;function yE(){this.size=0,this.__data__={hash:new fi,map:new(Ro||lr),string:new fi}}function bE(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function Fl(r,t){var n=r.__data__;return bE(t)?n[typeof t=="string"?"string":"hash"]:n.map}function xE(r){var t=Fl(this,r).delete(r);return this.size-=t?1:0,t}function wE(r){return Fl(this,r).get(r)}function CE(r){return Fl(this,r).has(r)}function PE(r,t){var n=Fl(this,r),i=n.size;return n.set(r,t),this.size+=n.size==i?0:1,this}function ur(r){var t=-1,n=r==null?0:r.length;for(this.clear();++t<n;){var i=r[t];this.set(i[0],i[1])}}ur.prototype.clear=yE;ur.prototype.delete=xE;ur.prototype.get=wE;ur.prototype.has=CE;ur.prototype.set=PE;var TE=200;function SE(r,t){var n=this.__data__;if(n instanceof lr){var i=n.__data__;if(!Ro||i.length<TE-1)return i.push([r,t]),this.size=++n.size,this;n=this.__data__=new ur(i)}return n.set(r,t),this.size=n.size,this}function Rr(r){var t=this.__data__=new lr(r);this.size=t.size}Rr.prototype.clear=FM;Rr.prototype.delete=HM;Rr.prototype.get=BM;Rr.prototype.has=$M;Rr.prototype.set=SE;var ME="__lodash_hash_undefined__";function EE(r){return this.__data__.set(r,ME),this}function OE(r){return this.__data__.has(r)}function ko(r){var t=-1,n=r==null?0:r.length;for(this.__data__=new ur;++t<n;)this.add(r[t])}ko.prototype.add=ko.prototype.push=EE;ko.prototype.has=OE;function AE(r,t){for(var n=-1,i=r==null?0:r.length;++n<i;)if(t(r[n],n,r))return!0;return!1}function Ly(r,t){return r.has(t)}var RE=1,IE=2;function jy(r,t,n,i,e,a){var o=n&RE,s=r.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(r),f=a.get(t);if(u&&f)return u==t&&f==r;var h=-1,c=!0,d=n&IE?new ko:void 0;for(a.set(r,t),a.set(t,r);++h<s;){var v=r[h],g=t[h];if(i)var m=o?i(g,v,h,t,r,a):i(v,g,h,r,t,a);if(m!==void 0){if(m)continue;c=!1;break}if(d){if(!AE(t,function(p,_){if(!Ly(d,_)&&(v===p||e(v,p,n,i,a)))return d.push(_)})){c=!1;break}}else if(!(v===g||e(v,g,n,i,a))){c=!1;break}}return a.delete(r),a.delete(t),c}var kE=sr.Uint8Array,Uv=kE;function DE(r){var t=-1,n=Array(r.size);return r.forEach(function(i,e){n[++t]=[e,i]}),n}function pc(r){var t=-1,n=Array(r.size);return r.forEach(function(i){n[++t]=i}),n}var LE=1,jE=2,NE="[object Boolean]",zE="[object Date]",FE="[object Error]",HE="[object Map]",BE="[object Number]",$E="[object RegExp]",WE="[object Set]",GE="[object String]",VE="[object Symbol]",ZE="[object ArrayBuffer]",UE="[object DataView]",Kv=Fn?Fn.prototype:void 0,mu=Kv?Kv.valueOf:void 0;function KE(r,t,n,i,e,a,o){switch(n){case UE:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case ZE:return!(r.byteLength!=t.byteLength||!a(new Uv(r),new Uv(t)));case NE:case zE:case BE:return gc(+r,+t);case FE:return r.name==t.name&&r.message==t.message;case $E:case GE:return r==t+"";case HE:var s=DE;case WE:var l=i&LE;if(s||(s=pc),r.size!=t.size&&!l)return!1;var u=o.get(r);if(u)return u==t;i|=jE,o.set(r,t);var f=jy(s(r),s(t),i,e,a,o);return o.delete(r),f;case VE:if(mu)return mu.call(r)==mu.call(t)}return!1}function Ny(r,t){for(var n=-1,i=t.length,e=r.length;++n<i;)r[e+n]=t[n];return r}var YE=Array.isArray,rr=YE;function qE(r,t,n){var i=t(r);return rr(r)?i:Ny(i,n(r))}function XE(r,t){for(var n=-1,i=r==null?0:r.length,e=0,a=[];++n<i;){var o=r[n];t(o,n,r)&&(a[e++]=o)}return a}function JE(){return[]}var QE=Object.prototype,eO=QE.propertyIsEnumerable,Yv=Object.getOwnPropertySymbols,tO=Yv?function(r){return r==null?[]:(r=Object(r),XE(Yv(r),function(t){return eO.call(r,t)}))}:JE,nO=tO;function rO(r,t){for(var n=-1,i=Array(r);++n<r;)i[n]=t(n);return i}var iO="[object Arguments]";function qv(r){return na(r)&&pa(r)==iO}var zy=Object.prototype,aO=zy.hasOwnProperty,oO=zy.propertyIsEnumerable,sO=qv(function(){return arguments}())?qv:function(r){return na(r)&&aO.call(r,"callee")&&!oO.call(r,"callee")},mc=sO;function lO(){return!1}var Fy=typeof Jn=="object"&&Jn&&!Jn.nodeType&&Jn,Xv=Fy&&typeof Qn=="object"&&Qn&&!Qn.nodeType&&Qn,uO=Xv&&Xv.exports===Fy,Jv=uO?sr.Buffer:void 0,fO=Jv?Jv.isBuffer:void 0,hO=fO||lO,Zf=hO,cO=9007199254740991,dO=/^(?:0|[1-9]\d*)$/;function _c(r,t){var n=typeof r;return t=t==null?cO:t,!!t&&(n=="number"||n!="symbol"&&dO.test(r))&&r>-1&&r%1==0&&r<t}var vO=9007199254740991;function yc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=vO}var gO="[object Arguments]",pO="[object Array]",mO="[object Boolean]",_O="[object Date]",yO="[object Error]",bO="[object Function]",xO="[object Map]",wO="[object Number]",CO="[object Object]",PO="[object RegExp]",TO="[object Set]",SO="[object String]",MO="[object WeakMap]",EO="[object ArrayBuffer]",OO="[object DataView]",AO="[object Float32Array]",RO="[object Float64Array]",IO="[object Int8Array]",kO="[object Int16Array]",DO="[object Int32Array]",LO="[object Uint8Array]",jO="[object Uint8ClampedArray]",NO="[object Uint16Array]",zO="[object Uint32Array]",Qe={};Qe[AO]=Qe[RO]=Qe[IO]=Qe[kO]=Qe[DO]=Qe[LO]=Qe[jO]=Qe[NO]=Qe[zO]=!0;Qe[gO]=Qe[pO]=Qe[EO]=Qe[mO]=Qe[OO]=Qe[_O]=Qe[yO]=Qe[bO]=Qe[xO]=Qe[wO]=Qe[CO]=Qe[PO]=Qe[TO]=Qe[SO]=Qe[MO]=!1;function FO(r){return na(r)&&yc(r.length)&&!!Qe[pa(r)]}function HO(r){return function(t){return r(t)}}var Hy=typeof Jn=="object"&&Jn&&!Jn.nodeType&&Jn,co=Hy&&typeof Qn=="object"&&Qn&&!Qn.nodeType&&Qn,BO=co&&co.exports===Hy,_u=BO&&w_.process,$O=function(){try{var r=co&&co.require&&co.require("util").types;return r||_u&&_u.binding&&_u.binding("util")}catch{}}(),Qv=$O,eg=Qv&&Qv.isTypedArray,WO=eg?HO(eg):FO,By=WO,GO=Object.prototype,VO=GO.hasOwnProperty;function ZO(r,t){var n=rr(r),i=!n&&mc(r),e=!n&&!i&&Zf(r),a=!n&&!i&&!e&&By(r),o=n||i||e||a,s=o?rO(r.length,String):[],l=s.length;for(var u in r)(t||VO.call(r,u))&&!(o&&(u=="length"||e&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||_c(u,l)))&&s.push(u);return s}var UO=Object.prototype;function KO(r){var t=r&&r.constructor,n=typeof t=="function"&&t.prototype||UO;return r===n}var YO=XP(Object.keys,Object),qO=YO,XO=Object.prototype,JO=XO.hasOwnProperty;function QO(r){if(!KO(r))return qO(r);var t=[];for(var n in Object(r))JO.call(r,n)&&n!="constructor"&&t.push(n);return t}function eA(r){return r!=null&&yc(r.length)&&!Dy(r)}function tA(r){return eA(r)?ZO(r):QO(r)}function tg(r){return qE(r,tA,nO)}var nA=1,rA=Object.prototype,iA=rA.hasOwnProperty;function aA(r,t,n,i,e,a){var o=n&nA,s=tg(r),l=s.length,u=tg(t),f=u.length;if(l!=f&&!o)return!1;for(var h=l;h--;){var c=s[h];if(!(o?c in t:iA.call(t,c)))return!1}var d=a.get(r),v=a.get(t);if(d&&v)return d==t&&v==r;var g=!0;a.set(r,t),a.set(t,r);for(var m=o;++h<l;){c=s[h];var p=r[c],_=t[c];if(i)var b=o?i(_,p,c,t,r,a):i(p,_,c,r,t,a);if(!(b===void 0?p===_||e(p,_,n,i,a):b)){g=!1;break}m||(m=c=="constructor")}if(g&&!m){var x=r.constructor,C=t.constructor;x!=C&&"constructor"in r&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof C=="function"&&C instanceof C)&&(g=!1)}return a.delete(r),a.delete(t),g}var oA=mi(sr,"DataView"),Uf=oA,sA=mi(sr,"Promise"),Kf=sA,lA=mi(sr,"Set"),Wi=lA,uA=mi(sr,"WeakMap"),Yf=uA,ng="[object Map]",fA="[object Object]",rg="[object Promise]",ig="[object Set]",ag="[object WeakMap]",og="[object DataView]",hA=pi(Uf),cA=pi(Ro),dA=pi(Kf),vA=pi(Wi),gA=pi(Yf),qr=pa;(Uf&&qr(new Uf(new ArrayBuffer(1)))!=og||Ro&&qr(new Ro)!=ng||Kf&&qr(Kf.resolve())!=rg||Wi&&qr(new Wi)!=ig||Yf&&qr(new Yf)!=ag)&&(qr=function(r){var t=pa(r),n=t==fA?r.constructor:void 0,i=n?pi(n):"";if(i)switch(i){case hA:return og;case cA:return ng;case dA:return rg;case vA:return ig;case gA:return ag}return t});var sg=qr,pA=1,lg="[object Arguments]",ug="[object Array]",ls="[object Object]",mA=Object.prototype,fg=mA.hasOwnProperty;function _A(r,t,n,i,e,a){var o=rr(r),s=rr(t),l=o?ug:sg(r),u=s?ug:sg(t);l=l==lg?ls:l,u=u==lg?ls:u;var f=l==ls,h=u==ls,c=l==u;if(c&&Zf(r)){if(!Zf(t))return!1;o=!0,f=!1}if(c&&!f)return a||(a=new Rr),o||By(r)?jy(r,t,n,i,e,a):KE(r,t,l,n,i,e,a);if(!(n&pA)){var d=f&&fg.call(r,"__wrapped__"),v=h&&fg.call(t,"__wrapped__");if(d||v){var g=d?r.value():r,m=v?t.value():t;return a||(a=new Rr),e(g,m,n,i,a)}}return c?(a||(a=new Rr),aA(r,t,n,i,e,a)):!1}function $y(r,t,n,i,e){return r===t?!0:r==null||t==null||!na(r)&&!na(t)?r!==r&&t!==t:_A(r,t,n,i,$y,e)}function yA(r,t){return $y(r,t)}var bA={align:Object,target:[Object,Function],onAlign:Function,monitorBufferTime:Number,monitorWindowResize:Boolean,disabled:Boolean};function hg(r){return typeof r!="function"?null:r()}function cg(r){return ft(r)!=="object"||!r?null:r}var xA=Se({name:"Align",props:bA,emits:["align"],setup:function(t,n){var i=n.expose,e=n.slots,a=ee({}),o=ee(),s=RM(function(){var g=t.disabled,m=t.target,p=t.align,_=t.onAlign;if(!g&&m&&o.value){var b=o.value,x,C=hg(m),y=cg(m);a.value.element=C,a.value.point=y,a.value.align=p;var w=document,P=w.activeElement;return C&&EM(C)?x=vc(b,C,p):y&&(x=MM(b,y,p)),AM(P,b),_&&x&&_(b,x),!0}return!1},q(function(){return t.monitorBufferTime})),l=Ve(s,2),u=l[0],f=l[1],h=ee({cancel:function(){}}),c=ee({cancel:function(){}}),d=function(){var m=t.target,p=hg(m),_=cg(m);o.value!==c.value.element&&(c.value.cancel(),c.value.element=o.value,c.value.cancel=Vv(o.value,u)),(a.value.element!==p||!OM(a.value.point,_)||!yA(a.value.align,t.align))&&(u(),h.value.element!==p&&(h.value.cancel(),h.value.element=p,h.value.cancel=Vv(p,u)))};bt(function(){gn(function(){d()})}),da(function(){gn(function(){d()})}),ke(function(){return t.disabled},function(g){g?f():u()},{immediate:!0,flush:"post"});var v=ee(null);return ke(function(){return t.monitorWindowResize},function(g){g?v.value||(v.value=Ja(window,"resize",u)):v.value&&(v.value.remove(),v.value=null)},{flush:"post"}),vi(function(){h.value.cancel(),c.value.cancel(),v.value&&v.value.remove(),f()}),i({forceAlign:function(){return u(!0)}}),function(){var g=e==null?void 0:e.default();return g?Sn(g[0],{ref:o},!0,!0):null}}}),wA=Se({name:"PopupInner",inheritAttrs:!1,props:uc,emits:["mouseenter","mouseleave","mousedown","touchstart","align"],setup:function(t,n){var i=n.expose,e=n.attrs,a=n.slots,o=ee(),s=ee(),l=ee(),u=eM(ao(t,"stretch")),f=Ve(u,2),h=f[0],c=f[1],d=function(){t.stretch&&c(t.getRootDomNode())},v=ee(!1),g;ke(function(){return t.visible},function(j){clearTimeout(g),j?g=setTimeout(function(){v.value=t.visible}):v.value=!1},{immediate:!0});var m=QS(v,d),p=Ve(m,2),_=p[0],b=p[1],x=ee(),C=function(){return t.point?t.point:t.getRootDomNode},y=function(){var M;(M=o.value)===null||M===void 0||M.forceAlign()},w=function(M,D){var R,I=t.getClassNameFromAlign(D),z=l.value;l.value!==I&&(l.value=I),_.value==="align"&&(z!==I?Promise.resolve().then(function(){y()}):b(function(){var F;(F=x.value)===null||F===void 0||F.call(x)}),(R=t.onAlign)===null||R===void 0||R.call(t,M,D))},P=q(function(){var j=ft(t.animation)==="object"?t.animation:Py(t);return["onAfterEnter","onAfterLeave"].forEach(function(M){var D=j[M];j[M]=function(R){b(),_.value="stable",D==null||D(R)}}),j}),T=function(){return new Promise(function(M){x.value=M})};ke([P,_],function(){!P.value&&_.value==="motion"&&b()},{immediate:!0}),i({forceAlign:y,getElement:function(){return s.value.$el||s.value}});var L=q(function(){var j;return!(((j=t.align)===null||j===void 0?void 0:j.points)&&(_.value==="align"||_.value==="stable"))});return function(){var j,M=t.zIndex,D=t.align,R=t.prefixCls,I=t.destroyPopupOnHide,z=t.onMouseenter,F=t.onMouseleave,O=t.onTouchstart,A=O===void 0?function(){}:O,$=t.onMousedown,J=_.value,Z=V(V(V({},h.value),{zIndex:M,opacity:J==="motion"||J==="stable"||!v.value?null:0,pointerEvents:J==="stable"?null:"none"}),e.style),ae=pn((j=a.default)===null||j===void 0?void 0:j.call(a,{visible:t.visible}));ae.length>1&&(ae=E("div",{class:"".concat(R,"-content")},[ae]));var U=qe(R,e.class,l.value),W=v.value||!t.visible,ne=W?U_(P.value.name,P.value):{};return E(ga,_e(_e({ref:s},ne),{},{onBeforeEnter:T}),{default:function(){return!I||t.visible?Rl(E(xA,{target:C(),key:"popup",ref:o,monitorWindowResize:!0,disabled:L.value,align:D,onAlign:w},{default:function(){return E("div",_e(_e({class:U,onMouseenter:z,onMouseleave:F,onMousedown:Fd($,["capture"])},ue({},Ni?"onTouchstartPassive":"onTouchstart",Fd(A,["capture"]))),{},{style:Z}),[ae])}}),[[Vh,v.value]]):null}})}}}),CA=Se({name:"Popup",inheritAttrs:!1,props:qS,setup:function(t,n){var i=n.attrs,e=n.slots,a=n.expose,o=ee(!1),s=ee(!1),l=ee();return ke([function(){return t.visible},function(){return t.mobile}],function(){o.value=t.visible,t.visible&&t.mobile&&(s.value=!0)},{immediate:!0,flush:"post"}),a({forceAlign:function(){var f;(f=l.value)===null||f===void 0||f.forceAlign()},getElement:function(){var f;return(f=l.value)===null||f===void 0?void 0:f.getElement()}}),function(){var u=V(V(V({},t),i),{visible:o.value}),f=s.value?E(XS,_e(_e({},u),{},{mobile:t.mobile,ref:l}),{default:e.default}):E(wA,_e(_e({},u),{},{ref:l}),{default:e.default});return E("div",null,[E(Ty,u,null),f])}}});function PA(r,t,n){return n?r[0]===t[0]:r[0]===t[0]&&r[1]===t[1]}function dg(r,t,n){var i=r[t]||{};return V(V({},i),n)}function TA(r,t,n,i){for(var e=n.points,a=Object.keys(r),o=0;o<a.length;o+=1){var s=a[o];if(PA(r[s].points,e,i))return"".concat(t,"-placement-").concat(s)}return""}var SA={methods:{setState:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=typeof t=="function"?t(this.$data,this.$props):t;if(this.getDerivedStateFromProps){var e=this.getDerivedStateFromProps(i1(this),V(V({},this.$data),i));if(e===null)return;i=V(V({},i),e||{})}V(this.$data,i),this._.isMounted&&this.$forceUpdate(),gn(function(){n&&n()})},__emit:function(){var t=[].slice.call(arguments,0),n=t[0];n="on".concat(n[0].toUpperCase()).concat(n.substring(1));var i=this.$props[n]||this.$attrs[n];if(t.length&&i)if(Array.isArray(i))for(var e=0,a=i.length;e<a;e++)i[e].apply(i,Bt(t.slice(1)));else i.apply(void 0,Bt(t.slice(1)))}}},MA=Symbol("TriggerContextKey"),EA=function(){return _t(MA,{setPortal:function(){},popPortal:!1})},Wy=Symbol("PortalContextKey"),Gy=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inTriggerContext:!0};Ut(Wy,{inTriggerContext:n.inTriggerContext,shouldRender:q(function(){var i=t||{},e=i.sPopupVisible,a=i.popupRef,o=i.forceRender,s=i.autoDestroy,l=!1;return(e||a||o)&&(l=!0),!e&&s&&(l=!1),l})})},OA=function(){Gy({},{inTriggerContext:!1});var t=_t(Wy,{shouldRender:q(function(){return!1}),inTriggerContext:!1});return{shouldRender:q(function(){return t.shouldRender.value||t.inTriggerContext===!1})}},vg=Se({name:"Portal",inheritAttrs:!1,props:{getContainer:me.func.isRequired,didUpdate:Function},setup:function(t,n){var i=n.slots,e=!0,a,o=OA(),s=o.shouldRender;Vm(function(){e=!1,s.value&&(a=t.getContainer())});var l=ke(s,function(){s.value&&!a&&(a=t.getContainer()),a&&l()});return da(function(){gn(function(){var u;s.value&&((u=t.didUpdate)===null||u===void 0||u.call(t,t))})}),en(function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),function(){var u;return s.value?e?(u=i.default)===null||u===void 0?void 0:u.call(i):a?E(Hh,{to:a},i):null:null}}});function gg(){}function AA(){return""}function RA(r){return r?r.ownerDocument:window.document}var IA=["onClick","onMousedown","onTouchstart","onMouseenter","onMouseleave","onFocus","onBlur","onContextmenu"],bc=Se({name:"Trigger",mixins:[SA],inheritAttrs:!1,props:{action:me.oneOfType([me.string,me.arrayOf(me.string)]).def([]),showAction:me.any.def([]),hideAction:me.any.def([]),getPopupClassNameFromAlign:me.any.def(AA),onPopupVisibleChange:Function,afterPopupVisibleChange:me.func.def(gg),popup:me.any,popupStyle:{type:Object,default:void 0},prefixCls:me.string.def("rc-trigger-popup"),popupClassName:me.string.def(""),popupPlacement:String,builtinPlacements:me.object,popupTransitionName:String,popupAnimation:me.any,mouseEnterDelay:me.number.def(0),mouseLeaveDelay:me.number.def(.1),zIndex:Number,focusDelay:me.number.def(0),blurDelay:me.number.def(.15),getPopupContainer:Function,getDocument:me.func.def(RA),forceRender:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},popupAlign:me.object.def(function(){return{}}),popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},maskTransitionName:String,maskAnimation:String,stretch:String,alignPoint:{type:Boolean,default:void 0},autoDestroy:{type:Boolean,default:!1},mobile:Object,getTriggerDOMNode:Function},setup:function(t){var n=q(function(){var l=t.popupPlacement,u=t.popupAlign,f=t.builtinPlacements;return l&&f?dg(f,l,u):u}),i=EA(),e=i.setPortal,a=i.popPortal,o=ee(null),s=function(u){o.value=u};return{popPortal:a,setPortal:e,vcTriggerContext:_t("vcTriggerContext",{}),popupRef:o,setPopupRef:s,triggerRef:ee(null),align:n,focusTime:null,clickOutsideHandler:null,contextmenuOutsideHandler1:null,contextmenuOutsideHandler2:null,touchOutsideHandler:null,attachId:null,delayTimer:null,hasPopupMouseDown:!1,preClickTime:null,preTouchTime:null,mouseDownTimeout:null,childOriginEvents:{}}},data:function(){var t=this,n,i,e=this.$props,a;return this.popupVisible!==void 0?a=!!e.popupVisible:a=!!e.defaultPopupVisible,IA.forEach(function(o){t["fire".concat(o)]=function(s){t.fireEvents(o,s)}}),(i=(n=this).setPortal)===null||i===void 0||i.call(n,E(vg,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},{default:this.getComponent})),{prevPopupVisible:a,sPopupVisible:a,point:null}},watch:{popupVisible:function(t){t!==void 0&&(this.prevPopupVisible=this.sPopupVisible,this.sPopupVisible=t)}},created:function(){Ut("vcTriggerContext",{onPopupMouseDown:this.onPopupMouseDown}),Gy(this)},deactivated:function(){this.setPopupVisible(!1)},mounted:function(){var t=this;this.$nextTick(function(){t.updatedCal()})},updated:function(){var t=this;this.$nextTick(function(){t.updatedCal()})},beforeUnmount:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),vt.cancel(this.attachId)},methods:{updatedCal:function(){var t=this.$props,n=this.$data;if(n.sPopupVisible){var i;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextmenuToShow())&&(i=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Ja(i,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(i=i||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Ja(i,"touchstart",this.onDocumentClick,Ni?{passive:!1}:!1)),!this.contextmenuOutsideHandler1&&this.isContextmenuToShow()&&(i=i||t.getDocument(this.getRootDomNode()),this.contextmenuOutsideHandler1=Ja(i,"scroll",this.onContextmenuClose)),!this.contextmenuOutsideHandler2&&this.isContextmenuToShow()&&(this.contextmenuOutsideHandler2=Ja(window,"blur",this.onContextmenuClose))}else this.clearOutsideHandler()},onMouseenter:function(t){var n=this.$props.mouseEnterDelay;this.fireEvents("onMouseenter",t),this.delaySetPopupVisible(!0,n,n?null:t)},onMouseMove:function(t){this.fireEvents("onMousemove",t),this.setPoint(t)},onMouseleave:function(t){this.fireEvents("onMouseleave",t),this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onPopupMouseenter:function(){this.clearDelayTimer()},onPopupMouseleave:function(t){var n;t&&t.relatedTarget&&!t.relatedTarget.setTimeout&&Ri((n=this.popupRef)===null||n===void 0?void 0:n.getElement(),t.relatedTarget)||this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onFocus:function(t){this.fireEvents("onFocus",t),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.$props.focusDelay))},onMousedown:function(t){this.fireEvents("onMousedown",t),this.preClickTime=Date.now()},onTouchstart:function(t){this.fireEvents("onTouchstart",t),this.preTouchTime=Date.now()},onBlur:function(t){Ri(t.target,t.relatedTarget||document.activeElement)||(this.fireEvents("onBlur",t),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.$props.blurDelay))},onContextmenu:function(t){t.preventDefault(),this.fireEvents("onContextmenu",t),this.setPopupVisible(!0,t)},onContextmenuClose:function(){this.isContextmenuToShow()&&this.close()},onClick:function(t){if(this.fireEvents("onClick",t),this.focusTime){var n;if(this.preClickTime&&this.preTouchTime?n=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?n=this.preClickTime:this.preTouchTime&&(n=this.preTouchTime),Math.abs(n-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,this.isClickToShow()&&(this.isClickToHide()||this.isBlurToHide())&&t&&t.preventDefault&&t.preventDefault(),t&&t.domEvent&&t.domEvent.preventDefault();var i=!this.$data.sPopupVisible;(this.isClickToHide()&&!i||i&&this.isClickToShow())&&this.setPopupVisible(!this.$data.sPopupVisible,t)},onPopupMouseDown:function(){var t=this,n=this.vcTriggerContext,i=n===void 0?{}:n;this.hasPopupMouseDown=!0,clearTimeout(this.mouseDownTimeout),this.mouseDownTimeout=setTimeout(function(){t.hasPopupMouseDown=!1},0),i.onPopupMouseDown&&i.onPopupMouseDown.apply(i,arguments)},onDocumentClick:function(t){if(!(this.$props.mask&&!this.$props.maskClosable)){var n=t.target,i=this.getRootDomNode(),e=this.getPopupDomNode();(!Ri(i,n)||this.isContextMenuOnly())&&!Ri(e,n)&&!this.hasPopupMouseDown&&this.delaySetPopupVisible(!1,.1)}},getPopupDomNode:function(){var t;return((t=this.popupRef)===null||t===void 0?void 0:t.getElement())||null},getRootDomNode:function(){var t=this.$props.getTriggerDOMNode;if(t)return t(this.triggerRef);try{var n=To(this.triggerRef);if(n)return n}catch{}return To(this)},handleGetPopupClassFromAlign:function(t){var n=[],i=this.$props,e=i.popupPlacement,a=i.builtinPlacements,o=i.prefixCls,s=i.alignPoint,l=i.getPopupClassNameFromAlign;return e&&a&&n.push(TA(a,o,t,s)),l&&n.push(l(t)),n.join(" ")},getPopupAlign:function(){var t=this.$props,n=t.popupPlacement,i=t.popupAlign,e=t.builtinPlacements;return n&&e?dg(e,n,i):i},getComponent:function(){var t=this,n={};this.isMouseEnterToShow()&&(n.onMouseenter=this.onPopupMouseenter),this.isMouseLeaveToHide()&&(n.onMouseleave=this.onPopupMouseleave),n.onMousedown=this.onPopupMouseDown,n[Ni?"onTouchstartPassive":"onTouchstart"]=this.onPopupMouseDown;var i=this.handleGetPopupClassFromAlign,e=this.getRootDomNode,a=this.getContainer,o=this.$attrs,s=this.$props,l=s.prefixCls,u=s.destroyPopupOnHide,f=s.popupClassName,h=s.popupAnimation,c=s.popupTransitionName,d=s.popupStyle,v=s.mask,g=s.maskAnimation,m=s.maskTransitionName,p=s.zIndex,_=s.stretch,b=s.alignPoint,x=s.mobile,C=s.forceRender,y=this.$data,w=y.sPopupVisible,P=y.point,T=V(V({prefixCls:l,destroyPopupOnHide:u,visible:w,point:b?P:null,align:this.align,animation:h,getClassNameFromAlign:i,stretch:_,getRootDomNode:e,mask:v,zIndex:p,transitionName:c,maskAnimation:g,maskTransitionName:m,getContainer:a,class:f,style:d,onAlign:o.onPopupAlign||gg},n),{ref:this.setPopupRef,mobile:x,forceRender:C});return E(CA,T,{default:this.$slots.popup||function(){return a1(t,"popup")}})},attachParent:function(t){var n=this;vt.cancel(this.attachId);var i=this.$props,e=i.getPopupContainer,a=i.getDocument,o=this.getRootDomNode(),s;e?(o||e.length===0)&&(s=e(o)):s=a(this.getRootDomNode()).body,s?s.appendChild(t):this.attachId=vt(function(){n.attachParent(t)})},getContainer:function(){var t=this.$props,n=t.getDocument,i=n(this.getRootDomNode()).createElement("div");return i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",this.attachParent(i),i},setPopupVisible:function(t,n){var i=this.alignPoint,e=this.sPopupVisible,a=this.onPopupVisibleChange;this.clearDelayTimer(),e!==t&&(n1(this,"popupVisible")||this.setState({sPopupVisible:t,prevPopupVisible:e}),a&&a(t)),i&&n&&t&&this.setPoint(n)},setPoint:function(t){var n=this.$props.alignPoint;!n||!t||this.setState({point:{pageX:t.pageX,pageY:t.pageY}})},handlePortalUpdate:function(){this.prevPopupVisible!==this.sPopupVisible&&this.afterPopupVisibleChange(this.sPopupVisible)},delaySetPopupVisible:function(t,n,i){var e=this,a=n*1e3;if(this.clearDelayTimer(),a){var o=i?{pageX:i.pageX,pageY:i.pageY}:null;this.delayTimer=KS(function(){e.setPopupVisible(t,o),e.clearDelayTimer()},a)}else this.setPopupVisible(t,i)},clearDelayTimer:function(){this.delayTimer&&(US(this.delayTimer),this.delayTimer=null)},clearOutsideHandler:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextmenuOutsideHandler1&&(this.contextmenuOutsideHandler1.remove(),this.contextmenuOutsideHandler1=null),this.contextmenuOutsideHandler2&&(this.contextmenuOutsideHandler2.remove(),this.contextmenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},createTwoChains:function(t){var n=function(){},i=Zd(this);return this.childOriginEvents[t]&&i[t]?this["fire".concat(t)]:(n=this.childOriginEvents[t]||i[t]||n,n)},isClickToShow:function(){var t=this.$props,n=t.action,i=t.showAction;return n.indexOf("click")!==-1||i.indexOf("click")!==-1},isContextMenuOnly:function(){var t=this.$props.action;return t==="contextmenu"||t.length===1&&t[0]==="contextmenu"},isContextmenuToShow:function(){var t=this.$props,n=t.action,i=t.showAction;return n.indexOf("contextmenu")!==-1||i.indexOf("contextmenu")!==-1},isClickToHide:function(){var t=this.$props,n=t.action,i=t.hideAction;return n.indexOf("click")!==-1||i.indexOf("click")!==-1},isMouseEnterToShow:function(){var t=this.$props,n=t.action,i=t.showAction;return n.indexOf("hover")!==-1||i.indexOf("mouseenter")!==-1},isMouseLeaveToHide:function(){var t=this.$props,n=t.action,i=t.hideAction;return n.indexOf("hover")!==-1||i.indexOf("mouseleave")!==-1},isFocusToShow:function(){var t=this.$props,n=t.action,i=t.showAction;return n.indexOf("focus")!==-1||i.indexOf("focus")!==-1},isBlurToHide:function(){var t=this.$props,n=t.action,i=t.hideAction;return n.indexOf("focus")!==-1||i.indexOf("blur")!==-1},forcePopupAlign:function(){var t;this.$data.sPopupVisible&&((t=this.popupRef)===null||t===void 0||t.forceAlign())},fireEvents:function(t,n){this.childOriginEvents[t]&&this.childOriginEvents[t](n);var i=this.$props[t]||this.$attrs[t];i&&i(n)},close:function(){this.setPopupVisible(!1)}},render:function(){var t=this,n=this.$attrs,i=ra(r1(this)),e=this.$props.alignPoint,a=i[0];this.childOriginEvents=Zd(a);var o={key:"trigger"};this.isContextmenuToShow()?o.onContextmenu=this.onContextmenu:o.onContextmenu=this.createTwoChains("onContextmenu"),this.isClickToHide()||this.isClickToShow()?(o.onClick=this.onClick,o.onMousedown=this.onMousedown,o[Ni?"onTouchstartPassive":"onTouchstart"]=this.onTouchstart):(o.onClick=this.createTwoChains("onClick"),o.onMousedown=this.createTwoChains("onMousedown"),o[Ni?"onTouchstartPassive":"onTouchstart"]=this.createTwoChains("onTouchstart")),this.isMouseEnterToShow()?(o.onMouseenter=this.onMouseenter,e&&(o.onMousemove=this.onMouseMove)):o.onMouseenter=this.createTwoChains("onMouseenter"),this.isMouseLeaveToHide()?o.onMouseleave=this.onMouseleave:o.onMouseleave=this.createTwoChains("onMouseleave"),this.isFocusToShow()||this.isBlurToHide()?(o.onFocus=this.onFocus,o.onBlur=this.onBlur):(o.onFocus=this.createTwoChains("onFocus"),o.onBlur=function(f){f&&(!f.relatedTarget||!Ri(f.target,f.relatedTarget))&&t.createTwoChains("onBlur")(f)});var s=qe(a&&a.props&&a.props.class,n.class);s&&(o.class=s);var l=Sn(a,V(V({},o),{ref:"triggerRef"}),!0,!0);if(this.popPortal)return l;var u=E(vg,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},{default:this.getComponent});return E(Ze,null,[u,l])}}),Pe={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var n=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||n>=Pe.F1&&n<=Pe.F12)return!1;switch(n){case Pe.ALT:case Pe.CAPS_LOCK:case Pe.CONTEXT_MENU:case Pe.CTRL:case Pe.DOWN:case Pe.END:case Pe.ESC:case Pe.HOME:case Pe.INSERT:case Pe.LEFT:case Pe.MAC_FF_META:case Pe.META:case Pe.NUMLOCK:case Pe.NUM_CENTER:case Pe.PAGE_DOWN:case Pe.PAGE_UP:case Pe.PAUSE:case Pe.PRINT_SCREEN:case Pe.RIGHT:case Pe.SHIFT:case Pe.UP:case Pe.WIN_KEY:case Pe.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Pe.ZERO&&t<=Pe.NINE||t>=Pe.NUM_ZERO&&t<=Pe.NUM_MULTIPLY||t>=Pe.A&&t<=Pe.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Pe.SPACE:case Pe.QUESTION_MARK:case Pe.NUM_PLUS:case Pe.NUM_MINUS:case Pe.NUM_PERIOD:case Pe.NUM_DIVISION:case Pe.SEMICOLON:case Pe.DASH:case Pe.EQUALS:case Pe.COMMA:case Pe.PERIOD:case Pe.SLASH:case Pe.APOSTROPHE:case Pe.SINGLE_QUOTE:case Pe.OPEN_SQUARE_BRACKET:case Pe.BACKSLASH:case Pe.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},wn=Pe,Vy=Symbol("OverflowContextProviderKey"),qf=Se({name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup:function(t,n){var i=n.slots;return Ut(Vy,q(function(){return t.value})),function(){var e;return(e=i.default)===null||e===void 0?void 0:e.call(i)}}}),kA=function(){return _t(Vy,q(function(){return null}))},DA=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},yi=void 0,Fs=Se({name:"Item",props:{prefixCls:String,item:me.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:me.any,invalidate:Boolean},setup:function(t,n){var i=n.slots,e=n.expose,a=q(function(){return t.responsive&&!t.display}),o=ee();e({itemNodeRef:o});function s(l){t.registerSize(t.itemKey,l)}return vi(function(){s(null)}),function(){var l,u=t.prefixCls,f=t.invalidate,h=t.item,c=t.renderItem,d=t.responsive;t.registerSize,t.itemKey,t.display;var v=t.order,g=t.component,m=g===void 0?"div":g,p=DA(t,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"]),_=(l=i.default)===null||l===void 0?void 0:l.call(i),b=c&&h!==yi?c(h):_,x;f||(x={opacity:a.value?0:1,height:a.value?0:yi,overflowY:a.value?"hidden":yi,order:d?v:yi,pointerEvents:a.value?"none":yi,position:a.value?"absolute":yi});var C={};return a.value&&(C["aria-hidden"]=!0),E(So,{disabled:!d,onResize:function(w){var P=w.offsetWidth;s(P)}},{default:function(){return E(m,_e(_e(_e({class:qe(!f&&u),style:x},C),p),{},{ref:o}),{default:function(){return[b]}})}})}}}),yu=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},LA=Se({name:"RawItem",inheritAttrs:!1,props:{component:me.any,title:me.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function}},setup:function(t,n){var i=n.slots,e=n.attrs,a=kA();return function(){var o;if(!a.value){var s=t.component,l=s===void 0?"div":s,u=yu(t,["component"]);return E(l,_e(_e({},u),e),{default:function(){return[(o=i.default)===null||o===void 0?void 0:o.call(i)]}})}var f=a.value,h=f.className,c=yu(f,["className"]),d=e.class,v=yu(e,["class"]);return E(qf,{value:null},{default:function(){return[E(Fs,_e(_e(_e({class:qe(h,d)},c),v),t),i)]}})}}}),jA=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},Zy="responsive",Uy="invalidate";function NA(r){return"+ ".concat(r.length," ...")}var zA=function(){return{id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:me.any,component:String,itemComponent:me.any,onVisibleChange:Function,ssr:String,onMousedown:Function}},Hl=Se({name:"Overflow",inheritAttrs:!1,props:zA(),emits:["visibleChange"],setup:function(t,n){var i=n.attrs,e=n.emit,a=q(function(){return t.ssr==="full"}),o=ee(null),s=q(function(){return o.value||0}),l=ee(new Map),u=ee(0),f=ee(0),h=ee(0),c=ee(null),d=ee(null),v=q(function(){return d.value===null&&a.value?Number.MAX_SAFE_INTEGER:d.value||0}),g=ee(!1),m=q(function(){return"".concat(t.prefixCls,"-item")}),p=q(function(){return Math.max(u.value,f.value)}),_=q(function(){return!!(t.data.length&&t.maxCount===Zy)}),b=q(function(){return t.maxCount===Uy}),x=q(function(){return _.value||typeof t.maxCount=="number"&&t.data.length>t.maxCount}),C=q(function(){var I=t.data;return _.value?o.value===null&&a.value?I=t.data:I=t.data.slice(0,Math.min(t.data.length,s.value/t.itemWidth)):typeof t.maxCount=="number"&&(I=t.data.slice(0,t.maxCount)),I}),y=q(function(){return _.value?t.data.slice(v.value+1):t.data.slice(C.value.length)}),w=function(z,F){var O,A;return typeof t.itemKey=="function"?t.itemKey(z):(A=t.itemKey&&((O=z)===null||O===void 0?void 0:O[t.itemKey]))!==null&&A!==void 0?A:F},P=q(function(){return t.renderItem||function(I){return I}}),T=function(z,F){d.value=z,F||(g.value=z<t.data.length-1,e("visibleChange",z))},L=function(z,F){o.value=F.clientWidth},j=function(z,F){var O=new Map(l.value);F===null?O.delete(z):O.set(z,F),l.value=O},M=function(z,F){u.value=f.value,f.value=F},D=function(z,F){h.value=F},R=function(z){return l.value.get(w(C.value[z],z))};return ke([s,l,f,h,function(){return t.itemKey},C],function(){if(s.value&&p.value&&C.value){var I=h.value,z=C.value.length,F=z-1;if(!z){T(0),c.value=null;return}for(var O=0;O<z;O+=1){var A=R(O);if(A===void 0){T(O-1,!0);break}if(I+=A,F===0&&I<=s.value||O===F-1&&I+R(F)<=s.value){T(F),c.value=null;break}else if(I+p.value>s.value){T(O-1),c.value=I-A-h.value+f.value;break}}t.suffix&&R(0)+h.value>s.value&&(c.value=null)}}),function(){var I=g.value&&!!y.value.length,z=t.itemComponent,F=t.renderRawItem,O=t.renderRawRest,A=t.renderRest,$=t.prefixCls,J=$===void 0?"rc-overflow":$,Z=t.suffix,ae=t.component,U=ae===void 0?"div":ae,W=t.id,ne=t.onMousedown,de=i.class,ge=i.style,ve=jA(i,["class","style"]),ce={};c.value!==null&&_.value&&(ce={position:"absolute",left:"".concat(c.value,"px"),top:0});var Me={prefixCls:m.value,responsive:_.value,component:z,invalidate:b.value},Ce=F?function(G,X){var se=w(G,X);return E(qf,{key:se,value:V(V({},Me),{order:X,item:G,itemKey:se,registerSize:j,display:X<=v.value})},{default:function(){return[F(G,X)]}})}:function(G,X){var se=w(G,X);return E(Fs,_e(_e({},Me),{},{order:X,key:se,item:G,renderItem:P.value,itemKey:se,registerSize:j,display:X<=v.value}),null)},S=function(){return null},k={order:I?v.value:Number.MAX_SAFE_INTEGER,className:"".concat(m.value," ").concat(m.value,"-rest"),registerSize:M,display:I};if(O)O&&(S=function(){return E(qf,{value:V(V({},Me),k)},{default:function(){return[O(y.value)]}})});else{var H=A||NA;S=function(){return E(Fs,_e(_e({},Me),k),{default:function(){return typeof H=="function"?H(y.value):H}})}}var K=function(){return E(U,_e({id:W,class:qe(!b.value&&J,de),style:ge,onMousedown:ne},ve),{default:function(){return[C.value.map(Ce),x.value?S():null,Z&&E(Fs,_e(_e({},Me),{},{order:v.value,class:"".concat(m.value,"-suffix"),registerSize:D,display:!0,style:ce}),{default:function(){return Z}})]}})};return E(So,{disabled:!_.value,onResize:L},{default:K})}}});Hl.Item=LA;Hl.RESPONSIVE=Zy;Hl.INVALIDATE=Uy;var vo=Hl,FA=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4)))};function pg(r,t){var n=t||{},i=n.defaultValue,e=n.value,a=e===void 0?ee():e,o=typeof r=="function"?r():r;a.value!==void 0&&(o=Zs(a)),i!==void 0&&(o=typeof i=="function"?i():i);var s=ee(o),l=ee(o);Ht(function(){var f=a.value!==void 0?a.value:s.value;t.postState&&(f=t.postState(f)),l.value=f});function u(f){var h=l.value;s.value=f,ze(l.value)!==f&&t.onChange&&t.onChange(f,h)}return ke(a,function(){s.value=a.value}),[l,u]}function At(r){var t=typeof r=="function"?r():r,n=ee(t);function i(e){n.value=e}return[n,i]}var HA=["xxxl","xxl","xl","lg","md","sm","xs"],us={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},Vr=new Map,bu=-1,fs={},mg={matchHandlers:{},dispatch:function(t){return fs=t,Vr.forEach(function(n){return n(fs)}),Vr.size>=1},subscribe:function(t){return Vr.size||this.register(),bu+=1,Vr.set(bu,t),t(fs),bu},unsubscribe:function(t){Vr.delete(t),Vr.size||this.unregister()},unregister:function(){var t=this;Object.keys(us).forEach(function(n){var i=us[n],e=t.matchHandlers[i];e==null||e.mql.removeListener(e==null?void 0:e.listener)}),Vr.clear()},register:function(){var t=this;Object.keys(us).forEach(function(n){var i=us[n],e=function(s){var l=s.matches;t.dispatch(V(V({},fs),ue({},n,l)))},a=window.matchMedia(i);a.addListener(e),t.matchHandlers[i]={mql:a,listener:e},e(a)})}};function BA(){var r=ee({}),t=null;return bt(function(){t=mg.subscribe(function(n){r.value=n})}),vi(function(){mg.unsubscribe(t)}),r}var Ky=Symbol("SizeProvider"),$A=function(t){var n=_t("configProvider",xy),i=q(function(){return t.size||n.componentSize});return Ut(Ky,i),i},WA=function(t){var n=t?q(function(){return t.size}):_t(Ky,q(function(){return"default"}));return n};function GA(r){var t=dw();return Ht(function(){t.value=r()},{flush:"sync"}),t}var VA=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:me.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},ZA=Se({name:"AAvatar",inheritAttrs:!1,props:VA(),slots:["icon"],setup:function(t,n){var i=n.slots,e=n.attrs,a=ee(!0),o=ee(!1),s=ee(1),l=ee(null),u=ee(null),f=Dt("avatar",t),h=f.prefixCls,c=WA(),d=q(function(){return t.size==="default"?c.value:t.size}),v=BA(),g=GA(function(){if(ft(t.size)==="object"){var b=HA.find(function(C){return v.value[C]}),x=t.size[b];return x}}),m=function(x){return g.value?{width:"".concat(g.value,"px"),height:"".concat(g.value,"px"),lineHeight:"".concat(g.value,"px"),fontSize:"".concat(x?g.value/2:18,"px")}:{}},p=function(){if(!(!l.value||!u.value)){var x=l.value.offsetWidth,C=u.value.offsetWidth;if(x!==0&&C!==0){var y=t.gap,w=y===void 0?4:y;w*2<C&&(s.value=C-w*2<x?(C-w*2)/x:1)}}},_=function(){var x=t.loadError,C=x==null?void 0:x();C!==!1&&(a.value=!1)};return ke(function(){return t.src},function(){gn(function(){a.value=!0,s.value=1})}),ke(function(){return t.gap},function(){gn(function(){p()})}),bt(function(){gn(function(){p(),o.value=!0})}),function(){var b,x,C=t.shape,y=t.src,w=t.alt,P=t.srcset,T=t.draggable,L=t.crossOrigin,j=li(i,t,"icon"),M=h.value,D=(b={},ue(b,"".concat(e.class),!!e.class),ue(b,M,!0),ue(b,"".concat(M,"-lg"),d.value==="large"),ue(b,"".concat(M,"-sm"),d.value==="small"),ue(b,"".concat(M,"-").concat(C),C),ue(b,"".concat(M,"-image"),y&&a.value),ue(b,"".concat(M,"-icon"),j),b),R=typeof d.value=="number"?{width:"".concat(d.value,"px"),height:"".concat(d.value,"px"),lineHeight:"".concat(d.value,"px"),fontSize:j?"".concat(d.value/2,"px"):"18px"}:{},I=(x=i.default)===null||x===void 0?void 0:x.call(i),z;if(y&&a.value)z=E("img",{draggable:T,src:y,srcset:P,onError:_,alt:w,crossorigin:L},null);else if(j)z=j;else if(o.value||s.value!==1){var F="scale(".concat(s.value,") translateX(-50%)"),O={msTransform:F,WebkitTransform:F,transform:F},A=typeof d.value=="number"?{lineHeight:"".concat(d.value,"px")}:{};z=E(So,{onResize:p},{default:function(){return[E("span",{class:"".concat(M,"-string"),ref:l,style:V(V({},A),O)},[I])]}})}else z=E("span",{class:"".concat(M,"-string"),ref:l,style:{opacity:0}},[I]);return E("span",_e(_e({},e),{},{ref:u,class:D,style:V(V(V({},R),m(!!j)),e.style)}),[z])}}}),Gi=ZA,sn={adjustX:1,adjustY:1},ln=[0,0],Yy={left:{points:["cr","cl"],overflow:sn,offset:[-4,0],targetOffset:ln},right:{points:["cl","cr"],overflow:sn,offset:[4,0],targetOffset:ln},top:{points:["bc","tc"],overflow:sn,offset:[0,-4],targetOffset:ln},bottom:{points:["tc","bc"],overflow:sn,offset:[0,4],targetOffset:ln},topLeft:{points:["bl","tl"],overflow:sn,offset:[0,-4],targetOffset:ln},leftTop:{points:["tr","tl"],overflow:sn,offset:[-4,0],targetOffset:ln},topRight:{points:["br","tr"],overflow:sn,offset:[0,-4],targetOffset:ln},rightTop:{points:["tl","tr"],overflow:sn,offset:[4,0],targetOffset:ln},bottomRight:{points:["tr","br"],overflow:sn,offset:[0,4],targetOffset:ln},rightBottom:{points:["bl","br"],overflow:sn,offset:[4,0],targetOffset:ln},bottomLeft:{points:["tl","bl"],overflow:sn,offset:[0,4],targetOffset:ln},leftBottom:{points:["br","bl"],overflow:sn,offset:[-4,0],targetOffset:ln}},UA={prefixCls:String,id:String,overlayInnerStyle:me.any},KA=Se({name:"Content",props:UA,slots:["overlay"],setup:function(t,n){var i=n.slots;return function(){var e;return E("div",{class:"".concat(t.prefixCls,"-inner"),id:t.id,role:"tooltip",style:t.overlayInnerStyle},[(e=i.overlay)===null||e===void 0?void 0:e.call(i)])}}}),YA=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n};function _g(){}var qA=Se({name:"Tooltip",inheritAttrs:!1,props:{trigger:me.any.def(["hover"]),defaultVisible:{type:Boolean,default:void 0},visible:{type:Boolean,default:void 0},placement:me.string.def("right"),transitionName:String,animation:me.any,afterVisibleChange:me.func.def(function(){}),overlayStyle:{type:Object,default:void 0},overlayClassName:String,prefixCls:me.string.def("rc-tooltip"),mouseEnterDelay:me.number.def(.1),mouseLeaveDelay:me.number.def(.1),getTooltipContainer:Function,destroyTooltipOnHide:{type:Boolean,default:!1},align:me.object.def(function(){return{}}),arrowContent:me.any.def(null),tipId:String,builtinPlacements:me.object,overlayInnerStyle:{type:Object,default:void 0},popupVisible:{type:Boolean,default:void 0},onVisibleChange:Function,onPopupAlign:Function},slots:["arrowContent","overlay"],setup:function(t,n){var i=n.slots,e=n.attrs,a=n.expose,o=ee(),s=function(){var c=t.prefixCls,d=t.tipId,v=t.overlayInnerStyle;return[E("div",{class:"".concat(c,"-arrow"),key:"arrow"},[li(i,t,"arrowContent")]),E(KA,{key:"content",prefixCls:c,id:d,overlayInnerStyle:v},{overlay:i.overlay})]},l=function(){return o.value.getPopupDomNode()};a({getPopupDomNode:l,triggerDOM:o,forcePopupAlign:function(){var c;return(c=o.value)===null||c===void 0?void 0:c.forcePopupAlign()}});var u=ee(!1),f=ee(!1);return Ht(function(){var h=t.destroyTooltipOnHide;if(typeof h=="boolean")u.value=h;else if(h&&ft(h)==="object"){var c=h.keepParent;u.value=c===!0,f.value=c===!1}}),function(){var h=t.overlayClassName,c=t.trigger,d=t.mouseEnterDelay,v=t.mouseLeaveDelay,g=t.overlayStyle,m=t.prefixCls,p=t.afterVisibleChange,_=t.transitionName,b=t.animation,x=t.placement,C=t.align;t.destroyTooltipOnHide;var y=t.defaultVisible,w=t.getTooltipContainer,P=YA(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),T=V({},P);t.visible!==void 0&&(T.popupVisible=t.visible);var L=V(V(V({popupClassName:h,prefixCls:m,action:c,builtinPlacements:Yy,popupPlacement:x,popupAlign:C,getPopupContainer:w,afterPopupVisibleChange:p,popupTransitionName:_,popupAnimation:b,defaultPopupVisible:y,destroyPopupOnHide:u.value,autoDestroy:f.value,mouseLeaveDelay:v,popupStyle:g,mouseEnterDelay:d},T),e),{onPopupVisibleChange:t.onVisibleChange||_g,onPopupAlign:t.onPopupAlign||_g,ref:o,popup:s()});return E(bc,L,{default:i.default})}}}),XA=E_("success","processing","error","default","warning"),qy=E_("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),Xy=function(){return{trigger:[String,Array],visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:void 0},placement:String,color:String,transitionName:String,overlayStyle:{type:Object,default:void 0},overlayClassName:String,openClassName:String,prefixCls:String,mouseEnterDelay:Number,mouseLeaveDelay:Number,getPopupContainer:Function,arrowPointAtCenter:{type:Boolean,default:void 0},autoAdjustOverflow:{type:[Boolean,Object],default:void 0},destroyTooltipOnHide:{type:Boolean,default:void 0},align:{type:Object,default:void 0},builtinPlacements:{type:Object,default:void 0},children:Array,onVisibleChange:Function,"onUpdate:visible":Function}},JA={adjustX:1,adjustY:1},yg={adjustX:0,adjustY:0},QA=[0,0];function bg(r){return typeof r=="boolean"?r?JA:yg:V(V({},yg),r)}function eR(r){var t=r.arrowWidth,n=t===void 0?4:t,i=r.horizontalArrowShift,e=i===void 0?16:i,a=r.verticalArrowShift,o=a===void 0?8:a,s=r.autoAdjustOverflow,l=r.arrowPointAtCenter,u={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(e+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(o+n)]},topRight:{points:["br","tc"],offset:[e+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(o+n)]},bottomRight:{points:["tr","bc"],offset:[e+n,4]},rightBottom:{points:["bl","cr"],offset:[4,o+n]},bottomLeft:{points:["tl","bc"],offset:[-(e+n),4]},leftBottom:{points:["br","cl"],offset:[-4,o+n]}};return Object.keys(u).forEach(function(f){u[f]=l?V(V({},u[f]),{overflow:bg(s),targetOffset:QA}):V(V({},Yy[f]),{overflow:bg(s)}),u[f].ignoreShake=!0}),u}function tR(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=0,n=r.length;t<n;t++)if(r[t]!==void 0)return r[t]}var nR=function(t,n){var i={},e=V({},t);return n.forEach(function(a){t&&a in t&&(i[a]=t[a],delete e[a])}),{picked:i,omitted:e}},xg=new RegExp("^(".concat(qy.join("|"),")(-inverse)?$")),rR=function(){return V(V({},Xy()),{title:me.any})},iR=function(){return{trigger:"hover",transitionName:"zoom-big-fast",align:{},placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0}},aR=Se({name:"ATooltip",inheritAttrs:!1,props:zo(rR(),{trigger:"hover",transitionName:"zoom-big-fast",align:{},placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0}),slots:["title"],setup:function(t,n){var i=n.slots,e=n.emit,a=n.attrs,o=n.expose,s=Dt("tooltip",t),l=s.prefixCls,u=s.getTargetContainer,f=ee(tR([t.visible,t.defaultVisible])),h=ee();bt(function(){Yh(t.defaultVisible===void 0,"Tooltip","'defaultVisible' is deprecated, please use 'v-model:visible'")});var c;ke(function(){return t.visible},function(C){vt.cancel(c),c=vt(function(){f.value=!!C})});var d=function(){var y,w=(y=t.title)!==null&&y!==void 0?y:i.title;return!w&&w!==0},v=function(y){var w=d();t.visible===void 0&&(f.value=w?!1:y),w||(e("update:visible",y),e("visibleChange",y))},g=function(){return h.value.getPopupDomNode()};o({getPopupDomNode:g,visible:f,forcePopupAlign:function(){var y;return(y=h.value)===null||y===void 0?void 0:y.forcePopupAlign()}});var m=q(function(){var C=t.builtinPlacements,y=t.arrowPointAtCenter,w=t.autoAdjustOverflow;return C||eR({arrowPointAtCenter:y,autoAdjustOverflow:w})}),p=function(y){return y||y===""},_=function(y){var w=y.type;if(ft(w)==="object"&&y.props&&((w.__ANT_BUTTON===!0||w==="button")&&p(y.props.disabled)||w.__ANT_SWITCH===!0&&(p(y.props.disabled)||p(y.props.loading)))){var P=nR(o1(y),["position","left","right","top","bottom","float","display","zIndex"]),T=P.picked,L=P.omitted,j=V(V({display:"inline-block"},T),{cursor:"not-allowed",width:y.props&&y.props.block?"100%":null}),M=V(V({},L),{pointerEvents:"none"}),D=Sn(y,{style:M},!0);return E("span",{style:j,class:"".concat(l,"-disabled-compatible-wrapper")},[D])}return y},b=function(){var y,w;return(y=t.title)!==null&&y!==void 0?y:(w=i.title)===null||w===void 0?void 0:w.call(i)},x=function(y,w){var P=m.value,T=Object.keys(P).filter(function(M){return P[M].points[0]===w.points[0]&&P[M].points[1]===w.points[1]})[0];if(!!T){var L=y.getBoundingClientRect(),j={top:"50%",left:"50%"};T.indexOf("top")>=0||T.indexOf("Bottom")>=0?j.top="".concat(L.height-w.offset[1],"px"):(T.indexOf("Top")>=0||T.indexOf("bottom")>=0)&&(j.top="".concat(-w.offset[1],"px")),T.indexOf("left")>=0||T.indexOf("Right")>=0?j.left="".concat(L.width-w.offset[0],"px"):(T.indexOf("right")>=0||T.indexOf("Left")>=0)&&(j.left="".concat(-w.offset[0],"px")),y.style.transformOrigin="".concat(j.left," ").concat(j.top)}};return function(){var C,y,w,P=t.openClassName,T=t.getPopupContainer,L=t.color,j=t.overlayClassName,M=(w=ra((y=i.default)===null||y===void 0?void 0:y.call(i)))!==null&&w!==void 0?w:null;M=M.length===1?M[0]:M;var D=f.value;if(t.visible===void 0&&d()&&(D=!1),!M)return null;var R=_(Dl(M)?M:E("span",null,[M])),I=qe((C={},ue(C,P||"".concat(l.value,"-open"),!0),ue(C,R.props&&R.props.class,R.props&&R.props.class),C)),z=qe(j,ue({},"".concat(l.value,"-").concat(L),L&&xg.test(L))),F,O;L&&!xg.test(L)&&(F={backgroundColor:L},O={backgroundColor:L});var A=V(V(V({},a),t),{prefixCls:l.value,getTooltipContainer:T||u.value,builtinPlacements:m.value,visible:D,ref:h,overlayClassName:z,overlayInnerStyle:F,onVisibleChange:v,onPopupAlign:x});return E(qA,A,{default:function(){return[f.value?Sn(R,{class:I}):R]},arrowContent:function(){return E("span",{class:"".concat(l.value,"-arrow-content"),style:O},null)},overlay:b})}}}),Jy=Ll(aR),oR=function(){return V(V({},Xy()),{content:me.any,title:me.any})},sR=Se({name:"APopover",props:zo(oR(),V(V({},iR()),{trigger:"hover",transitionName:"zoom-big",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1})),setup:function(t,n){var i=n.expose,e=n.slots,a=ee();i({getPopupDomNode:function(){var c,d;return(d=(c=a.value)===null||c===void 0?void 0:c.getPopupDomNode)===null||d===void 0?void 0:d.call(c)}});var o=Dt("popover",t),s=o.prefixCls,l=o.configProvider,u=q(function(){return l.getPrefixCls()}),f=function(){var c,d,v=t.title,g=v===void 0?ra((c=e.title)===null||c===void 0?void 0:c.call(e)):v,m=t.content,p=m===void 0?ra((d=e.content)===null||d===void 0?void 0:d.call(e)):m,_=!!(Array.isArray(g)?g.length:g),b=!!(Array.isArray(p)?p.length:g);if(!(!_&&!b))return E(Ze,null,[_&&E("div",{class:"".concat(s.value,"-title")},[g]),E("div",{class:"".concat(s.value,"-inner-content")},[p])])};return function(){return E(Jy,_e(_e({},wy(t,["title","content"])),{},{prefixCls:s.value,ref:a,transitionName:B1(u.value,"zoom-big",t.transitionName)}),{title:f,default:e.default})}}}),lR=Ll(sR),uR=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},fR=Se({name:"AAvatarGroup",inheritAttrs:!1,props:uR(),setup:function(t,n){var i=n.slots,e=n.attrs,a=Dt("avatar-group",t),o=a.prefixCls,s=a.direction;return $A(t),function(){var l,u=t.maxPopoverPlacement,f=u===void 0?"top":u,h=t.maxCount,c=t.maxStyle,d=t.maxPopoverTrigger,v=d===void 0?"hover":d,g=(l={},ue(l,o.value,!0),ue(l,"".concat(o.value,"-rtl"),s.value==="rtl"),ue(l,"".concat(e.class),!!e.class),l),m=li(i,t),p=pn(m).map(function(C,y){return Sn(C,{key:"avatar-key-".concat(y)})}),_=p.length;if(h&&h<_){var b=p.slice(0,h),x=p.slice(h,_);return b.push(E(lR,{key:"avatar-popover-key",content:x,trigger:v,placement:f,overlayClassName:"".concat(o.value,"-popover")},{default:function(){return[E(Gi,{style:c},{default:function(){return["+".concat(_-h)]}})]}})),E("div",_e(_e({},e),{},{class:g,style:e.style}),[b])}return E("div",_e(_e({},e),{},{class:g,style:e.style}),[p])}}}),Xf=fR;Gi.Group=Xf;Gi.install=function(r){return r.component(Gi.name,Gi),r.component(Xf.name,Xf),r};var bi={adjustX:1,adjustY:1},xi=[0,0],hR={topLeft:{points:["bl","tl"],overflow:bi,offset:[0,-4],targetOffset:xi},topCenter:{points:["bc","tc"],overflow:bi,offset:[0,-4],targetOffset:xi},topRight:{points:["br","tr"],overflow:bi,offset:[0,-4],targetOffset:xi},bottomLeft:{points:["tl","bl"],overflow:bi,offset:[0,4],targetOffset:xi},bottomCenter:{points:["tc","bc"],overflow:bi,offset:[0,4],targetOffset:xi},bottomRight:{points:["tr","br"],overflow:bi,offset:[0,4],targetOffset:xi}},cR=hR,dR=globalThis&&globalThis.__rest||function(r,t){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)t.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(n[i[e]]=r[i[e]]);return n},vR=Se({props:{minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},arrow:{type:Boolean,default:!1},prefixCls:me.string.def("rc-dropdown"),transitionName:String,overlayClassName:me.string.def(""),openClassName:String,animation:me.any,align:me.object,overlayStyle:{type:Object,default:void 0},placement:me.string.def("bottomLeft"),overlay:me.any,trigger:me.oneOfType([me.string,me.arrayOf(me.string)]).def("hover"),alignPoint:{type:Boolean,default:void 0},showAction:me.array,hideAction:me.array,getPopupContainer:Function,visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},mouseEnterDelay:me.number.def(.15),mouseLeaveDelay:me.number.def(.1)},emits:["visibleChange","overlayClick"],slots:["overlay"],setup:function(t,n){var i=n.slots,e=n.emit,a=n.expose,o=ee(!!t.visible);ke(function(){return t.visible},function(v){v!==void 0&&(o.value=v)});var s=ee();a({triggerRef:s});var l=function(g){t.visible===void 0&&(o.value=!1),e("overlayClick",g)},u=function(g){t.visible===void 0&&(o.value=g),e("visibleChange",g)},f=function(){var g,m=(g=i.overlay)===null||g===void 0?void 0:g.call(i),p={prefixCls:"".concat(t.prefixCls,"-menu"),onClick:l,getPopupContainer:function(){return s.value.getPopupDomNode()}};return E(Ze,null,[t.arrow&&E("div",{class:"".concat(t.prefixCls,"-arrow")},null),Sn(m,p,!1)])},h=q(function(){var v=t.minOverlayWidthMatchTrigger,g=v===void 0?!t.alignPoint:v;return g}),c=function(){var g,m=(g=i.default)===null||g===void 0?void 0:g.call(i);return o.value&&m?Sn(m[0],{class:t.openClassName||"".concat(t.prefixCls,"-open")},!1):m},d=q(function(){return!t.hideAction&&t.trigger.indexOf("contextmenu")!==-1?["click"]:t.hideAction});return function(){var v=t.prefixCls,g=t.arrow,m=t.showAction,p=t.overlayStyle,_=t.trigger,b=t.placement,x=t.align,C=t.getPopupContainer,y=t.transitionName,w=t.animation,P=t.overlayClassName,T=dR(t,["prefixCls","arrow","showAction","overlayStyle","trigger","placement","align","getPopupContainer","transitionName","animation","overlayClassName"]);return E(bc,_e(_e({},T),{},{prefixCls:v,ref:s,popupClassName:qe(P,ue({},"".concat(v,"-show-arrow"),g)),popupStyle:p,builtinPlacements:cR,action:_,showAction:m,hideAction:d.value||[],popupPlacement:b,popupAlign:x,popupTransitionName:y,popupAnimation:w,popupVisible:o.value,stretch:h.value?"minWidth":"",onPopupVisibleChange:u,getPopupContainer:C}),{popup:f,default:c})}}}),xu={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},wu={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},Ii=[],ki=[];function gR(){var r=document.createElement("div"),t=r.style;"AnimationEvent"in window||(delete xu.animationstart.animation,delete wu.animationend.animation),"TransitionEvent"in window||(delete xu.transitionstart.transition,delete wu.transitionend.transition);function n(i,e){for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];for(var s in o)if(s in t){e.push(o[s]);break}}}n(xu,Ii),n(wu,ki)}typeof window!="undefined"&&typeof document!="undefined"&&gR();function wg(r,t,n){r.addEventListener(t,n,!1)}function Cg(r,t,n){r.removeEventListener(t,n,!1)}var pR={startEvents:Ii,addStartEventListener:function(t,n){if(Ii.length===0){setTimeout(n,0);return}Ii.forEach(function(i){wg(t,i,n)})},removeStartEventListener:function(t,n){Ii.length!==0&&Ii.forEach(function(i){Cg(t,i,n)})},endEvents:ki,addEndEventListener:function(t,n){if(ki.length===0){setTimeout(n,0);return}ki.forEach(function(i){wg(t,i,n)})},removeEndEventListener:function(t,n){ki.length!==0&&ki.forEach(function(i){Cg(t,i,n)})}},hs=pR,pr;function Pg(r){return!r||r.offsetParent===null}function mR(r){var t=(r||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}var Qy=Se({name:"Wave",props:{insertExtraNode:Boolean,disabled:Boolean},setup:function(t,n){var i=n.slots,e=n.expose,a=va(),o=Dt("",t),s=o.csp,l=o.prefixCls;e({csp:s});var u=null,f=null,h=null,c=!1,d=null,v=!1,g=function(y){if(!v){var w=To(a);!y||y.target!==w||c||b(w)}},m=function(y){!y||y.animationName!=="fadeEffect"||b(y.target)},p=function(){var y=t.insertExtraNode;return y?"".concat(l.value,"-click-animating"):"".concat(l.value,"-click-animating-without-extra-node")},_=function(y,w){var P,T=t.insertExtraNode,L=t.disabled;if(!(L||!y||Pg(y)||y.className.indexOf("-leave")>=0)){d=document.createElement("div"),d.className="".concat(l.value,"-click-animating-node");var j=p();y.removeAttribute(j),y.setAttribute(j,"true"),pr=pr||document.createElement("style"),w&&w!=="#ffffff"&&w!=="rgb(255, 255, 255)"&&mR(w)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(w)&&w!=="transparent"&&(!((P=s.value)===null||P===void 0)&&P.nonce&&(pr.nonce=s.value.nonce),d.style.borderColor=w,pr.innerHTML=`
        [`.concat(l.value,"-click-animating-without-extra-node='true']::after, .").concat(l.value,`-click-animating-node {
          --antd-wave-shadow-color: `).concat(w,`;
        }`),document.body.contains(pr)||document.body.appendChild(pr)),T&&y.appendChild(d),hs.addStartEventListener(y,g),hs.addEndEventListener(y,m)}},b=function(y){if(!(!y||y===d||!(y instanceof Element))){var w=t.insertExtraNode,P=p();y.setAttribute(P,"false"),pr&&(pr.innerHTML=""),w&&d&&y.contains(d)&&y.removeChild(d),hs.removeStartEventListener(y,g),hs.removeEndEventListener(y,m)}},x=function(y){if(!(!y||!y.getAttribute||y.getAttribute("disabled")||y.className.indexOf("disabled")>=0)){var w=function(T){if(!(T.target.tagName==="INPUT"||Pg(T.target))){b(y);var L=getComputedStyle(y).getPropertyValue("border-top-color")||getComputedStyle(y).getPropertyValue("border-color")||getComputedStyle(y).getPropertyValue("background-color");f=setTimeout(function(){return _(y,L)},0),vt.cancel(h),c=!0,h=vt(function(){c=!1},10)}};return y.addEventListener("click",w,!0),{cancel:function(){y.removeEventListener("click",w,!0)}}}};return bt(function(){gn(function(){var C=To(a);C.nodeType===1&&(u=x(C))})}),en(function(){u&&u.cancel(),clearTimeout(f),v=!0}),function(){var C;return(C=i.default)===null||C===void 0?void 0:C.call(i)[0]}}}),_R=function(){return{prefixCls:String,type:String,htmlType:{type:String,default:"button"},shape:{type:String},size:{type:String},loading:{type:[Boolean,Object],default:function(){return!1}},disabled:{type:Boolean,default:void 0},ghost:{type:Boolean,default:void 0},block:{type:Boolean,default:void 0},danger:{type:Boolean,default:void 0},icon:me.any,href:String,target:String,title:String,onClick:{type:Function},onMousedown:{type:Function}}},yR=_R,Tg=function(t){t&&(t.style.width="0px",t.style.opacity="0",t.style.transform="scale(0)")},Sg=function(t){gn(function(){t&&(t.style.width="".concat(t.scrollWidth,"px"),t.style.opacity="1",t.style.transform="scale(1)")})},Mg=function(t){t&&t.style&&(t.style.width=null,t.style.opacity=null,t.style.transform=null)},bR=Se({name:"LoadingIcon",props:{prefixCls:String,loading:[Boolean,Object],existIcon:Boolean},setup:function(t){return function(){var n=t.existIcon,i=t.prefixCls,e=t.loading;if(n)return E("span",{class:"".concat(i,"-loading-icon")},[E(zf,null,null)]);var a=!!e;return E(K_,{name:"".concat(i,"-loading-icon-motion"),onBeforeEnter:Tg,onEnter:Sg,onAfterEnter:Mg,onBeforeLeave:Sg,onLeave:function(s){setTimeout(function(){Tg(s)})},onAfterLeave:Mg},{default:function(){return[a?E("span",{class:"".concat(i,"-loading-icon")},[E(zf,null,null)]):null]}})}}}),Eg=/^[\u4e00-\u9fa5]{2}$/,Og=Eg.test.bind(Eg);function cs(r){return r==="text"||r==="link"}var go=Se({name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:zo(yR(),{type:"default"}),slots:["icon"],setup:function(t,n){var i=n.slots,e=n.attrs,a=n.emit,o=Dt("btn",t),s=o.prefixCls,l=o.autoInsertSpaceInButton,u=o.direction,f=o.size,h=ee(null),c=ee(void 0),d=!1,v=ee(!1),g=ee(!1),m=q(function(){return l.value!==!1}),p=q(function(){return ft(t.loading)==="object"&&t.loading.delay?t.loading.delay||!0:!!t.loading});ke(p,function(y){clearTimeout(c.value),typeof p.value=="number"?c.value=setTimeout(function(){v.value=y},p.value):v.value=y},{immediate:!0});var _=q(function(){var y,w=t.type,P=t.shape,T=P===void 0?"default":P,L=t.ghost,j=t.block,M=t.danger,D=s.value,R={large:"lg",small:"sm",middle:void 0},I=f.value,z=I&&R[I]||"";return y={},ue(y,"".concat(D),!0),ue(y,"".concat(D,"-").concat(w),w),ue(y,"".concat(D,"-").concat(T),T!=="default"&&T),ue(y,"".concat(D,"-").concat(z),z),ue(y,"".concat(D,"-loading"),v.value),ue(y,"".concat(D,"-background-ghost"),L&&!cs(w)),ue(y,"".concat(D,"-two-chinese-chars"),g.value&&m.value),ue(y,"".concat(D,"-block"),j),ue(y,"".concat(D,"-dangerous"),!!M),ue(y,"".concat(D,"-rtl"),u.value==="rtl"),y}),b=function(){var w=h.value;if(!(!w||l.value===!1)){var P=w.textContent;d&&Og(P)?g.value||(g.value=!0):g.value&&(g.value=!1)}},x=function(w){if(v.value||t.disabled){w.preventDefault();return}a("click",w)},C=function(w,P){var T=P?" ":"";if(w.type===No){var L=w.children.trim();return Og(L)&&(L=L.split("").join(T)),E("span",null,[L])}return w};return Ht(function(){er(!(t.ghost&&cs(t.type)),"Button","`link` or `text` button can't be a `ghost` button.")}),bt(b),da(b),en(function(){c.value&&clearTimeout(c.value)}),function(){var y,w,P=t.icon,T=P===void 0?(y=i.icon)===null||y===void 0?void 0:y.call(i):P,L=pn((w=i.default)===null||w===void 0?void 0:w.call(i));d=L.length===1&&!T&&!cs(t.type);var j=t.type,M=t.htmlType,D=t.disabled,R=t.href,I=t.title,z=t.target,F=t.onMousedown,O=v.value?"loading":T,A=V(V({},e),{title:I,disabled:D,class:[_.value,e.class,ue({},"".concat(s.value,"-icon-only"),L.length===0&&!!O)],onClick:x,onMousedown:F});D||delete A.disabled;var $=T&&!v.value?T:E(bR,{existIcon:!!T,prefixCls:s.value,loading:!!v.value},null),J=L.map(function(ae){return C(ae,d&&m.value)});if(R!==void 0)return E("a",_e(_e({},A),{},{href:R,target:z,ref:h}),[$,J]);var Z=E("button",_e(_e({},A),{},{ref:h,type:M}),[$,J]);return cs(j)?Z:E(Qy,{ref:"wave",disabled:!!v.value},{default:function(){return[Z]}})}}});function Ag(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function xR(r,t,n){return t&&Ag(r.prototype,t),n&&Ag(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function wR(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var CR=xR(function r(t){wR(this,r),this.error=new Error("unreachable case: ".concat(JSON.stringify(t)))}),PR=function(){return{prefixCls:String,size:{type:String}}},Jf=Se({name:"AButtonGroup",props:PR(),setup:function(t,n){var i=n.slots,e=Dt("btn-group",t),a=e.prefixCls,o=e.direction,s=q(function(){var l,u=t.size,f="";switch(u){case"large":f="lg";break;case"small":f="sm";break;case"middle":case void 0:break;default:console.warn(new CR(u).error)}return l={},ue(l,"".concat(a.value),!0),ue(l,"".concat(a.value,"-").concat(f),f),ue(l,"".concat(a.value,"-rtl"),o.value==="rtl"),l});return function(){var l;return E("div",{class:s.value},[pn((l=i.default)===null||l===void 0?void 0:l.call(i))])}}});go.Group=Jf;go.install=function(r){return r.component(go.name,go),r.component(Jf.name,Jf),r};var TR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},SR=TR;function Rg(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){MR(r,e,n[e])})}return r}function MR(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var xc=function(t,n){var i=Rg({},t,n.attrs);return E(mn,Rg({},i,{icon:SR}),null)};xc.displayName="EllipsisOutlined";xc.inheritAttrs=!1;var e0=xc;function ER(r,t,n,i){var e=n?n.call(i,r,t):void 0;if(e!==void 0)return!!e;if(r===t)return!0;if(ft(r)!=="object"||!r||ft(t)!=="object"||!t)return!1;var a=Object.keys(r),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var u=a[l];if(!s(u))return!1;var f=r[u],h=t[u];if(e=n?n.call(i,f,h,u):void 0,e===!1||e===void 0&&f!==h)return!1}return!0}function La(r,t,n,i){return ER(ze(r),ze(t),n,i)}var t0=Symbol("menuContextKey"),n0=function(t){Ut(t0,t)},jr=function(){return _t(t0)},r0=Symbol("ForceRenderKey"),OR=function(t){Ut(r0,t)},i0=function(){return _t(r0,!1)},a0=Symbol("menuFirstLevelContextKey"),o0=function(t){Ut(a0,t)},AR=function(){return _t(a0,!0)},al=Se({name:"MenuContextProvider",inheritAttrs:!1,props:{mode:{type:String,default:void 0},overflowDisabled:{type:Boolean,default:void 0},isRootMenu:{type:Boolean,default:void 0}},setup:function(t,n){var i=n.slots,e=jr(),a=V({},e);return t.mode!==void 0&&(a.mode=ao(t,"mode")),t.isRootMenu!==void 0&&(a.isRootMenu=ao(t,"isRootMenu")),t.overflowDisabled!==void 0&&(a.overflowDisabled=ao(t,"overflowDisabled")),n0(a),function(){var o;return(o=i.default)===null||o===void 0?void 0:o.call(i)}}}),RR=n0;function IR(r,t,n,i){for(var e=r.length,a=n+(i?1:-1);i?a--:++a<e;)if(t(r[a],a,r))return a;return-1}function kR(r){return r!==r}function DR(r,t,n){for(var i=n-1,e=r.length;++i<e;)if(r[i]===t)return i;return-1}function LR(r,t,n){return t===t?DR(r,t,n):IR(r,kR,n)}function jR(r,t){var n=r==null?0:r.length;return!!n&&LR(r,t,0)>-1}function NR(r,t,n){for(var i=-1,e=r==null?0:r.length;++i<e;)if(n(t,r[i]))return!0;return!1}function zR(){}var FR=1/0,HR=Wi&&1/pc(new Wi([,-0]))[1]==FR?function(r){return new Wi(r)}:zR,BR=HR,$R=200;function WR(r,t,n){var i=-1,e=jR,a=r.length,o=!0,s=[],l=s;if(n)o=!1,e=NR;else if(a>=$R){var u=t?null:BR(r);if(u)return pc(u);o=!1,e=Ly,l=new ko}else l=t?[]:s;e:for(;++i<a;){var f=r[i],h=t?t(f):f;if(f=n||f!==0?f:0,o&&h===h){for(var c=l.length;c--;)if(l[c]===h)continue e;t&&l.push(h),s.push(f)}else e(l,h,n)||(l!==s&&l.push(h),s.push(f))}return s}function Cu(r){return r&&r.length?WR(r):[]}var GR=Symbol("siderCollapsed"),ds="$$__vc-menu-more__key",s0=Symbol("KeyPathContext"),wc=function(){return _t(s0,{parentEventKeys:q(function(){return[]}),parentKeys:q(function(){return[]}),parentInfo:{}})},VR=function(t,n,i){var e=wc(),a=e.parentEventKeys,o=e.parentKeys,s=q(function(){return[].concat(Bt(a.value),[t])}),l=q(function(){return[].concat(Bt(o.value),[n])});return Ut(s0,{parentEventKeys:s,parentKeys:l,parentInfo:i}),l},l0=Symbol("measure"),Ig=Se({setup:function(t,n){var i=n.slots;return Ut(l0,!0),function(){var e;return(e=i.default)===null||e===void 0?void 0:e.call(i)}}}),Cc=function(){return _t(l0,!1)},ZR=VR;function u0(r){var t=jr(),n=t.mode,i=t.rtl,e=t.inlineIndent;return q(function(){return n.value!=="inline"?null:i.value?{paddingRight:"".concat(r.value*e.value,"px")}:{paddingLeft:"".concat(r.value*e.value,"px")}})}var UR=0,KR=function(){return{id:String,role:String,disabled:Boolean,danger:Boolean,title:{type:[String,Boolean],default:void 0},icon:me.any,onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function}},Do=Se({name:"AMenuItem",inheritAttrs:!1,props:KR(),slots:["icon","title"],setup:function(t,n){var i=n.slots,e=n.emit,a=n.attrs,o=va(),s=Cc(),l=ft(o.vnode.key)==="symbol"?String(o.vnode.key):o.vnode.key;er(ft(o.vnode.key)!=="symbol","MenuItem",'MenuItem `:key="'.concat(String(l),'"` not support Symbol type'));var u="menu_item_".concat(++UR,"_$$_").concat(l),f=wc(),h=f.parentEventKeys,c=f.parentKeys,d=jr(),v=d.prefixCls,g=d.activeKeys,m=d.disabled,p=d.changeActiveKeys,_=d.rtl,b=d.inlineCollapsed,x=d.siderCollapsed,C=d.onItemClick,y=d.selectedKeys,w=d.registerMenuInfo,P=d.unRegisterMenuInfo,T=AR(),L=ee(!1),j=q(function(){return[].concat(Bt(c.value),[l])}),M={eventKey:u,key:l,parentEventKeys:h,parentKeys:c,isLeaf:!0};w(u,M),en(function(){P(u)}),ke(g,function(){L.value=!!g.value.find(function(U){return U===l})},{immediate:!0});var D=q(function(){return m.value||t.disabled}),R=q(function(){return y.value.includes(l)}),I=q(function(){var U,W="".concat(v.value,"-item");return U={},ue(U,"".concat(W),!0),ue(U,"".concat(W,"-danger"),t.danger),ue(U,"".concat(W,"-active"),L.value),ue(U,"".concat(W,"-selected"),R.value),ue(U,"".concat(W,"-disabled"),D.value),U}),z=function(W){return{key:l,eventKey:u,keyPath:j.value,eventKeyPath:[].concat(Bt(h.value),[u]),domEvent:W,item:V(V({},t),a)}},F=function(W){if(!D.value){var ne=z(W);e("click",W),C(ne)}},O=function(W){D.value||(p(j.value),e("mouseenter",W))},A=function(W){D.value||(p([]),e("mouseleave",W))},$=function(W){if(e("keydown",W),W.which===wn.ENTER){var ne=z(W);e("click",W),C(ne)}},J=function(W){p(j.value),e("focus",W)},Z=function(W,ne){var de=E("span",{class:"".concat(v.value,"-title-content")},[ne]);return(!W||Dl(ne)&&ne.type==="span")&&ne&&b.value&&T&&typeof ne=="string"?E("div",{class:"".concat(v.value,"-inline-collapsed-noicon")},[ne.charAt(0)]):de},ae=u0(q(function(){return j.value.length}));return function(){var U,W,ne,de;if(s)return null;var ge=(W=t.title)!==null&&W!==void 0?W:(ne=i.title)===null||ne===void 0?void 0:ne.call(i),ve=pn((de=i.default)===null||de===void 0?void 0:de.call(i)),ce=ve.length,Me=ge;typeof ge=="undefined"?Me=T&&ce?ve:"":ge===!1&&(Me="");var Ce={title:Me};!x.value&&!b.value&&(Ce.title=null,Ce.visible=!1);var S={};t.role==="option"&&(S["aria-selected"]=R.value);var k=li(i,t,"icon");return E(Jy,_e(_e({},Ce),{},{placement:_.value?"left":"right",overlayClassName:"".concat(v.value,"-inline-collapsed-tooltip")}),{default:function(){return[E(vo.Item,_e(_e(_e({component:"li"},a),{},{id:t.id,style:V(V({},a.style||{}),ae.value),class:[I.value,(U={},ue(U,"".concat(a.class),!!a.class),ue(U,"".concat(v.value,"-item-only-child"),(k?ce+1:ce)===1),U)],role:t.role||"menuitem",tabindex:t.disabled?null:-1,"data-menu-id":l,"aria-disabled":t.disabled},S),{},{onMouseenter:O,onMouseleave:A,onClick:F,onKeydown:$,onFocus:J,title:typeof ge=="string"?ge:void 0}),{default:function(){return[Sn(k,{class:"".concat(v.value,"-item-icon")},!1),Z(k,ve)]}})]}})}}}),Er={adjustX:1,adjustY:1},YR={topLeft:{points:["bl","tl"],overflow:Er,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Er,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Er,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Er,offset:[4,0]}},qR={topLeft:{points:["bl","tl"],overflow:Er,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Er,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Er,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Er,offset:[4,0]}},XR={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"},kg=Se({name:"PopupTrigger",inheritAttrs:!1,props:{prefixCls:String,mode:String,visible:Boolean,popupClassName:String,popupOffset:Array,disabled:Boolean,onVisibleChange:Function},slots:["popup"],emits:["visibleChange"],setup:function(t,n){var i=n.slots,e=n.emit,a=ee(!1),o=jr(),s=o.getPopupContainer,l=o.rtl,u=o.subMenuOpenDelay,f=o.subMenuCloseDelay,h=o.builtinPlacements,c=o.triggerSubMenuAction,d=o.isRootMenu,v=o.forceSubMenuRender,g=o.motion,m=o.defaultMotions,p=i0(),_=q(function(){return l.value?V(V({},qR),h.value):V(V({},YR),h.value)}),b=q(function(){return XR[t.mode]}),x=ee();ke(function(){return t.visible},function(w){vt.cancel(x.value),x.value=vt(function(){a.value=w})},{immediate:!0}),en(function(){vt.cancel(x.value)});var C=function(P){e("visibleChange",P)},y=q(function(){var w,P,T=g.value||((w=m.value)===null||w===void 0?void 0:w[t.mode])||((P=m.value)===null||P===void 0?void 0:P.other),L=typeof T=="function"?T():T;return L?U_(L.name,{css:!0}):void 0});return function(){var w=t.prefixCls,P=t.popupClassName,T=t.mode,L=t.popupOffset,j=t.disabled;return E(bc,{prefixCls:w,popupClassName:qe("".concat(w,"-popup"),ue({},"".concat(w,"-rtl"),l.value),P),stretch:T==="horizontal"?"minWidth":null,getPopupContainer:d.value?s.value:function(M){return M.parentNode},builtinPlacements:_.value,popupPlacement:b.value,popupVisible:a.value,popupAlign:L&&{offset:L},action:j?[]:[c.value],mouseEnterDelay:u.value,mouseLeaveDelay:f.value,onPopupVisibleChange:C,forceRender:p||v.value,popupAnimation:y.value},{popup:i.popup,default:i.default})}}}),f0=function(t,n){var i=n.slots,e=n.attrs,a,o=jr(),s=o.prefixCls,l=o.mode;return E("ul",_e(_e({},e),{},{class:qe(s.value,"".concat(s.value,"-sub"),"".concat(s.value,"-").concat(l.value==="inline"?"inline":"vertical")),"data-menu-list":!0}),[(a=i.default)===null||a===void 0?void 0:a.call(i)])};f0.displayName="SubMenuList";var h0=f0,JR=Se({name:"InlineSubMenuList",inheritAttrs:!1,props:{id:String,open:Boolean,keyPath:Array},setup:function(t,n){var i=n.slots,e=q(function(){return"inline"}),a=jr(),o=a.motion,s=a.mode,l=a.defaultMotions,u=q(function(){return s.value===e.value}),f=ee(!u.value),h=q(function(){return u.value?t.open:!1});ke(s,function(){u.value&&(f.value=!1)},{flush:"post"});var c=q(function(){var d,v,g=o.value||((d=l.value)===null||d===void 0?void 0:d[e.value])||((v=l.value)===null||v===void 0?void 0:v.other),m=typeof g=="function"?g():g;return V(V({},m),{appear:t.keyPath.length<=1})});return function(){var d;return f.value?null:E(al,{mode:e.value},{default:function(){return[E(K_,c.value,{default:function(){return[Rl(E(h0,{id:t.id},{default:function(){return[(d=i.default)===null||d===void 0?void 0:d.call(i)]}}),[[Vh,h.value]])]}})]}})}}}),Dg=0,QR=function(){return{icon:me.any,title:me.any,disabled:Boolean,level:Number,popupClassName:String,popupOffset:Array,internalPopupClose:Boolean,eventKey:String,expandIcon:Function,onMouseenter:Function,onMouseleave:Function,onTitleClick:Function}},Lo=Se({name:"ASubMenu",inheritAttrs:!1,props:QR(),slots:["icon","title","expandIcon"],setup:function(t,n){var i=n.slots,e=n.attrs,a=n.emit,o,s;o0(!1);var l=Cc(),u=va(),f=ft(u.vnode.key)==="symbol"?String(u.vnode.key):u.vnode.key;er(ft(u.vnode.key)!=="symbol","SubMenu",'SubMenu `:key="'.concat(String(f),'"` not support Symbol type'));var h=Of(f)?f:"sub_menu_".concat(++Dg,"_$$_not_set_key"),c=(o=t.eventKey)!==null&&o!==void 0?o:Of(f)?"sub_menu_".concat(++Dg,"_$$_").concat(f):h,d=wc(),v=d.parentEventKeys,g=d.parentInfo,m=d.parentKeys,p=q(function(){return[].concat(Bt(m.value),[h])}),_=ee([]),b={eventKey:c,key:h,parentEventKeys:v,childrenEventKeys:_,parentKeys:m};(s=g.childrenEventKeys)===null||s===void 0||s.value.push(c),en(function(){var Y;g.childrenEventKeys&&(g.childrenEventKeys.value=(Y=g.childrenEventKeys)===null||Y===void 0?void 0:Y.value.filter(function(le){return le!=c}))}),ZR(c,h,b);var x=jr(),C=x.prefixCls,y=x.activeKeys,w=x.disabled,P=x.changeActiveKeys,T=x.mode,L=x.inlineCollapsed,j=x.antdMenuTheme,M=x.openKeys,D=x.overflowDisabled,R=x.onOpenChange,I=x.registerMenuInfo,z=x.unRegisterMenuInfo,F=x.selectedSubMenuKeys,O=x.expandIcon,A=f!=null,$=!l&&(i0()||!A);OR($),(l&&A||!l&&!A||$)&&(I(c,b),en(function(){z(c)}));var J=q(function(){return"".concat(C.value,"-submenu")}),Z=q(function(){return w.value||t.disabled}),ae=ee(),U=ee(),W=q(function(){return M.value.includes(h)}),ne=q(function(){return!D.value&&W.value}),de=q(function(){return F.value.includes(h)}),ge=ee(!1);ke(y,function(){ge.value=!!y.value.find(function(Y){return Y===h})},{immediate:!0});var ve=function(le){Z.value||(a("titleClick",le,h),T.value==="inline"&&R(h,!W.value))},ce=function(le){Z.value||(P(p.value),a("mouseenter",le))},Me=function(le){Z.value||(P([]),a("mouseleave",le))},Ce=u0(q(function(){return p.value.length})),S=function(le){T.value!=="inline"&&R(h,le)},k=function(){P(p.value)},H=c&&"".concat(c,"-popup"),K=q(function(){return qe(C.value,"".concat(C.value,"-").concat(j.value),t.popupClassName)}),G=function(le,he){if(!he)return L.value&&!m.value.length&&le&&typeof le=="string"?E("div",{class:"".concat(C.value,"-inline-collapsed-noicon")},[le.charAt(0)]):E("span",{class:"".concat(C.value,"-title-content")},[le]);var pe=Dl(le)&&le.type==="span";return E(Ze,null,[Sn(he,{class:"".concat(C.value,"-item-icon")},!1),pe?le:E("span",{class:"".concat(C.value,"-title-content")},[le])])},X=q(function(){return T.value!=="inline"&&p.value.length>1?"vertical":T.value}),se=q(function(){return T.value==="horizontal"?"vertical":T.value}),ie=q(function(){return X.value==="horizontal"?"vertical":X.value}),oe=function(){var le=J.value,he=li(i,t,"icon"),pe=t.expandIcon||i.expandIcon||O.value,xe=G(li(i,t,"title"),he);return E("div",{style:Ce.value,class:"".concat(le,"-title"),tabindex:Z.value?null:-1,ref:ae,title:typeof xe=="string"?xe:null,"data-menu-id":h,"aria-expanded":ne.value,"aria-haspopup":!0,"aria-controls":H,"aria-disabled":Z.value,onClick:ve,onFocus:k},[xe,T.value!=="horizontal"&&pe?pe(V(V({},t),{isOpen:ne.value})):E("i",{class:"".concat(le,"-arrow")},null)])};return function(){var Y,le;if(l)return A?(le=i.default)===null||le===void 0?void 0:le.call(i):null;var he=J.value,pe=function(){return null};return!D.value&&T.value!=="inline"?pe=function(){return E(kg,{mode:X.value,prefixCls:he,visible:!t.internalPopupClose&&ne.value,popupClassName:K.value,popupOffset:t.popupOffset,disabled:Z.value,onVisibleChange:S},{default:function(){return[oe()]},popup:function(){return E(al,{mode:ie.value,isRootMenu:!1},{default:function(){return[E(h0,{id:H,ref:U},{default:i.default})]}})}})}:pe=function(){return E(kg,null,{default:oe})},E(al,{mode:se.value},{default:function(){return[E(vo.Item,_e(_e({component:"li"},e),{},{role:"none",class:qe(he,"".concat(he,"-").concat(T.value),e.class,(Y={},ue(Y,"".concat(he,"-open"),ne.value),ue(Y,"".concat(he,"-active"),ge.value),ue(Y,"".concat(he,"-selected"),de.value),ue(Y,"".concat(he,"-disabled"),Z.value),Y)),onMouseenter:ce,onMouseleave:Me,"data-submenu-id":h}),{default:function(){return E(Ze,null,[pe(),!D.value&&E(JR,{id:H,open:ne.value,keyPath:p.value},{default:i.default})])}})]}})}}});function c0(r,t){if(r.classList)return r.classList.contains(t);var n=r.className;return" ".concat(n," ").indexOf(" ".concat(t," "))>-1}function Lg(r,t){r.classList?r.classList.add(t):c0(r,t)||(r.className="".concat(r.className," ").concat(t))}function jg(r,t){if(r.classList)r.classList.remove(t);else if(c0(r,t)){var n=r.className;r.className=" ".concat(n," ").replace(" ".concat(t," ")," ")}}var e2=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant-motion-collapse",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{name:t,appear:n,css:!0,onBeforeEnter:function(e){e.style.height="0px",e.style.opacity="0",Lg(e,t)},onEnter:function(e){gn(function(){e.style.height="".concat(e.scrollHeight,"px"),e.style.opacity="1"})},onAfterEnter:function(e){e&&(jg(e,t),e.style.height=null,e.style.opacity=null)},onBeforeLeave:function(e){Lg(e,t),e.style.height="".concat(e.offsetHeight,"px"),e.style.opacity=null},onLeave:function(e){setTimeout(function(){e.style.height="0px",e.style.opacity="0"})},onAfterLeave:function(e){e&&(jg(e,t),e.style&&(e.style.height=null,e.style.opacity=null))}}},t2=e2,n2=function(){return{id:String,prefixCls:String,disabled:Boolean,inlineCollapsed:Boolean,disabledOverflow:Boolean,forceSubMenuRender:Boolean,openKeys:Array,selectedKeys:Array,activeKey:String,selectable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},motion:Object,theme:{type:String,default:"light"},mode:{type:String,default:"vertical"},inlineIndent:{type:Number,default:24},subMenuOpenDelay:{type:Number,default:.1},subMenuCloseDelay:{type:Number,default:.1},builtinPlacements:{type:Object},triggerSubMenuAction:{type:String,default:"hover"},getPopupContainer:Function,expandIcon:Function,onOpenChange:Function,onSelect:Function,onDeselect:Function,onClick:[Function,Array],onFocus:Function,onBlur:Function,onMousedown:Function,"onUpdate:openKeys":Function,"onUpdate:selectedKeys":Function,"onUpdate:activeKey":Function}},Ng=[],Ir=Se({name:"AMenu",inheritAttrs:!1,props:n2(),slots:["expandIcon","overflowedIndicator"],setup:function(t,n){var i=n.slots,e=n.emit,a=n.attrs,o=Dt("menu",t),s=o.prefixCls,l=o.direction,u=o.getPrefixCls,f=ee({}),h=_t(GR,ee(void 0)),c=q(function(){return h.value!==void 0?h.value:t.inlineCollapsed}),d=ee(!1);bt(function(){d.value=!0}),Ht(function(){er(!(t.inlineCollapsed===!0&&t.mode!=="inline"),"Menu","`inlineCollapsed` should only be used when `mode` is inline."),er(!(h.value!==void 0&&t.inlineCollapsed===!0),"Menu","`inlineCollapsed` not control Menu under Sider. Should set `collapsed` on Sider instead.")});var v=ee([]),g=ee([]),m=ee({});ke(f,function(){for(var U={},W=0,ne=Object.values(f.value);W<ne.length;W++){var de=ne[W];U[de.key]=de}m.value=U},{flush:"post"}),Ht(function(){if(t.activeKey!==void 0){var U=[],W=t.activeKey?m.value[t.activeKey]:void 0;W&&t.activeKey!==void 0?U=Cu([].concat(Zs(W.parentKeys),t.activeKey)):U=[],La(v.value,U)||(v.value=U)}}),ke(function(){return t.selectedKeys},function(U){U&&(g.value=U.slice())},{immediate:!0,deep:!0});var p=ee([]);ke([m,g],function(){var U=[];g.value.forEach(function(W){var ne=m.value[W];ne&&(U=U.concat(Zs(ne.parentKeys)))}),U=Cu(U),La(p.value,U)||(p.value=U)},{immediate:!0});var _=function(W){if(!!t.selectable){var ne=W.key,de=g.value.includes(ne),ge;t.multiple?de?ge=g.value.filter(function(ce){return ce!==ne}):ge=[].concat(Bt(g.value),[ne]):ge=[ne];var ve=V(V({},W),{selectedKeys:ge});La(ge,g.value)||(t.selectedKeys===void 0&&(g.value=ge),e("update:selectedKeys",ge),de&&t.multiple?e("deselect",ve):e("select",ve)),P.value!=="inline"&&!t.multiple&&b.value.length&&j(Ng)}},b=ee([]);ke(function(){return t.openKeys},function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.value;La(b.value,U)||(b.value=U.slice())},{immediate:!0,deep:!0});var x,C=function(W){clearTimeout(x),x=setTimeout(function(){t.activeKey===void 0&&(v.value=W),e("update:activeKey",W[W.length-1])})},y=q(function(){return!!t.disabled}),w=q(function(){return l.value==="rtl"}),P=ee("vertical"),T=ee(!1);Ht(function(){(t.mode==="inline"||t.mode==="vertical")&&c.value?(P.value="vertical",T.value=c.value):(P.value=t.mode,T.value=!1)});var L=q(function(){return P.value==="inline"}),j=function(W){b.value=W,e("update:openKeys",W),e("openChange",W)},M=ee(b.value),D=ee(!1);ke(b,function(){L.value&&(M.value=b.value)},{immediate:!0}),ke(L,function(){if(!D.value){D.value=!0;return}L.value?b.value=M.value:j(Ng)},{immediate:!0});var R=q(function(){var U;return U={},ue(U,"".concat(s.value),!0),ue(U,"".concat(s.value,"-root"),!0),ue(U,"".concat(s.value,"-").concat(P.value),!0),ue(U,"".concat(s.value,"-inline-collapsed"),T.value),ue(U,"".concat(s.value,"-rtl"),w.value),ue(U,"".concat(s.value,"-").concat(t.theme),!0),U}),I=q(function(){return u()}),z=q(function(){return{horizontal:{name:"".concat(I.value,"-slide-up")},inline:t2,other:{name:"".concat(I.value,"-zoom-big")}}});o0(!0);var F=function U(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ne=[],de=f.value;return W.forEach(function(ge){var ve=de[ge],ce=ve.key,Me=ve.childrenEventKeys;ne.push.apply(ne,[ce].concat(Bt(U(Me))))}),ne},O=function(W){e("click",W),_(W)},A=function(W,ne){var de=m.value[W].childrenEventKeys,ge=b.value.filter(function(ce){return ce!==W});if(ne)ge.push(W);else if(P.value!=="inline"){var ve=F(de);ge=Cu(ge.filter(function(ce){return!ve.includes(ce)}))}La(b,ge)||j(ge)},$=function(W,ne){f.value=V(V({},f.value),ue({},W,ne))},J=function(W){delete f.value[W],f.value=V({},f.value)},Z=ee(0),ae=q(function(){return t.expandIcon||i.expandIcon?function(U){var W=t.expandIcon||i.expandIcon;return W=typeof W=="function"?W(U):W,Sn(W,{class:"".concat(s.value,"-submenu-expand-icon")},!1)}:null});return RR({store:f,prefixCls:s,activeKeys:v,openKeys:b,selectedKeys:g,changeActiveKeys:C,disabled:y,rtl:w,mode:P,inlineIndent:q(function(){return t.inlineIndent}),subMenuCloseDelay:q(function(){return t.subMenuCloseDelay}),subMenuOpenDelay:q(function(){return t.subMenuOpenDelay}),builtinPlacements:q(function(){return t.builtinPlacements}),triggerSubMenuAction:q(function(){return t.triggerSubMenuAction}),getPopupContainer:q(function(){return t.getPopupContainer}),inlineCollapsed:T,antdMenuTheme:q(function(){return t.theme}),siderCollapsed:h,defaultMotions:q(function(){return d.value?z.value:null}),motion:q(function(){return d.value?t.motion:null}),overflowDisabled:ee(void 0),onOpenChange:A,onItemClick:O,registerMenuInfo:$,unRegisterMenuInfo:J,selectedSubMenuKeys:p,isRootMenu:ee(!0),expandIcon:ae,forceSubMenuRender:q(function(){return t.forceSubMenuRender})}),function(){var U,W,ne=pn((U=i.default)===null||U===void 0?void 0:U.call(i)),de=Z.value>=ne.length-1||P.value!=="horizontal"||t.disabledOverflow,ge=P.value!=="horizontal"||t.disabledOverflow?ne:ne.map(function(ce,Me){return E(al,{key:ce.key,overflowDisabled:Me>Z.value},{default:function(){return ce}})}),ve=((W=i.overflowedIndicator)===null||W===void 0?void 0:W.call(i))||E(e0,null,null);return E(Ze,null,[E(vo,_e(_e({},a),{},{onMousedown:t.onMousedown,prefixCls:"".concat(s.value,"-overflow"),component:"ul",itemComponent:Do,class:[R.value,a.class],role:"menu",id:t.id,data:ge,renderRawItem:function(Me){return Me},renderRawRest:function(Me){var Ce=Me.length,S=Ce?ne.slice(-Ce):null;return E(Ze,null,[E(Lo,{eventKey:ds,key:ds,title:ve,disabled:de,internalPopupClose:Ce===0},{default:function(){return S}}),E(Ig,null,{default:function(){return[E(Lo,{eventKey:ds,key:ds,title:ve,disabled:de,internalPopupClose:Ce===0},{default:function(){return S}})]}})])},maxCount:P.value!=="horizontal"||t.disabledOverflow?vo.INVALIDATE:vo.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Me){Z.value=Me}}),null),E("div",{style:{display:"none"},"aria-hidden":!0},[E(Ig,null,{default:function(){return[ge]}})])])}}}),r2=function(){return{title:me.any}},Qf=Se({name:"AMenuItemGroup",inheritAttrs:!1,props:r2(),slots:["title"],setup:function(t,n){var i=n.slots,e=n.attrs,a=jr(),o=a.prefixCls,s=q(function(){return"".concat(o.value,"-item-group")}),l=Cc();return function(){var u,f;return l?(u=i.default)===null||u===void 0?void 0:u.call(i):E("li",_e(_e({},e),{},{onClick:function(c){return c.stopPropagation()},class:s.value}),[E("div",{title:typeof t.title=="string"?t.title:void 0,class:"".concat(s.value,"-title")},[li(i,t,"title")]),E("ul",{class:"".concat(s.value,"-list")},[(f=i.default)===null||f===void 0?void 0:f.call(i)])])}}}),i2=function(){return{prefixCls:String,dashed:Boolean}},eh=Se({name:"AMenuDivider",props:i2(),setup:function(t){var n=Dt("menu",t),i=n.prefixCls,e=q(function(){var a;return a={},ue(a,"".concat(i.value,"-item-divider"),!0),ue(a,"".concat(i.value,"-item-divider-dashed"),!!t.dashed),a});return function(){return E("li",{class:e.value},null)}}});Ir.install=function(r){return r.component(Ir.name,Ir),r.component(Do.name,Do),r.component(Lo.name,Lo),r.component(eh.name,eh),r.component(Qf.name,Qf),r};Ir.Item=Do;Ir.Divider=eh;Ir.SubMenu=Lo;Ir.ItemGroup=Qf;function a2(r,t){for(var n=-1,i=r==null?0:r.length,e=Array(i);++n<i;)e[n]=t(r[n],n,r);return e}var o2="[object Symbol]";function Pc(r){return typeof r=="symbol"||na(r)&&pa(r)==o2}var s2=1/0,zg=Fn?Fn.prototype:void 0,Fg=zg?zg.toString:void 0;function d0(r){if(typeof r=="string")return r;if(rr(r))return a2(r,d0)+"";if(Pc(r))return Fg?Fg.call(r):"";var t=r+"";return t=="0"&&1/r==-s2?"-0":t}function l2(r){return r==null?"":d0(r)}function u2(r){var t=ee(),n=ee(!1);function i(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];n.value||(vt.cancel(t.value),t.value=vt(function(){r.apply(void 0,a)}))}return en(function(){n.value=!0,vt.cancel(t.value)}),i}function f2(r){var t=ee([]),n=ee(typeof r=="function"?r():r),i=u2(function(){var a=n.value;t.value.forEach(function(o){a=o(a)}),t.value=[],n.value=a});function e(a){t.value.push(a),i()}return[n,e]}var h2=Se({name:"TabNode",props:{id:{type:String},prefixCls:{type:String},tab:{type:Object},active:{type:Boolean},closable:{type:Boolean},editable:{type:Object},onClick:{type:Function},onResize:{type:Function},renderWrapper:{type:Function},removeAriaLabel:{type:String},onFocus:{type:Function}},emits:["click","resize","remove","focus"],setup:function(t,n){var i=n.expose,e=n.attrs,a=ee();function o(u){var f;!((f=t.tab)===null||f===void 0)&&f.disabled||t.onClick(u)}i({domRef:a});function s(u){var f;u.preventDefault(),u.stopPropagation(),t.editable.onEdit("remove",{key:(f=t.tab)===null||f===void 0?void 0:f.key,event:u})}var l=q(function(){var u;return t.editable&&t.closable!==!1&&!(!((u=t.tab)===null||u===void 0)&&u.disabled)});return function(){var u,f,h=t.prefixCls,c=t.id,d=t.active,v=t.tab,g=v.key,m=v.tab,p=v.disabled,_=v.closeIcon,b=t.renderWrapper,x=t.removeAriaLabel,C=t.editable,y=t.onFocus,w="".concat(h,"-tab"),P=E("div",{key:g,ref:a,class:qe(w,(u={},ue(u,"".concat(w,"-with-remove"),l.value),ue(u,"".concat(w,"-active"),d),ue(u,"".concat(w,"-disabled"),p),u)),style:e.style,onClick:o},[E("div",{role:"tab","aria-selected":d,id:c&&"".concat(c,"-tab-").concat(g),class:"".concat(w,"-btn"),"aria-controls":c&&"".concat(c,"-panel-").concat(g),"aria-disabled":p,tabindex:p?null:0,onClick:function(L){L.stopPropagation(),o(L)},onKeydown:function(L){[wn.SPACE,wn.ENTER].includes(L.which)&&(L.preventDefault(),o(L))},onFocus:y},[typeof m=="function"?m():m]),l.value&&E("button",{type:"button","aria-label":x||"remove",tabindex:0,class:"".concat(w,"-remove"),onClick:function(L){L.stopPropagation(),s(L)}},[(_==null?void 0:_())||((f=C.removeIcon)===null||f===void 0?void 0:f.call(C))||"\xD7"])]);return b?b(P):P}}}),Hg={width:0,height:0,left:0,top:0};function c2(r,t){var n=ee(new Map);return Ht(function(){for(var i,e,a=new Map,o=r.value,s=t.value.get((i=o[0])===null||i===void 0?void 0:i.key)||Hg,l=s.left+s.width,u=0;u<o.length;u+=1){var f=o[u].key,h=t.value.get(f);h||(h=t.value.get((e=o[u-1])===null||e===void 0?void 0:e.key)||Hg);var c=a.get(f)||V({},h);c.right=l-c.left-c.width,a.set(f,c)}n.value=new Map(a)}),n}var v0=Se({name:"AddButton",inheritAttrs:!1,props:{prefixCls:String,editable:{type:Object},locale:{type:Object,default:void 0}},setup:function(t,n){var i=n.expose,e=n.attrs,a=ee();return i({domRef:a}),function(){var o=t.prefixCls,s=t.editable,l=t.locale;return!s||s.showAdd===!1?null:E("button",{ref:a,type:"button",class:"".concat(o,"-nav-add"),style:e.style,"aria-label":(l==null?void 0:l.addAriaLabel)||"Add tab",onClick:function(f){s.onEdit("add",{event:f})}},[s.addIcon?s.addIcon():"+"])}}}),d2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},v2=d2;function Bg(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){g2(r,e,n[e])})}return r}function g2(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}var Tc=function(t,n){var i=Bg({},t,n.attrs);return E(mn,Bg({},i,{icon:v2}),null)};Tc.displayName="PlusOutlined";Tc.inheritAttrs=!1;var p2=Tc,m2={prefixCls:{type:String},id:{type:String},tabs:{type:Object},rtl:{type:Boolean},tabBarGutter:{type:Number},activeKey:{type:[String,Number]},mobile:{type:Boolean},moreIcon:me.any,moreTransitionName:{type:String},editable:{type:Object},locale:{type:Object,default:void 0},removeAriaLabel:String,onTabClick:{type:Function}},_2=Se({name:"OperationNode",inheritAttrs:!1,props:m2,emits:["tabClick"],slots:["moreIcon"],setup:function(t,n){var i=n.attrs,e=n.slots,a=At(!1),o=Ve(a,2),s=o[0],l=o[1],u=At(null),f=Ve(u,2),h=f[0],c=f[1],d=function(b){for(var x=t.tabs.filter(function(T){return!T.disabled}),C=x.findIndex(function(T){return T.key===h.value})||0,y=x.length,w=0;w<y;w+=1){C=(C+b+y)%y;var P=x[C];if(!P.disabled){c(P.key);return}}},v=function(b){var x=b.which;if(!s.value){[wn.DOWN,wn.SPACE,wn.ENTER].includes(x)&&(l(!0),b.preventDefault());return}switch(x){case wn.UP:d(-1),b.preventDefault();break;case wn.DOWN:d(1),b.preventDefault();break;case wn.ESC:l(!1);break;case wn.SPACE:case wn.ENTER:h.value!==null&&t.onTabClick(h.value,b);break}},g=q(function(){return"".concat(t.id,"-more-popup")}),m=q(function(){return h.value!==null?"".concat(g.value,"-").concat(h.value):null}),p=function(b,x){b.preventDefault(),b.stopPropagation(),t.editable.onEdit("remove",{key:x,event:b})};return bt(function(){ke(h,function(){var _=document.getElementById(m.value);_&&_.scrollIntoView&&_.scrollIntoView(!1)},{flush:"post",immediate:!0})}),ke(s,function(){s.value||c(null)}),function(){var _,b=t.prefixCls,x=t.id,C=t.tabs,y=t.locale,w=t.mobile,P=t.moreIcon,T=P===void 0?((_=e.moreIcon)===null||_===void 0?void 0:_.call(e))||E(e0,null,null):P,L=t.moreTransitionName,j=t.editable,M=t.tabBarGutter,D=t.rtl,R=t.onTabClick,I="".concat(b,"-dropdown"),z=y==null?void 0:y.dropdownAriaLabel,F=ue({},D?"marginRight":"marginLeft",M);C.length||(F.visibility="hidden",F.order=1);var O=qe(ue({},"".concat(I,"-rtl"),D)),A=w?null:E(vR,{prefixCls:I,trigger:["hover"],visible:s.value,transitionName:L,onVisibleChange:l,overlayClassName:O,mouseEnterDelay:.1,mouseLeaveDelay:.1},{overlay:function(){return E(Ir,{onClick:function(Z){var ae=Z.key,U=Z.domEvent;R(ae,U),l(!1)},id:g.value,tabindex:-1,role:"listbox","aria-activedescendant":m.value,selectedKeys:[h.value],"aria-label":z!==void 0?z:"expanded dropdown"},{default:function(){return[C.map(function(Z){var ae,U,W=j&&Z.closable!==!1&&!Z.disabled;return E(Do,{key:Z.key,id:"".concat(g.value,"-").concat(Z.key),role:"option","aria-controls":x&&"".concat(x,"-panel-").concat(Z.key),disabled:Z.disabled},{default:function(){return[E("span",null,[typeof Z.tab=="function"?Z.tab():Z.tab]),W&&E("button",{type:"button","aria-label":t.removeAriaLabel||"remove",tabindex:0,class:"".concat(I,"-menu-item-remove"),onClick:function(ge){ge.stopPropagation(),p(ge,Z.key)}},[((ae=Z.closeIcon)===null||ae===void 0?void 0:ae.call(Z))||((U=j.removeIcon)===null||U===void 0?void 0:U.call(j))||"\xD7"])]}})})]}})},default:function(){return E("button",{type:"button",class:"".concat(b,"-nav-more"),style:F,tabindex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":g.value,id:"".concat(x,"-more"),"aria-expanded":s.value,onKeydown:v},[T])}});return E("div",{class:qe("".concat(b,"-nav-operations"),i.class),style:i.style},[A,E(v0,{prefixCls:b,locale:y,editable:j},null)])}}}),g0=Symbol("tabsContextKey"),p0=function(t){Ut(g0,t)},m0=function(){return _t(g0,{tabs:ee([]),prefixCls:ee()})};Se({name:"TabsContextProvider",inheritAttrs:!1,props:{tabs:{type:Object,default:void 0},prefixCls:{type:String,default:void 0}},setup:function(t,n){var i=n.slots;return p0(pw(t)),function(){var e;return(e=i.default)===null||e===void 0?void 0:e.call(i)}}});var y2=.1,$g=.01,Hs=20,Wg=Math.pow(.995,Hs);function b2(r,t){var n=At(),i=Ve(n,2),e=i[0],a=i[1],o=At(0),s=Ve(o,2),l=s[0],u=s[1],f=At(0),h=Ve(f,2),c=h[0],d=h[1],v=At(),g=Ve(v,2),m=g[0],p=g[1],_=ee();function b(D){var R=D.touches[0],I=R.screenX,z=R.screenY;a({x:I,y:z}),clearInterval(_.value)}function x(D){if(!!e.value){D.preventDefault();var R=D.touches[0],I=R.screenX,z=R.screenY,F=I-e.value.x,O=z-e.value.y;t(F,O),a({x:I,y:z});var A=Date.now();d(A-l.value),u(A),p({x:F,y:O})}}function C(){if(!!e.value){var D=m.value;if(a(null),p(null),D){var R=D.x/c.value,I=D.y/c.value,z=Math.abs(R),F=Math.abs(I);if(Math.max(z,F)<y2)return;var O=R,A=I;_.value=setInterval(function(){if(Math.abs(O)<$g&&Math.abs(A)<$g){clearInterval(_.value);return}O*=Wg,A*=Wg,t(O*Hs,A*Hs)},Hs)}}}var y=ee();function w(D){var R=D.deltaX,I=D.deltaY,z=0,F=Math.abs(R),O=Math.abs(I);F===O?z=y.value==="x"?R:I:F>O?(z=R,y.value="x"):(z=I,y.value="y"),t(-z,-z)&&D.preventDefault()}var P=ee({onTouchStart:b,onTouchMove:x,onTouchEnd:C,onWheel:w});function T(D){P.value.onTouchStart(D)}function L(D){P.value.onTouchMove(D)}function j(D){P.value.onTouchEnd(D)}function M(D){P.value.onWheel(D)}bt(function(){var D,R;document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",j,{passive:!1}),(D=r.value)===null||D===void 0||D.addEventListener("touchstart",T,{passive:!1}),(R=r.value)===null||R===void 0||R.addEventListener("wheel",M,{passive:!1})}),en(function(){document.removeEventListener("touchmove",L),document.removeEventListener("touchend",j)})}function Gg(r,t){var n=ee(r);function i(e){var a=typeof e=="function"?e(n.value):e;a!==n.value&&t(a,n.value),n.value=a}return[n,i]}var x2=function(){var t=ee(new Map),n=function(e){return function(a){t.value.set(e,a)}};return Zm(function(){t.value=new Map}),[n,t]},w2=x2,C2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P2=/^\w*$/;function T2(r,t){if(rr(r))return!1;var n=typeof r;return n=="number"||n=="symbol"||n=="boolean"||r==null||Pc(r)?!0:P2.test(r)||!C2.test(r)||t!=null&&r in Object(t)}var S2="Expected a function";function Sc(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(S2);var n=function(){var i=arguments,e=t?t.apply(this,i):i[0],a=n.cache;if(a.has(e))return a.get(e);var o=r.apply(this,i);return n.cache=a.set(e,o)||a,o};return n.cache=new(Sc.Cache||ur),n}Sc.Cache=ur;var M2=500;function E2(r){var t=Sc(r,function(i){return n.size===M2&&n.clear(),i}),n=t.cache;return t}var O2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A2=/\\(\\)?/g,R2=E2(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(O2,function(n,i,e,a){t.push(e?a.replace(A2,"$1"):i||n)}),t}),I2=R2;function Bl(r,t){return rr(r)?r:T2(r,t)?[r]:I2(l2(r))}var k2=1/0;function Mc(r){if(typeof r=="string"||Pc(r))return r;var t=r+"";return t=="0"&&1/r==-k2?"-0":t}function D2(r,t){t=Bl(t,r);for(var n=0,i=t.length;r!=null&&n<i;)r=r[Mc(t[n++])];return n&&n==i?r:void 0}var L2=function(){try{var r=mi(Object,"defineProperty");return r({},"",{}),r}catch{}}(),ol=L2;function j2(r,t,n){t=="__proto__"&&ol?ol(r,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[t]=n}var N2=Object.prototype,z2=N2.hasOwnProperty;function F2(r,t,n){var i=r[t];(!(z2.call(r,t)&&gc(i,n))||n===void 0&&!(t in r))&&j2(r,t,n)}function H2(r,t,n,i){if(!il(r))return r;t=Bl(t,r);for(var e=-1,a=t.length,o=a-1,s=r;s!=null&&++e<a;){var l=Mc(t[e]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(e!=o){var f=s[l];u=i?i(f,l,s):void 0,u===void 0&&(u=il(f)?f:_c(t[e+1])?[]:{})}F2(s,l,u),s=s[l]}return r}function B2(r,t,n){for(var i=-1,e=t.length,a={};++i<e;){var o=t[i],s=D2(r,o);n(s,o)&&H2(a,Bl(o,r),s)}return a}function $2(r,t){return r!=null&&t in Object(r)}function W2(r,t,n){t=Bl(t,r);for(var i=-1,e=t.length,a=!1;++i<e;){var o=Mc(t[i]);if(!(a=r!=null&&n(r,o)))break;r=r[o]}return a||++i!=e?a:(e=r==null?0:r.length,!!e&&yc(e)&&_c(o,e)&&(rr(r)||mc(r)))}function G2(r,t){return r!=null&&W2(r,t,$2)}function V2(r,t){return B2(r,t,function(n,i){return G2(r,i)})}var Vg=Fn?Fn.isConcatSpreadable:void 0;function Z2(r){return rr(r)||mc(r)||!!(Vg&&r&&r[Vg])}function _0(r,t,n,i,e){var a=-1,o=r.length;for(n||(n=Z2),e||(e=[]);++a<o;){var s=r[a];t>0&&n(s)?t>1?_0(s,t-1,n,i,e):Ny(e,s):i||(e[e.length]=s)}return e}function U2(r){var t=r==null?0:r.length;return t?_0(r,1):[]}function K2(r,t,n){switch(n.length){case 0:return r.call(t);case 1:return r.call(t,n[0]);case 2:return r.call(t,n[0],n[1]);case 3:return r.call(t,n[0],n[1],n[2])}return r.apply(t,n)}var Zg=Math.max;function Y2(r,t,n){return t=Zg(t===void 0?r.length-1:t,0),function(){for(var i=arguments,e=-1,a=Zg(i.length-t,0),o=Array(a);++e<a;)o[e]=i[t+e];e=-1;for(var s=Array(t+1);++e<t;)s[e]=i[e];return s[t]=n(o),K2(r,this,s)}}function q2(r){return function(){return r}}function X2(r){return r}var J2=ol?function(r,t){return ol(r,"toString",{configurable:!0,enumerable:!1,value:q2(t),writable:!0})}:X2,Q2=J2,eI=800,tI=16,nI=Date.now;function rI(r){var t=0,n=0;return function(){var i=nI(),e=tI-(i-n);if(n=i,e>0){if(++t>=eI)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var iI=rI(Q2),aI=iI;function oI(r){return aI(Y2(r,void 0,U2),r+"")}var sI=oI(function(r,t){return r==null?{}:V2(r,t)}),y0=sI,Ug={width:0,height:0,left:0,top:0,right:0},lI=function(){return{id:{type:String},tabPosition:{type:String},activeKey:{type:[String,Number]},rtl:{type:Boolean},animated:{type:Object,default:void 0},editable:{type:Object},moreIcon:me.any,moreTransitionName:{type:String},mobile:{type:Boolean},tabBarGutter:{type:Number},renderTabBar:{type:Function},locale:{type:Object,default:void 0},onTabClick:{type:Function},onTabScroll:{type:Function}}},Kg=Se({name:"TabNavList",inheritAttrs:!1,props:lI(),slots:["moreIcon","leftExtra","rightExtra","tabBarExtraContent"],emits:["tabClick","tabScroll"],setup:function(t,n){var i=n.attrs,e=n.slots,a=m0(),o=a.tabs,s=a.prefixCls,l=ee(),u=ee(),f=ee(),h=ee(),c=w2(),d=Ve(c,2),v=d[0],g=d[1],m=q(function(){return t.tabPosition==="top"||t.tabPosition==="bottom"}),p=Gg(0,function(Be,Ue){m.value&&t.onTabScroll&&t.onTabScroll({direction:Be>Ue?"left":"right"})}),_=Ve(p,2),b=_[0],x=_[1],C=Gg(0,function(Be,Ue){!m.value&&t.onTabScroll&&t.onTabScroll({direction:Be>Ue?"top":"bottom"})}),y=Ve(C,2),w=y[0],P=y[1],T=At(0),L=Ve(T,2),j=L[0],M=L[1],D=At(0),R=Ve(D,2),I=R[0],z=R[1],F=At(null),O=Ve(F,2),A=O[0],$=O[1],J=At(null),Z=Ve(J,2),ae=Z[0],U=Z[1],W=At(0),ne=Ve(W,2),de=ne[0],ge=ne[1],ve=At(0),ce=Ve(ve,2),Me=ce[0],Ce=ce[1],S=f2(new Map),k=Ve(S,2),H=k[0],K=k[1],G=c2(o,H),X=q(function(){return"".concat(s.value,"-nav-operations-hidden")}),se=ee(0),ie=ee(0);Ht(function(){m.value?t.rtl?(se.value=0,ie.value=Math.max(0,j.value-A.value)):(se.value=Math.min(0,A.value-j.value),ie.value=0):(se.value=Math.min(0,ae.value-I.value),ie.value=0)});var oe=function(Ue){return Ue<se.value?se.value:Ue>ie.value?ie.value:Ue},Y=ee(),le=At(),he=Ve(le,2),pe=he[0],xe=he[1],Oe=function(){xe(Date.now())},Ne=function(){clearTimeout(Y.value)},Fe=function(Ue,He){Ue(function(ut){var Je=oe(ut+He);return Je})};b2(l,function(Be,Ue){if(m.value){if(A.value>=j.value)return!1;Fe(x,Be)}else{if(ae.value>=I.value)return!1;Fe(P,Ue)}return Ne(),Oe(),!0}),ke(pe,function(){Ne(),pe.value&&(Y.value=setTimeout(function(){xe(0)},100))});var Ge=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activeKey,He=G.value.get(Ue)||{width:0,height:0,left:0,right:0,top:0};if(m.value){var ut=b.value;t.rtl?He.right<b.value?ut=He.right:He.right+He.width>b.value+A.value&&(ut=He.right+He.width-A.value):He.left<-b.value?ut=-He.left:He.left+He.width>-b.value+A.value&&(ut=-(He.left+He.width-A.value)),P(0),x(oe(ut))}else{var Je=w.value;He.top<-w.value?Je=-He.top:He.top+He.height>-w.value+ae.value&&(Je=-(He.top+He.height-ae.value)),x(0),P(oe(Je))}},gt=ee(0),wt=ee(0);Ht(function(){var Be,Ue,He,ut,Je,Wt,Gt,zr=G.value;["top","bottom"].includes(t.tabPosition)?(Ue="width",Je=A.value,Wt=j.value,Gt=de.value,He=t.rtl?"right":"left",ut=Math.abs(b.value)):(Ue="height",Je=ae.value,Wt=j.value,Gt=Me.value,He="top",ut=-w.value);var rn=Je;Wt+Gt>Je&&Wt<Je&&(rn=Je-Gt);var Wn=o.value;if(!Wn.length){var Gn;return Gn=[0,0],gt.value=Gn[0],wt.value=Gn[1],Gn}for(var Fr=Wn.length,Ot=Fr,On=0;On<Fr;On+=1){var An=zr.get(Wn[On].key)||Ug;if(An[He]+An[Ue]>ut+rn){Ot=On-1;break}}for(var Vn=0,an=Fr-1;an>=0;an-=1){var Hr=zr.get(Wn[an].key)||Ug;if(Hr[He]<ut){Vn=an+1;break}}return Be=[Vn,Ot],gt.value=Be[0],wt.value=Be[1],Be});var yn=function(){var Ue,He,ut,Je,Wt,Gt=((Ue=l.value)===null||Ue===void 0?void 0:Ue.offsetWidth)||0,zr=((He=l.value)===null||He===void 0?void 0:He.offsetHeight)||0,rn=((ut=h.value)===null||ut===void 0?void 0:ut.$el)||{},Wn=rn.offsetWidth||0,Gn=rn.offsetHeight||0;$(Gt),U(zr),ge(Wn),Ce(Gn);var Fr=(((Je=u.value)===null||Je===void 0?void 0:Je.offsetWidth)||0)-Wn,Ot=(((Wt=u.value)===null||Wt===void 0?void 0:Wt.offsetHeight)||0)-Gn;M(Fr),z(Ot),K(function(){var On=new Map;return o.value.forEach(function(An){var Vn=An.key,an,Hr=g.value.get(Vn),dr=((an=Hr)===null||an===void 0?void 0:an.$el)||Hr;dr&&On.set(Vn,{width:dr.offsetWidth,height:dr.offsetHeight,left:dr.offsetLeft,top:dr.offsetTop})}),On})},hr=q(function(){return[].concat(Bt(o.value.slice(0,gt.value)),Bt(o.value.slice(wt.value+1)))}),Vo=At(),Et=Ve(Vo,2),nn=Et[0],Zo=Et[1],cr=q(function(){return G.value.get(t.activeKey)}),rd=ee(),id=function(){vt.cancel(rd.value)};ke([cr,m,function(){return t.rtl}],function(){var Be={};cr.value&&(m.value?(t.rtl?Be.right=Aa(cr.value.right):Be.left=Aa(cr.value.left),Be.width=Aa(cr.value.width)):(Be.top=Aa(cr.value.top),Be.height=Aa(cr.value.height))),id(),rd.value=vt(function(){Zo(Be)})}),ke([function(){return t.activeKey},cr,G,m],function(){Ge()},{flush:"post"}),ke([function(){return t.rtl},function(){return t.tabBarGutter},function(){return t.activeKey},function(){return o.value}],function(){yn()},{flush:"post"});var ql=function(Ue){var He=Ue.position,ut=Ue.prefixCls,Je=Ue.extra;if(!Je)return null;var Wt=Je==null?void 0:Je({position:He});return Wt?E("div",{class:"".concat(ut,"-extra-content")},[Wt]):null};return en(function(){Ne(),id()}),function(){var Be,Ue=t.id,He=t.animated,ut=t.activeKey,Je=t.rtl,Wt=t.editable,Gt=t.locale,zr=t.tabPosition,rn=t.tabBarGutter,Wn=t.onTabClick,Gn=i.class,Fr=i.style,Ot=s.value,On=!!hr.value.length,An="".concat(Ot,"-nav-wrap"),Vn,an,Hr,dr;m.value?Je?(an=b.value>0,Vn=b.value+A.value<j.value):(Vn=b.value<0,an=-b.value+A.value<j.value):(Hr=w.value<0,dr=-w.value+ae.value<I.value);var Uo={};zr==="top"||zr==="bottom"?Uo[Je?"marginRight":"marginLeft"]=typeof rn=="number"?"".concat(rn,"px"):rn:Uo.marginTop=typeof rn=="number"?"".concat(rn,"px"):rn;var ad=o.value.map(function(Sa,od){var Ma=Sa.key;return E(h2,{id:Ue,prefixCls:Ot,key:Ma,tab:Sa,style:od===0?void 0:Uo,closable:Sa.closable,editable:Wt,active:Ma===ut,removeAriaLabel:Gt==null?void 0:Gt.removeAriaLabel,ref:v(Ma),onClick:function(xx){Wn(Ma,xx)},onFocus:function(){Ge(Ma),Oe(),l.value&&(Je||(l.value.scrollLeft=0),l.value.scrollTop=0)}},e)});return E("div",{role:"tablist",class:qe("".concat(Ot,"-nav"),Gn),style:Fr,onKeydown:function(){Oe()}},[E(ql,{position:"left",prefixCls:Ot,extra:e.leftExtra},null),E(So,{onResize:yn},{default:function(){return[E("div",{class:qe(An,(Be={},ue(Be,"".concat(An,"-ping-left"),Vn),ue(Be,"".concat(An,"-ping-right"),an),ue(Be,"".concat(An,"-ping-top"),Hr),ue(Be,"".concat(An,"-ping-bottom"),dr),Be)),ref:l},[E(So,{onResize:yn},{default:function(){return[E("div",{ref:u,class:"".concat(Ot,"-nav-list"),style:{transform:"translate(".concat(b.value,"px, ").concat(w.value,"px)"),transition:pe.value?"none":void 0}},[ad,E(v0,{ref:h,prefixCls:Ot,locale:Gt,editable:Wt,style:V(V({},ad.length===0?void 0:Uo),{visibility:On?"hidden":null})},null),E("div",{class:qe("".concat(Ot,"-ink-bar"),ue({},"".concat(Ot,"-ink-bar-animated"),He.inkBar)),style:nn.value},null)])]}})])]}}),E(_2,_e(_e({},t),{},{removeAriaLabel:Gt==null?void 0:Gt.removeAriaLabel,ref:f,prefixCls:Ot,tabs:hr.value,class:!On&&X.value}),y0(e,["moreIcon"])),E(ql,{position:"right",prefixCls:Ot,extra:e.rightExtra},null),E(ql,{position:"right",prefixCls:Ot,extra:e.tabBarExtraContent},null)])}}}),uI=Se({name:"TabPanelList",inheritAttrs:!1,props:{activeKey:{type:[String,Number]},id:{type:String},rtl:{type:Boolean},animated:{type:Object,default:void 0},tabPosition:{type:String},destroyInactiveTabPane:{type:Boolean}},setup:function(t){var n=m0(),i=n.tabs,e=n.prefixCls;return function(){var a=t.id,o=t.activeKey,s=t.animated,l=t.tabPosition,u=t.rtl,f=t.destroyInactiveTabPane,h=s.tabPane,c=e.value,d=i.value.findIndex(function(v){return v.key===o});return E("div",{class:"".concat(c,"-content-holder")},[E("div",{class:["".concat(c,"-content"),"".concat(c,"-content-").concat(l),ue({},"".concat(c,"-content-animated"),h)],style:d&&h?ue({},u?"marginRight":"marginLeft","-".concat(d,"00%")):null},[i.value.map(function(v){return Sn(v.node,{key:v.key,prefixCls:c,tabKey:v.key,id:a,animated:h,active:v.key===o,destroyInactiveTabPane:f})})])])}}}),Yg=0,b0=function(){return{prefixCls:{type:String},id:{type:String},activeKey:{type:[String,Number]},defaultActiveKey:{type:[String,Number]},direction:{type:String},animated:{type:[Boolean,Object]},renderTabBar:{type:Function},tabBarGutter:{type:Number},tabBarStyle:{type:Object},tabPosition:{type:String},destroyInactiveTabPane:{type:Boolean},hideAdd:Boolean,type:{type:String},size:{type:String},centered:Boolean,onEdit:{type:Function},onChange:{type:Function},onTabClick:{type:Function},onTabScroll:{type:Function},"onUpdate:activeKey":{type:Function},locale:{type:Object,default:void 0},onPrevClick:Function,onNextClick:Function,tabBarExtraContent:me.any}};function fI(r){return r.map(function(t){if(Dl(t)){for(var n=V({},t.props||{}),i=0,e=Object.entries(n);i<e.length;i++){var a=Ve(e[i],2),o=a[0],s=a[1];delete n[o],n[Tn(o)]=s}var l=t.children||{},u=t.key!==void 0?t.key:void 0,f=n.tab,h=f===void 0?l.tab:f,c=n.disabled,d=n.forceRender,v=n.closable,g=n.animated,m=n.active,p=n.destroyInactiveTabPane;return V(V({key:u},n),{node:t,closeIcon:l.closeIcon,tab:h,disabled:c===""||c,forceRender:d===""||d,closable:v===""||v,animated:g===""||g,active:m===""||m,destroyInactiveTabPane:p===""||p})}return null}).filter(function(t){return t})}var hI=Se({name:"InternalTabs",inheritAttrs:!1,props:V(V({},zo(b0(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}})),{tabs:{type:Array}}),slots:["tabBarExtraContent","leftExtra","rightExtra","moreIcon","addIcon","removeIcon","renderTabBar"],setup:function(t,n){var i=n.attrs,e=n.slots;er(t.onPrevClick===void 0&&t.onNextClick===void 0,"Tabs","`onPrevClick / @prevClick` and `onNextClick / @nextClick` has been removed. Please use `onTabScroll / @tabScroll` instead."),er(t.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` prop has been removed. Please use `rightExtra` slot instead."),er(e.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` slot is deprecated. Please use `rightExtra` slot instead.");var a=Dt("tabs",t),o=a.prefixCls,s=a.direction,l=a.size,u=a.rootPrefixCls,f=q(function(){return s.value==="rtl"}),h=q(function(){var R=t.animated;return R===!1?{inkBar:!1,tabPane:!1}:R===!0?{inkBar:!0,tabPane:!0}:V({inkBar:!0,tabPane:!1},ft(R)==="object"?R:{})}),c=At(!1),d=Ve(c,2),v=d[0],g=d[1];bt(function(){g(FA())});var m=pg(function(){var R;return(R=t.tabs[0])===null||R===void 0?void 0:R.key},{value:q(function(){return t.activeKey}),defaultValue:t.defaultActiveKey}),p=Ve(m,2),_=p[0],b=p[1],x=At(function(){return t.tabs.findIndex(function(R){return R.key===_.value})}),C=Ve(x,2),y=C[0],w=C[1];Ht(function(){var R,I=t.tabs.findIndex(function(z){return z.key===_.value});I===-1&&(I=Math.max(0,Math.min(y.value,t.tabs.length-1)),b((R=t.tabs[I])===null||R===void 0?void 0:R.key)),w(I)});var P=pg(null,{value:q(function(){return t.id})}),T=Ve(P,2),L=T[0],j=T[1],M=q(function(){return v.value&&!["left","right"].includes(t.tabPosition)?"top":t.tabPosition});bt(function(){t.id||(j("rc-tabs-".concat(Yg)),Yg+=1)});var D=function(I,z){var F,O;(F=t.onTabClick)===null||F===void 0||F.call(t,I,z);var A=I!==_.value;b(I),A&&((O=t.onChange)===null||O===void 0||O.call(t,I))};return p0({tabs:q(function(){return t.tabs}),prefixCls:o}),function(){var R,I=t.id,z=t.type,F=t.tabBarGutter,O=t.tabBarStyle,A=t.locale,$=t.destroyInactiveTabPane,J=t.renderTabBar,Z=J===void 0?e.renderTabBar:J,ae=t.onTabScroll,U=t.hideAdd,W=t.centered,ne={id:L.value,activeKey:_.value,animated:h.value,tabPosition:M.value,rtl:f.value,mobile:v.value},de;z==="editable-card"&&(de={onEdit:function(Ce,S){var k=S.key,H=S.event,K;(K=t.onEdit)===null||K===void 0||K.call(t,Ce==="add"?H:k,Ce)},removeIcon:function(){return E(sc,null,null)},addIcon:e.addIcon?e.addIcon:function(){return E(p2,null,null)},showAdd:U!==!0});var ge,ve=V(V({},ne),{moreTransitionName:"".concat(u.value,"-slide-up"),editable:de,locale:A,tabBarGutter:F,onTabClick:D,onTabScroll:ae,style:O});Z?ge=Z(V(V({},ve),{DefaultTabBar:Kg})):ge=E(Kg,ve,y0(e,["moreIcon","leftExtra","rightExtra","tabBarExtraContent"]));var ce=o.value;return E("div",_e(_e({},i),{},{id:I,class:qe(ce,"".concat(ce,"-").concat(M.value),(R={},ue(R,"".concat(ce,"-").concat(l.value),l.value),ue(R,"".concat(ce,"-card"),["card","editable-card"].includes(z)),ue(R,"".concat(ce,"-editable-card"),z==="editable-card"),ue(R,"".concat(ce,"-centered"),W),ue(R,"".concat(ce,"-mobile"),v.value),ue(R,"".concat(ce,"-editable"),z==="editable-card"),ue(R,"".concat(ce,"-rtl"),f.value),R),i.class)}),[ge,E(uI,_e(_e({destroyInactiveTabPane:$},ne),{},{animated:h.value}),null)])}}}),po=Se({name:"ATabs",inheritAttrs:!1,props:zo(b0(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}}),slots:["tabBarExtraContent","leftExtra","rightExtra","moreIcon","addIcon","removeIcon","renderTabBar"],setup:function(t,n){var i=n.attrs,e=n.slots,a=n.emit,o=function(l){a("update:activeKey",l),a("change",l)};return function(){var s,l=fI(pn((s=e.default)===null||s===void 0?void 0:s.call(e)));return E(hI,_e(_e(_e({},wy(t,["onUpdate:activeKey"])),i),{},{onChange:o,tabs:l}),e)}}}),cI=function(){return{tab:me.any,disabled:{type:Boolean},forceRender:{type:Boolean},closable:{type:Boolean},animated:{type:Boolean},active:{type:Boolean},destroyInactiveTabPane:{type:Boolean},prefixCls:{type:String},tabKey:{type:[String,Number]},id:{type:String}}},sl=Se({name:"ATabPane",inheritAttrs:!1,__ANT_TAB_PANE:!0,props:cI(),slots:["closeIcon","tab"],setup:function(t,n){var i=n.attrs,e=n.slots,a=ee(t.forceRender);ke([function(){return t.active},function(){return t.destroyInactiveTabPane}],function(){t.active?a.value=!0:t.destroyInactiveTabPane&&(a.value=!1)},{immediate:!0});var o=q(function(){return t.active?{}:t.animated?{visibility:"hidden",height:0,overflowY:"hidden"}:{display:"none"}});return function(){var s,l=t.prefixCls,u=t.forceRender,f=t.id,h=t.active,c=t.tabKey;return E("div",{id:f&&"".concat(f,"-panel-").concat(c),role:"tabpanel",tabindex:h?0:-1,"aria-labelledby":f&&"".concat(f,"-tab-").concat(c),"aria-hidden":!h,style:V(V({},o.value),i.style),class:["".concat(l,"-tabpane"),h&&"".concat(l,"-tabpane-active"),i.class]},[(h||a.value||u)&&((s=e.default)===null||s===void 0?void 0:s.call(e))])}}});po.TabPane=sl;po.install=function(r){return r.component(po.name,po),r.component(sl.name,sl),r};var dI=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},vI=Se({name:"ACheckableTag",props:dI(),setup:function(t,n){var i=n.slots,e=n.emit,a=Dt("tag",t),o=a.prefixCls,s=function(f){var h=t.checked;e("update:checked",!h),e("change",!h),e("click",f)},l=q(function(){var u;return qe(o.value,(u={},ue(u,"".concat(o.value,"-checkable"),!0),ue(u,"".concat(o.value,"-checkable-checked"),t.checked),u))});return function(){var u;return E("span",{class:l.value,onClick:s},[(u=i.default)===null||u===void 0?void 0:u.call(i)])}}}),th=vI,gI=new RegExp("^(".concat(qy.join("|"),")(-inverse)?$")),pI=new RegExp("^(".concat(XA.join("|"),")$")),mI=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:me.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:me.any}},mo=Se({name:"ATag",props:mI(),slots:["closeIcon","icon"],setup:function(t,n){var i=n.slots,e=n.emit,a=n.attrs,o=Dt("tag",t),s=o.prefixCls,l=o.direction,u=ee(!0);Ht(function(){t.visible!==void 0&&(u.value=t.visible)});var f=function(v){v.stopPropagation(),e("update:visible",!1),e("close",v),!v.defaultPrevented&&t.visible===void 0&&(u.value=!1)},h=q(function(){var d=t.color;return d?gI.test(d)||pI.test(d):!1}),c=q(function(){var d;return qe(s.value,(d={},ue(d,"".concat(s.value,"-").concat(t.color),h.value),ue(d,"".concat(s.value,"-has-color"),t.color&&!h.value),ue(d,"".concat(s.value,"-hidden"),!u.value),ue(d,"".concat(s.value,"-rtl"),l.value==="rtl"),d))});return function(){var d,v,g,m=t.icon,p=m===void 0?(d=i.icon)===null||d===void 0?void 0:d.call(i):m,_=t.color,b=t.closeIcon,x=b===void 0?(v=i.closeIcon)===null||v===void 0?void 0:v.call(i):b,C=t.closable,y=C===void 0?!1:C,w=function(){return y?x?E("div",{class:"".concat(s.value,"-close-icon"),onClick:f},[x]):E(sc,{class:"".concat(s.value,"-close-icon"),onClick:f},null):null},P={backgroundColor:_&&!h.value?_:void 0},T=p||null,L=(g=i.default)===null||g===void 0?void 0:g.call(i),j=T?E(Ze,null,[T,E("span",null,[L])]):L,M="onClick"in a,D=E("span",{class:c.value,style:P},[j,w()]);return M?E(Qy,null,{default:function(){return[D]}}):D}}});mo.CheckableTag=th;mo.install=function(r){return r.component(mo.name,mo),r.component(th.name,th),r};var _I=mo,x0={exports:{}};(function(r){(function(t){var n,i,e="fulfilled",a="undefined",o=function(){var f=[],h=0;function c(){for(;f.length-h;){try{f[h]()}catch(v){t.console&&t.console.error(v)}f[h++]=i,h==1024&&(f.splice(0,1024),h=0)}}var d=function(){if(typeof MutationObserver===a)return typeof process!==a&&typeof process.nextTick=="function"?function(){process.nextTick(c)}:typeof setImmediate!==a?function(){setImmediate(c)}:function(){setTimeout(c,0)};var v=document.createElement("div");return new MutationObserver(c).observe(v,{attributes:!0}),function(){v.setAttribute("a",0)}}();return function(v){f.push(v),f.length-h==1&&d()}}();function s(f){if(!(this instanceof s))throw new TypeError("Zousan must be created with the new keyword");if(typeof f=="function"){var h=this;try{f(function(c){h.resolve(c)},function(c){h.reject(c)})}catch(c){h.reject(c)}}else if(0<arguments.length)throw new TypeError("Zousan resolver "+f+" is not a function")}function l(f,h){if(typeof f.y=="function")try{var c=f.y.call(i,h);f.p.resolve(c)}catch(d){f.p.reject(d)}else f.p.resolve(h)}function u(f,h){if(typeof f.n=="function")try{var c=f.n.call(i,h);f.p.resolve(c)}catch(d){f.p.reject(d)}else f.p.reject(h)}s.prototype={resolve:function(f){if(this.state===n){if(f===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var h=this;if(f&&(typeof f=="function"||typeof f=="object"))try{var c=!0,d=f.then;if(typeof d=="function")return void d.call(f,function(v){c&&(c=!1,h.resolve(v))},function(v){c&&(c=!1,h.reject(v))})}catch(v){return void(c&&this.reject(v))}this.state=e,this.v=f,h.c&&o(function(){for(var v=0,g=h.c.length;v<g;v++)l(h.c[v],f)})}},reject:function(f){if(this.state===n){var h=this;this.state="rejected",this.v=f;var c=this.c;o(c?function(){for(var d=0,v=c.length;d<v;d++)u(c[d],f)}:function(){h.handled||!s.suppressUncaughtRejectionError&&t.console&&s.warn("You upset Zousan. Please catch rejections: ",f,f?f.stack:null)})}},then:function(f,h){var c=new s,d={y:f,n:h,p:c};if(this.state===n)this.c?this.c.push(d):this.c=[d];else{var v=this.state,g=this.v;this.handled=!0,o(function(){v===e?l(d,g):u(d,g)})}return c},catch:function(f){return this.then(null,f)},finally:function(f){return this.then(f,f)},timeout:function(f,h){h=h||"Timeout";var c=this;return new s(function(d,v){setTimeout(function(){v(Error(h))},f),c.then(function(g){d(g)},function(g){v(g)})})}},s.resolve=function(f){var h=new s;return h.resolve(f),h},s.reject=function(f){var h=new s;return h.c=[],h.reject(f),h},s.all=function(f){var h=[],c=0,d=new s;function v(m,p){m&&typeof m.then=="function"||(m=s.resolve(m)),m.then(function(_){h[p]=_,++c==f.length&&d.resolve(h)},function(_){d.reject(_)})}for(var g=0;g<f.length;g++)v(f[g],g);return f.length||d.resolve(h),d},s.warn=console.warn,r.exports&&(r.exports=s),t.define&&t.define.amd&&t.define([],function(){return s}),(t.Zousan=s).soon=o})(Ns)})(x0);var yI=x0.exports,Ec={exports:{}},w0={exports:{}};(function(r,t){(function(n,i){r.exports=i()})(Ns,function(){function n(o,s,l,u,f){i(o,s,l||0,u||o.length-1,f||a)}function i(o,s,l,u,f){for(;u>l;){if(u-l>600){var h=u-l+1,c=s-l+1,d=Math.log(h),v=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*v*(h-v)/h)*(c-h/2<0?-1:1),m=Math.max(l,Math.floor(s-c*v/h+g)),p=Math.min(u,Math.floor(s+(h-c)*v/h+g));i(o,s,m,p,f)}var _=o[s],b=l,x=u;for(e(o,l,s),f(o[u],_)>0&&e(o,l,u);b<x;){for(e(o,b,x),b++,x--;f(o[b],_)<0;)b++;for(;f(o[x],_)>0;)x--}f(o[l],_)===0?e(o,l,x):(x++,e(o,x,u)),x<=s&&(l=x+1),s<=x&&(u=x-1)}}function e(o,s,l){var u=o[s];o[s]=o[l],o[l]=u}function a(o,s){return o<s?-1:o>s?1:0}return n})})(w0);Ec.exports=jo;Ec.exports.default=jo;var bI=w0.exports;function jo(r,t){if(!(this instanceof jo))return new jo(r,t);this._maxEntries=Math.max(4,r||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}jo.prototype={all:function(){return this._all(this.data,[])},search:function(r){var t=this.data,n=[],i=this.toBBox;if(!gs(r,t))return n;for(var e=[],a,o,s,l;t;){for(a=0,o=t.children.length;a<o;a++)s=t.children[a],l=t.leaf?i(s):s,gs(r,l)&&(t.leaf?n.push(s):Tu(r,l)?this._all(s,n):e.push(s));t=e.pop()}return n},collides:function(r){var t=this.data,n=this.toBBox;if(!gs(r,t))return!1;for(var i=[],e,a,o,s;t;){for(e=0,a=t.children.length;e<a;e++)if(o=t.children[e],s=t.leaf?n(o):o,gs(r,s)){if(t.leaf||Tu(r,s))return!0;i.push(o)}t=i.pop()}return!1},load:function(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(var t=0,n=r.length;t<n;t++)this.insert(r[t]);return this}var i=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var e=this.data;this.data=i,i=e}this._insert(i,this.data.height-i.height-1,!0)}return this},insert:function(r){return r&&this._insert(r,this.data.height-1),this},clear:function(){return this.data=Di([]),this},remove:function(r,t){if(!r)return this;for(var n=this.data,i=this.toBBox(r),e=[],a=[],o,s,l,u;n||e.length;){if(n||(n=e.pop(),s=e[e.length-1],o=a.pop(),u=!0),n.leaf&&(l=xI(r,n.children,t),l!==-1))return n.children.splice(l,1),e.push(n),this._condense(e),this;!u&&!n.leaf&&Tu(n,i)?(e.push(n),a.push(o),o=0,s=n,n=n.children[0]):s?(o++,n=s.children[o],u=!1):n=null}return this},toBBox:function(r){return r},compareMinX:qg,compareMinY:Xg,toJSON:function(){return this.data},fromJSON:function(r){return this.data=r,this},_all:function(r,t){for(var n=[];r;)r.leaf?t.push.apply(t,r.children):n.push.apply(n,r.children),r=n.pop();return t},_build:function(r,t,n,i){var e=n-t+1,a=this._maxEntries,o;if(e<=a)return o=Di(r.slice(t,n+1)),wi(o,this.toBBox),o;i||(i=Math.ceil(Math.log(e)/Math.log(a)),a=Math.ceil(e/Math.pow(a,i-1))),o=Di([]),o.leaf=!1,o.height=i;var s=Math.ceil(e/a),l=s*Math.ceil(Math.sqrt(a)),u,f,h,c;for(Jg(r,t,n,l,this.compareMinX),u=t;u<=n;u+=l)for(h=Math.min(u+l-1,n),Jg(r,u,h,s,this.compareMinY),f=u;f<=h;f+=s)c=Math.min(f+s-1,h),o.children.push(this._build(r,f,c,i-1));return wi(o,this.toBBox),o},_chooseSubtree:function(r,t,n,i){for(var e,a,o,s,l,u,f,h;i.push(t),!(t.leaf||i.length-1===n);){for(f=h=1/0,e=0,a=t.children.length;e<a;e++)o=t.children[e],l=Pu(o),u=wI(r,o)-l,u<h?(h=u,f=l<f?l:f,s=o):u===h&&l<f&&(f=l,s=o);t=s||t.children[0]}return t},_insert:function(r,t,n){var i=this.toBBox,e=n?r:i(r),a=[],o=this._chooseSubtree(e,this.data,t,a);for(o.children.push(r),to(o,e);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(e,a,t)},_split:function(r,t){var n=r[t],i=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,i);var a=this._chooseSplitIndex(n,e,i),o=Di(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,wi(n,this.toBBox),wi(o,this.toBBox),t?r[t-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(r,t){this.data=Di([r,t]),this.data.height=r.height+1,this.data.leaf=!1,wi(this.data,this.toBBox)},_chooseSplitIndex:function(r,t,n){var i,e,a,o,s,l,u,f;for(l=u=1/0,i=t;i<=n-t;i++)e=eo(r,0,i,this.toBBox),a=eo(r,i,n,this.toBBox),o=CI(e,a),s=Pu(e)+Pu(a),o<l?(l=o,f=i,u=s<u?s:u):o===l&&s<u&&(u=s,f=i);return f},_chooseSplitAxis:function(r,t,n){var i=r.leaf?this.compareMinX:qg,e=r.leaf?this.compareMinY:Xg,a=this._allDistMargin(r,t,n,i),o=this._allDistMargin(r,t,n,e);a<o&&r.children.sort(i)},_allDistMargin:function(r,t,n,i){r.children.sort(i);var e=this.toBBox,a=eo(r,0,t,e),o=eo(r,n-t,n,e),s=vs(a)+vs(o),l,u;for(l=t;l<n-t;l++)u=r.children[l],to(a,r.leaf?e(u):u),s+=vs(a);for(l=n-t-1;l>=t;l--)u=r.children[l],to(o,r.leaf?e(u):u),s+=vs(o);return s},_adjustParentBBoxes:function(r,t,n){for(var i=n;i>=0;i--)to(t[i],r)},_condense:function(r){for(var t=r.length-1,n;t>=0;t--)r[t].children.length===0?t>0?(n=r[t-1].children,n.splice(n.indexOf(r[t]),1)):this.clear():wi(r[t],this.toBBox)},_initFormat:function(r){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(r[0])),this.compareMinY=new Function("a","b",t.join(r[1])),this.toBBox=new Function("a","return {minX: a"+r[0]+", minY: a"+r[1]+", maxX: a"+r[2]+", maxY: a"+r[3]+"};")}};function xI(r,t,n){if(!n)return t.indexOf(r);for(var i=0;i<t.length;i++)if(n(r,t[i]))return i;return-1}function wi(r,t){eo(r,0,r.children.length,t,r)}function eo(r,t,n,i,e){e||(e=Di(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=t,o;a<n;a++)o=r.children[a],to(e,r.leaf?i(o):o);return e}function to(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function qg(r,t){return r.minX-t.minX}function Xg(r,t){return r.minY-t.minY}function Pu(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function vs(r){return r.maxX-r.minX+(r.maxY-r.minY)}function wI(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function CI(r,t){var n=Math.max(r.minX,t.minX),i=Math.max(r.minY,t.minY),e=Math.min(r.maxX,t.maxX),a=Math.min(r.maxY,t.maxY);return Math.max(0,e-n)*Math.max(0,a-i)}function Tu(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function gs(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function Di(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Jg(r,t,n,i,e){for(var a=[t,n],o;a.length;)n=a.pop(),t=a.pop(),!(n-t<=i)&&(o=t+Math.ceil((n-t)/i/2)*i,bI(r,o,t,n,e),a.push(t,o,o,n))}var PI=Ec.exports,C0={exports:{}};(function(r){(function(){function t(s,l){var u=s.x-l.x,f=s.y-l.y;return u*u+f*f}function n(s,l,u){var f=l.x,h=l.y,c=u.x-f,d=u.y-h;if(c!==0||d!==0){var v=((s.x-f)*c+(s.y-h)*d)/(c*c+d*d);v>1?(f=u.x,h=u.y):v>0&&(f+=c*v,h+=d*v)}return c=s.x-f,d=s.y-h,c*c+d*d}function i(s,l){for(var u=s[0],f=[u],h,c=1,d=s.length;c<d;c++)h=s[c],t(h,u)>l&&(f.push(h),u=h);return u!==h&&f.push(h),f}function e(s,l,u,f,h){for(var c=f,d,v=l+1;v<u;v++){var g=n(s[v],s[l],s[u]);g>c&&(d=v,c=g)}c>f&&(d-l>1&&e(s,l,d,f,h),h.push(s[d]),u-d>1&&e(s,d,u,f,h))}function a(s,l){var u=s.length-1,f=[s[0]];return e(s,0,u,l,f),f.push(s[u]),f}function o(s,l,u){if(s.length<=2)return s;var f=l!==void 0?l*l:1;return s=u?s:i(s,f),s=a(s,f),s}r.exports=o,r.exports.default=o})()})(C0);var TI=C0.exports;/*!
* Contains code from THREE.js
* MIT License
* https://github.com/mrdoob/three.js
*/var Cr=[];for(var Su=0;Su<6;Su++)Cr[Su]=[];var ps=[];function Mu(r,t,n){SI(r);for(var i=0;i<6;i++)if(!(n&&n.charAt(i)==="0")){var e=Cr[i];if(ps[0]=e[0]>0?t[1][0]:t[0][0],ps[1]=e[1]>0?t[1][1]:t[0][1],ps[2]=e[2]>0?t[1][2]:t[0][2],MI(e,ps)<0)return!1}return!0}function SI(r){var t=r,n=t[0],i=t[1],e=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],h=t[9],c=t[10],d=t[11],v=t[12],g=t[13],m=t[14],p=t[15];Ci(Cr[0],a-n,u-o,d-f,p-v),Ci(Cr[1],a+n,u+o,d+f,p+v),Ci(Cr[2],a+i,u+s,d+h,p+g),Ci(Cr[3],a-i,u-s,d-h,p-g),Ci(Cr[4],a-e,u-l,d-c,p-m),Ci(Cr[5],a+e,u+l,d+c,p+m)}var ms=1/6;function Ci(r,t,n,i,e){return r[0]=t*ms,r[1]=n*ms,r[2]=i*ms,r[3]=e*ms,r}function MI(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]}/*!
 * maptalks v1.0.0-rc.4
 * LICENSE : BSD-3-Clause
 * (c) 2016-2022 maptalks.org
 */var EI="1.0.0-rc.4",Ho="_maptalks__internal_layer_",P0=["MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"],OI=["FeatureCollection","Feature","Point","LineString","Polygon"].concat(P0),T0=["markerFile","polygonPatternFile","linePatternFile","markerFillPatternFile","markerLinePatternFile"],AI=[["markerWidth","markerHeight"],[],[null,"lineWidth"],[],[null,"markerLineWidth"]],RI={lineWidth:1,lineOpacity:1,lineDx:1,lineDy:1,polygonOpacity:1,markerWidth:1,markerHeight:1,markerDx:1,markerDy:1,markerOpacity:1,markerFillOpacity:1,markerLineWidth:1,markerLineOpacity:1,textSize:1,textOpacity:1,textHaloRadius:1,textWrapWidth:1,textLineSpacing:1,textDx:1,textDy:1},II=["lineColor","polygonFill","markerFill","markerLineColor","textFill"],S0=14;function nt(){return Date.now()}function fe(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r[i]=n[i]}return r}function N(r){return r==null}function be(r){return typeof r=="number"&&!isNaN(r)}function Pr(r){return(r|0)===r}function Pn(r){return typeof r=="object"&&!!r}function Re(r){return N(r)?!1:typeof r=="string"||r.constructor!==null&&r.constructor===String}function Xe(r){return N(r)?!1:typeof r=="function"||r.constructor!==null&&r.constructor===Function}var kI=Object.prototype.hasOwnProperty;function Bo(r,t){return kI.call(r,t)}var M0=Math.PI/180;function Ct(r){return r*M0}function DI(r){return r/M0}var ct=Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"&&!process.versions.electron&&!process.versions.nw&&!process.versions["node-webkit"],xn={},_s={};function Qg(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI}if(!ct){var Un=navigator.userAgent.toLowerCase(),Eu=document.documentElement,Pi="ActiveXObject"in window,Ou=Un.indexOf("webkit")!==-1,Au=Un.indexOf("phantom")!==-1,ep=Un.search("android [23]")!==-1,Ru=Un.indexOf("chrome")!==-1,tp=Un.indexOf("gecko")!==-1&&!Ou&&!window.opera&&!Pi,ja=typeof orientation!="undefined"||Un.indexOf("mobile")!==-1,np=!window.PointerEvent&&window.MSPointerEvent,rp=window.PointerEvent&&navigator.pointerEnabled||np,ip=Pi&&"transition"in Eu.style,Iu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ep,ap="MozPerspective"in Eu.style,op="OTransition"in Eu.style,LI=(ip||Iu||ap)&&!op&&!Au,jI=typeof window!="undefined"&&Xe(window.createImageBitmap),NI=typeof window!="undefined"&&Xe(window.ResizeObserver),zI=typeof window!="undefined"&&Xe(window.btoa),sp=0;Ru&&(sp=Un.match(/chrome\/([\d.]+)/)[1]);var FI=!Au&&(rp||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),HI=typeof window!="undefined"&&"WebGLRenderingContext"in window,lp=Qg(),ku=!1;try{var BI=new OffscreenCanvas(2,2);BI.getContext("2d"),ku=!0}catch{ku=!1}var up=!1;try{window.addEventListener("testPassive",function(){},{get passive(){up=!0}})}catch{}if(xn={ie:Pi,ielt9:Pi&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:Ou,gecko:tp,android:Un.indexOf("android")!==-1,android23:ep,chrome:Ru,chromeVersion:sp,safari:!Ru&&Un.indexOf("safari")!==-1,phantomjs:Au,ie3d:ip,webkit3d:Iu,gecko3d:ap,opera12:op,any3d:LI,mobile:ja,mobileWebkit:ja&&Ou,mobileWebkit3d:ja&&Iu,mobileOpera:ja&&window.opera,mobileGecko:ja&&tp,touch:!!FI,msPointer:!!np,pointer:!!rp,retina:lp>1,devicePixelRatio:lp,language:navigator.browserLanguage?navigator.browserLanguage:navigator.language,ie9:Pi&&document.documentMode===9,ie10:Pi&&document.documentMode===10,webgl:HI,imageBitMap:jI,resizeObserver:NI,btoa:zI,decodeImageInWorker:ku,monitorDPRChange:!0,supportsPassive:up,removeDPRListening:function(t){t&&delete _s[t.id]},checkDevicePixelRatio:function(){if(typeof window!="undefined"&&xn.monitorDPRChange){var t=Qg(),n=t!==xn.devicePixelRatio;return n&&(xn.devicePixelRatio=t),n}return!1},addDPRListening:function(t){t&&(_s[t.id]=t)}},typeof window!="undefined"&&window.matchMedia)for(var Du=1;Du<500;Du++){var $I=(Du*.01).toFixed(2),Na=window.matchMedia("screen and (resolution: "+$I+"dppx)");Na&&(Na.addEventListener?Na.addEventListener("change",xn.checkDevicePixelRatio):Na.addListener&&Na.addListener(xn.checkDevicePixelRatio))}if(xn.devicePixelRatio){var Lu=xn.devicePixelRatio;Object.defineProperty(xn,"devicePixelRatio",{get:function(){return Lu},set:function(t){if(t!==Lu&&(Lu=t,!!xn.monitorDPRChange))for(var n in _s){var i=_s[n];if(!(!i||!i.options||i.options.devicePixelRatio||!i.checkSize||!i.getRenderer)){var e=i.getRenderer();e&&i.checkSize(!0)}}}})}}var De=xn;function re(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}function at(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var E0=function(){function r(n,i){if(!N(n)&&!N(i)?(this.x=+n,this.y=+i):!N(n.x)&&!N(n.y)?(this.x=+n.x,this.y=+n.y):Array.isArray(n)&&(this.x=+n[0],this.y=+n[1]),this._isNaN())throw new Error("Position is NaN")}var t=r.prototype;return t.set=function(i,e){return this.x=i,this.y=e,this},t.abs=function(){return new this.constructor(Math.abs(this.x),Math.abs(this.y))},t._abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t._round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.round=function(){return new this.constructor(Math.round(this.x),Math.round(this.y))},t._ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.ceil=function(){return new this.constructor(Math.ceil(this.x),Math.ceil(this.y))},t.distanceTo=function(i){var e=i.x-this.x,a=i.y-this.y;return Math.sqrt(e*e+a*a)},t.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t._floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},t.floor=function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))},t.copy=function(){return new this.constructor(this.x,this.y)},t._add=function(i,e){return N(i.x)?N(i[0])?(this.x+=i,this.y+=e):(this.x+=i[0],this.y+=i[1]):(this.x+=i.x,this.y+=i.y),this},t.add=function(i,e){var a,o;return N(i.x)?N(i[0])?(a=this.x+i,o=this.y+e):(a=this.x+i[0],o=this.y+i[1]):(a=this.x+i.x,o=this.y+i.y),new this.constructor(a,o)},t._sub=function(i,e){return N(i.x)?N(i[0])?(this.x-=i,this.y-=e):(this.x-=i[0],this.y-=i[1]):(this.x-=i.x,this.y-=i.y),this},t._substract=function(){return this._sub.apply(this,arguments)},t.sub=function(i,e){var a,o;return N(i.x)?N(i[0])?(a=this.x-i,o=this.y-e):(a=this.x-i[0],o=this.y-i[1]):(a=this.x-i.x,o=this.y-i.y),new this.constructor(a,o)},t.substract=function(){return this.sub.apply(this,arguments)},t.multi=function(i){return new this.constructor(this.x*i,this.y*i)},t._multi=function(i){return this.x*=i,this.y*=i,this},t.div=function(i){return this.multi(1/i)},t._div=function(i){return this._multi(1/i)},t.equals=function(i){return i instanceof this.constructor?this.x===i.x&&this.y===i.y:!1},t._isNaN=function(){return isNaN(this.x)||isNaN(this.y)},t.isZero=function(){return this.x===0&&this.y===0},t.toArray=function(){return[this.x,this.y]},t.toFixed=function(i){return new this.constructor(this.x.toFixed(i),this.y.toFixed(i))},t.toJSON=function(){return{x:this.x,y:this.y}},r}(),B=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.closeTo=function(e,a){return a||(a=0),this.x>=e.x-a&&this.x<=e.x+a&&this.y>=e.y-a&&this.y<=e.y+a},n.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.unit=function(){return this.copy()._unit()},n._unit=function(){return this._div(this.mag()),this},n.perp=function(){return this.copy()._perp()},n._perp=function(){var e=this.y;return this.y=this.x,this.x=-e,this},n.angleWith=function(e){return this.angleWithSep(e.x,e.y)},n.angleWithSep=function(e,a){return Math.atan2(this.x*a-this.y*e,this.x*e+this.y*a)},n._rotate=function(e){var a=Math.cos(e),o=Math.sin(e),s=a*this.x-o*this.y,l=o*this.x+a*this.y;return this.x=s,this.y=l,this},n.rotate=function(e){return this.copy()._rotate(e)},t}(E0),oa,ll;(function(){if(ct){oa=function(o){return setTimeout(o,16)},ll=clearTimeout;return}var r,t,n=1e3/30;function i(a){return setTimeout(a,n)}function e(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}typeof window!="undefined"?(r=window.requestAnimationFrame||e("RequestAnimationFrame")||i,t=window.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)}):(r=i,t=clearTimeout),oa=function(o){return r(o)},ll=function(o){o&&t(o)}})();function Vi(r){var t="data:image/svg+xml";return r.length>4&&r.slice(-4)===".svg"?1:r.slice(0,t.length)===t?2:0}function ul(r,t){if(ct&&ul.node){ul.node(r,t);return}r.src=t[0]}var WI=0;function ba(){return WI++}function Oc(r){return!r||!Re(r)?r:JSON.parse(r)}function xa(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i=0,e=n.length;i<e;i++)r.push(n[i])}return r.length}function nh(r,t){var n=t.indexOf(r);n>-1&&t.splice(n,1)}function sa(r,t,n){if(!Array.isArray(r))return n?t.call(n,r):t(r);for(var i=[],e,a,o=0,s=r.length;o<s;o++){if(e=r[o],N(e)){i.push(null);continue}Array.isArray(e)?i.push(sa(e,t,n)):(a=n?t.call(n,e):t(e),i.push(a))}return i}function ye(r,t){return r===void 0?t:r}function dt(r){return Math.sign?Math.sign(r):(r=+r,r===0||isNaN(r)?Number(r):r>0?1:-1)}function fp(r){if(Math.log2)return Math.log2(r);var t=Math.log(r)*Math.LOG2E,n=Math.round(t);return Math.abs(n-t)<1e-14?n:t}function rh(r,t,n){return r*(1-n)+t*n}function hi(r,t,n){if(r===n||r===t)return r;var i=n-t,e=((r-t)%i+i)%i+t;return e}function ih(r,t,n){return Math.min(n,Math.max(t,r))}function We(r){return Array.isArray(r)&&r.length>0}var O0=/^url\((['"])(.+)\1\)$/i,A0=/^url\(([^'"].*[^'"])\)$/i;function GI(r){return Re(r)?A0.test(r)?1:O0.test(r)?2:3:0}function Ac(r){var t=GI(r),n;return t===3?r:t===1?(n=A0.exec(r),n[1]):t===2?(n=O0.exec(r),n[2]):r}var VI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ZI(r){if(De.btoa)return window.btoa(r);for(var t=String(r),n="",i,e,a=0,o=VI;t.charAt(a|0)||(o="=",a%1);n+=o.charAt(63&i>>8-a%1*8)){if(e=t.charCodeAt(a+=3/4),e>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|e}return n}function UI(r,t){for(var n=atob(r),i=new ArrayBuffer(n.length),e=new Uint8Array(i),a=0;a<n.length;a++)e[a]=n.charCodeAt(a)&255;var o=new Blob([i],{type:t});return o}function ah(r,t,n,i){var e=n-r,a=i-t;return Math.atan2(a,e)}var R0="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function oh(r,t){if(!r&&!t)return!0;if(!r||!t)return!1;for(var n in r)if(n==="center"){if(!t[n]||!hp(r[n][0],t[n][0])||!hp(r[n][1],t[n][1]))return!1}else if(r[n]!==t[n])return!1;return!0}function hp(r,t,n){return n==null&&(n=1e-6),r>=t-n&&r<=t+n}function I0(r,t,n,i){r||(r=100),t||(t=4);var e=this;t*=2,this._flashTimeout&&clearTimeout(this._flashTimeout);function a(){if(t===0){e.show(),n&&(i?n.call(i):n());return}t%2===0?e.hide():e.show(),t--,e._flashTimeout=setTimeout(a,r)}return this._flashTimeout=setTimeout(a,r),this}function fl(r,t){r===void 0&&(r=[]),t===void 0&&(t="_pt");for(var n=[],i=0,e=r.length;i<e;i++){var a=r[i];if(!a){n.push(null);continue}a[t]||(a[t]=new B(0,0));var o=a[t];o.x=0,o.y=0,n.push(o)}return n}var k0;if(De.decodeImageInWorker){var ju=document.createElement("canvas");ju.width=1,ju.height=1,k0=ju.getContext("2d")}function D0(r,t){var n=k0.createImageData(r.width,r.height);n.data.set(r.data),createImageBitmap(n).then(function(i){t(i)})}function L0(r){if(r&&r.indexOf("http://")===0||r.indexOf("https://")===0)return r;var t=document.createElement("a");return t.href=r,r=t.href,t=null,r}var za={cssWidth:"1px",cssHeight:"1px",width:1,height:1};function j0(r,t){t===void 0&&(t=1);var n=r.width,i=r.height;return za.cssWidth=n+"px",za.cssHeight=i+"px",za.width=Math.round(n*t),za.height=Math.round(i*t),za}function N0(r,t){var n,i,e;if(!ot(r))n=function(){return r},i=!0,e=!0;else{var a=r.stops&&typeof r.stops[0][0]=="object",o=a||r.property!==void 0,s=a||!o,l=r.type||t||"exponential",u;if(l==="exponential")u=cp;else if(l==="interval")u=qI;else if(l==="categorical")u=YI;else if(l==="identity")u=XI;else throw new Error('Unknown function type "'+l+'"');if(a){for(var f={},h=[],c=0;c<r.stops.length;c++){var d=r.stops[c];f[d[0].zoom]===void 0&&(f[d[0].zoom]={zoom:d[0].zoom,type:r.type,property:r.property,default:r.default,stops:[]}),f[d[0].zoom].stops.push([d[0].value,d[1]])}for(var v in f)h.push([f[v].zoom,N0(f[v])]);n=function(m,p){var _=cp({stops:h,base:r.base},m)(m,p);return typeof _=="function"?_(m,p):_},i=!1,e=!1}else s?(n=function(m){var p=u(r,m);return typeof p=="function"?p(m):p},i=!0,e=!1):(n=function(m,p){var _=u(r,p?p[r.property]:null);return typeof _=="function"?_(m,p):_},i=!1,e=!0)}return n.isZoomConstant=e,n.isFeatureConstant=i,n}function KI(r,t,n){return r!==void 0?r:t!==void 0?t:n!==void 0?n:null}function YI(r,t){for(var n=0;n<r.stops.length;n++)if(t===r.stops[n][0])return r.stops[n][1];return r.default}function qI(r,t){for(var n=0;n<r.stops.length&&!(t<r.stops[n][0]);n++);return r.stops[Math.max(n-1,0)][1]}function cp(r,t){for(var n=r.base!==void 0?r.base:1,i=0;!(i>=r.stops.length);){if(t<=r.stops[i][0])break;i++}return i===0?r.stops[i][1]:i===r.stops.length?r.stops[i-1][1]:z0(t,n,r.stops[i-1][0],r.stops[i][0],r.stops[i-1][1],r.stops[i][1])}function XI(r,t){return KI(t,r.default)}function z0(r,t,n,i,e,a){return typeof e=="function"?function(){var o=e.apply(void 0,arguments),s=a.apply(void 0,arguments);return z0(r,t,n,i,o,s)}:e.length?JI(r,t,n,i,e,a):F0(r,t,n,i,e,a)}function F0(r,t,n,i,e,a){var o=i-n,s=r-n,l;return t===1?l=s/o:l=(Math.pow(t,s)-1)/(Math.pow(t,o)-1),e*(1-l)+a*l}function JI(r,t,n,i,e,a){for(var o=[],s=0;s<e.length;s++)o[s]=F0(r,t,n,i,e[s],a[s]);return o}function ot(r){return r&&typeof r=="object"&&(r.stops||r.property&&r.type==="identity")}function H0(r){for(var t in r)if(ot(r[t]))return!0;return!1}function B0(r){return $0(r,"exponential")}function Rc(r,t){if(!r)return null;var n=!1;if(Array.isArray(r)){for(var i=[],e,a=0;a<r.length;a++)e=Rc(r[a],t),e?(i.push(e),n=!0):i.push(r[a]);return n?i:r}var o={__fn_types_loaded:!0},s=[],l;for(l in r)r.hasOwnProperty(l)&&s.push(l);for(var u=function(d){Object.defineProperty(o,d,{get:function(){return this["__fn_"+d]||(this["__fn_"+d]=B0(this["_"+d])),this["__fn_"+d].apply(this,t())},set:function(g){this["_"+d]=g},configurable:!0,enumerable:!0})},f=0,h=s.length;f<h;f++)l=s[f],ot(r[l])?(n=!0,o["_"+l]=r[l],u(l)):o[l]=r[l];return n?o:r}function dp(r){if(!r||!r.stops)return[];for(var t=[],n=0,i=r.stops.length;n<i;n++)t.push(r.stops[n][1]);return t}function $0(r,t){if(!ot(r))return function(){return r};r=JSON.parse(JSON.stringify(r));var n=!0,i=!0,e=r.stops;if(e){for(var a=0;a<e.length;a++)if(ot(e[a][1])){var o=$0(e[a][1],t);n=n&&o.isZoomConstant,i=i&&o.isFeatureConstant,e[a]=[e[a][0],o]}}var s=N0(r,t);return s.isZoomConstant=n&&s.isZoomConstant,s.isFeatureConstant=i&&s.isFeatureConstant,s}var Ic=["Unknown","Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"];function kc(r){return new Function("f","var p = (f && f.properties || {}); return "+W0(r))}function W0(r){if(!r)return"true";var t=r[0];if(r.length<=1)return t==="any"?"false":"true";var n=t==="=="?Nu(r[1],r[2],"===",!1):t==="!="?Nu(r[1],r[2],"!==",!1):t==="<"||t===">"||t==="<="||t===">="?Nu(r[1],r[2],t,!0):t==="any"?zu(r.slice(1),"||"):t==="all"?zu(r.slice(1),"&&"):t==="none"?Fu(zu(r.slice(1),"||")):t==="in"?vp(r[1],r.slice(2)):t==="!in"?Fu(vp(r[1],r.slice(2))):t==="has"?gp(r[1]):t==="!has"?Fu(gp(r[1])):"true";return"("+n+")"}function G0(r){return r[0]==="$"?"f."+r.substring(1):"p["+JSON.stringify(r)+"]"}function Nu(r,t,n,i){var e=G0(r),a=r==="$type"?Ic.indexOf(t):JSON.stringify(t);return(i?"typeof "+e+"=== typeof "+a+"&&":"")+e+n+a}function zu(r,t){return r.map(W0).join(t)}function vp(r,t){r==="$type"&&(t=t.map(function(e){return Ic.indexOf(e)}));var n=JSON.stringify(t.sort(QI)),i=G0(r);return t.length<=200?n+".indexOf("+i+") !== -1":`function(v, a, i, j) {
        while (i <= j) { var m = (i + j) >> 1;
            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;
        }
    return false; }(`+i+", "+n+",0,"+(t.length-1)+")"}function gp(r){return r==="$id"?'"id" in f':JSON.stringify(r)+" in p"}function Fu(r){return"!("+r+")"}function QI(r,t){return r<t?-1:r>t?1:0}function sh(r){var t=r._toJSON(),n=t.feature;return n.type=Ic.indexOf(n.geometry.type),n.subType=t.subType,n}function V0(r){if(!Array.isArray(r))return V0([r]);for(var t=[],n=0;n<r.length;n++){var i=void 0;r[n].filter===!0?i=function(){return!0}:i=kc(r[n].filter),t.push(ek({},r[n],{filter:i}))}return t}function ek(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r[i]=n[i]}return r}var tk=[],nk={};function hl(r,t){return Rc(r,function(){var n=t.getMap();return rk(tk,n?n.getZoom():12,fe({},t.getProperties(),ik(nk,n&&n.getBearing()||0,n&&n.getPitch()||0,n?n.getZoom():10)))})}function rk(r,t,n){return r[0]=t,r[1]=n,r}function ik(r,t,n,i){return r["{bearing}"]=t,r["{pitch}"]=n,r["{zoom}"]=i,r}function ak(r){var t={stroke:{stroke:r.markerLineColor,"stroke-width":r.markerLineWidth,"stroke-opacity":r.markerLineOpacity,"stroke-dasharray":null,"stroke-linecap":"butt","stroke-linejoin":"round"},fill:{fill:r.markerFill,"fill-opacity":r.markerFillOpacity}};return t.stroke["stroke-width"]===0&&(t.stroke["stroke-opacity"]=0),t}function cl(r,t,n){if(!r.markerPath)return null;var i=1,e=ak(r);be(r.markerOpacity)&&(i=r.markerOpacity),be(r.opacity)&&(i*=r.opacity);var a={};if(e){for(var o in e.stroke)e.stroke.hasOwnProperty(o)&&(N(e.stroke[o])||(a[o]=e.stroke[o]));for(var s in e.fill)e.fill.hasOwnProperty(s)&&(N(e.fill[s])||(a[s]=e.fill[s]))}for(var l=Array.isArray(r.markerPath)?r.markerPath:[r.markerPath],u,f=[],h=0;h<l.length;h++)u=Re(l[h])?{path:l[h]}:l[h],u=fe({},u,a),u.d=u.path,delete u.path,f.push(u);var c=['<svg version="1.1"','xmlns="http://www.w3.org/2000/svg"'];i<1&&c.push('opacity="'+i+'"'),r.markerPathWidth&&r.markerPathHeight&&c.push('viewBox="0 0 '+r.markerPathWidth+" "+r.markerPathHeight+'"'),c.push('preserveAspectRatio="none"'),t&&c.push('width="'+t+'"'),n&&c.push('height="'+n+'"'),c.push("><defs></defs>");for(var d=0;d<f.length;d++){var v="<path ";for(var g in f[d])f[d].hasOwnProperty(g)&&(v+=" "+g+'="'+f[d][g]+'"');v+="></path>",c.push(v)}c.push("</svg>");var m="data:image/svg+xml;base64,"+ZI(c.join(" "));return m}function $l(r,t){if(!r)return[];var n=r;Array.isArray(r)||(n=[r]);for(var i=[],e=T0,a,o,s,l,u=n.length-1;u>=0;u--)if(r=n[u],!!r){t&&(r=lh(r));for(var f=0;f<e.length;f++)if(a=r[e[f]],ot(a)&&(a=dp(a)),!!a){Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++)a[h].slice(0,4)==="url("&&(a[h]=Ac(a[h])),o=AI[f],i.push([a[h],r[o[0]],r[o[1]]])}if(r.markerType==="path"&&r.markerPath)if(s=ot(r.markerWidth)?200:r.markerWidth,l=ot(r.markerHeight)?200:r.markerHeight,ot(r.markerPath)){a=dp(r.markerPath);for(var c=r.markerPath,d=0;d<a.length;d++)r.markerPath=a[d],i.push([cl(r),s,l]);r.markerPath=c}else i.push([cl(r),s,l])}return i}function lh(r){if(!r)return null;var t=r;if(ct)return t;for(var n=T0,i,e=0,a=n.length;e<a;e++)i=t[n[e]],i&&(t[n[e]]=Z0(i));return t}function Z0(r){if(ot(r)){for(var t=r.stops,n=0;n<t.length;n++)t[n][1]=Z0(t[n][1]);return r}return r.slice(0,4)==="url("&&(r=Ac(r)),r}var st=function(){function r(n,i){be(n)&&be(i)?(this.width=n,this.height=i):be(n.width)?(this.width=n.width,this.height=n.height):Array.isArray(n)&&(this.width=n[0],this.height=n[1])}var t=r.prototype;return t.copy=function(){return new r(this.width,this.height)},t.add=function(i,e){var a,o;return i instanceof r?(a=this.width+i.width,o=this.height+i.height):(a=this.width+i,o=this.height+e),new r(a,o)},t.equals=function(i){return this.width===i.width&&this.height===i.height},t.multi=function(i){return new r(this.width*i,this.height*i)},t._multi=function(i){return this.width*=i,this.height*=i,this},t._round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},t.toPoint=function(){return new B(this.width,this.height)},t.toArray=function(){return[this.width,this.height]},t.toJSON=function(){return{width:this.width,height:this.height}},r}();function U0(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}var ok=/[\b\t\r\v\f]/igm;function Dc(r){return Re(r)?r.replace(ok,""):r}function sk(r){return U0(r).split(/\s+/)}var pp=typeof document!="undefined"?document.createElement("canvas").getContext("2d"):null;function oi(r,t){return oi.node?oi.node(r,t):(pp.font=t,pp.measureText(r).width)}function K0(r,t,n){var i=oi(r,t);return new st(i,n||S0)}function mp(r,t,n,i){if(!r||r.length===0)return[{text:"",width:0}];var e=N(i)?oi(r,t):i,a=e/r.length,o=Math.floor(n/a/2);if(a>=n||o<=0)return[{text:"",width:n}];if(e<=n)return[{text:r,width:e}];for(var s=[],l=r.substring(0,o),u=a*o,f=o,h=r.length;f<h;f++){var c=r[f],d=oi(l+c);d>=n?(s.push({text:l,width:u}),l=r.substring(f,o+f),f+=o-1,u=a*o):(l+=c,u=d),f>=h-1&&(u=oi(l),s.push({text:l,width:u}))}return s}var lk=/\{([\w_]+)\}/g;function uh(r,t){return Re(r)?r.replace(lk,function(n,i){if(!t)return"";var e=t[i];return N(e)?"":Array.isArray(e)?e.join():e}):r}function fh(r,t){be(r)&&(r+=""),r=r||"";var n=t.textMaxHeight||0,i=q0(r,t);return n&&n<i.size.height&&(i.size.height=n),i}function ci(r,t,n){var i=r.width,e=r.height,a,o;return t==="left"?a=-i:t==="right"?a=0:a=-i/2,n==="top"?o=-e:n==="bottom"?o=0:o=-e/2,new B(a,o)}var uk="monospace";function Y0(r){return r.textFont?r.textFont:(r.textStyle&&r.textStyle!=="normal"?r.textStyle+" ":"")+(r.textWeight&&r.textWeight!=="normal"?r.textWeight+" ":"")+r.textSize+"px "+(r.textFaceName?r.textFaceName[0]==='"'?r.textFaceName:'"'+r.textFaceName+'"':uk)}function q0(r,t){var n=Y0(t),i=t.textLineSpacing||0,e=K0(r,n,t.textSize),a=e.width,o=e.height,s=t.textWrapCharacter,l=[],u=t.textWrapWidth;(!u||u>a)&&(u=a),Re(r)||(r+="");var f=0;if(s&&r.indexOf(s)>=0)for(var h=r.split(s),c=0,d=h.length;c<d;c++){var v=h[c],g=oi(v,n);if(g>u)for(var m=mp(v,n,u,g),p=0,_=m.length;p<_;p++){var b=m[p].width;b>f&&(f=b),l.push({text:m[p].text,size:new st(b,o)})}else g>f&&(f=g),l.push({text:v,size:new st(g,o)})}else if(a>u)for(var x=mp(r,n,u,a),C=0;C<x.length;C++){var y=x[C].width;y>f&&(f=y),l.push({text:x[C].text,size:new st(y,o)})}else a>f&&(f=a),l.push({text:r,size:e});var w=l.length,P=new st(f,o*w+i*(w-1));return{total:w,size:P,rows:l,rawSize:e}}function X0(r){var t=0,n=r&&r.length||0;if(!n)return t;for(var i,e=0;e<n;e++)i=r.charCodeAt(e),t=(t<<5)-t+i,t=t&t;return t}function Lr(r){return r&&r.colorStops}function _p(r){var t=[r.type];if(r.places&&t.push(r.places.join()),r.colorStops){for(var n=[],i=r.colorStops.length-1;i>=0;i--)n.push(r.colorStops[i].join());t.push(n.join(","))}return t.join("_")}function Lc(r,t){if(!r)return 1;var n=[];if(Array.isArray(r)){for(var i=0;i<r.length;i++)n.push(Lc(r[i],t));return n.sort().join(",")}var e=Object.keys(r).sort(),a=e.reduce(function(s,l){return(!t||l.indexOf(t)===0)&&(s[l]=r[l]),s},{}),o=X0(JSON.stringify(a));return o}function hh(r,t){function n(o,s){var l=o.opacity;N(l)?o.opacity=s:o.opacity*=s}var i;if(Array.isArray(r)){i=[];for(var e=0;e<r.length;e++){var a=fe({},r[e]);n(a,t),i.push(a)}}else i=fe({},r),n(i,t);return i}function jn(r){var t=Array.prototype.slice.call(arguments,1);if((!t||!t.length)&&(t=[{}]),Array.isArray(r)){for(var n,i,e=[],a=0,o=r.length;a<o;a++){n=r[a],i={};for(var s=0,l=t.length;s<l;s++)Array.isArray(t[s])?N(t[s][a])?fe(i,n||{}):fe(i,n,t[s][a]):fe(i,n,t[s]?t[s]:{});e.push(i)}return e}else{var u=[{},r];return u.push.apply(u,t),fe.apply(this,u)}}function fk(r){if(r.symbol&&(r=[r]),Array.isArray(r))return r;var t=r.$root,n=r.$iconset;if(r=r.style,t||n){t&&t[t.length-1]==="/"&&(t=t.substring(0,t.length-1)),n&&n[n.length-1]==="/"&&(n=n.substring(0,n.length-1));var i=function(a){return a==="{$root}"?t:a==="{$iconset}"?n:null};hk(r,i)}return r}function hk(r,t){for(var n=0;n<r.length;n++){var i=r[n].symbol;i&&J0(i,t)}}var ch=/(\{\$root\}|\{\$iconset\})/g;function J0(r,t){for(var n in r)r.hasOwnProperty(n)&&n!=="textName"&&(Re(r[n])&&r[n].length>2?r[n]=r[n].replace(ch,t):ot(r[n])?r[n]=Q0(r[n],t):Pn(r[n])&&J0(r[n],t))}function Q0(r,t){var n=r.default;Re(n)&&(r.default=n.replace(ch,t));for(var i=r.stops,e=0;e<i.length;e++)!Array.isArray(i[e])||(Re(i[e][1])?i[e][1]=i[e][1].replace(ch,t):ot(i[e][1])&&(i[e][1]=Q0(i[e][1],t)));return r}function ck(r){r===void 0&&(r=[]),Array.isArray(r)||(r=[r]);for(var t=r.length,n=0;n<t;n++){var i=r[n];if(!!i.style){var e=i.style,a=e.lineDasharray,o=e.lineWidth;if(o&&be(o)&&o>0&&a&&Array.isArray(a)&&a.length)return!0}}return!1}var dk=function(t){return t[0]},Wl=ct?dk:function(r){for(var t=document.documentElement.style,n=0;n<r.length;n++)if(r[n]in t)return r[n];return!1},Li=Wl(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),vk=Wl(["transformOrigin","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"]),ys=Wl(["transition","WebkitTransition","OTransition","MozTransition","msTransition"]);Wl(["filter","WebkitFilter","OFilter","MozFilter","msFilter"]);function we(r,t){var n=document.createElement(r);return t&&Nc(n,t),n}function yp(r,t,n){var i=we(r);return t&&jc(i,t),n&&n.appendChild(i),i}function la(r){if(!r)return this;if(De.ielt9||De.ie9){var t=we("div");t.appendChild(r),t.innerHTML="",t=null}else r.parentNode&&r.parentNode.removeChild(r);return this}function kr(r,t,n,i){if(!r||!r.addEventListener||!t||!n)return this;for(var e=function(f){f||(f=window.event),n.call(i||r,f)},a=t.split(" "),o=a.length-1;o>=0;o--){var s=a[o];if(!!s){r["Z__"+s]||(r["Z__"+s]=[]);var l=eb(r,s,n);l>=0&&_i(r,s,n),r["Z__"+s].push({callback:e,src:n}),r.addEventListener(s,e,De.supportsPassive?{capture:!1,passive:!1}:!1)}}return this}function _i(r,t,n){function i(c,d){c==="mousewheel"&&De.gecko&&(c="DOMMouseScroll"),r.removeEventListener(c,d,!1)}if(!r||!r.removeEventListener||!t)return this;for(var e=t.split(" "),a=e.length-1;a>=0;a--){var o=e[a];if(!!o){if(!n&&r["Z__"+o]){for(var s=r["Z__"+o],l=0,u=s.length;l<u;l++)i(s[l].callback);return delete r["Z__"+o],this}var f=eb(r,o,n);if(f<0)return this;var h=r["Z__"+o][f];i(o,h.callback),r["Z__"+o].splice(f,1)}}return this}function eb(r,t,n){if(!r||!r["Z__"+t]||!n)return-1;for(var i=r["Z__"+t],e=0,a=i.length;e<a;e++)if(i[e].src===n)return e;return-1}function dn(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Jt(r){return r.stopPropagation?r.stopPropagation():r.cancelBubble=!0,this}function gk(r){return r.onselectstart=function(){return!1},r.ondragstart=function(){return!1},r.setAttribute("unselectable","on"),this}function bs(r,t){return r?(De.any3d?mk(r,t):(r.style.left=t.x+"px",r.style.top=t.y+"px"),t):null}function Gl(r){var t=window.getComputedStyle(r),n=[parseInt(t["padding-left"]),parseInt(t["padding-top"])],i=r.getBoundingClientRect(),e=r.offsetWidth,a=r.offsetHeight,o=e?i.width/e:1,s=a?i.height/a:1;return r.__position=[i.left+n[0],i.top+n[1],o,s],r.__position}function Ft(r,t){r||(r=window.event);var n=t.__position;return n||(n=Gl(t)),new B((r.clientX-n[0]-t.clientLeft)/n[2],(r.clientY-n[1]-t.clientTop)/n[3])}function pk(r,t){var n=r.length-t.length;return n>=0&&r.indexOf(t,n)===n}function jc(r,t){var n=r.style.cssText;return pk(n,";")||(n+=";"),r.style.cssText=n+t,this}function tb(r,t){if(r.classList!==void 0)return r.classList.contains(t);var n=nb(r);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function Zi(r,t){if(r.classList!==void 0&&!tb(r,t))for(var n=sk(t),i=0,e=n.length;i<e;i++)r.classList.add(n[i]);else{var a=nb(r);Nc(r,(a?a+" ":"")+t)}return this}function Nc(r,t){return N(r.className.baseVal)?r.className=t:r.className.baseVal=t,this}function nb(r){return N(r.className.baseVal)?r.className:r.className.baseVal}function mk(r,t){var n=t||new B(0,0);return r.style[Li]=De.any3d?"translate3d("+n.x+"px,"+n.y+"px,0px)":"translate("+n.x+"px,"+n.y+"px)",this}function _k(r){return/<[a-z\][\s\S]*>/i.test(r)}function yk(r,t){var n=bk(r);Re(t)?n.innerHTML=t:n.appendChild(t);var i=new st(n.clientWidth,n.clientHeight);return la(n),i}function bk(r){var t=document.createElement(r);return t.style.cssText="position:absolute;left:-10000px;top:-10000px;",document.body.appendChild(t),t}var rt=kr,lt=_i,rb=typeof Map=="function",xk=function(){function r(n,i){this.max=n,this.onRemove=i,this.reset()}var t=r.prototype;return t.reset=function(){for(var i in this.data)this.onRemove(this.data[i]);return this.data={},this.order=[],this},t.clear=function(){this.reset(),delete this.onRemove},t.add=function(i,e){if(this.has(i))this.order.splice(this.order.indexOf(i),1),this.data[i]=e,this.order.push(i);else if(this.data[i]=e,this.order.push(i),this.order.length>this.max){var a=this.getAndRemove(this.order[0]);a&&this.onRemove(a)}return this},t.has=function(i){return i in this.data},t.keys=function(){return this.order},t.getAndRemove=function(i){if(!this.has(i))return null;var e=this.data[i];return delete this.data[i],this.order.splice(this.order.indexOf(i),1),e},t.get=function(i){if(!this.has(i))return null;var e=this.data[i];return e},t.remove=function(i){if(!this.has(i))return this;var e=this.data[i];return delete this.data[i],this.onRemove(e),this.order.splice(this.order.indexOf(i),1),this},t.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var e=this.getAndRemove(this.order[0]);e&&this.onRemove(e)}return this},r}(),ib;rb&&(ib=function(){function r(n,i){this.max=n,this.onRemove=i,this.reset()}var t=r.prototype;return t.reset=function(){if(this.data)for(var i=this.data.values(),o=i,e=Array.isArray(o),a=0,o=e?o:o[Symbol.iterator]();;){var s;if(e){if(a>=o.length)break;s=o[a++]}else{if(a=o.next(),a.done)break;s=a.value}var l=s;this.onRemove(l)}return this.data=new Map,this},t.clear=function(){this.reset(),delete this.onRemove},t.add=function(i,e){return e?(this.has(i)?(this.data.delete(i),this.data.set(i,e),this.data.size>this.max&&this.shrink()):this.data.set(i,e),this):this},t.keys=function(){for(var i=new Array(this.data.size),e=0,a=this.data.keys(),l=a,o=Array.isArray(l),s=0,l=o?l:l[Symbol.iterator]();;){var u;if(o){if(s>=l.length)break;u=l[s++]}else{if(s=l.next(),s.done)break;u=s.value}var f=u;i[e++]=f}return i},t.shrink=function(){for(var i=this.data.keys(),e=i.next();this.data.size>this.max;){var a=this.getAndRemove(e.value);a&&this.onRemove(a),e=i.next()}},t.has=function(i){return this.data.has(i)},t.getAndRemove=function(i){if(!this.has(i))return null;var e=this.data.get(i);return this.data.delete(i),e},t.get=function(i){if(!this.has(i))return null;var e=this.data.get(i);return e},t.remove=function(i){if(!this.has(i))return this;var e=this.data.get(i);return this.data.delete(i),this.onRemove(e),this},t.setMaxSize=function(i){return this.max=i,this.data.size>this.max&&this.shrink(),this},r}());var wk=rb?ib:xk,Zt={jsonp:function(t,n){var i="_maptalks_jsonp_"+ba();t.match(/\?/)?t+="&callback="+i:t+="?callback="+i;var e=document.createElement("script");return e.type="text/javascript",e.src=t,window[i]=function(a){n(null,a),document.getElementsByTagName("head")[0].removeChild(e),e=null,delete window[i]},document.getElementsByTagName("head")[0].appendChild(e),this},get:function(t,n,i){if(Xe(n)){var e=i;i=n,n=e}if(ct&&Zt.get.node)return Zt.get.node(t,i,n);var a=Zt._getClient(i);if(a.open("GET",t,!0),n){for(var o in n.headers)a.setRequestHeader(o,n.headers[o]);a.withCredentials=n.credentials==="include",n.responseType&&(a.responseType=n.responseType)}return a.send(null),a},post:function(t,n,i){var e;if(Re(t)){if(Xe(n)){var o=i;i=n,n=o}n=n||{},e=n.postData}else{var a=i;e=n,n=t,t=n.url,i=a}if(ct&&Zt.post.node)return n.url=t,Zt.post.node(n,e,i);var s=Zt._getClient(i);if(s.open("POST",n.url,!0),n.headers||(n.headers={}),n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded"),"setRequestHeader"in s)for(var l in n.headers)n.headers.hasOwnProperty(l)&&s.setRequestHeader(l,n.headers[l]);return Re(e)||(e=JSON.stringify(e)),s.send(e),s},_wrapCallback:function(t,n){return function(){if(t.readyState===4)if(t.status===200)if(t.responseType==="arraybuffer"){var i=t.response;i.byteLength===0?n(new Error("http status 200 returned without content.")):n(null,{data:t.response,cacheControl:t.getResponseHeader("Cache-Control"),expires:t.getResponseHeader("Expires"),contentType:t.getResponseHeader("Content-Type")})}else n(null,t.responseText);else n(new Error(t.statusText+","+t.status))}},_getClient:function(t){var n;try{n=new XMLHttpRequest}catch{try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch{}}}return n.onreadystatechange=Zt._wrapCallback(n,t),n},getArrayBuffer:function(t,n,i){if(Xe(n)){var e=i;i=n,n=e}return n||(n={}),n.responseType="arraybuffer",Zt.get(t,n,i)},getImage:function(t,n,i){return Zt.getArrayBuffer(n,i,function(e,a){if(e)t.onerror&&t.onerror(e);else if(a){var o=window.URL||window.webkitURL,s=t.onload;t.onload=function(){s&&s(),o.revokeObjectURL(t.src)};var l=new Blob([new Uint8Array(a.data)],{type:a.contentType});t.cacheControl=a.cacheControl,t.expires=a.expires,t.src=a.data.byteLength?o.createObjectURL(l):R0}})}};Zt.getJSON=function(r,t,n){if(Xe(t)){var i=n;n=t,t=i}var e=function(o,s){var l=s?Oc(s):null;n(o,l)};return t&&t.jsonp?Zt.jsonp(r,e):Zt.get(r,t,e)};var bp="#000",Ck="rgba(255,255,255,0)",Pk="#000",xs=!1,Ti=null,Si=Math.PI/180,xp=1,Q={setHitTesting:function(t){xs=t},createCanvas:function(t,n,i){var e;return ct?e=new i(t,n):(e=we("canvas"),e.width=t,e.height=n),e},prepareCanvasFont:function(t,n){t.textBaseline="top",t.font=Y0(n);var i=n.textFill;i||(i=Pk),t.fillStyle=Q.getRgba(i,n.textOpacity)},prepareCanvas:function(t,n,i,e){if(!!n){var a=n.lineWidth;!N(a)&&t.lineWidth!==a&&(t.lineWidth=a);var o=n.linePatternFile,s=n.lineColor||bp;if(e)t.strokeStyle="#000";else if(o&&i){var l;(n.linePatternDx||n.linePatternDy)&&(l=[n.linePatternDx,n.linePatternDy]),Q._setStrokePattern(t,o,a,l,i),n.lineDasharray=[]}else Lr(s)?n.lineGradientExtent?t.strokeStyle=Q._createGradient(t,s,n.lineGradientExtent):t.strokeStyle=bp:(Array.isArray(s)&&(s=Q.normalizeColorToRGBA(s)),t.strokeStyle=s);n.lineJoin&&(t.lineJoin=n.lineJoin),n.lineCap&&(t.lineCap=n.lineCap),t.setLineDash&&We(n.lineDasharray)&&t.setLineDash(n.lineDasharray);var u=n.polygonPatternFile,f=n.polygonFill||Ck;if(e)t.fillStyle="#000";else if(u&&i){var h=Cp(u),c=i.getImage([h,null,null]);if(c||(c=i.getImage([h+"-texture",null,a])),Vi(h)&&c instanceof Image&&(De.edge||De.ie)){var d=c.width||20,v=c.height||20,g=Q.createCanvas(d,v);Q.image(g.getContext("2d"),c,0,0,d,v),c=g}c?(t.fillStyle=t.createPattern(c,"repeat"),(n.polygonPatternDx||n.polygonPatternDy)&&(t.fillStyle.polygonPatternOffset=[n.polygonPatternDx,n.polygonPatternDy])):typeof console!="undefined"&&console.warn("img not found for",h)}else Lr(f)?n.polygonGradientExtent?t.fillStyle=Q._createGradient(t,f,n.polygonGradientExtent):t.fillStyle="rgba(255,255,255,0)":(Array.isArray(f)&&(f=Q.normalizeColorToRGBA(f)),t.fillStyle=f)}},_createGradient:function(t,n,i){var e=null,a=n.places,o=i.getMin(),s=i.getMax(),l=i.getWidth(),u=i.getHeight();if(!n.type||n.type==="linear"){if(!a)a=[o.x,o.y,s.x,o.y];else{if(a.length!==4)throw new Error("A linear gradient's places should have 4 numbers.");a=[o.x+a[0]*l,o.y+a[1]*u,o.x+a[2]*l,o.y+a[3]*u]}e=t.createLinearGradient.apply(t,a)}else if(n.type==="radial"){if(a){if(a.length!==6)throw new Error("A radial gradient's places should have 6 numbers.");a=[o.x+a[0]*l,o.y+a[1]*u,l*a[2],o.x+a[3]*l,o.y+a[4]*u,l*a[5]]}else{var f=i.getCenter()._round();a=[f.x,f.y,Math.abs(f.x-o.x),f.x,f.y,0]}e=t.createRadialGradient.apply(t,a)}return n.colorStops.forEach(function(h){e.addColorStop.apply(e,h)}),e},_setStrokePattern:function(t,n,i,e,a){var o=Cp(n),s;if(ct)s=a.getImage([o,null,i]);else{var l=o+"-texture-"+i;if(s=a.getImage(l),!s){var u=a.getImage([o,null,null]);if(u){var f;!u.width||!u.height?f=i:f=Math.round(u.width*i/u.height);var h=Q.createCanvas(f,i,t.canvas.constructor);Q.image(h.getContext("2d"),u,0,0,f,i),a.addResource([l,null,i],h),s=h}}}s?(t.strokeStyle=t.createPattern(s,"repeat"),t.strokeStyle.linePatternOffset=e):typeof console!="undefined"&&console.warn("img not found for",o)},clearRect:function(t,n,i,e,a){t.canvas._drawn=!1,t.clearRect(n,i,e,a)},fillCanvas:function(t,n,i,e){if(xs&&(n=1),t.canvas._drawn=!0,n!==0){var a=Q._isPattern(t.fillStyle),o=t.fillStyle&&t.fillStyle.polygonPatternOffset,s=o?o[0]:0,l=o?o[1]:0;N(n)&&(n=1);var u;n<1&&(u=t.globalAlpha,t.globalAlpha*=n),a&&(i=i||0,e=e||0,t.translate(i+s,e+l)),t.fill(),a&&t.translate(-i-s,-e-l),n<1&&(t.globalAlpha=u)}},getRgba:function(t,n){if(N(n)&&(n=1),t[0]!=="#")return Array.isArray(t)&&(t=Q.normalizeColorToRGBA(t,n)),t;var i,e,a;return t.length===7?(i=parseInt(t.substring(1,3),16),e=parseInt(t.substring(3,5),16),a=parseInt(t.substring(5,7),16)):(i=parseInt(t.substring(1,2),16)*17,e=parseInt(t.substring(2,3),16)*17,a=parseInt(t.substring(3,4),16)*17),"rgba("+i+","+e+","+a+","+n+")"},normalizeColorToRGBA:function(t,n){return n===void 0&&(n=1),"rgba("+t[0]*255+","+t[1]*255+","+t[2]*255+","+(t.length===4?t[3]:1)*n+")"},image:function(t,n,i,e,a,o){t.canvas._drawn=!0;try{be(a)&&be(o)?t.drawImage(n,i,e,a,o):t.drawImage(n,i,e)}catch(s){console&&(console.warn("error when drawing image on canvas:",s),console.warn(n))}},text:function(t,n,i,e,a){Q._textOnMultiRow(t,a.rows,e,i,a.size,a.rawSize)},_textOnMultiRow:function(t,n,i,e,a,o){for(var s=ci(a,i.textHorizontalAlignment,i.textVerticalAlignment),l=o.height+i.textLineSpacing,u=e.add(0,s.y),f=i.textMaxHeight,h,c,d=0,v=0,g=n.length;v<g&&(h=n[v].text,c=ci(n[v].size,i.textHorizontalAlignment,i.textVerticalAlignment),Q._textOnLine(t,h,u.add(c.x,v*l),i.textHaloRadius,i.textHaloFill,i.textHaloOpacity),!(f>0&&(d+=l,d+o.height>=f)));v++);},_textOnLine:function(t,n,i,e,a,o){xs&&(o=1);var s=o!==0&&e!==0;t.textBaseline="top";var l,u,f=t.shadowBlur,h=t.shadowOffsetX,c=t.shadowOffsetY;if(s){var d=t.globalAlpha;t.globalAlpha*=o,t.miterLimit=2,t.lineJoin="round",t.lineCap="round",t.lineWidth=e*2,Array.isArray(a)&&(a=Q.normalizeColorToRGBA(a)),t.strokeStyle=a,t.strokeText(n,i.x,i.y+xp),t.miterLimit=10,t.globalAlpha=d,l=t.globalCompositeOperation,t.globalCompositeOperation="destination-out",u=t.fillStyle,t.fillStyle="#000"}f&&s&&(t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0),Q.fillText(t,n,i),l&&(t.globalCompositeOperation=l,Q.fillText(t,n,i,u),f&&(t.shadowBlur=f,t.shadowOffsetX=h,t.shadowOffsetY=c))},fillText:function(t,n,i,e){t.canvas._drawn=!0,e&&(t.fillStyle=e),t.fillText(n,i.x,i.y+xp)},_stroke:function(t,n,i,e){if(xs&&(n=1),t.canvas._drawn=!0,n!==0){var a=t.strokeStyle&&t.strokeStyle.linePatternOffset,o=a?a[0]:0,s=a?a[1]:0,l=Q._isPattern(t.strokeStyle)&&(!N(i)&&!N(e)||!N(o)&&!N(s));N(n)&&(n=1);var u;n<1&&(u=t.globalAlpha,t.globalAlpha*=n),l&&(i=i||0,e=e||0,t.translate(i+o,e+s)),t.stroke(),l&&t.translate(-i-o,-e-s),n<1&&(t.globalAlpha=u)}},_path:function(t,n,i,e,a){if(!We(n))return;function o(v,g){var m=ah(v.x,v.y,g.x,g.y);t.save();var p=Math.cos(m);Math.abs(p)<1e-7?t.translate(v.x-t.lineWidth/2,v.y):t.translate(v.x,v.y-t.lineWidth/2/p),t.rotate(m),Q._stroke(t,e),t.restore()}for(var s=We(i),l=a===!0?!1:Q._isPattern(t.strokeStyle),u,f,h,c=0,d=n.length;c<d;c++)if(u=n[c],!s||t.setLineDash)t.lineTo(u.x,u.y),l&&c>0&&(f=n[c-1],o(f,u),t.beginPath(),t.moveTo(u.x,u.y));else if(s){if(c===d-1)break;h=n[c+1],Tk(t,u,h,i)}},path:function(t,n,i,e,a){!We(n)||(t.beginPath(),t.moveTo(n[0].x,n[0].y),Q._path(t,n,a,i),Q._stroke(t,i))},_multiClip:function(t,n){if(!(!n||n.length===0)){n=n[0];for(var i=0,e=n.length;i<e;i++){var a=n[i],o=a.x,s=a.y;i===0?t.moveTo(o,s):t.lineTo(o,s),i===e-1&&(o=n[0].x,s=n[0].y,t.lineTo(o,s))}}},polygon:function(t,n,i,e,a,o){if(t.isMultiClip){Q._multiClip(t,n);return}if(!!We(n)){var s=Q._isPattern(t.strokeStyle),l=We(a)&&!t.setLineDash||s&&!o;We(n[0])||(n=[n]);var u=t;n.length>1&&!ct&&(Ti||(Ti=Q.createCanvas(1,1)),t.canvas._drawn=!1,Ti.width=t.canvas.width,Ti.height=t.canvas.height,t=Ti.getContext("2d"),Pp(t,u));var f,h,c;if(l){for(t.save(),h=0,c=n.length;h<c;h++)!We(n[h])||(Q._ring(t,n[h],null,0,!0),f=e,h>0&&(t.globalCompositeOperation="destination-out",f=1),Q.fillCanvas(t,f,n[h][0].x,n[h][0].y),h>0?t.globalCompositeOperation="source-over":c>1&&(t.fillStyle="#fff"),Q._stroke(t,0));t.restore()}var d=t.fillStyle;for(h=0,c=n.length;h<c;h++)!We(n[h])||(o?(Q.paintSmoothLine(t,n[h],i,o,!0),t.closePath()):Q._ring(t,n[h],a,i),l||(f=e,h>0&&(t.globalCompositeOperation="destination-out",f=1),Q.fillCanvas(t,f,n[h][0].x,n[h][0].y),h>0?t.globalCompositeOperation="source-over":c>1&&(t.fillStyle="#fff")),Q._stroke(t,i));t.fillStyle!==d&&(t.fillStyle=d),n.length>1&&!ct&&(u.drawImage(Ti,0,0),u.canvas._drawn=t.canvas._drawn,Pp(u,t))}},_ring:function(t,n,i,e,a){var o=Q._isPattern(t.strokeStyle);!a&&o&&!n[0].equals(n[n.length-1])&&(n=n.concat([n[0]])),t.beginPath(),t.moveTo(n[0].x,n[0].y),Q._path(t,n,i,e,a),o||t.closePath()},paintSmoothLine:function(t,n,i,e,a,o,s){if(!n)return;if(n.length<=2||!e){Q.path(t,n,i);return}function l(P,T,L,j,M,D,R,I,z,F){var O=1-P,A=1-T,$=L*O*O+M*2*P*O+R*P*P,J=L*A*A+M*2*T*A+R*T*T,Z=M*O*O+R*2*P*O+z*P*P,ae=M*A*A+R*2*T*A+z*T*T,U=j*O*O+D*2*P*O+I*P*P,W=j*A*A+D*2*T*A+I*T*T,ne=D*O*O+I*2*P*O+F*P*P,de=D*A*A+I*2*T*A+F*T*T,ge=$*A+Z*T,ve=J*O+ae*P,ce=J*A+ae*T,Me=U*A+ne*T,Ce=W*O+de*P,S=W*A+de*T;return[ge,Me,ve,Ce,ce,S]}function u(P,T,L,j,M,D,R,I,z,F){var O=(P+L)/2,A=(T+j)/2,$=(L+M)/2,J=(j+D)/2,Z=(M+R)/2,ae=(D+I)/2,U=Math.sqrt((L-P)*(L-P)+(j-T)*(j-T)),W=Math.sqrt((M-L)*(M-L)+(D-j)*(D-j)),ne=Math.sqrt((R-M)*(R-M)+(I-D)*(I-D)),de=U/(U+W),ge=W/(W+ne),ve=O+($-O)*de,ce=A+(J-A)*de,Me=$+(Z-$)*ge,Ce=J+(ae-J)*ge,S=ve+($-ve)*z+L-ve,k=ce+(J-ce)*z+j-ce,H=Me+($-Me)*z+M-Me,K=Ce+(J-Ce)*z+D-Ce,G=[S,k,H,K];return F<1?l(0,F,L,j,S,k,H,K,M,D):G}var f=n.length,h=a?f:f-1;t.beginPath(),t.moveTo(n[0].x,n[0].y),s!==void 0&&(h-=Math.max(h-o-1,0));for(var c,d=0;d<h;d++){var v=n[d].x,g=n[d].y,m=void 0,p=void 0,_=void 0,b=void 0,x=void 0,C=void 0;d-1<0?a?(m=n[h-1].x,p=n[h-1].y):(m=n[d+1].x,p=n[d+1].y):(m=n[d-1].x,p=n[d-1].y),d+1<f?(_=n[d+1].x,b=n[d+1].y):(_=n[d+1-f].x,b=n[d+1-f].y),d+2<f?(x=n[d+2].x,C=n[d+2].y):a?(x=n[d+2-f].x,C=n[d+2-f].y):(x=n[d].x,C=n[d].y);var y=u(m,p,v,g,_,b,x,C,e,d===h-1?s:1);if(d===h-1&&s>=0&&s<1){t.bezierCurveTo(y[0],y[1],y[2],y[3],y[4],y[5]),n.splice(h-1,f-(h-1)-1);var w=new B(y[4],y[5]);w.prevCtrlPoint=new B(y[2],y[3]),n.push(w),f=n.length}else t.bezierCurveTo(y[0],y[1],y[2],y[3],_,b);n[d].nextCtrlPoint=y.slice(0,2),n[d].prevCtrlPoint=c?c.slice(2):null,c=y}!a&&n[1].prevCtrlPoint&&(n[0].nextCtrlPoint=n[1].prevCtrlPoint,delete n[0].prevCtrlPoint),n[f-1].prevCtrlPoint||(n[f-1].prevCtrlPoint=n[f-2].nextCtrlPoint),Q._stroke(t,i)},_arcBetween:function(t,n,i,e){var a=e,o=n.distanceTo(i),s=o/2/Math.sin(a/2),l=Math.asin((i.y-n.y)/o);n.x>i.x&&(l=Math.PI-l);var u=90*Si-a/2,f=l-u,h=Math.cos(f)*s,c=Math.sin(f)*s,d=n.x+h,v=n.y+c,g=Math.asin((i.y-v)/s);d>i.x&&(g=Math.PI-g);var m=g+a;return t.beginPath(),t.arc(d,v,s,g,m),[d,v]},_lineTo:function(t,n){t.lineTo(n.x,n.y)},bezierCurveAndFill:function(t,n,i,e){t.beginPath();var a=n[0];t.moveTo(a.x,a.y);var o=[t];o.push.apply(o,n.splice(1)),Q._bezierCurveTo.apply(Q,o),Q.fillCanvas(t,e),Q._stroke(t,i)},_bezierCurveTo:function(t,n,i,e){t.bezierCurveTo(n.x,n.y,i.x,i.y,e.x,e.y)},ellipse:function(t,n,i,e,a,o,s){function l(u,f,h,c,d){var v=.5522848,g=h*v,m=c*v,p=d*v;t.moveTo(u-h,f),t.bezierCurveTo(u-h,f-m,u-g,f-c,u,f-c),t.bezierCurveTo(u+g,f-c,u+h,f-m,u+h,f),t.bezierCurveTo(u+h,f+p,u+g,f+d,u,f+d),t.bezierCurveTo(u-g,f+d,u-h,f+p,u-h,f),t.closePath()}t.beginPath(),i===e&&i===a?t.arc(n.x,n.y,i,0,2*Math.PI):t.ellipse?e!==a?(t.ellipse(n.x,n.y,i,e,0,Si*180,Si*360,!1),t.ellipse(n.x,n.y,i,a,0,0,Si*180,!1)):t.ellipse(n.x,n.y,i,e,0,0,Si*360,!1):l(n.x,n.y,i,e,a),Q.fillCanvas(t,s,n.x-i,n.y-e),Q._stroke(t,o,n.x-i,n.y-e)},rectangle:function(t,n,i,e,a){var o=n.x,s=n.y;t.beginPath(),t.rect(o,s,i.width,i.height),Q.fillCanvas(t,a,o,s),Q._stroke(t,e,o,s)},sector:function(t,n,i,e,a,o){var s=Si,l=e[0],u=e[1];function f(h,c,d,v,g,m){var p=s*-m,_=s*-g;h.beginPath(),h.moveTo(c,d),h.arc(c,d,v,p,_),h.lineTo(c,d),Q.fillCanvas(h,o,c-v,d-v),Q._stroke(h,a,c-v,d-v)}f(t,n.x,n.y,i,l,u)},_isPattern:function(t){return!Re(t)&&!("addColorStop"in t)},drawCross:function(t,n,i,e,a){t.canvas._drawn=!0,t.strokeStyle=a,t.lineWidth=e,t.beginPath(),t.moveTo(n-5,i),t.lineTo(n+5,i),t.moveTo(n,i-5),t.lineTo(n,i+5),t.stroke()},copy:function(t,n){var i=n||we("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),i},pixelRect:function(t,n,i,e){var a=t.lineWidth,o=t.globalAlpha,s=!1;if(a>0&&i>0)s=!0,i<1&&(t.globalAlpha*=i);else if(e>0)e<1&&(t.globalAlpha*=e);else return;t.canvas._drawn=!0,s?t.strokeRect(n[0],n[1],1,1):t.fillRect(n[0],n[1],1,1),t.globalAlpha!==o&&(t.globalAlpha=o)}};function Tk(r,t,n,i){var e=t.x,a=t.y,o=n.x,s=n.y,l=i,u=function(y,w){return y<=w},f=function(y,w){return y>=w},h=function(y,w){return Math.min(y,w)},c=function(y,w){return Math.max(y,w)},d={thereYet:f,cap:h},v={thereYet:f,cap:h};a-s>0&&(v.thereYet=u,v.cap=c),e-o>0&&(d.thereYet=u,d.cap=c),r.moveTo(e,a);for(var g=e,m=a,p=0,_=!0,b,x;!(d.thereYet(g,o)&&v.thereYet(m,s));)b=Math.atan2(s-a,o-e),x=l[p],g=d.cap(o,g+Math.cos(b)*x),m=v.cap(s,m+Math.sin(b)*x),_?r.lineTo(g,m):r.moveTo(g,m),p=(p+1)%l.length,_=!_}var wp="data:image/";function Cp(r){return r.substring(0,wp.length)===wp?r:Ac(r)}function Pp(r,t){r.filter=t.filter,r.fillStyle=t.fillStyle,r.globalAlpha=t.globalAlpha,r.lineCap=t.lineCap,r.lineDashOffset=t.lineDashOffset,r.lineJoin=t.lineJoin,r.lineWidth=t.lineWidth,r.shadowBlur=t.shadowBlur,r.shadowColor=t.shadowColor,r.shadowOffsetX=t.shadowOffsetX,r.shadowOffsetY=t.shadowOffsetY,r.strokeStyle=t.strokeStyle}var dh;typeof Promise!="undefined"?dh=Promise:dh=yI;var Tp=dh,fr=function(t){return function(n){re(i,n);function i(){return n.apply(this,arguments)||this}var e=i.prototype;return e.on=function(o,s,l){if(!o)return this;if(!Re(o))return this._switch("on",o,s);if(!s)return this;this._eventMap||(this._eventMap={});var u=o.toLowerCase().split(" "),f;l||(l=this);for(var h,c=0,d=u.length;c<d;c++){f=u[c],h=this._eventMap[f],h||(h=[],this._eventMap[f]=h);var v=h.length;if(v>0){for(var g=0;g<v;g++)if(s===h[g].handler&&h[g].context===l)return this}h.push({handler:s,context:l})}return this},e.addEventListener=function(){return this.on.apply(this,arguments)},e.once=function(o,s,l){if(!Re(o)){var u={};for(var f in o)o.hasOwnProperty(f)&&(u[f]=this._wrapOnceHandler(f,o[f],l));return this._switch("on",u)}for(var h=o.split(" "),c=0,d=h.length;c<d;c++)this.on(h[c],this._wrapOnceHandler(h[c],s,l));return this},e.off=function(o,s,l){if(!this._eventMap||!o)return this;if(!Re(o))return this._switch("off",o,s);if(!s)return this;var u=o.split(" "),f,h,c;l||(l=this);for(var d=0,v=u.length;d<v;d++){if(f=u[d].toLowerCase(),c="Z__"+f,h=this._eventMap[f],!h)return this;for(var g=h.length-1;g>=0;g--){var m=h[g];(s===m.handler||s===m.handler[c])&&m.context===l&&(delete m.handler[c],h.splice(g,1))}h.length||delete this._eventMap[f]}return this},e.removeEventListener=function(){return this.off.apply(this,arguments)},e.listens=function(o,s,l){if(!this._eventMap||!Re(o))return 0;var u=this._eventMap[o.toLowerCase()];if(!u||!u.length)return 0;if(!s)return u.length;for(var f=0,h=u.length;f<h;f++)if(s===u[f].handler&&(N(l)||u[f].context===l))return 1;return 0},e.getListeningEvents=function(){return this._eventMap?Object.keys(this._eventMap):[]},e.copyEventListeners=function(o){var s=o._eventMap;if(!s)return this;var l;for(var u in s){l=s[u];for(var f=0,h=l.length;f<h;f++)this.on(u,l[f].handler,l[f].context)}return this},e.fire=function(){return this._eventParent?this._eventParent.fire.apply(this._eventParent,arguments):this._fire.apply(this,arguments)},e._wrapOnceHandler=function(o,s,l){var u=this,f="Z__"+o,h=!1,c=function d(){h||(delete c[f],h=!0,l?s.apply(l,arguments):s.apply(this,arguments),u.off(o,d,this))};return c[f]=s,c},e._switch=function(o,s,l){for(var u in s)s.hasOwnProperty(u)&&this[o](u,s[u],l);return this},e._clearListeners=function(o){if(!(!this._eventMap||!Re(o))){var s=this._eventMap[o.toLowerCase()];!s||(this._eventMap[o]=null)}},e._clearAllListeners=function(){this._eventMap=null},e._setEventParent=function(o){return this._eventParent=o,this},e._setEventTarget=function(o){return this._eventTarget=o,this},e._fire=function(o,s){if(!this._eventMap)return this;var l=this._eventMap[o.toLowerCase()];if(!l)return this;s||(s={}),s.type=o,s.target=this._eventTarget||this;for(var u=l.slice(0),f,h,c,d=0,v=u.length;d<v;d++)!u[d]||(f=u[d].context,h=!0,c=fe({},s),f?h=u[d].handler.call(f,c):h=u[d].handler(c),h===!1&&s.domEvent&&Jt(s.domEvent));return this},i}(t)},Sk=function(){function r(n){this.target=n}var t=r.prototype;return t.enable=function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},t.disable=function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},t.enabled=function(){return!!this._enabled},t.remove=function(){this.disable(),delete this.target,delete this.dom},r}(),En=fr(Sk),_n=function(){function r(n){if(!this||!this.setOptions)throw new Error('Class instance is being created without "new" operator.');this.setOptions(n),this.callInitHooks()}var t=r.prototype;return t.callInitHooks=function(){var i=Object.getPrototypeOf(this);return this._visitInitHooks(i),this},t.setOptions=function(i){if(this.hasOwnProperty("options")||(this.options=this.options?Object.create(this.options):{}),!i)return this;for(var e in i)this.options[e]=i[e];return this},t.config=function(i){if(i){if(arguments.length===2){var o={};o[i]=arguments[1],i=o}for(var s in i)this.options[s]=i[s],this[s]&&this[s]instanceof En&&(i[s]?this[s].enable():this[s].disable());this.onConfig(i)}else{var e={};for(var a in this.options)this.options.hasOwnProperty(a)&&(e[a]=this.options[a]);return e}return this},t.onConfig=function(){},t._visitInitHooks=function(i){if(!this._initHooksCalled){var e=Object.getPrototypeOf(i);e._visitInitHooks&&e._visitInitHooks.call(this,e),this._initHooksCalled=!0;var a=i._initHooks;if(a&&a!==e._initHooks)for(var o=0;o<a.length;o++)a[o].call(this)}},r.addInitHook=function(i){for(var e=arguments.length,a=new Array(e>1?e-1:0),o=1;o<e;o++)a[o-1]=arguments[o];var s=typeof i=="function"?i:function(){this[i].apply(this,a)},l=this.prototype,u=Object.getPrototypeOf(l);return(!l._initHooks||l._initHooks===u._initHooks)&&(l._initHooks=[]),l._initHooks.push(s),this},r.include=function(){for(var i=0;i<arguments.length;i++)fe(this.prototype,i<0||arguments.length<=i?void 0:arguments[i]);return this},r.mergeOptions=function(i){var e=this.prototype,a=Object.getPrototypeOf(e);return(!e.options||e.options===a.options)&&(e.options=e.options?Object.create(e.options):{}),fe(e.options,i),this},r}(),ws={},ab=function(r){return function(t){re(n,t);function n(){return t.apply(this,arguments)||this}n.registerJSONType=function(a){return a?(ws[a]=this,this):this},n.getJSONClass=function(a){return a?ws[a]:null};var i=n.prototype;return i.getJSONType=function(){if(this._jsonType===void 0){var a=Object.getPrototypeOf(this).constructor;for(var o in ws)if(ws[o]===a){this._jsonType=o;break}}if(!this._jsonType)throw new Error("Found an unregistered geometry class!");return this._jsonType},n}(r)},Fa={},ob=function(){function r(){this._tree=PI(9,["[0]","[1]","[2]","[3]"])}var t=r.prototype;return t.collides=function(i){return Fa.minX=i[0],Fa.minY=i[1],Fa.maxX=i[2],Fa.maxY=i[3],this._tree.collides(Fa)},t.insertBox=function(i){var e=this._tree;return e.insert(i),this},t.bulkInsertBox=function(i){return this._tree.load(i),this},t.clear=function(){return this._tree.clear(),this},r}();function zc(r){return function(t){re(n,t);function n(){return t.apply(this,arguments)||this}var i=n.prototype;return i.addHandler=function(a,o){if(!o)return this;if(this._handlers||(this._handlers=[]),this[a])return this[a].enable(),this;var s=this[a]=new o(this);return this._handlers.push(s),this.options[a]&&s.enable(),this},i.removeHandler=function(a){if(!a)return this;var o=this[a];if(o){var s=this._handlers.indexOf(o);s>=0&&this._handlers.splice(s,1),this[a].remove(),delete this[a]}return this},i._clearHandlers=function(){for(var a=0,o=this._handlers.length;a<o;a++)this._handlers[a].remove();this._handlers=[]},n}(r)}var Sp="touchstart mousedown",Hu={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Mp={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},wa=function(r){re(t,r);function t(i,e){var a;return e===void 0&&(e={}),a=r.call(this,null)||this,a.dom=i,a.options=e,a}var n=t.prototype;return n.enable=function(){return this.dom?(this._onMouseDown=function(e){return this.onMouseDown(e)},rt(this.dom,Sp,this._onMouseDown,this),this):this},n.disable=function(){return this.dom?(this._offEvents(),lt(this.dom,Sp,this._onMouseDown),delete this._onMouseDown,this):this},n.onMouseDown=function(e){if(!(!this.options.rightclick&&e.button===2)&&!(e.touches&&e.touches.length>1)&&!(this.options.cancelOn&&this.options.cancelOn(e)===!0)){var a=this.dom;a.setCapture?a.setCapture():window.captureEvents&&window.captureEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP),a.ondragstart=function(){return!1},delete this.moved;var o=e.touches?e.touches[0]:e;this.startPos=new B(o.clientX,o.clientY),rt(document,Hu[e.type],this.onMouseMove,this),rt(document,Mp[e.type],this.onMouseUp,this),this.options.ignoreMouseleave||rt(this.dom,"mouseleave",this.onMouseUp,this),this.fire("mousedown",{domEvent:e,mousePos:new B(o.clientX,o.clientY)})}},n.onMouseMove=function(e){if(e.touches&&e.touches.length>1){this.moved&&(this.interupted=!0,this.onMouseUp(e));return}var a=e.touches?e.touches[0]:e,o=new B(a.clientX,a.clientY),s=o.sub(this.startPos);!s.x&&!s.y||(this.moved?this.fire("dragging",{domEvent:e,mousePos:new B(a.clientX,a.clientY)}):(this.fire("dragstart",{domEvent:e,mousePos:this.startPos.copy()}),this.moved=!0))},n.onMouseUp=function(e){var a=e.changedTouches?e.changedTouches[0]:e;this._offEvents();var o={domEvent:e};be(a.clientX)&&(o.mousePos=new B(parseInt(a.clientX,0),parseInt(a.clientY,0))),this.moved&&(o.interupted=this.interupted,this.fire("dragend",o),delete this.interupted,delete this.moved),this.fire("mouseup",o)},n._offEvents=function(){var e=this.dom;if(lt(e,"mouseleave",this.onMouseUp),!(typeof document=="undefined"||typeof window=="undefined")){for(var a in Hu)lt(document,Hu[a],this.onMouseMove),lt(document,Mp[a],this.onMouseUp);e.releaseCapture?e.releaseCapture():window.captureEvents&&window.captureEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP)}},t}(En),te=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}return t.toNumberArrays=function(i){return Array.isArray(i)?sa(i,function(e){return[e.x,e.y]}):[i.x,i.y]},t.toCoordinates=function(i){if(be(i[0])&&be(i[1]))return new t(i);if(i instanceof t)return i;for(var e=[],a=0,o=i.length;a<o;a++){var s=i[a];Array.isArray(s)?be(s[0])?e.push(new t(s)):e.push(t.toCoordinates(s)):s instanceof t?e.push(s):e.push(new t(s))}return e},t}(E0),It=function(){function r(t,n){this.type=t,this.properties=n}return r.createProj4=function(n){return new r("proj4",{proj:n})},r.fromProjectionCode=function(n){return n?(n=n.toUpperCase().replace(":",""),r[n]||null):null},r}();It.WGS84=It.createProj4("+proj=longlat +datum=WGS84 +no_defs");It.EPSG4326=It.WGS84;It.EPSG3857=It.createProj4("+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");It.IDENTITY=It.createProj4("+proj=identity +no_defs");It.CGCS2000=It.createProj4("+proj=longlat +datum=CGCS2000");It.EPSG4490=It.CGCS2000;It.BD09LL=It.createProj4("+proj=longlat +datum=BD09");It.GCJ02=It.createProj4("+proj=longlat +datum=GCJ02");var Mk=new B(0,0),Ek=new te(0,0),Bu=new te(0,0),$u=new te(0,0),Wu=new te(0,0),Gu=new te(0,0),Ok=new te(0,0),Ep=new te(0,0),Op=new te(0,0),Vu=[],ji,Ha=[],Ye=function(){function r(n,i,e,a){this._clazz=te;var o=arguments.length,s=o>0?arguments[o-1]:null;s&&s.unproject&&(this.projection=arguments[o-1]),this._dirty=!0,this._initialize(n,i,e,a)}var t=r.prototype;return t._initialize=function(i,e,a,o){if(this.xmin=null,this.xmax=null,this.ymin=null,this.ymax=null,!N(i)){var s=this.projection;if(be(i)&&be(e)&&be(a)&&be(o)){s?this.set(i,e,a,o):this.set(Math.min(i,a),Math.min(e,o),Math.max(i,a),Math.max(e,o));return}else Array.isArray(i)?s?this.set(i[0],i[1],i[2],i[3]):this.set(Math.min(i[0],i[2]),Math.min(i[1],i[3]),Math.max(i[0],i[2]),Math.max(i[1],i[3])):be(i.x)&&be(e.x)&&be(i.y)&&be(e.y)?s?this.set(i.x,i.y,e.x,e.y):(i.x>e.x?(this.xmin=e.x,this.xmax=i.x):(this.xmin=i.x,this.xmax=e.x),i.y>e.y?(this.ymin=e.y,this.ymax=i.y):(this.ymin=i.y,this.ymax=e.y)):be(i.xmin)&&be(i.xmax)&&be(i.ymin)&&be(i.ymax)&&this.set(i.xmin,i.ymin,i.xmax,i.ymax)}},t._add=function(i){return this._dirty=!0,N(i.x)?N(i.xmin)?N(i[0])||(this.xmin+=i[0],this.ymin+=i[1],this.xmax+=i[0],this.ymax+=i[1]):(this.xmin+=i.xmin,this.ymin+=i.ymin,this.xmax+=i.xmax,this.ymax+=i.ymax):(this.xmin+=i.x,this.ymin+=i.y,this.xmax+=i.x,this.ymax+=i.y),this},t.add=function(){var i=new this.constructor(this.xmin,this.ymin,this.xmax,this.ymax,this.projection);return i._add.apply(i,arguments)},t._scale=function(i){return this._dirty=!0,this.xmin*=i,this.ymin*=i,this.xmax*=i,this.ymax*=i,this},t._sub=function(i){return this._dirty=!0,N(i.x)?N(i.xmin)?N(i[0])||(this.xmin-=i[0],this.ymin-=i[1],this.xmax-=i[0],this.ymax-=i[1]):(this.xmin-=i.xmin,this.ymin-=i.ymin,this.xmax-=i.xmax,this.ymax-=i.ymax):(this.xmin-=i.x,this.ymin-=i.y,this.xmax-=i.x,this.ymax-=i.y),this},t._substract=function(){return this._sub.apply(this,arguments)},t.sub=function(){var i=new this.constructor(this.xmin,this.ymin,this.xmax,this.ymax,this.projection);return i._sub.apply(i,arguments)},t.substract=function(){return this.sub.apply(this,arguments)},t.round=function(){return new this.constructor(Math.round(this.xmin),Math.round(this.ymin),Math.round(this.xmax),Math.round(this.ymax),this.projection)},t._round=function(){return this._dirty=!0,this.xmin=Math.round(this.xmin),this.ymin=Math.round(this.ymin),this.xmax=Math.round(this.xmax),this.ymax=Math.round(this.ymax),this},t.getMin=function(i){return i?(i.set(this.xmin,this.ymin),i):new this._clazz(this.xmin,this.ymin)},t.getMax=function(i){return i?(i.set(this.xmax,this.ymax),i):new this._clazz(this.xmax,this.ymax)},t.getCenter=function(i){var e=(this.xmin+this.xmax)/2,a=(this.ymin+this.ymax)/2;return i?(i.set(e,a),i):new this._clazz(e,a)},t.isValid=function(){return!N(this.xmin)&&!N(this.ymin)&&!N(this.xmax)&&!N(this.ymax)},t.equals=function(i){return this.xmin===i.xmin&&this.xmax===i.xmax&&this.ymin===i.ymin&&this.ymax===i.ymax},t.intersects=function(i){this._project(this),this._project(i);var e=Math.max(this.pxmin,i.pxmin),a=Math.max(this.pymin,i.pymin),o=Math.min(this.pxmax,i.pxmax),s=Math.min(this.pymax,i.pymax),l=!(e>o||a>s);return l},t.within=function(i){return this._project(this),this._project(i),this.pxmin>=i.pxmin&&this.pxmax<=i.pxmax&&this.pymin>=i.pymin&&this.pymax<=i.pymax},t.contains=function(i){if(!i)return!1;this._project(this);var e=this.projection;if(e)if(i.x!==void 0){var a=Ek;Array.isArray(i)?(a.x=i[0],a.y=i[1]):(a.x=i.x,a.y=i.y),i=e.project(a,a)}else i.xmin!==void 0&&this._project(i);return(i.x||i.pxmin||0)>=this.pxmin&&(i.x||i.pxmax||0)<=this.pxmax&&(i.y||i.pymin||0)>=this.pymin&&(i.y||i.pymax||0)<=this.pymax},t.getWidth=function(){return Math.abs(this.xmax-this.xmin)},t.getHeight=function(){return Math.abs(this.ymax-this.ymin)},t.getSize=function(){return new st(this.getWidth(),this.getHeight())},t.set=function(i,e,a,o){return this.xmin=i,this.ymin=e,this.xmax=a,this.ymax=o,this._dirty=!0,this},t.__combine=function(i){i.x!==void 0&&(ji.xmin=ji.xmax=i.x,ji.ymin=ji.ymax=i.y,i=ji),this._project(i),this._project(this);var e=be(this.pxmin),a,o,s,l;e?(a=Math.min(this.pxmin,i.pxmin),o=Math.min(this.pymin,i.pymin),s=Math.max(this.pxmax,i.pxmax),l=Math.max(this.pymax,i.pymax)):(a=i.pxmin,o=i.pymin,s=i.pxmax,l=i.pymax);var u=this.projection;if(u){Bu.set(a,o),$u.set(s,l);var f=u.unproject(Bu,Bu),h=u.unproject($u,$u);a=f.x,o=f.y,s=h.x,l=h.y}return Ha[0]=a,Ha[1]=o,Ha[2]=s,Ha[3]=l,Ha},t._combine=function(i){if(!i||i.isValid&&!i.isValid())return this;var e=this.__combine(i);return this.set(e[0],e[1],e[2],e[3]),this._dirty=!0,this},t.combine=function(i){if(!i||i.isValid&&!i.isValid())return this;var e=this.__combine(i);return new this.constructor(e[0],e[1],e[2],e[3],this.projection)},t.intersection=function(i){if(!this.intersects(i))return null;Wu.x=Math.max(this.pxmin,i.pxmin),Wu.y=Math.max(this.pymin,i.pymin),Gu.x=Math.min(this.pxmax,i.pxmax),Gu.y=Math.min(this.pymax,i.pymax);var e=Wu,a=Gu,o=this.projection;return o&&(e=o.unproject(e,e),a=o.unproject(a,a)),new this.constructor(e,a,o)},t.expand=function(i){var e,a;return be(i)?e=a=i:(e=i.width||i.x||i[0]||0,a=i.height||i.y||i[1]||0),new this.constructor(this.xmin-e,this.ymin-a,this.xmax+e,this.ymax+a,this.projection)},t._expand=function(i){var e,a;return be(i)?e=a=i:(e=i.width||i.x||i[0]||0,a=i.height||i.y||i[1]||0),this.xmin-=e,this.ymin-=a,this.xmax+=e,this.ymax+=a,this._dirty=!0,this},t.toJSON=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},t.toArray=function(i){var e=this.xmin,a=this.ymin,o=this.xmax,s=this.ymax;return i?(i[0].x=e,i[0].y=s,i[1].x=o,i[1].y=s,i[2].x=o,i[2].y=a,i[3].x=e,i[3].y=a,i[4].x=e,i[4].y=s,i):[new this._clazz([e,s]),new this._clazz([o,s]),new this._clazz([o,a]),new this._clazz([e,a]),new this._clazz([e,s])]},t.toString=function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax},t.copy=function(){return new this.constructor(this.xmin,this.ymin,this.xmax,this.ymax,this.projection)},t.convertTo=function(i,e){if(!this.isValid())return null;var a=e||new this.constructor;e&&a.set(null,null,null,null);var o;return this._clazz===te?o=Ok:this._clazz===B&&(o=Mk),o.x=this.xmin,o.y=this.ymax,a._combine(i(o)),o.x=this.xmax,a._combine(i(o)),o.y=this.ymin,a._combine(i(o)),o.x=this.xmin,a._combine(i(o)),a},t._project=function(i){if(!i||!i.isValid()){i&&(i.pxmin=i.pxmax=i.pymin=i.pymax=null);return}var e=this.projection;if(e){if(i._dirty){Ep.set(i.xmax,i.ymin),Op.set(i.xmin,i.ymax),Vu[0]=Ep,Vu[1]=Op;var a=e.projectCoords(Vu),o=a[0],s=a[1];i.pxmin=Math.min(o.x,s.x),i.pymin=Math.min(o.y,s.y),i.pxmax=Math.max(o.x,s.x),i.pymax=Math.max(o.y,s.y)}delete i._dirty}else i.pxmin=i.xmin,i.pxmax=i.xmax,i.pymin=i.ymin,i.pymax=i.ymax},r}();ji=new Ye(0,0,0,0);var Ee=function(r){re(t,r);function t(n,i,e,a){var o;return o=r.call(this,n,i,e,a)||this,o._clazz=B,o}return t}(Ye),sb=function(){function r(n){this.matrix=n}var t=r.prototype;return t.transform=function(i,e,a){var o=this.matrix[0]*(i.x-this.matrix[2])/e,s=-this.matrix[1]*(i.y-this.matrix[3])/e;return a?(a.x=o,a.y=s,a):new B(o,s)},t.untransform=function(i,e,a){var o=i.x*e/this.matrix[0]+this.matrix[2],s=i.y*e/-this.matrix[1]+this.matrix[3];return a?(a.x=o,a.y=s,a):new te(o,s)},r}(),Ca={project:function(){},unproject:function(){},projectCoords:function(t){var n=this;if(!t)return[];if(!Array.isArray(t))return this.project(t);if(t.length===0)return[];if(!this.isSphere())return sa(t,this.project,this);if(Array.isArray(t[0]))return t.map(function(p){return n.projectCoords(p)});for(var i=this.getCircum(),e=this.getSphereExtent(),a=e.sx,o=e.sy,s,l,u=t[0],f,h,c,d,v=[this.project(u)],g=1,m=t.length;g<m;g++)f=t[g],h=f.x-u.x,c=f.y-u.y,d=this.project(f),Math.abs(h)>180&&(s===void 0&&(s=f.x>u.x),s&&(d._add(-i.x*dt(h)*a,0),f._add(-360*dt(h),0))),Math.abs(c)>90&&(l===void 0&&(l=f.y<u.y),l&&(d._add(0,-i.y*dt(c)*o),f._add(0,-180*dt(c)))),u=f,v.push(d);return v},unprojectCoords:function(t){return t?Array.isArray(t)?sa(t,this.unproject,this):this.unproject(t):[]},isSphere:function(){return!!this.sphere},isOutSphere:function(t){if(!this.isSphere())return!1;var n=this.getSphereExtent();return!n.contains(t)},wrapCoord:function(t){if(!this.isSphere())return t;var n=this.getSphereExtent(),i=new te(t);return n.contains(i)||(i.x=hi(t.x,n.xmin,n.xmax),i.y=hi(t.y,n.ymin,n.ymax)),i},getCircum:function(){if(!this.circum&&this.isSphere()){var t=this.getSphereExtent();this.circum={x:t.getWidth(),y:t.getHeight()}}return this.circum},getSphereExtent:function(){if(!this.extent&&this.isSphere()){var t=this.project(new te(180,90)),n=this.project(new te(-180,-90));this.extent=new Ye(n,t,this),this.extent.sx=t.x>n.x?1:-1,this.extent.sy=t.y>n.y?1:-1}return this.extent}},Fc={measureLength:function(t,n){if(!Array.isArray(t))return this.measureLenBetween(t,n);for(var i=0,e=0,a=t.length;e<a-1;e++)i+=this.measureLenBetween(t[e],t[e+1]);return i}},lb=fe({measure:"IDENTITY",measureLenBetween:function(t,n){if(!t||!n)return 0;try{return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}catch{return 0}},measureArea:function(t){if(!Array.isArray(t))return 0;for(var n=0,i=0,e=t.length;i<e;i++){var a=t[i],o=null;i===e-1?o=t[0]:o=t[i+1],n+=a.x*o.y-a.y*o.x}return Math.abs(n/2)},locate:function(t,n,i){return t=new te(t.x,t.y),this._locate(t,n,i)},_locate:function(t,n,i){return t?(n||(n=0),i||(i=0),!n&&!i||(t.x=t.x+n,t.y=t.y+i),t):null},rotate:function(t,n,i){return t=new te(t.x,t.y),this._rotate(t,n,i)},_rotate:function(){var r=new B(0,0);return function(t,n,i){return r.x=t.x-n.x,r.y=t.y-n.y,r._rotate(i*Math.PI/180),t.x=n.x+r.x,t.y=n.y+r.y,t}}()},Fc),ub=function(){function r(n){this.radius=n}var t=r.prototype;return t.measureLenBetween=function(i,e){if(!i||!e)return 0;var a=Ct(i.y),o=Ct(e.y),s=a-o,l=Ct(i.x)-Ct(e.x);return a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(a)*Math.cos(o)*Math.pow(Math.sin(l/2),2))),a*=this.radius,Math.round(a*1e5)/1e5},t.measureArea=function(i){var e=Ct(this.radius),a=0,o=i,s=o.length;if(s<3)return 0;var l;for(l=0;l<s-1;l++){var u=o[l],f=o[l+1];a+=u.x*e*Math.cos(Ct(u.y))*f.y*e-f.x*e*Math.cos(Ct(f.y))*u.y*e}return s=o[l],o=o[0],a+=s.x*e*Math.cos(Ct(s.y))*o.y*e-o.x*e*Math.cos(Ct(o.y))*s.y*e,.5*Math.abs(a)},t.locate=function(i,e,a){return i=new te(i.x,i.y),this._locate(i,e,a)},t._locate=function(i,e,a){if(!i)return null;if(e||(e=0),a||(a=0),!e&&!a)return i;var o,s,l=Ct(i.y);if(a!==0){var u=Math.abs(a),f=Math.sin(u/(2*this.radius))*2;l=l+f*(a>0?1:-1),s=hi(l*180/Math.PI,-90,90)}else s=i.y;if(e!==0){var h=Math.abs(e),c=Ct(i.x),d=2*Math.sqrt(Math.pow(Math.sin(h/(2*this.radius)),2)/Math.pow(Math.cos(l),2));c=c+d*(e>0?1:-1),o=hi(c*180/Math.PI,-180,180)}else o=i.x;return i.x=o,i.y=s,i},t.rotate=function(i,e,a){return i=new te(i),this._rotate(i,e,a)},t._rotate=function(i,e,a){var o=Ak(e,i),s=o-a,l=this.measureLenBetween(e,i);return i.x=e.x,i.y=e.y,Rk(i,l,s,this.radius)},r}();function Ak(r,t,n){n===void 0&&(n={});var i;n.final?i=Ap(t,r):i=Ap(r,t);var e=i>180?-(360-i):i;return e}function Ap(r,t){var n=Ct(r.y),i=Ct(t.y),e=Ct(t.x-r.x);e>Math.PI&&(e-=2*Math.PI),e<-Math.PI&&(e+=2*Math.PI);var a=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),o=Math.atan2(e,a);return(DI(o)+360)%360}function Rk(r,t,n,i){var e=t/i,a=r.x*Math.PI/180,o=Ct(r.y),s=Ct(n),l=e*Math.cos(s),u=o+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var f=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),h=Math.abs(f)>1e-11?l/f:Math.cos(o),c=e*Math.sin(s)/h,d=a+c;return r.x=(d*180/Math.PI+540)%360-180,r.y=u*180/Math.PI,r}var Vl=fe({measure:"EPSG:4326",sphere:new ub(6378137),measureLenBetween:function(){return this.sphere.measureLenBetween.apply(this.sphere,arguments)},measureArea:function(){return this.sphere.measureArea.apply(this.sphere,arguments)},_locate:function(){return this.sphere._locate.apply(this.sphere,arguments)},locate:function(){return this.sphere.locate.apply(this.sphere,arguments)},_rotate:function(){return this.sphere._rotate.apply(this.sphere,arguments)},rotate:function(){return this.sphere.rotate.apply(this.sphere,arguments)}},Fc),fb=fe({measure:"BAIDU",sphere:new ub(637099681e-2),measureLenBetween:function(){return this.sphere.measureLenBetween.apply(this.sphere,arguments)},measureArea:function(){return this.sphere.measureArea.apply(this.sphere,arguments)},_locate:function(){return this.sphere._locate.apply(this.sphere,arguments)},locate:function(){return this.sphere.locate.apply(this.sphere,arguments)},_rotate:function(){return this.sphere._rotate.apply(this.sphere,arguments)},rotate:function(){return this.sphere.rotate.apply(this.sphere,arguments)}},Fc),Ik=Vl,no={};function Hc(r){no[r.measure]=r}Hc(lb);Hc(Vl);Hc(fb);var Zu={getInstance:function(t){if(!t)return Ik;for(var n in no)if(Bo(no,n)){var i=no[n].measure;if(!i)continue;if(t.toLowerCase()===i.toLowerCase())return no[n]}return null}},Rp=1e-7,hb=fe({},Ca,{code:"EPSG:3857",rad:Math.PI/180,metersPerDegree:6378137*Math.PI/180,maxLatitude:85.0511287798,project:function(t,n){var i=this.rad,e=this.metersPerDegree,a=this.maxLatitude,o=t.x,s=Math.max(Math.min(a,t.y),-a),l;s===0?l=0:l=Math.log(Math.tan((90+s)*i/2))/i;var u=o*e,f=l*e;return n?(n.x=u,n.y=f,n):new te(u,f)},unproject:function(t,n){var i=this.rad,e=this.metersPerDegree,a=t.x/e,o=t.y,s;o===0?s=0:(s=o/e,s=(2*Math.atan(Math.exp(s*i))-Math.PI/2)/i),Math.abs(Math.abs(a)-180)<Rp&&(a=dt(a)*180),Math.abs(Math.abs(s)-this.maxLatitude)<Rp&&(s=dt(s)*this.maxLatitude);var l=hi(a,-180,180),u=hi(s,-this.maxLatitude,this.maxLatitude);return n?(n.x=l,n.y=u,n):new te(l,u)}},Vl),cb=fe({},Ca,{code:"EPSG:4326",project:function(t,n){return n?(n.x=t.x,n.y=t.y,n):new te(t)},unproject:function(t,n){return n?(n.x=t.x,n.y=t.y,n):new te(t)}},Vl),kk=fe({},cb,{code:"EPSG:4490"}),Dk=fe({},Ca,{code:"BAIDU",project:function(t,n){return this.convertLL2MC(t,n)},unproject:function(t,n){return this.convertMC2LL(t,n)}},fb,{EARTHRADIUS:637099681e-2,MCBAND:[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],convertMC2LL:function(t,n){for(var i,e=0,a=this.MCBAND.length;e<a;e++)if(Math.abs(t.y)>=this.MCBAND[e]){i=this.MC2LL[e];break}var o=this.convertor(t,i,n);return o},convertLL2MC:function(t,n){var i,e,a;t.x=this.getLoop(t.x,-180,180),t.y=this.getRange(t.y,-74,74);var o=new te(t.x,t.y);for(e=0,a=this.LLBAND.length;e<a;e++)if(o.y>=this.LLBAND[e]){i=this.LL2MC[e];break}if(!i){for(e=this.LLBAND.length-1;e>=0;e--)if(o.y<=-this.LLBAND[e]){i=this.LL2MC[e];break}}var s=this.convertor(t,i,n);return s},convertor:function(t,n,i){if(!t||!n)return null;var e=n[0]+n[1]*Math.abs(t.x),a=Math.abs(t.y)/n[9],o=n[2]+n[3]*a+n[4]*a*a+n[5]*a*a*a+n[6]*a*a*a*a+n[7]*a*a*a*a*a+n[8]*a*a*a*a*a*a;return e*=t.x<0?-1:1,o*=t.y<0?-1:1,i?(i.x=e,i.y=o,i):new te(e,o)},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},getRange:function(t,n,i){return n!=null&&(t=Math.max(t,n)),i!=null&&(t=Math.min(t,i)),t},getLoop:function(t,n,i){if(t===1/0)return i;if(t===-1/0)return n;for(;t>i;)t-=i-n;for(;t<n;)t+=i-n;return t}}),Lk=fe({},Ca,{code:"IDENTITY",project:function(t,n){return n?(n.x=t.x,n.y=t.y,n):t.copy()},unproject:function(t,n){return n?(n.x=t.x,n.y=t.y,n):t.copy()}},lb),db=hb,Cs=Object.freeze({EPSG3857:hb,DEFAULT:db,EPSG4326:cb,EPSG4490:kk,BAIDU:Dk,IDENTITY:Lk,Common:Ca}),vb=function(r){return function(t){re(n,t);function n(){return t.apply(this,arguments)||this}return n.registerRenderer=function(e,a){var o=this.prototype,s=Object.getPrototypeOf(o);return(!o._rendererClasses||o._rendererClasses===s._rendererClasses)&&(o._rendererClasses=o._rendererClasses?Object.create(o._rendererClasses):{}),o._rendererClasses[e.toLowerCase()]=a,this},n.getRendererClass=function(e){var a=this.prototype;return a._rendererClasses?a._rendererClasses[e.toLowerCase()]:null},n}(r)},dl={};function jk(r,t){dl[r]=t}var Nk=`
    var adapters = {};
    onmessage = function (msg) {
        msg = msg.data;
        if (msg.messageType === 'batch') {
            const messages = msg.messages;
            if (messages) {
                for (let i = 0; i < messages.length; i++) {
                    dispatch(messages[i]);
                }
            }
        } else {
            dispatch(msg);
        }
    };

    function dispatch(msg) {
        var workerKey = msg.workerKey;
        var adapter = adapters[workerKey];
        if (!adapter) {
            post(msg.callback, 'Unregistered worker adapters for ' + workerKey);
            return;
        }
        try {
            adapter.onmessage(msg, wrap(msg.callback));
        } catch (err) {
            post(msg.callback, workerKey + ':' + err.message);
            console.error(err);
            throw err;
        }
    }

    function post(callback, err, data, buffers) {
        var msg = {
            callback : callback
        };
        if (err) {
            msg.error = err;
        } else {
            msg.data = data;
        }
        if (buffers && buffers.length > 0) {
            postMessage(msg, buffers);
        } else {
            postMessage(msg);
        }
    }
    function wrap(callback) {
        return function (err, data, buffers) {
            post(callback, err, data, buffers);
        };
    }
    var workerExports;
`,zk=`
    workerExports = null;
`;function Fk(){var r=Nk;for(var t in dl){var n=dl[t];Xe(n)&&n.length===0&&(n=n()),r+=`
    workerExports = {};
    (`+n+`)(workerExports, self);
    adapters['`+t+"'] = workerExports",r+=`
    workerExports.initialize && workerExports.initialize(self);
        `}return r+=zk,r}var Uu;function Hk(){if(typeof window=="undefined")return null;if(!Uu){var r=Fk();Uu=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"})),dl=null}return Uu}var Bk=typeof window!="undefined"?window.navigator.hardwareConcurrency||4:0,$k=Math.max(Math.floor(Bk/2),1),Ip=function(){function r(n){n===void 0&&(n=50),this._limit=n,this._messages=[],this.buffers=[]}var t=r.prototype;return t.addMessage=function(i,e){if(this._messages.push(i),!!Array.isArray(e))for(var a=0;a<e.length;a++)this.buffers.indexOf(e[a])<0&&this.buffers.push(e[a])},t.isFull=function(){return this._messages.length>=this._limit},t.getMessage=function(){return{messageType:"batch",messages:this._messages}},r}(),Wk=function(){function r(){this.active={},this.workerCount=typeof window!="undefined"?window.MAPTALKS_WORKER_COUNT||$k:0,this._messages=[],this._messageBuffers=[]}var t=r.prototype;return t.acquire=function(i){if(!this.workers){this.workers=[];for(var e=Hk(),a=0;a<this.workerCount;a++){var o=new Worker(e);o.id=a,this.workers.push(o)}URL.revokeObjectURL(e)}return this.active[i]=!0,this.workers.slice()},t.release=function(i){delete this.active[i],Object.keys(this.active).length===0&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.addMessage=function(i,e,a){var o=this._messages[i];(!o||!o.length)&&(o=this._messages[i]=[new Ip]);var s=o[o.length-1];s.isFull()&&(s=new Ip,this._messages[i].push(s)),s.addMessage(e,a)},t.commit=function(){if(this._messages.length){for(var i=0;i<this._messages.length;i++)if(!(!this._messages[i]||!this._messages[i].length)){var e=this._messages[i].shift();this.workers[i].postMessage(e.getMessage(),e.buffers)}}},r}(),Ku;function gb(){return Ku||(Ku=new Wk),Ku}var Yu=0,kp=[],pb=function(){function r(n){var i=this;this.workerKey=n,this.workerPool=gb(),this.currentActor=0,this.actorId=ba(),this.workers=this.workerPool.acquire(this.actorId),this.callbacks={},this.callbackID=0,this.receiveFn=this.receive.bind(this),this.workers.forEach(function(e){e.addEventListener("message",i.receiveFn,!1)})}var t=r.prototype;return t.isActive=function(){return!!this.workers},t.broadcast=function(i,e,a){var o=this;return a=a||function(){},Gk(this.workers,function(s,l){o.send(i,e,l,s.id)},a),this},t.send=function(i,e,a,o){var s=a?this.actorId+":"+this.callbackID++:null;return a&&(this.callbacks[s]=a),this.post({data:i,callback:String(s)},e,o),this},t.receive=function(i){var e=this,a=i.data,o=a.callback,s=this.callbacks[o];delete this.callbacks[o],a.type==="<request>"?this.actorId===a.actorId&&this[a.command](a.params,function(l,u,f){var h={type:"<response>",callback:a.callback};l?h.error=l.message:h.data=u,e.post(h,f||kp,a.workerId)}):s&&a.error?s(a.error):s&&s(null,a.data)},t.remove=function(){var i=this;this.workers.forEach(function(e){e.removeEventListener("message",i.receiveFn,!1)}),this.workerPool.release(this.actorId),delete this.receiveFn,delete this.workers,delete this.callbacks,delete this.workerPool},t.post=function(i,e,a){return(typeof a!="number"||isNaN(a))&&(a=this.currentActor=(this.currentActor+1)%this.workerPool.workerCount),i.workerId=a,i.workerKey=this.workerKey,i.actorId=this.actorId,this.workerPool.addMessage(a,i,e||kp),a},t.getDedicatedWorker=function(){return Yu=(Yu+1)%this.workerPool.workerCount,Yu},r}();function Gk(r,t,n){r.length||n(null,[]);var i=r.length,e=new Array(r.length),a=null;r.forEach(function(o,s){t(o,function(l,u){l&&(a=l),e[s]=u,--i===0&&n(a,e)})})}var Bc="core-fetch-image",Vk=[],Zk=function(r){re(t,r);function t(){return r.call(this,Bc)||this}var n=t.prototype;return n.fetchImage=function(e,a){var o={url:e};this.send(o,Vk,a)},t}(pb),$o=function(r){re(t,r);function t(i){var e;return e=r.call(this)||this,e.layer=i,e._painted=!1,e._drawTime=0,De.decodeImageInWorker&&(e._resWorkerConn=new Zk),e.setToRedraw(),e}var n=t.prototype;return n.render=function(e){this.prepareRender(),!(!this.getMap()||!this.layer.isVisible())&&(this.resources||(this.resources=new ua),this.checkAndDraw(this._tryToDraw,e))},n.checkAndDraw=function(e){var a=this;this._toRedraw=!1;for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];if(this.checkResources){var u=this.checkResources();u.length>0?(this._loadingResource=!0,this.loadResources(u).then(function(){a._loadingResource=!1,a.layer&&(a.layer.fire("resourceload"),a.setToRedraw())})):e.call.apply(e,[this].concat(s))}else e.call.apply(e,[this].concat(s))},n.testIfNeedRedraw=function(){var e=this.getMap();return this._loadingResource?!1:this._toRedraw?!0:e.isInteracting()&&!this.drawOnInteracting?!1:!!this.needToRedraw()},n.needToRedraw=function(){var e=this.getMap();return e.isInteracting()||e.getRenderer().isViewChanged()?!(!e.getPitch()&&e.isMoving()&&!e.isZooming()&&!e.isRotating()&&!this.layer.options.forceRenderOnMoving):!1},n.onSkipDrawOnInteracting=function(){},n.isLoadingResource=function(){return this._loadingResource},n.isRenderComplete=function(){return!!this._renderComplete},n.mustRenderOnInteracting=function(){return!this._painted},n.setToRedraw=function(){return this._toRedraw=!0,this},n.setCanvasUpdated=function(){return this._canvasUpdated=!0,this},n.isCanvasUpdated=function(){return!!this._canvasUpdated},n.remove=function(){this.onRemove(),delete this._loadingResource,delete this.southWest,delete this.canvas,delete this.context,delete this.canvasExtent2D,delete this._extent2D,this.resources&&this.resources.remove(),delete this.resources,delete this.layer},n.onRemove=function(){},n.onAdd=function(){},n.getMap=function(){return this.layer?this.layer.getMap():null},n.getCanvasImage=function(){var e=this.getMap();if(this._canvasUpdated=!1,this._renderZoom!==e.getZoom()||!this.canvas||!this._extent2D||this.isBlank()||this.layer.isEmpty&&this.layer.isEmpty())return null;var a=e._pointToContainerPoint(this.southWest)._add(0,-e.height);return{image:this.canvas,layer:this.layer,point:a}},n.clear=function(){this.clearCanvas()},n.isBlank=function(){return!this._painted},n.show=function(){this.setToRedraw()},n.hide=function(){this.clear(),this.setToRedraw()},n.setZIndex=function(){this.setToRedraw()},n.hitDetect=function(e){if(!this.context||this.layer.isEmpty&&this.layer.isEmpty()||this.isBlank()||this._errorThrown)return!1;var a=this.getMap(),o=a.getDevicePixelRatio(),s=a.getSize();if(e.x<0||e.x>s.width*o||e.y<0||e.y>s.height*o)return!1;var l=this.getImageData&&this.getImageData();if(l){var u=o*e.x,f=o*e.y,h=f*l.width*4+u*4;return l.data[h+3]>0}try{var c=this.context.getImageData(o*e.x,o*e.y,1,1).data;if(c[3]>0)return!0}catch(d){return this._errorThrown||(console&&console.warn(`hit detect failed with tainted canvas, some geometries have external resources in another domain:
`,d),this._errorThrown=!0),!1}return!1},n.loadResources=function(e){this.resources||(this.resources=new ua);var a=this.resources,o=[];if(We(e))for(var s={},l=e.length-1;l>=0;l--){var u=e[l];!u||!u.length||s[u.join("-")]||(s[u.join("-")]=1,a.isResourceLoaded(u,!0)||o.push(new Tp(this._promiseResource(u))))}return Tp.all(o)},n.prepareRender=function(){delete this._renderComplete;var e=this.getMap();this._renderZoom=e.getZoom(),this.canvasExtent2D=this._extent2D=e._get2DExtent(),this.southWest=e._containerPointToPoint(new B(0,e.height))},n.createCanvas=function(){if(!this.canvas){var e=this.getMap(),a=e.getSize(),o=e.getDevicePixelRatio(),s=Math.round(o*a.width),l=Math.round(o*a.height);if(this.layer._canvas){var u=this.layer._canvas;u.width=s,u.height=l,u.style&&(u.style.width=a.width+"px",u.style.height=a.height+"px"),this.canvas=this.layer._canvas}else this.canvas=Q.createCanvas(s,l,e.CanvasClass);this.onCanvasCreate()}},n.onCanvasCreate=function(){},n.createContext=function(){if(!(this.gl&&this.gl.canvas===this.canvas||this.context)&&(this.context=this.canvas.getContext("2d"),!!this.context)){this.layer.options.globalCompositeOperation&&(this.context.globalCompositeOperation=this.layer.options.globalCompositeOperation);var e=this.getMap().getDevicePixelRatio();e!==1&&this.context.scale(e,e)}},n.resetCanvasTransform=function(){if(!!this.context){var e=this.getMap().getDevicePixelRatio();this.context.setTransform(e,0,0,e,0,0)}},n.resizeCanvas=function(e){var a=this.canvas;if(!!a){var o=e||this.getMap().getSize(),s=this.getMap().getDevicePixelRatio(),l=j0(o,s),u=l.width,f=l.height,h=l.cssWidth,c=l.cssHeight;this.layer._canvas&&(a.style.width!==h||a.style.height!==c)&&(a.style.width=h,a.style.height=c),!(a.width===u&&a.height===f)&&(a.height=f,a.width=u,s!==1&&this.context&&this.context.scale(s,s))}},n.clearCanvas=function(){if(!(!this.context||!this.getMap())){var e=this.getMap().getDevicePixelRatio(),a=1/e,o=this.canvas.width*a,s=this.canvas.height*a;Q.clearRect(this.context,0,0,Math.max(o,this.canvas.width),Math.max(s,this.canvas.height))}},n.prepareCanvas=function(){this.canvas?(this.resetCanvasTransform(),this.clearCanvas(),this.resizeCanvas()):(this.createCanvas(),this.createContext(),this.layer.onCanvasCreate(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})),delete this._maskExtent;var e=this.layer.getMask();if(!e)return this.layer.fire("renderstart",{context:this.context,gl:this.gl}),null;var a=this._maskExtent=e._getMaskPainter().get2DExtent();return a.intersects(this._extent2D)?(this.layer.fire("renderstart",{context:this.context,gl:this.gl}),a):(this.layer.fire("renderstart",{context:this.context,gl:this.gl}),a)},n.clipCanvas=function(e){var a=this.layer.getMask();if(!a)return!1;var o=this.southWest,s=this.getMap();this.southWest=s._containerPointToPoint(new B(0,s.height)),e.save();var l=s.getDevicePixelRatio();if(l!==1&&(e.save(),e.scale(l,l)),a.getGeometries){e.isMultiClip=!0;var u=a.getGeometries()||[];e.beginPath(),u.forEach(function(h){var c=h._getMaskPainter();c.paint(null,e)}),e.stroke(),delete e.isMultiClip}else{var f=a._getMaskPainter();f.paint(null,e)}return l!==1&&e.restore(),e.clip(),this.southWest=o,!0},n.getViewExtent=function(){return{extent:this._extent2D,maskExtent:this._maskExtent,zoom:this._renderZoom,southWest:this.southWest}},n.completeRender=function(){this.getMap()&&(this._renderComplete=!0,this.layer.fire("renderend",{context:this.context,gl:this.gl}),this.setCanvasUpdated())},n.getEvents=function(){return{_zoomstart:this.onZoomStart,_zooming:this.onZooming,_zoomend:this.onZoomEnd,_resize:this.onResize,_movestart:this.onMoveStart,_moving:this.onMoving,_moveend:this.onMoveEnd,_dragrotatestart:this.onDragRotateStart,_dragrotating:this.onDragRotating,_dragrotateend:this.onDragRotateEnd,_spatialreferencechange:this.onSpatialReferenceChange}},n.onZoomStart=function(){},n.onZoomEnd=function(){this.setToRedraw()},n.onZooming=function(){},n.onMoveStart=function(){},n.onMoving=function(){},n.onMoveEnd=function(){this.setToRedraw()},n.onResize=function(){delete this._extent2D,this.resizeCanvas(),this.setToRedraw()},n.onDragRotateStart=function(){},n.onDragRotating=function(){},n.onDragRotateEnd=function(){this.setToRedraw()},n.onSpatialReferenceChange=function(){},n.getDrawTime=function(){return this._drawTime},n._tryToDraw=function(e){if(this._toRedraw=!1,!this.canvas&&this.layer.isEmpty&&this.layer.isEmpty()){this._renderComplete=!0;return}this._drawAndRecord(e)},n._drawAndRecord=function(e){if(!!this.getMap()){var a=this._painted;this._painted=!0;var o=nt();this.draw(e),o=nt()-o,this._drawTime=a?o:o/2,a&&this.layer&&this.layer.options.logDrawTime&&console.log(this.layer.getId(),"frameTimeStamp:",e,"drawTime:",this._drawTime)}},n._promiseResource=function(e){var a=this,o=this.resources,s=this.layer.options.crossOrigin,l=this.layer.options.renderer||"";return function(u){if(o.isResourceLoaded(e,!0)){u(e);return}if(!Vi(e[0])&&De.decodeImageInWorker){var f=L0(e[0]);a._resWorkerConn.fetchImage(f,function(c,d){if(c){c&&typeof console!="undefined"&&console.warn(c),u(e);return}D0(d,function(v){a._cacheResource(e,v),u(e)})})}else{var h=new Image;N(s)?l!=="canvas"&&(h.crossOrigin=""):h.crossOrigin=s,Vi(e[0])&&!ct&&(e[1]&&(e[1]*=2),e[2]&&(e[2]*=2)),h.onload=function(){a._cacheResource(e,h),u(e)},h.onabort=function(c){console&&console.warn("image loading aborted: "+e[0]),c&&console&&console.warn(c),u(e)},h.onerror=function(c){c&&typeof console!="undefined"&&console.warn(c),o.markErrorResource(e),u(e)},ul(h,e)}}},n._cacheResource=function(e,a){if(!(!this.layer||!this.resources)){var o=e[1],s=e[2];if(this.layer.options.cacheSvgOnCanvas&&Vi(e[0])===1&&(De.edge||De.ie)){N(o)&&(o=a.width||this.layer.options.defaultIconSize[0]),N(s)&&(s=a.height||this.layer.options.defaultIconSize[1]);var l=Q.createCanvas(o,s);Q.image(l.getContext("2d"),a,0,0,o,s),a=l}this.resources.addResource(e,a)}},t}(_n),ua=function(){function r(){this.resources={},this._errors={}}var t=r.prototype;return t.addResource=function(i,e){var a=this;if(this.resources[i[0]]={image:e,width:+i[1],height:+i[2],refCnt:0},e&&!e.close&&De.imageBitMap){if(e.src&&Vi(e.src))return;createImageBitmap(e).then(function(o){!a.resources[i[0]]||(a.resources[i[0]].image=o)})}},t.isResourceLoaded=function(i,e){if(!i)return!1;var a=this._getImgUrl(i);if(this._errors[a])return!0;var o=this.resources[a];return!(!o||e&&Vi(i[0])&&(+i[1]>o.width||+i[2]>o.height))},t.login=function(i){var e=this.resources[i];e&&e.refCnt++},t.logout=function(i){var e=this.resources[i];e&&e.refCnt--<=0&&delete this.resources[i]},t.getImage=function(i){var e=this._getImgUrl(i);return!this.isResourceLoaded(i)||this._errors[e]?null:this.resources[e].image},t.markErrorResource=function(i){this._errors[this._getImgUrl(i)]=1},t.merge=function(i){if(!i)return this;for(var e in i.resources){var a=i.resources[e];this.addResource([e,a.width,a.height],a.image)}return this},t.forEach=function(i){if(!this.resources)return this;for(var e in this.resources)Bo(this.resources,e)&&i(e,this.resources[e]);return this},t._getImgUrl=function(i){return Array.isArray(i)?i[0]:i},t.remove=function(){for(var i in this.resources){var e=this.resources[i];e&&e.image&&e.image.close&&e.image.close()}this.resources={}},r}(),Ui={markerWidth:10,markerHeight:10,markerLineWidth:1};function mb(){return .5}var Uk=new B(0,0);function $c(r,t,n,i,e,a,o){var s=Uk.set(t,n),l=r.set(s.x,s.y,s.x+a,s.y+o);return l._add(e),i&&Yk(l,i),l}var Kk=[];function _b(r,t,n){n=n||wb(Kk,t);var i=xb(t,n[0],n[1]);return $c(r,t.markerDx||0,t.markerDy||0,Zl(t),i,n[0],n[1])}function yb(r){return r==="rectangle"?"right":"middle"}function bb(r){return r==="bar"||r==="pie"||r==="pin"?"top":r==="rectangle"?"bottom":"middle"}var Ki=new st(0,0);function xb(r,t,n){var i=mb(),e=2*(r.shadowBlur||0),a=e+i;Ki.width=t,Ki.height=n;var o=r.markerType,s=ci(Ki,r.markerHorizontalAlignment||yb(o),r.markerVerticalAlignment||bb(o));return s.x!==-t/2&&(s.x-=dt(s.x+t/2)*a),s.y!==-n/2&&(s.y-=dt(s.y+n/2)*a),s}function wb(r,t){var n=mb(),i=ye(t.markerWidth,Ui.markerWidth),e=ye(t.markerHeight,Ui.markerHeight),a=ye(t.markerLineWidth,Ui.markerLineWidth),o=2*((t.shadowBlur||0)+Math.max(Math.abs(t.shadowOffsetX||0)+Math.abs(t.shadowOffsetY||0))),s=Math.round(i+a+o+n*2),l=Math.round(e+a+o+n*2);return r[0]=s,r[1]=l,r}var Dp=new Ee;function Yk(r,t){var n=r.xmin,i=r.ymin,e=r.xmax,a=r.ymax;return Dp.set(n,i,e,a),Dp.convertTo(function(o){return o._rotate(t)},r)}function Zl(r,t){t===void 0&&(t="markerRotation");var n=r[t];return be(n)?-n*Math.PI/180:0}function vh(r,t,n){var i=t.markerFile,e=n?n.getImage(i):null,a=t.markerWidth||(e?e.width:0),o=t.markerHeight||(e?e.height:0);Ki.width=a,Ki.height=o;var s=ci(Ki,t.markerHorizontalAlignment||"middle",t.markerVerticalAlignment||"top");return $c(r,t.markerDx||0,t.markerDy||0,Zl(t),s,a,o)}function Cb(r,t,n){var i=n.size,e=ci(i,t.textHorizontalAlignment,t.textVerticalAlignment);if(t.textHaloRadius){var a=t.textHaloRadius;i=i.add(a*2,a*2)}return $c(r,t.textDx||0,t.textDy||0,Zl(t,"textRotation"),e,i.width,i.height)}var Ps=new Ee;function gh(r,t,n,i){var e=r||new Ee;if(Array.isArray(t)){for(var a=t,o=0;o<a.length;o++)gh(e,a[o],n,i[o]);return e}return vl(t)&&e._combine(Cb(Ps,t,i)),Wc(t)&&e._combine(vh(Ps,t,n)),gl(t)&&e._combine(_b(Ps,t)),Gc(t)&&e._combine(vh(Ps,t)),e}function vl(r){return r?!N(r.textName):!1}function Wc(r){return r?!N(r.markerFile):!1}function gl(r){return r?!!(N(r.markerFile)&&!N(r.markerType)&&r.markerType!=="path"):!1}function Gc(r){return r?!!(N(r.markerFile)&&r.markerType==="path"):!1}var qu=["markerWidth","markerHeight","markerHorizontalAlignment","markerVerticalAlignment","markerDx","markerDy","textName","textSize","textDx","textDy","textVerticalAlignment","textHorizontalAlignment","textRotation"],Xu=["textName","markerType","markerFile","textHaloRadius","shadowBlur","shadowOffsetX","shadowOffsetY"];function Bs(r,t,n,i){for(var e=[],a=0,o,s=0,l=r.length;s<l-1;s++)o=qk(r[s],r[s+1],t,s,n,i),o&&(e[a]=e[a]||[],e[a].push({point:o[0],index:s}),(o[1]!==r[s+1]||s===l-2)&&(e[a].push({point:o[1],index:s+1}),a++));return e}var Lp;function qk(r,t,n,i,e,a){var o=i?Lp:Yi(r,n),s=Yi(t,n),l,u,f;for(Lp=s;;){if(!(o|s))return[r,t];if(o&s)return!1;if(a)return[r,t];l=o||s,u=ph(r,t,l,n,e),f=Yi(u,n),l===o?(r=u,o=f):(t=u,s=f)}}function $s(r,t,n){var i=[1,4,2,8],e,a,o,s,l,u,f,h,c;for(a=0,f=r.length;a<f;a++)r[a]._code=Yi(r[a],t);for(s=0;s<4;s++){for(h=i[s],e=[],a=0,f=r.length,o=f-1;a<f;o=a++)l=r[a],u=r[o],l._code&h?u._code&h||(c=ph(u,l,h,t,n),c._code=Yi(c,t),e.push(c)):(u._code&h&&(c=ph(u,l,h,t,n),c._code=Yi(c,t),e.push(c)),e.push(l));r=e}return r}function ph(r,t,n,i,e){var a=t.x-r.x,o=t.y-r.y,s=i.getMin(),l=i.getMax(),u,f;n&8?(u=r.x+a*(l.y-r.y)/o,f=l.y):n&4?(u=r.x+a*(s.y-r.y)/o,f=s.y):n&2?(u=l.x,f=r.y+o*(l.x-r.x)/a):n&1&&(u=s.x,f=r.y+o*(s.x-r.x)/a);var h=new B(u,f);return e&&h._round(),h}function Yi(r,t){var n=0;return r.x<t.getMin().x?n|=1:r.x>t.getMax().x&&(n|=2),r.y<t.getMin().y?n|=4:r.y>t.getMax().y&&(n|=8),n}function Pb(r,t,n,i){r=new B(r);var e=Math.abs(n.x-t.x),a=Math.abs(n.y-t.y),o=Math.sqrt(Math.abs(e*e-a*a)),s=e>=a,l,u,f;return s?(l=new B(t.x-o,t.y),u=new B(t.x+o,t.y),f=e*2):(l=new B(t.x,t.y-o),u=new B(t.x,t.y+o),f=a*2),r.distanceTo(l)+r.distanceTo(u)<=f+2*i}var Xk=function(){function r(){}var t=r.prototype;return t.getMap=function(){return this.geometry.getMap()},t.getPainter=function(){return this.painter},t.isDynamicSize=function(){return!1},r.testColor=function(i){return!i||!Re(i)?!1:II.indexOf(i)>=0},r}(),Tb=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._prepareContext=function(e){if(ot(this.symbol.opacity)?this._opacityFn||(this._opacityFn=B0(this.symbol.opacity)):delete this._opacityFn,be(this.symbol.opacity))e.globalAlpha!==this.symbol.opacity&&(e.globalAlpha=this.symbol.opacity);else if(this._opacityFn){var a=this.getMap();e.globalAlpha=this._opacityFn(a.getZoom())}else e.globalAlpha!==1&&(e.globalAlpha=1)},n.prepareCanvas=function(e,a,o){e.setLineDash&&We(a.lineDasharray)&&e.setLineDash(a.lineDasharray);var s=this.getPainter().isHitTesting();Q.prepareCanvas(e,a,o,s)},n.remove=function(){},n.setZIndex=function(){},n.show=function(){},n.hide=function(){},n._defineStyle=function(e){return hl(e,this.geometry)},t}(Xk);function Jk(r,t){var n=r&&r.getImage(t);return n||null}function Sb(r,t,n,i){var e=Mb(n),a=n,o=a.markerType.toLowerCase(),s=Eb(o,a.markerWidth,a.markerHeight),l=e.lineOpacity,u=e.polygonOpacity,f=Lr(e.polygonFill);if(f){var h;Lr(e.polygonFill)&&(h||(h=Qk(t,a.markerWidth,a.markerHeight)),e.polygonGradientExtent=h)}Q.prepareCanvas(r,e,i);var c=a.markerWidth,d=a.markerHeight,v=a.markerLineWidth/2;if(o==="ellipse")Q.ellipse(r,t,c/2,d/2,d/2,l,u);else if(o==="cross"||o==="x"){for(var g=s.length-1;g>=0;g--)s[g]._add(t);Q.path(r,s.slice(0,2),l),Q.path(r,s.slice(2,4),l)}else if(o==="diamond"||o==="bar"||o==="square"||o==="rectangle"||o==="triangle"){o==="bar"?t=t.add(0,-v):o==="rectangle"&&(t=t.add(v,v));for(var m=s.length-1;m>=0;m--)s[m]._add(t);Q.polygon(r,s,l,u)}else if(o==="pin"){t=t.add(0,-v);for(var p=s.length-1;p>=0;p--)s[p]._add(t);var _=r.lineCap;r.lineCap="round",Q.bezierCurveAndFill(r,s,l,u),r.lineCap=_}else if(o==="pie"){t=t.add(0,-v);var b=Math.atan(c/2/d)*180/Math.PI,x=r.lineCap;r.lineCap="round",Q.sector(r,t,d,[90-b,90+b],l,u),r.lineCap=x}else throw new Error("unsupported markerType: "+o);return r.canvas}function Qk(r,t,n){var i=new Ee;return i._combine(r),i.xmin+=-t/2,i.ymin+=-n/2,i.xmax+=t/2,i.ymax+=n/2,i}function Mb(r){var t={lineColor:r.markerLineColor,linePatternFile:r.markerLinePatternFile,lineWidth:r.markerLineWidth,lineOpacity:r.markerLineOpacity,lineDasharray:r.markerLineDasharray,lineCap:"butt",lineJoin:"round",polygonFill:r.markerFill,polygonPatternFile:r.markerFillPatternFile,polygonOpacity:r.markerFillOpacity};return t.lineWidth===0&&(t.lineOpacity=0),t}function Eb(r,t,n){var i=n/2,e=t/2,a=0,o=0,s,l,u,f;if(r==="triangle")return s=new B(a,o-i),l=new B(a-e,o+i),u=new B(a+e,o+i),[s,l,u];if(r==="cross")return s=new B(a-e,o),l=new B(a+e,o),u=new B(a,o-i),f=new B(a,o+i),[s,l,u,f];if(r==="diamond")return s=new B(a-e,o),l=new B(a,o-i),u=new B(a+e,o),f=new B(a,o+i),[s,l,u,f];if(r==="square")return s=new B(a-e,o+i),l=new B(a+e,o+i),u=new B(a+e,o-i),f=new B(a-e,o-i),[s,l,u,f];if(r==="rectangle")return s=new B(a,o),l=s.add(t,0),u=s.add(t,n),f=s.add(0,n),[s,l,u,f];if(r==="x")return s=new B(a-e,o+i),l=new B(a+e,o-i),u=new B(a+e,o+i),f=new B(a-e,o-i),[s,l,u,f];if(r==="bar")return s=new B(a-e,o-n),l=new B(a+e,o-n),u=new B(a+e,o),f=new B(a-e,o),[s,l,u,f];if(r==="pin"||r==="pie"){var h=n*Math.atan(e/i);return s=new B(a,o),l=new B(a-h,o-n),u=new B(a+h,o-n),f=new B(a,o),[s,l,u,f]}return[]}var eD=new B(0,0),tD=new B(0,0),nD=new B(0,0),rD=new B(0,0),Pa=function(r){re(t,r);function t(i,e,a){var o;return o=r.call(this)||this,o.symbol=i,o.geometry=e,o.painter=a,o}var n=t.prototype;return n.get2DExtent=function(){for(var e=this.getMap(),a=e.getGLRes(),o=new Ee,s=this._getRenderPoints()[0],l=s.length-1;l>=0;l--)s[l]&&o._combine(e._pointAtResToPoint(s[l],a));return o},n.isDynamicSize=function(){var e=this.symbol;return ot(e.markerWidth)||ot(e.markerHeight)||ot(e.textSize)},n._rotateExtent=function(e,a){return e.convertTo(function(o){return o._rotate(a)})},n._getRenderPoints=function(){var e=this.getPainter(),a=e.isSpriting()?"center":this.getPlacement();return this.getPainter().getRenderPoints(a)},n._getRenderContainerPoints=function(e){var a=this.getPainter();if(a.isSpriting())return this._getRenderPoints()[0];var o=this.geometry,s=this.getDxDy(),l;if(o._cPoint&&!e){var u=e?nD:rD;u.set(o._cPoint.x,o._cPoint.y);var f=a.containerOffset;u._sub(f);var h=s.x,c=s.y;(h||c)&&u._add(h||0,c||0),l=[u]}else{var d=this._getRenderPoints()[0];l=this.painter._pointContainerPoints(d,s.x,s.y,e,!0,this.getPlacement())}if(!l||!Array.isArray(l[0]))return l;for(var v=[],g=0,m=l.length;g<m;g++)for(var p=0,_=l[g].length;p<_;p++)v.push(l[g][p]);return v},n.getPlacement=function(){return this.symbol.markerPlacement},n.getRotation=function(){return Zl(this.style)},n.getDxDy=function(){var e=this.style,a=e.markerDx,o=e.markerDy;return new B(a,o)},n._getRotationAt=function(e){var a=this.getRotation();a||(a=0);var o=this._getRenderPoints()[1];if(!o||!o[e])return a;var s=this.getMap(),l=o[e][0],u=o[e][1];if(s.isTransforming()){var f=s.getGLRes();return l=s._pointAtResToContainerPoint(o[e][0],f,0,eD),u=s._pointAtResToContainerPoint(o[e][1],f,0,tD),a+ah(l.x,l.y,u.x,u.y)}else return a+-ah(l.x,l.y,u.x,u.y)},n._rotate=function(e,a,o){if(o){var s=this.getDxDy(),l=a.sub(s);return e.save(),e.translate(l.x,l.y),e.rotate(o),s}return null},t}(Tb),iD=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getPlacement=function(){return"point"},n.getDxDy=function(){return new B(0,0)},n.symbolize=function(e){var a=this.geometry,o=a.getLayer();if(!(!a.options.debug&&o&&!o.options.debug)){var s=this.getMap();if(!(!s||s.isZooming())){var l=o.options.debugOutline,u=1;e.strokeStyle=l,e.fillStyle=l;var f=a.getContainerExtent().toArray();Q.polygon(e,[f],u,0);for(var h=this._getRenderContainerPoints(),c=this.geometry.getId(),d=Eb("cross",10,10),v=0;v<h.length;v++){var g=h[v];N(c)||Q.fillText(e,c,g.add(8,-4),l);for(var m=[],p=0;p<d.length;p++)m.push(d[p].add(g));Q.path(e,m.slice(0,2),u),Q.path(e,m.slice(2,4),u)}}}},t}(Pa),Ju=new st(1,1),Vc=function(r){re(t,r),t.test=function(e){return Wc(e)};function t(i,e,a){var o;return o=r.call(this,i,e,a)||this,o.style=o._defineStyle(o.translate()),o}var n=t.prototype;return n.symbolize=function(e,a){var o=this.style;if(!(!this.painter.isHitTesting()&&(o.markerWidth===0||o.markerHeight===0||o.markerOpacity===0))){var s=this._getRenderContainerPoints();if(!!We(s)){var l=this._getImage(a);if(!l){typeof console!="undefined"&&console.warn("no img found for "+(this.style.markerFile||this._url[0]));return}this._prepareContext(e);var u=o.markerWidth,f=o.markerHeight;if(!be(u)||!be(f)){u=l.width,f=l.height,o.markerWidth=u,o.markerHeight=f;var h=o.markerFile;a.isResourceLoaded(h)||a.addResource(h,l);var c=this.getPainter();c.isSpriting()||c.removeCache()}var d;this.symbol.markerType!=="path"&&be(o.markerOpacity)&&o.markerOpacity<1&&(d=e.globalAlpha,e.globalAlpha*=o.markerOpacity),Ju.width=u,Ju.height=f;for(var v=ci(Ju,o.markerHorizontalAlignment,o.markerVerticalAlignment),g=0,m=s.length;g<m;g++){var p=s[g],_=this.getRotation()?this._rotate(e,p,this._getRotationAt(g)):null;_&&(p=_),Q.image(e,l,p.x+v.x,p.y+v.y,u,f),_&&e.restore()}d!==void 0&&(e.globalAlpha=d)}}},n._getImage=function(e){return Jk(e,this.style.markerFile)},n.getFixedExtent=function(e){return this._fixedExtent=this._fixedExtent||new Ee,vh(this._fixedExtent,this.style,e)},n.translate=function(){var e=this.symbol;return{markerFile:e.markerFile,markerOpacity:ye(e.markerOpacity,1),markerWidth:ye(e.markerWidth,null),markerHeight:ye(e.markerHeight,null),markerRotation:ye(e.markerRotation,0),markerDx:ye(e.markerDx,0),markerDy:ye(e.markerDy,0),markerHorizontalAlignment:ye(e.markerHorizontalAlignment,"middle"),markerVerticalAlignment:ye(e.markerVerticalAlignment,"top")}},t}(Pa),aD=new te(0,0),oD=new te(0,0),Ob=function(r){re(t,r),t.test=function(e,a){if(!e||a&&a.type==="Point")return!1;for(var o in e){var s=o.slice(0,4);if(s==="line"||s==="poly")return!0}return!1};function t(i,e,a){var o;return o=r.call(this)||this,o.symbol=i,o.geometry=e,o.painter=a,e.type==="Point"?at(o):(o.style=o._defineStyle(o.translate()),o)}var n=t.prototype;return n.symbolize=function(e,a){var o=this.style;if(!(o.polygonOpacity===0&&o.lineOpacity===0&&!this.painter.isHitTesting())){var s=this._getPaintParams();if(!!s){this._prepareContext(e);var l=Lr(o.lineColor),u=this.geometry.getJSONType()==="Polygon"||this.geometry.type==="LineString";l&&(o.lineColor.places||!u)&&(o.lineGradientExtent=this.geometry.getContainerExtent()._expand(o.lineWidth)),Lr(o.polygonFill)&&(o.polygonGradientExtent=this.geometry.getContainerExtent());var f=s[0],h=this.geometry.getJSONType()==="Polygon"&&f.length>0&&Array.isArray(f[0][0])||this.geometry.type==="LineString"&&f.length>0&&Array.isArray(f[0]);if(h)for(var c=0;c<f.length;c++){this.prepareCanvas(e,o,a),l&&u&&!o.lineColor.places&&this._createGradient(e,f[c],o.lineColor);var d=[e,f[c]];s.length>1&&d.push.apply(d,s.slice(1)),d.push(o.lineOpacity,o.polygonOpacity,o.lineDasharray),this.geometry._paintOn.apply(this.geometry,d)}else{this.prepareCanvas(e,o,a),l&&u&&!o.lineColor.places&&this._createGradient(e,f,o.lineColor);var v=[e];v.push.apply(v,s),v.push(o.lineOpacity,o.polygonOpacity,o.lineDasharray),this.geometry._paintOn.apply(this.geometry,v)}e.setLineDash&&Array.isArray(o.lineDasharray)&&e.setLineDash([])}}},n.get2DExtent=function(){var e=this.getMap(),a=this.geometry._getPrjExtent();if(!a)return null;(!this._extMin||!this._extMax)&&(this._extMin=new te(0,0),this._extMax=new te(0,0)),this._extMin.x=a.xmin,this._extMin.y=a.ymin,this._extMax.x=a.xmax,this._extMax.y=a.ymax;var o=e._prjToPoint(this._extMin,void 0,aD),s=e._prjToPoint(this._extMax,void 0,oD);return this._pxExtent?this._pxExtent.set(Math.min(o.x,s.x),Math.min(o.y,s.y),Math.max(o.x,s.x),Math.max(o.y,s.y)):this._pxExtent=new Ee(o,s),this._pxExtent},n.getFixedExtent=function(){var e=this.style.lineWidth/2;return new Ee(-e,-e,e,e)},n._getPaintParams=function(){return this.getPainter().getPaintParams(this.style.lineDx,this.style.lineDy)},n.translate=function(){var e=this.symbol,a={lineColor:ye(e.lineColor,"#000"),lineWidth:ye(e.lineWidth,2),lineOpacity:ye(e.lineOpacity,1),lineDasharray:ye(e.lineDasharray,[]),lineCap:ye(e.lineCap,"butt"),lineJoin:ye(e.lineJoin,"miter"),linePatternFile:ye(e.linePatternFile,null),lineDx:ye(e.lineDx,0),lineDy:ye(e.lineDy,0),polygonFill:ye(e.polygonFill,null),polygonOpacity:ye(e.polygonOpacity,1),polygonPatternFile:ye(e.polygonPatternFile,null),polygonPatternDx:ye(e.polygonPatternDx,0),polygonPatternDy:ye(e.polygonPatternDy,0),linePatternDx:ye(e.linePatternDx,0),linePatternDy:ye(e.linePatternDy,0)};return a.lineWidth===0&&(a.lineOpacity=0),this.geometry.type==="LineString"&&!a.polygonFill&&(a.polygonFill=a.lineColor),a},n._createGradient=function(e,a,o){if(!(!Array.isArray(a)||!a.length)){var s=a.length,l=e.createLinearGradient(a[0].x,a[0].y,a[s-1].x,a[s-1].y);o.colorStops.forEach(function(u){l.addColorStop.apply(l,u)}),e.strokeStyle=l}},t}(Tb),sD=function(r){re(t,r),t.test=function(e){return vl(e)};function t(i,e,a){var o;o=r.call(this,i,e,a)||this;var s=o.translate();return o._dynamic=H0(s),o.style=o._defineStyle(s),o.style.textWrapWidth===0?at(o):(o.strokeAndFill=o._defineStyle(o.translateLineAndFill(o.style)),o)}var n=t.prototype;return n.symbolize=function(e,a){if(!(!this.painter.isHitTesting()&&(this.style.textSize===0||!this.style.textOpacity&&(!this.style.textHaloRadius||!this.style.textHaloOpacity)||this.style.textWrapWidth===0))){var o=this._getRenderContainerPoints();if(!!We(o)){var s=this.style,l=this.strokeAndFill,u=uh(this.style.textName,this.geometry.getProperties());this._dynamic&&delete this._textDesc;var f=this._textDesc=this._textDesc||fh(u,this.style);this._prepareContext(e),this.prepareCanvas(e,l,a),Q.prepareCanvasFont(e,s);for(var h=0,c=o.length;h<c;h++){var d=o[h],v=this.getRotation()?this._rotate(e,d,this._getRotationAt(h)):null;v&&(d=v),Q.text(e,u,d,s,f),v&&e.restore()}}}},n.getPlacement=function(){return this.symbol.textPlacement},n.getRotation=function(){var e=this.style.textRotation;return be(e)?-e*Math.PI/180:null},n.getDxDy=function(){var e=this.style;return new B(e.textDx,e.textDy)},n.getFixedExtent=function(){var e=this.geometry.getTextDesc();return Array.isArray(e)&&(e=e[this._index]),this._fixedExtent=this._fixedExtent||new Ee,e?Cb(this._fixedExtent,this.style,e):this._fixedExtent},n.translate=function(){var e=this.symbol,a={textName:e.textName,textFaceName:ye(e.textFaceName,"monospace"),textWeight:ye(e.textWeight,"normal"),textStyle:ye(e.textStyle,"normal"),textSize:ye(e.textSize,S0),textFont:ye(e.textFont,null),textFill:ye(e.textFill,"#000"),textOpacity:ye(e.textOpacity,1),textHaloFill:ye(e.textHaloFill,"#ffffff"),textHaloRadius:ye(e.textHaloRadius,0),textHaloOpacity:ye(e.textHaloOpacity,1),textWrapWidth:ye(e.textWrapWidth,null),textWrapCharacter:ye(e.textWrapCharacter,`
`),textLineSpacing:ye(e.textLineSpacing,0),textDx:ye(e.textDx,0),textDy:ye(e.textDy,0),textHorizontalAlignment:ye(e.textHorizontalAlignment,"middle"),textVerticalAlignment:ye(e.textVerticalAlignment,"middle"),textAlign:ye(e.textAlign,"center"),textRotation:ye(e.textRotation,0),textMaxWidth:ye(e.textMaxWidth,0),textMaxHeight:ye(e.textMaxHeight,0)};return a.textMaxWidth>0&&(!a.textWrapWidth||a.textWrapWidth>a.textMaxWidth)&&(a.textWrapWidth||(a.textMaxHeight=1),a.textWrapWidth=a.textMaxWidth),a},n.translateLineAndFill=function(e){return{lineColor:e.textHaloRadius?e.textHaloFill:e.textFill,lineWidth:e.textHaloRadius,lineOpacity:e.textOpacity,lineDasharray:null,lineCap:"butt",lineJoin:"round",polygonFill:e.textFill,polygonOpacity:e.textOpacity}},t}(Pa),lD=[],Ab=function(r){re(t,r),t.test=function(e){return gl(e)};function t(i,e,a){var o;o=r.call(this,i,e,a)||this;var s=o.translate();return o._dynamic=H0(s),o.style=o._defineStyle(s),o.strokeAndFill=o._defineStyle(Mb(o.style)),o.padding=0,o}var n=t.prototype;return n.symbolize=function(e,a){var o=this.style;if(!(!this.painter.isHitTesting()&&(o.markerWidth===0||o.markerHeight===0||o.polygonOpacity===0&&o.lineOpacity===0))){var s=this._getRenderContainerPoints();!We(s)||(this._prepareContext(e),this.getPainter().isSpriting()||this.geometry.getLayer().getMask()===this.geometry||this._dynamic||this.geometry.getLayer().options.cacheVectorOnCanvas===!1?this._drawMarkers(e,s,a):this._drawMarkersWithCache(e,s,a))}},n._drawMarkers=function(e,a,o){for(var s=a.length-1;s>=0;s--){var l=a[s],u=this.getRotation()?this._rotate(e,l,this._getRotationAt(s)):null;u&&(l=u),this._drawVectorMarker(e,l,o),u&&e.restore()}},n._drawMarkersWithCache=function(e,a,o){var s=this._stampSymbol(),l=o.getImage(s);l||(l=this._createMarkerImage(e,o),o.addResource([s,l.width,l.height],l));for(var u=xb(this.style,l.width,l.height),f=a.length-1;f>=0;f--){var h=a[f],c=this.getRotation()?this._rotate(e,h,this._getRotationAt(f)):null;c&&(h=c),Q.image(e,l,h.x+u.x,h.y+u.y),c&&e.restore()}},n._createMarkerImage=function(e,a){var o=e.canvas.constructor,s=wb(lD,this.style),l=Q.createCanvas(s[0],s[1],o),u=this._getCacheImageAnchor(s[0],s[1]),f=l.getContext("2d");return this._drawVectorMarker(f,u,a),l},n._stampSymbol=function(){return this._stamp||(this._stamp=X0([this.style.markerType,Lr(this.style.markerFill)?_p(this.style.markerFill):this.style.markerFill,this.style.markerFillOpacity,this.style.markerFillPatternFile,Lr(this.style.markerLineColor)?_p(this.style.markerLineColor):this.style.markerLineColor,this.style.markerLineWidth,this.style.markerLineOpacity,this.style.markerLineDasharray?this.style.markerLineDasharray.join(","):"",this.style.markerLinePatternFile,this.style.markerWidth,this.style.markerHeight,this.style.markerHorizontalAlignment,this.style.markerVerticalAlignment].join("_"))),this._stamp},n._getCacheImageAnchor=function(e,a){var o=2*(this.symbol.shadowBlur||0),s=o+this.padding,l=this.style.markerType;return l==="bar"||l==="pie"||l==="pin"?new B(e/2,a-s):l==="rectangle"?new B(s,s):new B(e/2,a/2)},n._getGraidentExtent=function(e){var a=new Ee,o=this.getDxDy(),s=this.getFixedExtent();if(Array.isArray(e))for(var l=e.length-1;l>=0;l--)a._combine(e[l]);else a._combine(e);return a.xmin+=s.xmin-o.x,a.ymin+=s.ymin-o.y,a.xmax+=s.xmax-o.x,a.ymax+=s.ymax-o.y,a},n._drawVectorMarker=function(e,a,o){Sb(e,a,this.style,o)},n.getFixedExtent=function(){var e=this.isDynamicSize(),a=this.style.markerWidth,o=this.style.markerHeight;return this._fixedExtent=this._fixedExtent||new Ee,_b(this._fixedExtent,this.style,e?[128,128*o/a]:null)},n.translate=function(){var e=this.symbol,a={markerType:ye(e.markerType,"ellipse"),markerFill:ye(e.markerFill,"#00f"),markerFillOpacity:ye(e.markerFillOpacity,1),markerFillPatternFile:ye(e.markerFillPatternFile,null),markerLineColor:ye(e.markerLineColor,"#000"),markerLineWidth:ye(e.markerLineWidth,Ui.markerLineWidth),markerLineOpacity:ye(e.markerLineOpacity,1),markerLineDasharray:ye(e.markerLineDasharray,[]),markerLinePatternFile:ye(e.markerLinePatternFile,null),markerDx:ye(e.markerDx,0),markerDy:ye(e.markerDy,0),markerWidth:ye(e.markerWidth,Ui.markerWidth),markerHeight:ye(e.markerHeight,Ui.markerHeight),markerRotation:ye(e.markerRotation,0),shadowBlur:ye(e.shadowBlur,0),shadowOffsetX:ye(e.shadowOffsetX,0),shadowOffsetY:ye(e.shadowOffsetY,0)},o=a.markerType,s=yb(o),l=bb(o);return a.markerHorizontalAlignment=ye(e.markerHorizontalAlignment,s),a.markerVerticalAlignment=ye(e.markerVerticalAlignment,l),be(e.markerOpacity)&&(be(e.markerFillOpacity)&&(a.markerFillOpacity*=e.markerOpacity),be(e.markerLineOpacity)&&(a.markerLineOpacity*=e.markerOpacity)),a},t}(Pa),Rb=function(r){re(t,r),t.test=function(e){return Gc(e)};function t(i,e,a){var o;N(i.markerWidth)&&(i.markerWidth=80),N(i.markerHeight)&&(i.markerHeight=80),o=r.call(this,i,e,a)||this,i=fe(i,o.translate());var s=o.style=o._defineStyle(i);return De.gecko?o._url=[cl(s,s.markerWidth,s.markerHeight),s.markerWidth,s.markerHeight]:o._url=[cl(s),s.markerWidth,s.markerHeight],o}var n=t.prototype;return n._prepareContext=function(){},n._getImage=function(e){var a=this;if(e&&e.isResourceLoaded(this._url))return e.getImage(this._url);var o=this.painter,s=new Image;return s.onload=function(){var l=o.getLayer()&&o.getLayer().getRenderer();l&&l.setToRedraw()},s.onerror=function(l){l&&typeof console!="undefined"&&console.warn(l),e.markErrorResource(a._url)},s.src=this._url[0],e&&e.addResource(this._url,s),s},t}(Vc),uD={lineWidth:1,polygonFill:"#fff",polygonOpacity:.5},fD=function(r){re(t,r),t.test=function(e,a){var o=a.getLayer();if(!o)return!1;var s=a.getJSONType();return s==="Marker"||s==="LineString"};function t(i,e,a){var o;return o=r.call(this,i,e,a)||this,o.style=e.getLayer().options.drawAltitude,(!o.style||!Pn(o.style))&&(o.style={lineWidth:2}),o.style.lineWidth||(o.style.lineWidth=0),o.dxdy=o._defineStyle({dx:i.textDx||i.markerDx,dy:i.textDy||i.markerDy}),o}var n=t.prototype;return n.symbolize=function(e){var a=this.geometry.getLayer();if(!!a.options.drawAltitude){var o=this.geometry.getProperties();if(!(!o||!o[a.options.altitudeProperty])){var s=this._getStyle();if(this._prepareContext(e),this.geometry.type==="LineString"){var l=this._getPaintParams(s.lineDx,s.lineDy,!1,!0);if(!l)return;var u=this.getPainter().getPaintParams(s.lineDx,s.lineDy,!0,!0,"_groundpt")[0];this._drawLineAltitude(e,l[0],u)}else{var f=this._getRenderContainerPoints(),h=this._getRenderContainerPoints(!0);if(!f||f.length===0)return;this._drawMarkerAltitude(e,f[0],h[0])}}}},n.getDxDy=function(){var e=this.dxdy;return new B(e.dx||0,e.dy||0)},n.get2DExtent=function(){return this.geometry.type==="LineString"?Ob.prototype.get2DExtent.apply(this):r.prototype.get2DExtent.call(this)},n.getPlacement=function(){return"point"},n._getPaintParams=function(e,a){return this.getPainter().getPaintParams(e||0,a||0,null,!0,"_altpt")},n._drawMarkerAltitude=function(e,a,o){var s=this._getStyle();this.prepareCanvas(e,s),Q.path(e,[a,o],s.lineOpacity,null,s.lineDasharray)},n._drawLineAltitude=function(e,a,o){var s=this._getStyle(),l=a.length>0&&Array.isArray(a[0]);if(l)for(var u=0;u<a.length;u++)this._drawLine(e,a[u],o[u]);else this._drawLine(e,a,o);e.setLineDash&&Array.isArray(s.lineDasharray)&&e.setLineDash([])},n._drawLine=function(e,a,o){var s=this._getStyle();this.prepareCanvas(e,s);for(var l=0,u=a.length-1;l<u;l++)Q.polygon(e,[a[l],a[l+1],o[l+1],o[l]],s.lineOpacity,s.polygonOpacity,s.lineDasharray)},n._getStyle=function(){var e=this.geometry.getLayer().options.drawAltitude;return Pn(e)||(e=uD),e.lineWidth||(e.lineWidth=0,e.lineOpacity=0),e},t}(Pa),hD=[fD,Ob,Vc,Rb,Ab,sD],Zr,jp=new B(0,0),cD=new Ee,Ts=new Ee,un=new Ee,dD=new Ee,mr=new Ee,vD={},Ba={minx:1/0,miny:1/0,maxx:-1/0,maxy:-1/0},Zc=function(r){re(t,r);function t(i){var e;return e=r.call(this)||this,e.geometry=i,e.symbolizers=e._createSymbolizers(),e._altAtGL=e._getGeometryAltitude(),e}var n=t.prototype;return n.getMap=function(){return this.geometry.getMap()},n.getLayer=function(){return this.geometry.getLayer()},n._createSymbolizers=function(){var e=this.getSymbol(),a=[],o=hD,s=e;Array.isArray(e)||(s=[e]);for(var l=s.length-1;l>=0;l--)for(var u=s[l],f=o.length-1;f>=0;f--)if(o[f].test(u,this.geometry)){var h=new o[f](u,this.geometry,this);h._index=l,a.push(h),h instanceof Pa&&(this._hasPoint=!0)}if(!a.length&&console){var c=this.geometry.getId();console.warn("invalid symbol for geometry("+(this.geometry?this.geometry.getType()+(c?":"+c:""):"")+") to draw : "+JSON.stringify(e))}return this._debugSymbolizer=new iD(e,this.geometry,this),a},n.hasPoint=function(){return!!this._hasPoint},n.getRenderPoints=function(e){return this._verifyProjection(),this._renderPoints||(this._renderPoints={}),e||(e="center"),this._renderPoints[e]||(this._renderPoints[e]=this.geometry._getRenderPoints(e)),this._renderPoints[e]},n.getPaintParams=function(e,a,o,s,l){l===void 0&&(l="_pt");var u=this.getLayer()._getRenderer(),f=u.mapStateCache,h,c,d,v,g,m=this.getMap();f&&!this._hitPoint?(h=f.resolution,c=f.pitch,d=f.bearing,v=f.glScale,g=f.containerExtent):(h=m.getResolution(),c=m.getPitch(),d=m.getBearing(),v=m.getGLScale(),g=m.getContainerExtent());var p=this.geometry,_=h,b=c!==0,x=d!==0,C=this._cachedParams,y=p._paintAsPath&&p._paintAsPath();if(y&&this._unsimpledParams&&_<=this._unsimpledParams._res)C=this._unsimpledParams;else if(!C||C._res!==h||this._pitched!==b&&p._redrawWhenPitch()||this._rotated!==x&&p._redrawWhenRotate()){if(C=p._getPaintParams(),!C)return null;C._res=_,!p._simplified&&y&&(this._unsimpledParams||(this._unsimpledParams=C),_>this._unsimpledParams._res&&(this._unsimpledParams._res=_)),this._cachedParams=C}if(!C)return null;this._pitched=b,this._rotated=x;var w=v,P=[],T=C[0],L=g,j=this._pointContainerPoints(T,e,a,o,s||this._hitPoint&&!L.contains(this._hitPoint),null,l);if(!j)return null;P.push(j);for(var M=1,D=C.length;M<D;M++)be(C[M])||C[M]instanceof st?be(C[M])?P.push(C[M]/w):P.push(C[M].multi(1/w)):P.push(C[M]);return P},n._pointContainerPoints=function(e,a,o,s,l,u,f){if(f===void 0&&(f="_pt"),this._aboveCamera())return null;var h=this.getLayer()._getRenderer(),c=h.mapStateCache,d=this.getMap(),v=this.geometry,g=this.containerOffset,m,p;c?(m=c.glRes,p=c.containerExtent):(m=d.getGLRes(),p=d.getContainerExtent());var _,b=this.getLayer().options.roundPoint,x=1/0,C=1/0,y=-1/0,w=-1/0,P=!l,T=h.layer.options.clipBBoxBufferSize||3,L=this.symbolizers;function j(de,ge){de===void 0&&(de=[]),ge===void 0&&(ge=[]);var ve=fl(de,f);ve=d._pointsAtResToContainerPoints(de,m,ge,ve);for(var ce=0,Me=ve.length;ce<Me;ce++){var Ce=ve[ce];Ce._sub(g),(a||o)&&Ce._add(a||0,o||0),b&&(Ce.x=Math.ceil(Ce.x),Ce.y=Math.ceil(Ce.y)),x=Math.min(Ce.x,x),C=Math.min(Ce.y,C),y=Math.max(Ce.x,y),w=Math.max(Ce.y,w)}if(P&&ck(L)){if(mr.ymin=p.ymin,mr.ymin<T&&(mr.ymin=p.ymin-T),mr.xmin=p.xmin-T,mr.xmax=p.xmax+T,mr.ymax=p.ymax+T,v.getShell&&v.getHoles)return $s(ve,mr);var S=Bs(ve,mr,!1);if(S.length){var k=[];return S.forEach(function(H){for(var K=0,G=H.length;K<G;K++)k.push(H[K].point)}),k}}return ve}var M=this.getAltitude();if(Array.isArray(e)){var D=this.geometry,R;!l&&D.options.enableClip?(R=this._clip(e,M),R.inView&&(P=!1)):R={points:e,altitude:M};var I=R.points;M=R.altitude,s&&(M=0);var z=M;_=[];for(var F=[],O=be(M),A=0,$=I.length;A<$;A++){var J=I[A];if(Array.isArray(J)){if(O){var Z=j(J,M);_.push(Z);continue}for(var ae=[],U=0,W=J.length;U<W;U++)Array.isArray(M)&&(M[A]?z=M[A][U]:z=0),ae.push(z);var ne=j(J,ae);_.push(ne)}else Array.isArray(M)&&(u==="vertex-last"?z=M[M.length-1-A]:u==="line"?z=(M[A]+M[A+1])/2:z=M[A]),F.push(z)}F.length&&(_=j(I,F))}else e instanceof B&&(s&&(M=0),_=d._pointAtResToContainerPoint(e,m,M)._sub(g),(a||o)&&_._add(a,o));return Ba.minx=x,Ba.miny=C,Ba.maxx=y,Ba.maxy=w,this._containerBbox=Ba,_},n._clip=function(e,a){if(be(a)&&a!==0)return{points:e,altitude:a};if(Array.isArray(a)){for(var o=!1,s=0,l=a.length;s<l;s++)if(a[s]!==0){o=!0;break}if(o)return{points:e,altitude:a}}var u=this.getMap(),f=this.geometry,h=this.getSymbol().lineWidth;be(h)||(h=4);var c=this.getLayer()._getRenderer(),d=c.mapStateCache,v,g,m;d?(v=d._2DExtent,g=d.glExtent,m=d.pitch):(v=u._get2DExtent(),g=u._get2DExtentAtRes(u.getGLRes()),m=u.getPitch());var p=v._expand(h);if(m>0&&a){var _=u.cameraLookAt,b=u.cameraPosition;jp.set(b.x,b.y),p=p._combine(jp._add(dt(_[0]-b[0]),dt(_[1]-b[1])))}var x=this.get2DExtent(null,dD),C=e;if(x.within(p))return{points:C,altitude:a,inView:!0};var y=g._expand(h*u._glScale);un.xmin=y.xmin,un.xmax=y.xmax,un.ymin=y.ymin,un.ymax=y.ymax;var w=f.options.smoothness;if(f.getShell&&this.geometry.getHoles&&!w){var P=y.xmin,T=y.ymin,L=y.xmax,j=y.ymax,M=Math.abs(L-P),D=Math.abs(j-T),R=Math.sqrt(M*M+D*D),I=(R-M)/2,z=(R-D)/2;if(un.xmin=y.xmin-I,un.xmax=y.xmax+I,un.ymin=y.ymin-z,un.ymax=y.ymax+z,!Array.isArray(e[0]))C=$s(e,un);else{C=[];for(var F=0;F<e.length;F++){var O=$s(e[F],un);O.length&&C.push(O)}}}else if(f.getJSONType()==="LineString"&&!w){if(!Array.isArray(e[0]))C=Bs(e,un,!1,!!w);else{C=[];for(var A=0;A<e.length;A++)xa(C,Bs(e[A],un,!1,!!w))}return this._interpolateSegAlt(C,e,a)}return{points:C,altitude:a}},n._interpolateSegAlt=function(e,a,o){if(!Array.isArray(o)){var s=function(h){return h.point};return{points:e.map(function(f){return Array.isArray(f)?f.map(s):f.point}),altitude:o}}var l=Ib(e,a,o);o=[];var u=l.map(function(f){if(Array.isArray(f)){var h=[],c=f.map(function(d){return h.push(d.altitude),d.point});return o.push(h),c}return o.push(f.altitude),f.point});return{points:u,altitude:o}},n.getSymbol=function(){return this.geometry._getInternalSymbol()},n.paint=function(e,a,o){if(!!this.symbolizers){var s=this.getLayer(),l=s._getRenderer();if(!(!l||!l.context&&!a)){var u=l.mapStateCache||{};if(!(!this.geometry._isCheck&&e&&!e.intersects(this.get2DExtent(l.resources,cD)))){var f=this.getMap(),h=this.getMinAltitude(),c=f.getFrustumAltitude();if(!(h&&c&&c<h)){this.containerOffset=o||u.offset||f._pointToContainerPoint(l.southWest)._add(0,-f.height),this._beforePaint();for(var d=a||l.context,v=[d,l.resources],g=this.symbolizers.length-1;g>=0;g--)(d.shadowBlur||this.symbolizers[g].symbol.shadowBlur)&&this._prepareShadow(d,this.symbolizers[g].symbol),this.symbolizers[g].symbolize.apply(this.symbolizers[g],v);this._afterPaint(),this._painted=!0,(this.geometry.options.debug||s.options.debug)&&this._debugSymbolizer.symbolize.apply(this._debugSymbolizer,v)}}}}},n.getSprite=function(e,a){if(this.geometry.type!=="Point")return null;if(this._spriting=!0,!this._sprite&&this.symbolizers.length>0){var o=new Ee;this.symbolizers.forEach(function(g){var m=g.getFixedExtent(e);o._combine(m)});var s=o.getMin().multi(-1),l=a||(this.getMap()?this.getMap().CanvasClass:null),u=Q.createCanvas(o.getWidth(),o.getHeight(),l),f;this._renderPoints&&(f=this._renderPoints);for(var h=u.getContext("2d"),c=[h,e],d=this.symbolizers.length-1;d>=0;d--){var v=this.symbolizers[d].getDxDy();this._renderPoints={center:[[s.add(v)]]},this._prepareShadow(h,this.symbolizers[d].symbol),this.symbolizers[d].symbolize.apply(this.symbolizers[d],c)}f&&(this._renderPoints=f),this._sprite={canvas:u,offset:o.getCenter()}}return this._spriting=!1,this._sprite},n.isSpriting=function(){return!!this._spriting},n.hitTest=function(e,a){if((!a||a<.5)&&(a=.5),this._hitPoint=e.sub(a,a),!Zr){var o=this.getMap()?this.getMap().CanvasClass:null;Zr=Q.createCanvas(1,1,o)}Q.setHitTesting(!0),Zr.width=Zr.height=2*a;var s=Zr.getContext("2d");try{this.paint(null,s,this._hitPoint)}catch(h){throw h}finally{Q.setHitTesting(!1)}delete this._hitPoint;for(var l=s.getImageData(0,0,Zr.width,Zr.height).data,u=3,f=l.length;u<f;u+=4)if(l[u]>0)return!0;return!1},n.isHitTesting=function(){return!!this._hitPoint},n._prepareShadow=function(e,a){a.shadowBlur?(e.shadowBlur=this.isHitTesting()?0:a.shadowBlur,e.shadowColor=a.shadowColor||"#000",e.shadowOffsetX=a.shadowOffsetX||0,e.shadowOffsetY=a.shadowOffsetY||0):e.shadowBlur&&(e.shadowBlur=null,e.shadowColor=null,e.shadowOffsetX=null,e.shadowOffsetY=null)},n._eachSymbolizer=function(e,a){if(!!this.symbolizers){a||(a=this);for(var o=this.symbolizers.length-1;o>=0;o--)e.apply(a,[this.symbolizers[o]])}},n.get2DExtent=function(e,a){this._verifyProjection();var o=this.getMap();e=e||this.getLayer()._getRenderer().resources;var s=o.getZoom(),l=this._isDynamicSize();if((!this._extent2D||this._extent2D._zoom!==s||!this._fixedExtent)&&(this._extent2D&&this._extent2D._zoom!==s&&delete this._extent2D,this.symbolizers&&(this._extent2D||(this._extent2D=this._computeExtent2D(new Ee),this._extent2D._zoom=s),this._fixedExtent||(this._fixedExtent=this._computeFixedExtent(e,new Ee)))),!this._extent2D)return l&&delete this._fixedExtent,null;var u=this._fixedExtent,f=u.xmin,h=u.ymin,c=u.xmax,d=u.ymax;return l&&delete this._fixedExtent,Ts.set(f,-d,c,-h),a?(a.set(this._extent2D.xmin,this._extent2D.ymin,this._extent2D.xmax,this._extent2D.ymax),a._add(Ts),a):this._extent2D.add(Ts)},n._computeExtent2D=function(e){for(var a=this.symbolizers.length-1;a>=0;a--){var o=this.symbolizers[a];e._combine(o.get2DExtent())}return e},n._computeFixedExtent=function(e,a){for(var o=this.symbolizers.length-1;o>=0;o--){var s=this.symbolizers[o];s.getFixedExtent&&a._combine(s.getFixedExtent(e))}return a},n._isDynamicSize=function(){for(var e=this.symbolizers.length-1;e>=0;e--){var a=this.symbolizers[e];if(a.isDynamicSize())return!0}return!1},n._aboveCamera=function(){var e=this.getMinAltitude(),a=this.getMap(),o=a.getFrustumAltitude();return e&&o&&o<e},n.getFixedExtent=function(){var e=this.getMap(),a=e.getZoom();return this._isDynamicSize()?this._computeFixedExtent(null,new Ee):((!this._extent2D||this._extent2D._zoom!==a)&&this.get2DExtent(null,Ts),this._fixedExtent)},n.setZIndex=function(e){this._eachSymbolizer(function(a){a.setZIndex(e)})},n.show=function(){if(this._painted)this.removeCache(),this._eachSymbolizer(function(a){a.show()});else{var e=this.getLayer();e.isCanvasRender()||this.paint()}},n.hide=function(){this._eachSymbolizer(function(e){e.hide()})},n.repaint=function(){this._altAtGL=this._getGeometryAltitude(),this.removeCache();var e=this.getLayer();if(!!e){var a=e.getRenderer();!a||!a.setToRedraw()||a.setToRedraw()}},n.refreshSymbol=function(){this.removeCache(),this._removeSymbolizers(),this.symbolizers=this._createSymbolizers()},n.remove=function(){this.removeCache(),this._removeSymbolizers()},n._removeSymbolizers=function(){this._eachSymbolizer(function(e){delete e.painter,e.remove()}),delete this.symbolizers},n.removeCache=function(){delete this._renderPoints,delete this._paintParams,delete this._sprite,delete this._extent2D,delete this._fixedExtent,delete this._cachedParams,delete this._unsimpledParams},n.getAltitude=function(){var e=this.geometry.getAltitude();return e!==this._propAlt&&(this._altAtGL=this._getGeometryAltitude()),this._altAtGL?this._altAtGL:0},n.getMinAltitude=function(){return this.minAltitude?this.minAltitude:0},n.getMaxAltitude=function(){return this.maxAltitude?this.maxAltitude:0},n._getGeometryAltitude=function(){var e=this,a=this.getMap();if(!a)return 0;var o=this.geometry.getAltitude();if(this._propAlt=o,!o)return this.minAltitude=this.maxAltitude=0,0;var s=this.geometry.getCenter();return s?Array.isArray(o)?(this.minAltitude=Number.MAX_VALUE,this.maxAltitude=Number.MIN_VALUE,o.map(function(l){var u=e._meterToPoint(s,l);return u<e.minAltitude&&(e.minAltitude=u),u>e.maxAltitude&&(e.maxAltitude=u),u})):(this.minAltitude=this.maxAltitude=this._meterToPoint(s,o),this.minAltitude):0},n._meterToPoint=function(e,a){var o=this.getMap(),s=o.getGLRes();return o.distanceToPointAtRes(a,0,s,e).x*dt(a)},n._verifyProjection=function(){var e=this.geometry._getProjection()||vD;this._projCode&&this._projCode!==e.code&&this.removeCache(),this._projCode=e.code},n._beforePaint=function(){},n._afterPaint=function(){},t}(_n);function Ib(r,t,n){if(!Array.isArray(n))return r;for(var i=[],e=0,a=r.length;e<a;e++)if(Array.isArray(r[e]))i.push(Ib(r[e],t,n));else{var o=r[e];if(o.point.equals(t[o.index]))o.altitude=n[o.index],i.push(o);else{var s=void 0,l=void 0;o.index===0?(s=o.index,l=o.index+1):(s=o.index-1,l=o.index);var u=o.point.distanceTo(t[l]),f=u/(u+t[s].distanceTo(o.point)),h=rh(n[s],n[l],1-f);o.altitude=h,i.push(o)}}return i}var gD=new Ee,kb=function(r){re(t,r);function t(i,e){var a;return a=r.call(this)||this,a.geometry=i,a.isMask=e,a}var n=t.prototype;return n._eachPainter=function(e){for(var a=this.geometry.getGeometries(),o,s=0,l=a.length;s<l&&(o=this.isMask?a[s]._getMaskPainter():a[s]._getPainter(),!(!!o&&o&&e.call(this,o)===!1));s++);},n.paint=function(e){!this.geometry||this._eachPainter(function(a){a.paint(e)})},n.get2DExtent=function(e,a){a&&a.set(null,null,null,null);var o=a||new Ee;return this._eachPainter(function(s){o=o._combine(s.get2DExtent(e,gD))}),o},n.remove=function(){var e=arguments;this._eachPainter(function(a){a.remove.apply(a,e)})},n.setZIndex=function(){var e=arguments;this._eachPainter(function(a){a.setZIndex.apply(a,e)})},n.show=function(){var e=arguments;this._eachPainter(function(a){a.show.apply(a,e)})},n.hide=function(){var e=arguments;this._eachPainter(function(a){a.hide.apply(a,e)})},n.repaint=function(){var e=arguments;this._eachPainter(function(a){a.repaint.apply(a,e)})},n.refreshSymbol=function(){var e=arguments;this._eachPainter(function(a){a.refreshSymbol.apply(a,e)})},n.hasPoint=function(){var e=!1;return this._eachPainter(function(a){return a.hasPoint()?(e=!0,!1):!0}),e},n.getMinAltitude=function(){var e=!0,a=0;return this._eachPainter(function(o){var s=o.getMinAltitude();(e||s<a)&&(e=!1,a=s)}),a},n.getMaxAltitude=function(){var e=0;return this._eachPainter(function(a){var o=a.getMaxAltitude();o>e&&(e=o)}),e},t}(_n),$a=23,zi={"EPSG:3857":{projection:"EPSG:3857",resolutions:function(){for(var r=[],t=12756274*Math.PI,n=0;n<$a;n++)r[n]=t/(256*Math.pow(2,n));return r}(),fullExtent:{top:6378137*Math.PI,left:-6378137*Math.PI,bottom:-6378137*Math.PI,right:6378137*Math.PI}},"EPSG:4326":{projection:"EPSG:4326",fullExtent:{top:90,left:-180,bottom:-90,right:180},resolutions:function(){for(var r=[],t=0;t<$a;t++)r[t]=180/(Math.pow(2,t)*128);return r}()},BAIDU:{projection:"baidu",resolutions:function(){for(var r=Math.pow(2,18),t=[],n=0;n<$a;n++)t[n]=r,r*=.5;return t}(),fullExtent:{top:33554432,left:-33554432,bottom:-33554432,right:33554432}},IDENTITY:{projection:"identity",resolutions:function(){for(var r=Math.pow(2,8),t=[],n=0;n<$a;n++)t[n]=r,r*=.5;return t}(),fullExtent:{top:2e5,left:-2e5,bottom:-2e5,right:2e5}},"PRESET-VT-3857":{projection:"EPSG:3857",resolutions:function(){for(var r=[],t=6378137*Math.PI,n=0;n<$a;n++)r[n]=t/(256*Math.pow(2,n));return r}(),fullExtent:{top:6378137*Math.PI,left:-6378137*Math.PI,bottom:-6378137*Math.PI,right:6378137*Math.PI}}};zi["EPSG:4490"]=zi["EPSG:4326"];var Nn=function(){function r(n){n===void 0&&(n={}),this.options=n,this._initSpatialRef()}r.getPreset=function(i){return zi[i.toUpperCase()]},r.getAllPresets=function(){return Object.keys(zi)},r.getProjectionInstance=function(i){if(!i)return null;if(Pn(i))return i.locate||(i=fe({},i),i.measure==="identity"?fe(i,Zu.getInstance("IDENTITY")):fe(i,Zu.getInstance("EPSG:4326"))),i;i=(i+"").toLowerCase();for(var e in Cs)if(Bo(Cs,e)){var a=Cs[e].code;if(a&&a.toLowerCase()===i)return Cs[e]}return null},r.equals=function(i,e){if(Re(i)||Re(e))return i===e;if(!i&&!e)return!0;if(!i||!e||i.projection!==e.projection)return!1;var a=i.fullExtent,o=e.fullExtent;if(a&&!o||!a&&o||a&&o&&(a.top!==o.top||a.bottom!==o.bottom||a.left!==o.left||a.right!==o.right))return!1;var s=i.resolutions,l=e.resolutions;if(s&&l){if(s.length!==l.length)return!1;for(var u=0;u<s.length;u++)if(s[u]!==l[u])return!1}else if(s||l)return!1;return!0};var t=r.prototype;return t._initSpatialRef=function(){var i=this.options.projection;if(i?i=r.getProjectionInstance(i):i=db,!i)throw new Error("must provide a valid projection in map's spatial reference.");i=fe({},Ca,i),i.measureLength||fe(i,Zu.DEFAULT),this._projection=i;var e,a=this.options.resolutions;if(!a&&(i.code&&(e=zi[i.code.toUpperCase()],e&&(a=e.resolutions,this.isEPSG=i.code!=="IDENTITY")),!a))throw new Error("must provide valid resolutions in map's spatial reference.");if(this._resolutions=a,this._pyramid=!0,this._pyramid){for(var o=0;o<a.length;o++)if(a[o]&&a[o-1]&&a[o-1]/a[o]!==2){this._pyramid=!1;break}}var s=this.options.fullExtent;if(!s&&(i.code&&(e=zi[i.code.toUpperCase()],e&&(s=e.fullExtent)),!s))throw new Error("must provide a valid fullExtent in map's spatial reference.");if(N(s.left)?(this._fullExtent=new Ye(s),s.left=s.xmin,s.right=s.xmax,s.top=s.ymax,s.bottom=s.ymin):this._fullExtent=new Ye(new te(s.left,s.top),new te(s.right,s.bottom)),N(s.top)||N(s.bottom)||N(s.left)||N(s.right))throw new Error("must provide valid top/bottom/left/right in fullExtent.");fe(this._fullExtent,s),this._projection.fullExtent=s;var l=s.right>=s.left?1:-1,u=s.top>=s.bottom?-1:1;this._transformation=new sb([l,u,0,0])},t.getResolutions=function(){return this._resolutions||[]},t.getResolution=function(i){var e=i|0;e<0?e=0:e>this._resolutions.length-1&&(e=this._resolutions.length-1);var a=this._resolutions[e];if(e!==i&&i>0&&e<this._resolutions.length-1){var o=this._resolutions[e+1];return a+(o-a)*(i-e)}return a},t.getProjection=function(){return this._projection},t.getFullExtent=function(){return this._fullExtent},t.getTransformation=function(){return this._transformation},t.getMinZoom=function(){for(var i=0;i<this._resolutions.length;i++)if(!N(this._resolutions[i]))return i;return 0},t.getMaxZoom=function(){for(var i=this._resolutions.length-1;i>=0;i--)if(!N(this._resolutions[i]))return i;return this._resolutions.length-1},t.getZoomDirection=function(){return dt(this._resolutions[this.getMinZoom()]-this._resolutions[this.getMaxZoom()])},t.toJSON=function(){return this.json||(this.json={resolutions:this._resolutions,fullExtent:{top:this._fullExtent.top,left:this._fullExtent.left,bottom:this._fullExtent.bottom,right:this._fullExtent.right},projection:this._projection.code}),this.json},t.isPyramid=function(){return this._pyramid},r}(),Qu=new B(0,0),Np=new Ee,pD={id:null,visible:!0,interactive:!0,editable:!0,cursor:null,defaultProjection:"EPSG:4326"},je=function(r){re(t,r);function t(i){var e,a=fe({},i),o=a.symbol,s=a.properties,l=a.id;return delete a.symbol,delete a.id,delete a.properties,e=r.call(this,a)||this,o?e.setSymbol(o):e._genSizeSymbol(),s&&e.setProperties(s),N(l)||e.setId(l),e}var n=t.prototype;return n.getFirstCoordinate=function(){if(this.type==="GeometryCollection"){var e=this.getGeometries();return e.length?e[0].getFirstCoordinate():null}var a=this.getCoordinates();if(!Array.isArray(a))return a;do a=a[0];while(Array.isArray(a)&&a.length>0);return a},n.getLastCoordinate=function(){if(this.type==="GeometryCollection"){var e=this.getGeometries();return e.length?e[e.length-1].getLastCoordinate():null}var a=this.getCoordinates();if(!Array.isArray(a))return a;do a=a[a.length-1];while(Array.isArray(a)&&a.length>0);return a},n.addTo=function(e,a){return e.addGeometry(this,a),this},n.getLayer=function(){return this._layer?this._layer:null},n.getMap=function(){return this._layer?this._layer.getMap():null},n.getId=function(){return this._id},n.setId=function(e){var a=this.getId();return this._id=e,this._fireEvent("idchange",{old:a,new:e}),this},n.getProperties=function(){return this.properties?this.properties:this._getParent()?this._getParent().getProperties():null},n.setProperties=function(e){var a=this.properties;return this.properties=Pn(e)?fe({},e):e,this._repaint(),this._fireEvent("propertieschange",{old:a,new:e}),this},n.getType=function(){return this.type},n.getSymbol=function(){var e=this._symbol;return e?Array.isArray(e)?jn(e):fe({},e):null},n.setSymbol=function(e){return this._symbolUpdated=e,this._symbol=this._prepareSymbol(e),this.onSymbolChanged(),delete this._compiledSymbol,delete this._symbolHash,this},n.getSymbolHash=function(){return this._symbolHash||(this._symbolHash=Lc(this._symbolUpdated)),this._symbolHash},n.updateSymbol=function(e){if(!e)return this;var a=this._getSymbol();if(Array.isArray(a)){if(!Array.isArray(e))throw new Error("Parameter of updateSymbol is not an array.");for(var o=0;o<e.length;o++)vl(e[o])&&delete this._textDesc,a[o]&&e[o]&&(a[o]=jn(a[o],e[o]))}else{if(Array.isArray(e))throw new Error("Geometry's symbol is not an array to update.");vl(a)&&delete this._textDesc,a?a=jn(a,e):a=jn(this._getInternalSymbol(),e)}return this._eventSymbolProperties=e,delete this._compiledSymbol,this.setSymbol(a)},n.getTextContent=function(){var e=this._getInternalSymbol();if(Array.isArray(e)){for(var a=[],o=!1,s=0;s<e.length;s++)a[s]=uh(e[s]&&e[s].textName,this.getProperties()),N(a[s])||(o=!0);return o?a:null}return uh(e&&e.textName,this.getProperties())},n.getTextDesc=function(){if(!this._textDesc){var e=this.getTextContent(),a=this._sizeSymbol,o=Array.isArray(e);Array.isArray(a)?this._textDesc=a.map(function(s,l){return fh(o?e[l]:"",s)}):this._textDesc=fh(e,a)}return this._textDesc},n.getCenter=function(){return this._computeCenter(this._getMeasurer())},n.getExtent=function(){var e=this._getPrjExtent(),a=this._getProjection();if(e&&a){var o=a.unproject(new te(e.xmin,e.ymin)),s=a.unproject(new te(e.xmax,e.ymax));return new Ye(o,s,a)}else return this._computeExtent(this._getMeasurer())},n.getContainerExtent=function(e){var a=this.get2DExtent();if(!a||!a.isValid())return null;var o=this.getMap(),s=this.getCenter(),l=o.getGLRes(),u=this.getMinAltitude(),f=o.distanceToPointAtRes(u,0,l,s).x*dt(u),h=a.convertTo(function(p){return o._pointAtResToContainerPoint(p,l,f,Qu)},e),c=this.getMaxAltitude();if(c!==u){c=o.distanceToPointAtRes(c,0,l,s).x*dt(c);var d=a.convertTo(function(p){return o._pointAtResToContainerPoint(p,l,c,Qu)},Np);h._combine(d)}var v=this.getLayer();if(v&&this.type==="LineString"&&c&&v.options.drawAltitude){var g=a.convertTo(function(p){return o._pointAtResToContainerPoint(p,l,0,Qu)},Np);h._combine(g)}h&&h._add(this._getFixedExtent());var m=this.options.smoothness;return m&&h._expand(h.getWidth()*.15),h},n._getFixedExtent=function(){this._fixedExtent||(this._fixedExtent=new Ee);var e=this._sizeSymbol,a=(e&&e.lineWidth||1)/2;this._fixedExtent.set(-a,-a,a,a);var o=e&&e.lineDx||0;this._fixedExtent._add([o,0]);var s=e&&e.lineDy||0;return this._fixedExtent._add([0,s]),this._fixedExtent},n.get2DExtent=function(){var e=this.getMap();if(!e)return null;if(this._extent2d)return this._extent2d;var a=this._getPrjExtent();if(!a||!a.isValid())return null;var o=a.getMin(),s=a.getMax(),l=e.getGLRes();return e._prjToPointAtRes(o,l,o),e._prjToPointAtRes(s,l,s),this._extent2d=new Ee(o,s),this._extent2d.z=e.getZoom(),this._extent2d},n.getSize=function(){var e=this.getContainerExtent();return e?e.getSize():null},n.containsPoint=function(e,a){if(!this.getMap())throw new Error('The geometry is required to be added on a map to perform "containsPoint".');return e instanceof te&&(e=this.getMap().coordToContainerPoint(e)),this._containsPoint(e,a)},n._containsPoint=function(e,a){var o=this._getPainter();return o?(N(a)&&this._hitTestTolerance&&(a=this._hitTestTolerance()),o.hitTest(e,a)):!1},n.show=function(){if(this.options.visible=!0,this.getMap()){var e=this._getPainter();e&&e.show(),this._fireEvent("show")}return this},n.hide=function(){if(this.options.visible=!1,this.getMap()){this.onHide();var e=this._getPainter();e&&e.hide(),this._fireEvent("hide")}return this},n.isVisible=function(){if(!this.options.visible)return!1;var e=this._getInternalSymbol();if(!e)return!0;if(Array.isArray(e)){if(!e.length)return!0;for(var a=0,o=e.length;a<o;a++)if(N(e[a].opacity)||e[a].opacity>0)return!0;return!1}else return N(e.opacity)||Pn(e.opacity)||be(e.opacity)&&e.opacity>0},n.getZIndex=function(){return this.options.zIndex||0},n.setZIndex=function(e){var a=this.options.zIndex;return this.options.zIndex=e,this._fireEvent("zindexchange",{old:a,new:e}),this},n.setZIndexSilently=function(e){return this.options.zIndex=e,this},n.bringToFront=function(){var e=this.getLayer();if(!e||!e.getGeoMaxZIndex)return this;var a=e.getGeoMaxZIndex();return this.setZIndex(a+1),this},n.bringToBack=function(){var e=this.getLayer();if(!e||!e.getGeoMinZIndex)return this;var a=e.getGeoMinZIndex();return this.setZIndex(a-1),this},n.translate=function(e,a){if(N(e))return this;var o=new te(e,a);if(o.x===0&&o.y===0)return this;var s=this.getCoordinates();if(this._silence=!0,s)if(Array.isArray(s)){var l=sa(s,function(u){return u.add(o)});this.setCoordinates(l)}else this.setCoordinates(s.add(o));return this._silence=!1,this._fireEvent("positionchange"),this},n.flash=function(e,a,o,s){return I0.call(this,e,a,o,s)},n.copy=function(){var e=this.toJSON(),a=t.fromJSON(e);return a.options.visible=!0,a},n.remove=function(){var e=this.getLayer();return e?(this._fireEvent("removestart"),this._unbind(),this._fireEvent("removeend"),this._fireEvent("remove"),this):this},n.toGeoJSONGeometry=function(){var e=this._exportGeoJSONGeometry();return e},n.toGeoJSON=function(e){e||(e={});var a={type:"Feature",geometry:null};if(N(e.geometry)||e.geometry){var o=this._exportGeoJSONGeometry();a.geometry=o}var s=this.getId();N(s)||(a.id=s);var l;return(N(e.properties)||e.properties)&&(l=this._exportProperties()),a.properties=l,a},n.toJSON=function(e){e||(e={});var a=this._toJSON(e),o=this._exportGraphicOptions(e);return fe(a,o),a},n.getLength=function(){return this._computeGeodesicLength(this._getMeasurer())},n.getArea=function(){return this._computeGeodesicArea(this._getMeasurer())},n.rotate=function(e,a){if(this.type==="GeometryCollection"){var o=this.getGeometries();return o.forEach(function(f){return f.rotate(e,a)}),this}a?a=new te(a):a=this.getCenter();var s=this._getMeasurer(),l=this.getCoordinates();if(!Array.isArray(l)){if(a.x!==l.x||a.y!==l.y){var u=s._rotate(l,a,e);this.setCoordinates(u)}return this}return sa(l,function(f){return s._rotate(f,a,e)}),this.setCoordinates(l),this},n._getConnectPoints=function(){return[this.getCenter()]},n._initOptions=function(e){var a=fe({},e),o=a.symbol,s=a.properties,l=a.id;delete a.symbol,delete a.id,delete a.properties,this.setOptions(a),o&&this.setSymbol(o),s&&this.setProperties(s),N(l)||this.setId(l)},n._bindLayer=function(e){if(this.getLayer())throw new Error("Geometry cannot be added to two or more layers at the same time.");this._layer=e,this._clearCache(),this._bindInfoWindow(),this._bindMenu()},n._prepareSymbol=function(e){if(Array.isArray(e)){for(var a=[],o=0;o<e.length;o++)a.push(lh(this._checkAndCopySymbol(e[o])));return a}else if(e)return e=this._checkAndCopySymbol(e),lh(e);return null},n._checkAndCopySymbol=function(e){var a={};for(var o in e)RI[o]&&Re(e[o])?a[o]=+e[o]:a[o]=e[o];return a},n._getSymbol=function(){return this._symbol},n._setExternSymbol=function(e){return this._eventSymbolProperties=e,this._symbol||delete this._textDesc,this._externSymbol=this._prepareSymbol(e),this.onSymbolChanged(),this},n._getInternalSymbol=function(){return this._symbol?this._symbol:this._externSymbol?this._externSymbol:this.options.symbol?this.options.symbol:null},n._getPrjExtent=function(){var e=this._getProjection();return this._verifyProjection(),!this._extent&&e&&(this._extent=this._computePrjExtent(e)),this._extent},n._unbind=function(){var e=this.getLayer();!e||(this._animPlayer&&this._animPlayer.finish(),this._unbindMenu(),this._unbindInfoWindow(),this.isEditing()&&this.endEdit(),this._removePainter(),this.onRemove&&this.onRemove(),e.onRemoveGeometry&&e.onRemoveGeometry(this),delete this._layer,delete this._internalId,delete this._extent)},n._getInternalId=function(){return this._internalId},n._setInternalId=function(e){this._internalId=e},n._getMeasurer=function(){return this._getProjection()?this._getProjection():Nn.getProjectionInstance(this.options.defaultProjection)},n._getProjection=function(){var e=this.getMap();return e?e.getProjection():null},n._verifyProjection=function(){var e=this._getProjection();this._projCode&&e&&this._projCode!==e.code&&this._clearProjection(),this._projCode=e?e.code:this._projCode},n._getExternalResources=function(){var e=this._getInternalSymbol();return $l(e)},n._getPainter=function(){var e=this.getLayer();if(!this._painter&&e){if(P0.indexOf(this.type)!==-1){if(e.constructor.getCollectionPainterClass){var a=e.constructor.getCollectionPainterClass();a&&(this._painter=new a(this))}}else if(e.constructor.getPainterClass){var o=e.constructor.getPainterClass();o&&(this._painter=new o(this))}}return this._painter},n._getMaskPainter=function(){return this._maskPainter?this._maskPainter:(this._maskPainter=this.getGeometries&&this.getGeometries()?new kb(this,!0):new Zc(this),this._maskPainter)},n._removePainter=function(){this._painter&&this._painter.remove(),delete this._painter},n._paint=function(e){if(this._painter){if(this._dirtyCoords){delete this._dirtyCoords;var a=this._getProjection();a&&(this._pcenter=a.project(this._coordinates),this._clearCache())}this._painter.paint(e)}},n._clearCache=function(){delete this._extent,delete this._extent2d},n._clearProjection=function(){delete this._extent,delete this._extent2d},n._repaint=function(){this._painter&&this._painter.repaint()},n.onHide=function(){this.closeMenu(),this.closeInfoWindow()},n.onShapeChanged=function(){this._clearCache(),this._repaint(),this._fireEvent("shapechange")},n.onPositionChanged=function(){this._clearCache(),this._repaint(),this._fireEvent("positionchange")},n.onSymbolChanged=function(){this._painter&&this._painter.refreshSymbol();var e={};this._eventSymbolProperties?(e.properties=fe({},this._eventSymbolProperties),delete this._eventSymbolProperties):delete this._textDesc,this._genSizeSymbol(),this._fireEvent("symbolchange",e)},n._genSizeSymbol=function(){var e=this._getInternalSymbol();if(!e){delete this._sizeSymbol;return}if(Array.isArray(e)){this._sizeSymbol=[];for(var a=!1,o=0;o<e.length;o++){var s=this._sizeSymbol[o]=this._getSizeSymbol(e[o]);!a&&s&&s._dynamic&&(a=!0)}this._sizeSymbol._dynamic=a}else this._sizeSymbol=this._getSizeSymbol(e)},n._getSizeSymbol=function(e){var a=hl({lineWidth:e.lineWidth,lineDx:e.lineDx,lineDy:e.lineDy},this);return(ot(e.lineWidth)||ot(e.lineDx)||ot(e.lineDy))&&(a._dynamic=!0),a},n._getCompiledSymbol=function(){return this._compiledSymbol?this._compiledSymbol:(this._compiledSymbol=hl(this._getInternalSymbol(),this),this._compiledSymbol)},n.onConfig=function(e){var a;e.properties&&(a=e.properties,delete e.properties);var o=!1;for(var s in e)if(e.hasOwnProperty(s)){var l=s.slice(0,5);if(l==="arrow"||l==="smoot"){o=!0;break}}a?(this.setProperties(a),this._repaint()):o&&this._repaint()},n._setParent=function(e){e&&(this._parent=e)},n._getParent=function(){return this._parent},n._fireEvent=function(e,a){this._silence||(this.getLayer()&&this.getLayer()._onGeometryEvent&&(a||(a={}),a.type=e,a.target=this,this.getLayer()._onGeometryEvent(a)),this.fire(e,a))},n._toJSON=function(e){return{feature:this.toGeoJSON(e)}},n._exportGraphicOptions=function(e){var a={};return(N(e.options)||e.options)&&(a.options=this.config()),(N(e.symbol)||e.symbol)&&(a.symbol=this.getSymbol()),(N(e.infoWindow)||e.infoWindow)&&this._infoWinOptions&&(a.infoWindow=this._infoWinOptions),a},n._exportGeoJSONGeometry=function(){var e=this.getCoordinates(),a=te.toNumberArrays(e);return{type:this.getType(),coordinates:a}},n._exportProperties=function(){var e=null,a=this.getProperties();return N(a)||(Pn(a)?e=fe({},a):e=a),e},n.getAltitude=function(){var e=this.getLayer();if(!e)return 0;var a=e.options,o=this.getProperties(),s=a.enableAltitude&&o?o[a.altitudeProperty]:0,l=e.getAltitude?e.getAltitude():0;return Array.isArray(s)?s.map(function(u){return u+l}):s+l},n._genMinMaxAlt=function(){var e=this,a=this.getAltitude();Array.isArray(a)?(this._minAlt=Number.MAX_VALUE,this._maxAlt=Number.MIN_VALUE,a.forEach(function(o){var s=o;s<e._minAlt&&(e._minAlt=s),s>e._maxAlt&&(e._maxAlt=s)})):this._minAlt=this._maxAlt=a},n.getMinAltitude=function(){return this._minAlt===void 0&&this._genMinMaxAlt(),this._minAlt?this._minAlt:0},n.getMaxAltitude=function(){return this._maxAlt===void 0&&this._genMinMaxAlt(),this._maxAlt?this._maxAlt:0},t}(ab(fr(zc(_n))));je.mergeOptions(pD);var mD={attribution:null,minZoom:null,maxZoom:null,visible:!0,opacity:1,globalCompositeOperation:null,renderer:"canvas",debugOutline:"#0f0",cssFilter:null,forceRenderOnMoving:!1,forceRenderOnZooming:!1,forceRenderOnRotating:!1,collision:!1,collisionScope:"layer",hitDetect:function(){return!De.mobile}()},kt=function(r){re(t,r);function t(i,e){var a,o;return e&&(o=e.canvas,delete e.canvas),a=r.call(this,e)||this,a._canvas=o,a.setId(i),e&&(a.setZIndex(e.zIndex),e.mask&&a.setMask(je.fromJSON(e.mask))),a}var n=t.prototype;return n.load=function(){if(!this.getMap())return this;if(this.onLoad()){this._initRenderer();var e=this.getZIndex();N(e)||(this._renderer.setZIndex(e),this.isCanvasRender()||this._renderer.render()),this.onLoadEnd()}return this},n.getId=function(){return this._id},n.setId=function(e){var a=this._id;return N(e)||(e=e+""),this._id=e,this.fire("idchange",{old:a,new:e}),this},n.addTo=function(e){return e.addLayer(this),this},n.setZIndex=function(e){return this._zIndex=e,N(e)?delete this.options.zIndex:this.options.zIndex=e,this.map&&this.map._sortLayersByZIndex(),this._renderer&&this._renderer.setZIndex(e),this},n.getZIndex=function(){return this._zIndex||0},n.getMinZoom=function(){var e=this.getMap(),a=this.options.minZoom;return e?Math.max(e.getMinZoom(),a||0):a},n.getMaxZoom=function(){var e=this.getMap(),a=this.options.maxZoom;return e?Math.min(e.getMaxZoom(),N(a)?1/0:a):a},n.getOpacity=function(){return this.options.opacity},n.setOpacity=function(e){return this.config("opacity",e),this},n.isCanvasRender=function(){var e=this._getRenderer();return e&&e instanceof $o},n.getMap=function(){return this.map?this.map:null},n.getProjection=function(){var e=this.getMap();return e?e.getProjection():null},n.bringToFront=function(){var e=this._getLayerList();if(!e.length)return this;var a=e[e.length-1];if(e.length===1||a===this)return this;var o=a.getZIndex();return this.setZIndex(o+1),this},n.bringToBack=function(){var e=this._getLayerList();if(!e.length)return this;var a=e[0];if(e.length===1||a===this)return this;var o=a.getZIndex();return this.setZIndex(o-1),this},n.show=function(){var e=this;if(!this.options.visible){this.options.visible=!0;var a=this.getRenderer();a&&a.show();var o=this.getMap();a&&o?o.once("renderend",function(){e.fire("show")}):this.fire("show")}return this},n.hide=function(){var e=this;if(this.options.visible){this.options.visible=!1;var a=this.getRenderer();a&&a.hide();var o=this.getMap();a&&o?o.once("renderend",function(){e.fire("hide")}):this.fire("hide")}return this},n.isVisible=function(){if(be(this.options.opacity)&&this.options.opacity<=0)return!1;var e=this.getMap();if(e){var a=e.getZoom();if(!N(this.options.maxZoom)&&this.options.maxZoom<a||!N(this.options.minZoom)&&this.options.minZoom>a)return!1}return N(this.options.visible)&&(this.options.visible=!0),this.options.visible},n.remove=function(){return this.map&&this.map.removeLayer(this),this},n.getMask=function(){return this._mask},n.setMask=function(e){if(!(e.type==="Point"&&e._isVectorMarker()||e.type==="Polygon"||e.type==="MultiPolygon"))throw new Error("Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).");if(e._bindLayer(this),e.type==="Point"?e.updateSymbol({markerLineColor:"rgba(0, 0, 0, 0)",markerFillOpacity:0}):e.setSymbol({lineColor:"rgba(0, 0, 0, 0)",polygonOpacity:0}),this._mask=e,this.options.mask=e.toJSON(),!this.getMap()||this.getMap().isZooming())return this;var a=this._getRenderer();return a&&a.setToRedraw&&this._getRenderer().setToRedraw(),this},n.removeMask=function(){if(delete this._mask,delete this.options.mask,!this.getMap()||this.getMap().isZooming())return this;var e=this._getRenderer();return e&&e.setToRedraw&&this._getRenderer().setToRedraw(),this},n.onLoad=function(){return!0},n.onLoadEnd=function(){},n.isLoaded=function(){return!!this._loaded},n.getCollisionIndex=function(){if(this.options.collisionScope==="layer")return this._collisionIndex||(this._collisionIndex=new ob),this._collisionIndex;var e=this.getMap();return e?e.getCollisionIndex():null},n.clearCollisionIndex=function(){return this.options.collisionScope==="layer"&&this._collisionIndex&&this._collisionIndex.clear(),this},n.getRenderer=function(){return this._getRenderer()},n.onConfig=function(e){if(be(e.opacity)||e.cssFilter){var a=this.getRenderer();a&&a.setToRedraw()}},n.onAdd=function(){},n.onRendererCreate=function(){},n.onCanvasCreate=function(){},n.onRemove=function(){},n._bindMap=function(e,a){!e||(this.map=e,N(a)||this.setZIndex(a),this._switchEvents("on",this),this.onAdd(),this.fire("add"))},n._initRenderer=function(){var e=this.options.renderer;if(!!this.constructor.getRendererClass){var a=this.constructor.getRendererClass(e);if(!a)throw new Error("Invalid renderer for Layer("+this.getId()+"):"+e);this._renderer=new a(this),this._renderer.layer=this,this._renderer.setZIndex(this.getZIndex()),this._switchEvents("on",this._renderer),this._renderer.onAdd&&this._renderer.onAdd(),this.onRendererCreate(),this.fire("renderercreate",{renderer:this._renderer})}},n._doRemove=function(){this._loaded=!1,this.onRemove(),this._switchEvents("off",this),this._renderer&&(this._switchEvents("off",this._renderer),this._renderer.remove(),delete this._renderer),delete this.map,delete this._collisionIndex},n._switchEvents=function(e,a){a&&a.getEvents&&this.getMap()[e](a.getEvents(),a)},n._getRenderer=function(){return this._renderer},n._getLayerList=function(){return this.map?this.map._layers:[]},n._getMask2DExtent=function(){if(!this._mask||!this.getMap())return null;var e=this._mask._getMaskPainter();return e?e.get2DExtent():null},t}(ab(fr(vb(_n))));kt.mergeOptions(mD);var _D=kt.prototype.fire;kt.prototype.fire=function(r,t){return r==="layerload"&&(this._loaded=!0),this.map&&(t||(t={}),t.type=r,t.target=this,this.map._onLayerEvent(t)),_D.apply(this,arguments)};var yD=new te(0,0),bD={maxVisualPitch:70,maxPitch:80,centerCross:!1,zoomInCenter:!1,zoomOrigin:null,zoomAnimation:function(){return!ct}(),zoomAnimationDuration:330,panAnimation:function(){return!ct}(),panAnimationDuration:600,rotateAnimation:function(){return!ct}(),zoomable:!0,enableInfoWindow:!0,hitDetect:function(){return!De.mobile}(),hitDetectLimit:5,fpsOnInteracting:25,layerCanvasLimitOnInteracting:-1,maxZoom:null,minZoom:null,maxExtent:null,fixCenterOnResize:!0,checkSize:!0,checkSizeInterval:1e3,renderer:"canvas",cascadePitches:[10,60],renderable:!0},Te=function(r){re(t,r);function t(i,e){var a;if(!e)throw new Error("Invalid options when creating map.");if(!e.center)throw new Error("Invalid center when creating map.");var o=fe({},e),s=o.zoom;delete o.zoom;var l=new te(o.center);delete o.center;var u=o.baseLayer;delete o.baseLayer;var f=o.layers;return delete o.layers,a=r.call(this,o)||this,a.VERSION=t.VERSION,Object.defineProperty(at(at(a)),"id",{value:ba(),writable:!1}),a._loaded=!1,a._initContainer(i),a._panels={},a._baseLayer=null,a._layers=[],a._zoomLevel=s,a._center=l,a.setSpatialReference(o.spatialReference||o.view),a._mapViewPoint=new B(0,0),a._initRenderer(),a._updateMapSize(a._getContainerDomSize()),u&&a.setBaseLayer(u),f&&a.addLayer(f),a.setMaxExtent(o.maxExtent),a._Load(),a}t.addOnLoadHook=function(e){var a=Array.prototype.slice.call(arguments,1),o=typeof e=="function"?e:function(){this[e].apply(this,a)};return this.prototype._onLoadHooks=this.prototype._onLoadHooks||[],this.prototype._onLoadHooks.push(o),this};var n=t.prototype;return n.isLoaded=function(){return!!this._loaded},n.getContainer=function(){return this._containerDOM},n.getSpatialReference=function(){return this._spatialReference},n.setSpatialReference=function(e){var a=this.options.spatialReference;return this._loaded&&Nn.equals(a,e)?this:(this._updateSpatialReference(e,a),this)},n._updateSpatialReference=function(e,a){if(Re(e)&&(e=Nn.getPreset(e)),e=fe({},e),this._center=this.getCenter(),this.options.spatialReference=e,this._spatialReference=new Nn(e),this.options.spatialReference&&Xe(this.options.spatialReference.projection)){var o=this._spatialReference.getProjection();this.options.spatialReference.projection=o.code}return this._resetMapStatus(),this._fireEvent("spatialreferencechange",{old:a,new:fe({},this.options.spatialReference)}),this},n.onConfig=function(e){var a=e.spatialReference||e.view;return N(a)||this._updateSpatialReference(a,null),this},n.getProjection=function(){return this._spatialReference?this._spatialReference.getProjection():null},n.getFullExtent=function(){return this._spatialReference?this._spatialReference.getFullExtent():null},n.setCursor=function(e){return delete this._cursor,this._trySetCursor(e),this._cursor=e,this},n.resetCursor=function(){return this.setCursor(null)},n.getCenter=function(){if(!this._loaded||!this._prjCenter)return this._center;var e=this.getProjection();return e.unproject(this._prjCenter)},n.setCenter=function(e){if(!e)return this;e=new te(e);var a=this.getProjection(),o=a.project(e);return this._verifyExtent(o)?this._loaded?(this.onMoveStart(),this._setPrjCenter(o),this.onMoveEnd(this._parseEventFromCoord(this.getCenter())),this):(this._center=e,this):this},n.getSize=function(){return N(this.width)||N(this.height)?this._getContainerDomSize():new st(this.width,this.height)},n.getContainerExtent=function(){var e=this.height,a=this.getPitch(),o=this.options.maxVisualPitch;return o&&a>o&&(e=this._getVisualHeight(o)),new Ee(0,this.height-e,this.width,this.height)},n._getVisualHeight=function(e){e=e||.01;var a=(90-this.getPitch())*Math.PI/180,o=this.getFov()*Math.PI/180;e*=Math.PI/180;var s=this.cameraCenterDistance/this.getGLScale(),l=Math.tan(o/2),u=Math.tan(e),f=s*l/(1/u-l)/Math.sin(e),h=s*(Math.sin(a)*f/(s+Math.cos(a)*f));return this.height/2+h},n.getExtent=function(){return this._pointToExtent(this._get2DExtent())},n.getProjExtent=function(){var e=this._get2DExtent();return new Ye(this._pointToPrj(e.getMin()),this._pointToPrj(e.getMax()))},n.getPrjExtent=function(){return this.getProjExtent()},n.getMaxExtent=function(){return this.options.maxExtent?new Ye(this.options.maxExtent,this.getProjection()):null},n.setMaxExtent=function(e){if(e){var a=new Ye(e,this.getProjection());this.options.maxExtent=a;var o=this.getProjection();this._prjMaxExtent=a.convertTo(function(s){return o.project(s)}),this._verifyExtent(this._getPrjCenter())||(this._loaded?this._panTo(this._prjMaxExtent.getCenter()):this._center=o.unproject(this._prjMaxExtent.getCenter()))}else delete this.options.maxExtent,delete this._prjMaxExtent;return this},n.getZoom=function(){return this._zoomLevel},n.getZoomForScale=function(e,a,o){var s=this.getZoom();if(N(a)&&(a=s),e===1&&a===s)return s;var l=this._getResolution(a),u=l/e,f=this.getZoomFromRes(u);if(o)return f;var h=1e-6;return this.getSpatialReference().getZoomDirection()<0?Math.ceil(f-h):Math.floor(f+h)},n.getZoomFromRes=function(e){var a=this._getResolutions(),o=this._getResolution(this.getMinZoom()),s=this._getResolution(this.getMaxZoom());if(o<=s){if(e<=o)return this.getMinZoom();if(e>=s)return this.getMaxZoom()}else{if(e>=o)return this.getMinZoom();if(e<=s)return this.getMaxZoom()}for(var l=a.length,u=0;u<l-1;u++)if(!!a[u]){var f=a[u+1]-a[u],h=e-a[u];if(dt(f)===dt(h)&&Math.abs(f)>=Math.abs(h))return u+h/f}return l-1},n.setZoom=function(e,a){return a===void 0&&(a={animation:!0}),isNaN(e)||N(e)?this:(e=+e,this._loaded&&this.options.zoomAnimation&&a.animation?this._zoomAnimation(e):this._zoom(e),this)},n.getMaxZoom=function(){return N(this.options.maxZoom)?this.getMaxNativeZoom():this.options.maxZoom},n.setMaxZoom=function(e){var a=this.getMaxNativeZoom();return e>a&&(e=a),e!==null&&e<this._zoomLevel&&(this.setZoom(e),e=+e),this.options.maxZoom=e,this},n.getMinZoom=function(){return N(this.options.minZoom)?this._spatialReference.getMinZoom():this.options.minZoom},n.setMinZoom=function(e){if(e!==null){e=+e;var a=this._spatialReference.getMinZoom();e<a&&(e=a),e>this._zoomLevel&&this.setZoom(e)}return this.options.minZoom=e,this},n.getMaxNativeZoom=function(){var e=this.getSpatialReference();return e?e.getMaxZoom():null},n.getGLRes=function(){if(this._glRes)return this._glRes;var e=this.getSpatialReference().getFullExtent();return this._glRes=(e.right-e.left)/Math.pow(2,19),this._glRes},n.getGLScale=function(e){return N(e)&&(e=this.getZoom()),this._getResolution(e)/this.getGLRes()},n.zoomIn=function(){return this.setZoom(this.getZoom()+1)},n.zoomOut=function(){return this.setZoom(this.getZoom()-1)},n.isZooming=function(){return!!this._zooming},n.isInteracting=function(){return this.isZooming()||this.isMoving()||this.isRotating()},n.setCenterAndZoom=function(e,a){return!N(a)&&this._zoomLevel!==a?(this.setCenter(e),this.setZoom(a,{animation:!1})):this.setCenter(e),this},n.getFitZoom=function(e,a){var o=this;if(!e||!(e instanceof Ye))return this._zoomLevel;if(e.xmin===e.xmax&&e.ymin===e.ymax)return this.getMaxZoom();var s=this.getSize(),l=e.convertTo(function(g){return o.coordToPoint(g)}),u=l.getWidth(),f=l.getHeight(),h=s.width/u,c=s.height/f,d=this.getSpatialReference().getZoomDirection()<0?Math.max(h,c):Math.min(h,c),v=this.getZoomForScale(d,null,a);return v},n.getView=function(){return{center:this.getCenter().toArray(),zoom:this.getZoom(),pitch:this.getPitch(),bearing:this.getBearing()}},n.setView=function(e){return e?(e.center&&this.setCenter(e.center),e.zoom!==null&&!isNaN(+e.zoom)&&this.setZoom(+e.zoom,{animation:!1}),e.pitch!==null&&!isNaN(+e.pitch)&&this.setPitch(+e.pitch),e.pitch!==null&&!isNaN(+e.bearing)&&this.setBearing(+e.bearing),this):this},n.getResolution=function(e){return this._getResolution(e)},n.getScale=function(e){var a=N(e)?this.getZoom():e,o=this._getResolution(this.getMaxNativeZoom()),s=this._getResolution(a);return s/o},n.fitExtent=function(e,a,o,s){if(o===void 0&&(o={}),!e)return this;e=new Ye(e,this.getProjection());var l=this.getFitZoom(e)+(a||0),u=e.getCenter();return typeof o.animation=="undefined"||o.animation?this._animateTo({center:u,zoom:l},{duration:o.duration||this.options.zoomAnimationDuration,easing:o.easing||"out"},s):this.setCenterAndZoom(u,l)},n.getBaseLayer=function(){return this._baseLayer},n.setBaseLayer=function(e){var a=!1;if(this._baseLayer&&(a=!0,this._fireEvent("baselayerchangestart"),this._baseLayer.remove()),!e)return delete this._baseLayer,this._fireEvent("baselayerchangeend"),this._fireEvent("setbaselayer"),this;this._baseLayer=e,e._bindMap(this,-1);function o(){this._fireEvent("baselayerload"),a&&(a=!1,this._fireEvent("baselayerchangeend"))}return this._baseLayer.on("layerload",o,this),this._loaded&&this._baseLayer.load(),this._fireEvent("setbaselayer"),this},n.removeBaseLayer=function(){return this._baseLayer&&(this._baseLayer.remove(),delete this._baseLayer,this._fireEvent("baselayerremove")),this},n.getLayers=function(e){return this._getLayers(function(a){return a===this._baseLayer||a.getId().indexOf(Ho)>=0?!1:e?e(a):!0})},n.getLayer=function(e){if(!e)return null;var a=this._layerCache?this._layerCache[e]:null;if(a)return a;var o=this.getBaseLayer();return o&&o.getId()===e?o:null},n.addLayer=function(e){if(!e)return this;if(!Array.isArray(e))return e=Array.prototype.slice.call(arguments,0),this.addLayer(e);this._layerCache||(this._layerCache={});for(var a=this._layers,o=0,s=e.length;o<s;o++){var l=e[o],u=l.getId();if(N(u))throw new Error("Invalid id for the layer: "+u);if(l.getMap()!==this){if(this._layerCache[u])throw new Error("Duplicate layer id in the map: "+u);this._layerCache[u]=l,l._bindMap(this),a.push(l),this._loaded&&l.load()}}return this._sortLayersByZIndex(),this._fireEvent("addlayer",{layers:e}),this},n.removeLayer=function(e){if(!e)return this;if(!Array.isArray(e))return this.removeLayer([e]);for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o];if(l instanceof kt||(l=this.getLayer(l)),!!l){var u=l.getMap();if(!(!u||u!==this)){a.push(l),this._removeLayer(l,this._layers),this._loaded&&l._doRemove();var f=l.getId();this._layerCache&&delete this._layerCache[f]}}}if(a.length>0){var h=this.getRenderer();h&&h.setLayerCanvasUpdated(),this.once("frameend",function(){a.forEach(function(c){c.fire("remove")})})}return this._fireEvent("removelayer",{layers:e}),this},n.sortLayers=function(e){if(!e||!Array.isArray(e))return this;for(var a=[],o=Number.MAX_VALUE,s=0,l=e.length;s<l;s++){var u=e[s];if(Re(e[s])&&(u=this.getLayer(u)),!(u instanceof kt)||!u.getMap()||u.getMap()!==this)throw new Error("It must be a layer added to this map to order.");u.getZIndex()<o&&(o=u.getZIndex()),a.push(u)}for(var f=0,h=a.length;f<h;f++)a[f].setZIndex(o+f);return this},n.toDataURL=function(e){e||(e={});var a=e.mimeType;a||(a="image/png");var o=e.save,s=this._getRenderer();if(s&&s.toDataURL){var l=e.fileName;l||(l="export");var u=s.toDataURL(a,e.quality||.92);if(o&&u){var f;if(typeof Blob!="undefined"&&typeof atob!="undefined"){var h=UI(u.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,""),a);f=URL.createObjectURL(h)}else f=u;var c=document.createElement("a");c.download=l,c.href=f,document.body.appendChild(c),c.click(),document.body.removeChild(c)}return u}return null},n.coordToPoint=function(e,a,o){return this.coordinateToPoint(e,a,o)},n.coordToPointAtRes=function(e,a,o){return this.coordinateToPointAtRes(e,a,o)},n.pointToCoord=function(e,a,o){return this.pointToCoordinate(e,a,o)},n.pointAtResToCoord=function(e,a,o){return this.pointAtResToCoordinate(e,a,o)},n.coordToViewPoint=function(e,a,o){return this.coordinateToViewPoint(e,a,o)},n.viewPointToCoord=function(e,a){return this.viewPointToCoordinate(e,a)},n.coordToContainerPoint=function(e,a,o){return this.coordinateToContainerPoint(e,a,o)},n.containerPointToCoord=function(e,a){return this.containerPointToCoordinate(e,a)},n.containerPointToViewPoint=function(e,a){return a?a.set(e.x,e.y):a=e.copy(),a._sub(this.getViewPoint())},n.viewPointToContainerPoint=function(e,a){return a?a.set(e.x,e.y):a=e.copy(),a._add(this.getViewPoint())},n.checkSize=function(e){var a=nt()-this._initTime<1500&&this.width===0||this.height===0,o=this._getContainerDomSize(),s=this.height,l=this.width;if(!e&&o.width===l&&o.height===s)return this;Gl(this._containerDOM);var u=this.getCenter();if(this.options.fixCenterOnResize)this._updateMapSize(o);else{var f=this._getVisualHeight(this.getPitch()),h=new B(0,this.height-f),c=this._containerPointToPrj(h);this._updateMapSize(o);var d=this._getVisualHeight(this.getPitch()),v=new B(0,this.height-d);this._setPrjCoordAtContainerPoint(c,v),this._mapViewCoord=this._getPrjCenter()}var g=o.width===0||o.height===0||l===0||s===0;return(a||g)&&(this._eventSilence=!0,this.setCenter(u),delete this._eventSilence),this._fireEvent("resize"),this},n.locate=function(e,a,o){return this.getProjection()._locate(new te(e),a,o)},n.getMainPanel=function(){return this._getRenderer().getMainPanel()},n.getPanels=function(){return this._panels},n.remove=function(){var e=this;if(this.isRemoved())return this;this._fireEvent("removestart"),this._removeDomEvents(),this._clearHandlers(),this.removeBaseLayer();for(var a=this.getLayers(),o=0;o<a.length;o++)a[o].remove();return this._getRenderer()&&this._getRenderer().remove(),this._containerDOM.childNodes&&this._containerDOM.childNodes.length>0&&Array.prototype.slice.call(this._containerDOM.childNodes,0).filter(function(s){return s.className==="maptalks-wrapper"}).forEach(function(s){return e._containerDOM.removeChild(s)}),delete this._panels,delete this._containerDOM,delete this.renderer,this._fireEvent("removeend"),this._clearAllListeners(),De.removeDPRListening&&De.removeDPRListening(this),this},n.isRemoved=function(){return!this._containerDOM},n.isMoving=function(){return!!this._moving},n.onMoveStart=function(e){this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer);var a=this._getPrjCenter();(!this._originCenter||this._verifyExtent(a))&&(this._originCenter=a),this._moving=!0,this._trySetCursor("move"),this._fireEvent("movestart",this._parseEvent(e?e.domEvent:null,"movestart"))},n.onMoving=function(e){this._fireEvent("moving",this._parseEvent(e?e.domEvent:null,"moving"))},n.onMoveEnd=function(e){if(this._moving=!1,this._trySetCursor("default"),this._fireEvent("moveend",e&&e.domEvent?this._parseEvent(e.domEvent,"moveend"):e),!this._verifyExtent(this._getPrjCenter())&&this._originCenter){var a=this._originCenter;this._panTo(a)}},n.onDragRotateStart=function(e){this._dragRotating=!0,this._fireEvent("dragrotatestart",this._parseEvent(e?e.domEvent:null,"dragrotatestart"))},n.onDragRotating=function(e){this._fireEvent("dragrotating",this._parseEvent(e?e.domEvent:null,"dragrotating"))},n.onDragRotateEnd=function(e){this._dragRotating=!1,this._fireEvent("dragrotateend",this._parseEvent(e?e.domEvent:null,"dragrotateend"))},n.isDragRotating=function(){return!!this._dragRotating},n.isOffscreen=function(e,a){a===void 0&&(a=0);var o=this.width,s=this.height,l=o+a,u=s+a,f=e.xmin,h=e.ymin,c=e.xmax,d=e.ymax;return Array.isArray(e)&&(f=e[0],h=e[1],c=e[2],d=e[3]),c<a||f>=l||d<a||h>u},n.getRenderer=function(){return this._getRenderer()},n.getDevicePixelRatio=function(){return this.options.devicePixelRatio||De.devicePixelRatio||1},n.setDevicePixelRatio=function(e){return be(e)&&e>0&&e!==this.options.devicePixelRatio&&(this.options.devicePixelRatio=e,this.checkSize(!0)),this},n._initContainer=function(e){if(Re(e)){if(this._containerDOM=document.getElementById(e),!this._containerDOM)throw new Error("Invalid container when creating map: '"+e+"'")}else this._containerDOM=e,ct&&(this.CanvasClass=this._containerDOM.constructor);if(this._containerDOM.childNodes&&this._containerDOM.childNodes.length>0&&this._containerDOM.childNodes[0].className==="maptalks-wrapper")throw new Error("Container is already loaded with another map instance, use map.remove() to clear it.")},n._trySetCursor=function(e){return!this._cursor&&!this._priorityCursor&&(e||(e="default"),this._setCursorToPanel(e)),this},n._setPriorityCursor=function(e){if(e)this._priorityCursor=e,this._setCursorToPanel(e);else{var a=!1;this._priorityCursor&&(a=!0),delete this._priorityCursor,a&&this.setCursor(this._cursor)}return this},n._setCursorToPanel=function(e){var a=this.getMainPanel();a&&a.style&&a.style.cursor!==e&&(a.style.cursor=e)},n._removeLayer=function(e,a){if(!(!e||!a)){var o=a.indexOf(e);o>-1&&a.splice(o,1)}},n._sortLayersByZIndex=function(){if(!!this._layers){for(var e=0,a=this._layers.length;e<a;e++)this._layers[e]._order=e,this._layers[e].sortLayersByZIndex&&this._layers[e].sortLayersByZIndex();this._layers.sort(function(o,s){var l=o.getZIndex()-s.getZIndex();return l===0?o._order-s._order:l})}},n._fireEvent=function(e,a){this._eventSilence||(this.fire("_"+e,a),this.fire(e,a))},n._Load=function(){this._resetMapStatus(),this.options.pitch&&(this.setPitch(this.options.pitch),delete this.options.pitch),this.options.bearing&&(this.setBearing(this.options.bearing),delete this.options.bearing),delete this._glRes,this._loadAllLayers(),this._getRenderer().onLoad(),this._loaded=!0,this._callOnLoadHooks(),this._initTime=nt()},n._initRenderer=function(){var e=this.options.renderer,a=t.getRendererClass(e);this._renderer=new a(this),this._renderer.load()},n._getRenderer=function(){return this._renderer},n._loadAllLayers=function(){function e(a){a&&a.load()}this._baseLayer&&this._baseLayer.load(),this._eachLayer(e,this.getLayers())},n._getLayers=function(e){for(var a=this._baseLayer?[this._baseLayer].concat(this._layers):this._layers,o=[],s=0;s<a.length;s++)(!e||e.call(this,a[s]))&&o.push(a[s]);return o},n._eachLayer=function(e){if(!(arguments.length<2)){var a=Array.prototype.slice.call(arguments,1);a&&!Array.isArray(a)&&(a=[a]);for(var o=[],s=0,l=a.length;s<l;s++)o=o.concat(a[s]);for(var u=0,f=o.length;u<f;u++)e.call(e,o[u])}},n._onLayerEvent=function(e){!e||e.type==="idchange"&&(delete this._layerCache[e.old],this._layerCache[e.new]=e.target)},n._resetMapStatus=function(){var e=this.getMaxZoom(),a=this.getMinZoom(),o=this._spatialReference.getMaxZoom(),s=this._spatialReference.getMinZoom();(N(e)||e===-1||e>o)&&this.setMaxZoom(o),(N(a)||a===-1||a<s)&&this.setMinZoom(s),e=this.getMaxZoom(),a=this.getMinZoom(),e<a&&this.setMaxZoom(a),(N(this._zoomLevel)||this._zoomLevel>e)&&(this._zoomLevel=e),this._zoomLevel<a&&(this._zoomLevel=a),delete this._prjCenter;var l=this.getProjection();this._prjCenter=l.project(this._center),this._calcMatrices();var u=this._getRenderer();u&&u.resetContainer()},n._getContainerDomSize=function(){if(!this._containerDOM)return null;var e=this._containerDOM,a,o;if(this._containerDomContentRect)return a=this._containerDomContentRect.width,o=this._containerDomContentRect.height,new st(a,o);if(!N(e.width)&&!N(e.height)){a=e.width,o=e.height;var s=this.getDevicePixelRatio();s!==1&&e.layer&&(a/=s,o/=s)}else if(!N(e.clientWidth)&&!N(e.clientHeight))a=parseInt(e.clientWidth,0),o=parseInt(e.clientHeight,0);else throw new Error("can not get size of container");return new st(a,o)},n._updateMapSize=function(e){return this.width=e.width,this.height=e.height,this._getRenderer().updateMapSize(e),this._calcMatrices(),this},n._getPrjCenter=function(){return this._prjCenter},n._setPrjCenter=function(e){this._prjCenter=e,this.isInteracting()&&!this.isMoving()&&(this._mapViewCoord=e),this._calcMatrices()},n._setPrjCoordAtContainerPoint=function(e,a){if(a.x===this.width/2&&a.y===this.height/2)return this;var o=this._containerPointToPoint(a)._sub(this._prjToPoint(this._getPrjCenter())),s=this._pointToPrj(this._prjToPoint(e).sub(o));return this._setPrjCenter(s),this},n._verifyExtent=function(e){if(!e)return!1;var a=this._prjMaxExtent;return a?a.contains(e):!0},n._offsetCenterByPixel=function(e){var a=new B(this.width/2-e.x,this.height/2-e.y),o=this._containerPointToPrj(a);return this._setPrjCenter(o),o},n.offsetPlatform=function(e){return e?(this._getRenderer().offsetPlatform(e),this._mapViewCoord=this._getPrjCenter(),this._mapViewPoint=this._mapViewPoint.add(e),this):this._mapViewPoint},n.getViewPoint=function(){var e=this._getViewPointFrameOffset(),a=this.offsetPlatform();return e&&(a=a.add(e)),a},n._resetMapViewPoint=function(){this._mapViewPoint=new B(0,0),this._mapViewCoord=this._getPrjCenter()},n._getResolution=function(e){return(e===void 0||e===this._zoomLevel)&&this._mapRes!==void 0?this._mapRes:(N(e)&&(e=this._zoomLevel),this._spatialReference.getResolution(e))},n._getResolutions=function(){return this._spatialReference.getResolutions()},n._prjToPoint=function(e,a,o){a=N(a)?this.getZoom():a;var s=this._getResolution(a);return this._prjToPointAtRes(e,s,o)},n._prjToPointAtRes=function(e,a,o){return this._spatialReference.getTransformation().transform(e,a,o)},n._prjsToPointsAtRes=function(e,a,o){o===void 0&&(o=[]);for(var s=this._spatialReference.getTransformation(),l=[],u=0,f=e.length;u<f;u++){var h=s.transform(e[u],a,o[u]);l.push(h)}return l},n._pointToPrj=function(e,a,o){a=N(a)?this.getZoom():a;var s=this._getResolution(a);return this._pointToPrjAtRes(e,s,o)},n._pointToPrjAtRes=function(e,a,o){return this._spatialReference.getTransformation().untransform(e,a,o)},n._pointToPoint=function(e,a,o){return N(a)?(o?(o.x=e.x,o.y=e.y):o=e.copy(),o):this._pointAtResToPoint(e,this._getResolution(a),o)},n._pointAtResToPoint=function(e,a,o){return o?(o.x=e.x,o.y=e.y):o=e.copy(),o._multi(a/this._getResolution())},n._pointToPointAtRes=function(e,a,o){return o?(o.x=e.x,o.y=e.y):o=e.copy(),o._multi(this._getResolution()/a)},n._containerPointToPrj=function(e,a){return this._pointToPrj(this._containerPointToPoint(e,void 0,a),void 0,a)},n._callOnLoadHooks=function(){var e=t.prototype;if(!!e._onLoadHooks)for(var a=0,o=e._onLoadHooks.length;a<o;a++)e._onLoadHooks[a].call(this)},t}(zc(fr(vb(_n))));Te.include({coordinateToPoint:function(t,n,i){var e=this._getResolution(n);return this.coordinateToPointAtRes(t,e,i)},coordinateToPointAtRes:function(){var r=new te(0,0);return function(t,n,i){var e=this.getProjection().project(t,r);return this._prjToPointAtRes(e,n,i)}}(),pointToCoordinate:function(){var r=new te(0,0);return function(t,n,i){var e=this._pointToPrj(t,n,r);return this.getProjection().unproject(e,i)}}(),pointAtResToCoordinate:function(){var r=new te(0,0);return function(t,n,i){var e=this._pointToPrjAtRes(t,n,r);return this.getProjection().unproject(e,i)}}(),coordinateToViewPoint:function(){var r=new te(0,0);return function(t,n,i){return this._prjToViewPoint(this.getProjection().project(t,r),n,i)}}(),viewPointToCoordinate:function(){var r=new te(0,0);return function(t,n){return this.getProjection().unproject(this._viewPointToPrj(t,r),n)}}(),coordinateToContainerPoint:function(t,n,i){var e=this._getResolution(n);return this.coordinateToContainerPointAtRes(t,e,i)},coordinateToContainerPointAtRes:function(){var r=new te(0,0);return function(t,n,i){var e=this.getProjection().project(t,r);return this._prjToContainerPointAtRes(e,n,i)}}(),coordinatesToContainerPoints:function(t,n){var i=this._getResolution(n);return this.coordinatesToContainerPointsAtRes(t,i)},coordinatesToContainerPointsAtRes:function(){return function(r,t){for(var n=[],i=this._spatialReference.getTransformation(),e=t/this._getResolution(),a=this.getProjection(),o=new te(0,0),s=this.isTransforming(),l=this._prjToPoint(this._getPrjCenter(),void 0,yD),u=0,f=r.length;u<f;u++){var h=a.project(r[u],o),c=i.transform(h,t);c=c._multi(e),this._toContainerPoint(c,s,e,0,l),n.push(c)}return n}}(),containerPointToCoordinate:function(){var r=new te(0,0);return function(t,n){var i=this._containerPointToPrj(t,r);return this.getProjection().unproject(i,n)}}(),containerToExtent:function(){var r=new B(0,0),t=new B(0,0);return function(n){var i=new Ee(this._containerPointToPoint(n.getMin(r),void 0,r),this._containerPointToPoint(n.getMax(t),void 0,t));return this._pointToExtent(i)}}(),distanceToPixel:function(){var r=new B(0,0),t=new B(0,0);return function(n,i,e){var a=this.getProjection();if(!a)return null;var o=this.getScale()/this.getScale(e),s=this.getCenter(),l=a.locate(s,n,i),u=this.coordToContainerPoint(s,void 0,r),f=this.coordToContainerPoint(l,void 0,t);return f._sub(u)._multi(o)._abs(),new st(f.x,f.y)}}(),distanceToPoint:function(t,n,i,e){var a=this._getResolution(i);return this.distanceToPointAtRes(t,n,a,e)},distanceToPointAtRes:function(){var r=new B(0,0);return function(t,n,i,e){var a=this.getProjection();if(!a)return null;var o=e||this.getCenter(),s=a.locate(o,t,n),l=this.coordToPointAtRes(o,i,r),u=this.coordToPointAtRes(s,i);return u._sub(l)._abs(),u}}(),pixelToDistance:function(){var r=new te(0,0),t=new te(0,0);return function(n,i){var e=this.getProjection();if(!e)return null;var a=this.getFullExtent(),o=a.top>a.bottom?-1:1,s=r.set(this.width/2+n,this.height/2+o*i),l=this.containerPointToCoord(s,t);return e.measureLength(this.getCenter(),l)}}(),pointToDistance:function(t,n,i){var e=this.getResolution(i);return this.pointAtResToDistance(t,n,e)},pointAtResToDistance:function(){var r=new B(0,0),t=new te(0,0);return function(n,i,e){var a=this.getProjection();if(!a)return null;var o=this._prjToPointAtRes(this._getPrjCenter(),e,r);o._add(n,i);var s=this.pointAtResToCoord(o,e,t);return a.measureLength(this.getCenter(),s)}}(),locateByPoint:function(){var r=new B(0,0);return function(t,n,i){var e=this.coordToContainerPoint(t,void 0,r);return this.containerPointToCoord(e._add(n,i))}}(),_get2DExtent:function(t,n){var i;if((t===void 0||t===this._zoomLevel)&&this._mapExtent2D&&(i=this._mapExtent2D),i)return n?(n.set(i.xmin,i.ymin,i.xmax,i.ymax),n):i.copy();var e=this._getResolution(t);return this._get2DExtentAtRes(e,n)},_get2DExtentAtRes:function(){var r=new B(0,0);return function(t,n){var i=this;if(t===this._mapGlRes&&this._mapGlExtent2D)return this._mapGlExtent2D;var e=this.getContainerExtent();return e.convertTo(function(a){return i._containerPointToPointAtRes(a,t,r)},n)}}(),_pointToExtent:function(){var r=new te(0,0),t=new te(0,0);return function(n){var i=n.getMin(),e=n.getMax(),a=this.getFullExtent(),o=!a||a.left<=a.right?[i.x,e.x]:[e.x,i.x],s=o[0],l=o[1],u=!a||a.top>a.bottom?[e.y,i.y]:[i.y,e.y],f=u[0],h=u[1],c=i.set(s,h),d=e.set(l,f);return new Ye(this.pointToCoord(c,void 0,r),this.pointToCoord(d,void 0,t),this.getProjection())}}(),_getViewPointFrameOffset:function(){var r=new B(0,0);return function(){if(this.isZooming())return null;var t=this._getPrjCenter();return this._mapViewCoord&&!this._mapViewCoord.equals(t)?this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(t,void 0,r)):null}}(),_viewPointToPrj:function(){var r=new B(0,0);return function(t,n){return this._containerPointToPrj(this.viewPointToContainerPoint(t,r),n)}}(),_prjToContainerPoint:function(t,n,i,e){var a=this._getResolution(n);return this._prjToContainerPointAtRes(t,a,i,e)},_prjToContainerPointAtRes:function(){var r=new B(0,0);return function(t,n,i,e){return this._pointAtResToContainerPoint(this._prjToPointAtRes(t,n,r),n,e||0,i)}}(),_prjToViewPoint:function(){var r=new B(0,0);return function(t,n,i){var e=this._prjToContainerPoint(t,void 0,r,i);return this.containerPointToViewPoint(e,n)}}(),_viewPointToPoint:function(){var r=new B(0,0);return function(t,n,i){return this._containerPointToPoint(this.viewPointToContainerPoint(t,r),n,i)}}(),_pointToViewPoint:function(){var r=new te(0,0);return function(t,n,i){return this._prjToViewPoint(this._pointToPrj(t,n,r),i)}}()});Te.mergeOptions(bD);var xD=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){!this.target||this.target.on("_dblclick",this._onDoubleClick,this)},n.removeHooks=function(){!this.target||this.target.off("_dblclick",this._onDoubleClick,this)},n._onDoubleClick=function(e){var a=this.target;if(a.options.doubleClickZoom){var o=a.getZoom(),s=e.domEvent.shiftKey?Math.ceil(o)-1:Math.floor(o)+1;a._zoomAnimation(s,e.containerPoint)}},t}(En);Te.mergeOptions({doubleClickZoom:!0});Te.addOnLoadHook("addHandler","doubleClickZoom",xD);var wD=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){var e=this.target;if(!!e){var a=e._panels.mapWrapper||e._containerDOM;this._dragHandler=new wa(a,{cancelOn:this._cancelOn.bind(this),rightclick:!0}),this._dragHandler.on("mousedown",this._onMouseDown,this).on("dragstart",this._onDragStart,this).on("dragging",this._onDragging,this).on("dragend",this._onDragEnd,this).enable()}},n.removeHooks=function(){this._dragHandler.off("mousedown",this._onMouseDown,this).off("dragstart",this._onDragStart,this).off("dragging",this._onDragging,this).off("dragend",this._onDragEnd,this),this._dragHandler.remove(),delete this._dragHandler},n._cancelOn=function(e){return!!(this.target.isZooming()||this._ignore(e))},n._ignore=function(e){return e?(e.domEvent&&(e=e.domEvent),this.target._ignoreEvent(e)):!1},n._onMouseDown=function(e){delete this.startDragTime,delete this._mode,e.domEvent.button===2||e.domEvent.ctrlKey?(this.target.options.dragRotate||this.target.options.dragPitch)&&(this._mode="rotatePitch"):this.target.options.dragPan&&(this._mode="move"),this.target._stopAnim(this.target._mapAnimPlayer),dn(e.domEvent)},n._onDragStart=function(e){this.startDragTime=nt(),this._mode==="move"?this._moveStart(e):this._mode==="rotatePitch"&&this._rotateStart(e)},n._onDragging=function(e){var a=this.target;a._isEventOutMap(e.domEvent)||(this._mode==="move"?this._moving(e):this._mode==="rotatePitch"&&this._rotating(e))},n._onDragEnd=function(e){this._mode==="move"?this._moveEnd(e):this._mode==="rotatePitch"&&this._rotateEnd(e),delete this.startDragTime,delete this.startBearing},n._start=function(e){this.preX=e.mousePos.x,this.preY=e.mousePos.y,this.startX=this.preX,this.startY=this.preY,this._startPrjCenter=this.target._getPrjCenter().copy()},n._moveStart=function(e){this._start(e);var a=this.target;a.onMoveStart(e);var o=Ft(a._getActualEvent(e.domEvent),a.getContainer());this.startPrjCoord=a._containerPointToPrj(o)},n._moving=function(e){if(!!this.startDragTime){var a=this.target,o=Ft(a._getActualEvent(e.domEvent),a.getContainer());a._setPrjCoordAtContainerPoint(this.startPrjCoord,o),a.onMoving(e)}},n._moveEnd=function(e){if(!!this.startDragTime){var a=e.domEvent.type==="touchend",o=this.target,s=nt()-this.startDragTime,l=e.mousePos.x,u=e.mousePos.y,f=l-this.startX,h=u-this.startY,c=o._getPrjCenter(),d=c.sub(this._startPrjCenter);if(this._clear(),o.options.panAnimation&&!e.interupted&&o._verifyExtent(o._getPrjCenter())&&s<280&&Math.abs(h)+Math.abs(f)>5){s=5*s;var v=a?5:2.8,g=c.add(d._multi(v)),m=o.getProjection().unproject(g);o.panTo(m,{duration:a?s*3:s*2,easing:"outExpo"})}else o.onMoveEnd(e)}},n._rotateStart=function(e){this._start(e),delete this._rotateMode,this.startBearing=this.target.getBearing(),this.target.onDragRotateStart(e),this._db=0},n._rotating=function(e){var a=this.target,o=e.mousePos.x,s=e.mousePos.y,l=a.getPitch(),u=a.getBearing(),f=Math.abs(o-this.preX),h=Math.abs(s-this.preY);if(this._rotateMode||(a.options.dragRotatePitch?this._rotateMode="rotate_pitch":f>h?this._rotateMode="rotate":f<h?this._rotateMode="pitch":this._rotateMode="rotate"),!(this._rotateMode==="pitch"&&l===0&&h<10)){if(this._rotateMode.indexOf("rotate")>=0&&a.options.dragRotate){var c=0;a.options.dragPitch||f>h?c=-.6*(this.preX-o):o>a.width/2?c=.6*(this.preY-s):c=-.6*(this.preY-s);var d=a.getBearing()+c;this._db=this._db||0,this._db+=c,a._setBearing(d)}this._rotateMode.indexOf("pitch")>=0&&a.options.dragPitch&&a._setPitch(a.getPitch()+(this.preY-s)*.4),this.preX=o,this.preY=s,(a.getBearing()!==u||a.getPitch()!==l)&&a.onDragRotating(e)}},n._rotateEnd=function(e){var a=this.target,o=a.getBearing();this._clear();var s=nt()-this.startDragTime;if(a.onDragRotateEnd(e),a.options.rotateAnimation&&Math.abs(o-this.startBearing)>20&&(this._rotateMode==="rotate"||this._rotateMode==="rotate_pitch")&&!e.interupted&&s<400){var l=a.getBearing();a._animateTo({bearing:l+this._db/1.5},{easing:"outQuint",duration:1600})}},n._clear=function(){delete this.startPrjCoord,delete this.preX,delete this.preY,delete this.startX,delete this.startY},t}(En);Te.mergeOptions({draggable:!0,dragPan:!0,dragRotatePitch:!0,dragRotate:!0,dragPitch:!0});Te.addOnLoadHook("addHandler","draggable",wD);var zp="mousedown mouseup mousemove click dblclick contextmenu touchstart touchmove touchend",CD=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){var e=this.target,a=e._panels.allLayers||e._containerDOM;rt(a,zp,this._identifyGeometryEvents,this)},n.removeHooks=function(){var e=this.target,a=e._panels.allLayers||e._containerDOM;lt(a,zp,this._identifyGeometryEvents)},n._identifyGeometryEvents=function(e,a){var o=this.target;if(o.isInteracting()||o._ignoreEvent(e))return;var s=null,l=a||e.type,u=l==="mousedown"||l==="touchstart"&&e.touches&&e.touches.length===1;if(u)this._mouseDownTime=nt();else if((l==="click"||l==="touchend")&&this._mouseDownTime){var f=this._mouseDownTime;delete this._mouseDownTime;var h=nt();if(h-f>300){if(l==="click")return}else l==="touchend"&&(s="click")}var c=e.touches&&e.touches.length>0?e.touches[0]:e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0]:e;if(!c)return;var d=Ft(c,o._containerDOM);l==="touchstart"&&dn(e);for(var v=null,g=this.target.getRenderer().getTopElements(),m=u&&e.button!==2,p=0;p<g.length;p++)if(g[p].hitTest(d)){var _=g[p].options.cursor;if(_&&(v=_),m||g[p].events&&g[p].events.indexOf(l)>=0){var b={target:o,type:l,domEvent:e,containerPoint:d};if(m){o._setPriorityCursor(v),g[p].mousedown(b);return}else g[p].onEvent(b)}}var x=o._getLayers(function(P){return!!(P.identify&&P.options.geometryEvents)});if(o._setPriorityCursor(v),!x.length)return;var C={includeInternals:!0,filter:function(T){if(!(T instanceof je))return!1;var L=T._getEventTypeToFire(e);if(l==="mousemove"){if(!v&&T.options.cursor&&(v=T.options.cursor),!T.listens("mousemove")&&!T.listens("mouseover")&&!T.listens("mouseenter"))return!1}else if(!T.listens(L)&&!T.listens(s))return!1;return!0},count:1,containerPoint:d,onlyVisible:o.options.onlyVisibleGeometryEvents,layers:x},y=w.bind(this);l==="mousemove"||l==="touchmove"?this._queryIdentifyTimeout=o.getRenderer().callInNextFrame(function(){o.isInteracting()||o.identifyAtPoint(C,y)}):o.identifyAtPoint(C,y);function w(P){var T=!0;if(l==="mousemove"){var L={};if(P.length>0)for(var j=P.length-1;j>=0;j--){var M=P[j];if(M instanceof je){var D=M._getInternalId();L[D]=M,M._onEvent(e),(!this._prevOverGeos||!this._prevOverGeos.geomap[D])&&M._onEvent(e,"mouseenter"),T=M._onEvent(e,"mouseover")}}o._setPriorityCursor(v);var R=this._prevOverGeos&&this._prevOverGeos.geos;if(this._prevOverGeos={geos:P,geomap:L},R&&R.length>0)for(var I=R.length-1;I>=0;I--){var z=R[I];if(z instanceof je){var F=R[I]._getInternalId();L[F]||(T=z._onEvent(e,"mouseout"))}}}else{if(!P||!P.length)return;for(var O=P.length-1;O>=0;O--)if(P[O]instanceof je){T=P[O]._onEvent(e),s&&P[O]._onEvent(e,s);break}}T===!1&&Jt(e)}},t}(En);Te.mergeOptions({geometryEvents:!0,onlyVisibleGeometryEvents:!0});Te.addOnLoadHook("addHandler","geometryEvents",CD);var Fp=4.000244140625,PD=1/100,TD=1/450,SD=2,MD=function(r){re(t,r);function t(i){var e;return e=r.call(this,i)||this,e._thisScrollZoom=e._scrollZoom.bind(at(at(e))),e._wheelZoomRate=TD,e._defaultZoomRate=PD,e._delta=0,e}var n=t.prototype;return n.addHooks=function(){kr(this.target._containerDOM,"wheel",this._onWheelScroll,this)},n.removeHooks=function(){_i(this.target._containerDOM,"wheel",this._onWheelScroll)},n._onWheelScroll=function(e){dn(e),Jt(e);var a=this.target;if(a._ignoreEvent(e)||!a.options.zoomable)return!1;var o=a._containerDOM,s=a._checkZoomOrigin(Ft(e,o));return a.options.seamlessZoom?(this._zooming||(this._trackPadSuspect=0,this._ensureTrackpad=!1),this._seamless(e,s)):this._interval(e,s)},n._seamless=function(e,a){var o=e.deltaMode===window.WheelEvent.DOM_DELTA_LINE?e.deltaY*60:e.deltaY;if(o%Fp!==0&&(this._ensureTrackpad||(Math.abs(o)<60?this._trackPadSuspect++:this._trackPadSuspect=0,this._trackPadSuspect>=2&&(this._ensureTrackpad=!0)),this._ensureTrackpad&&(o*=14)),e.shiftKey&&o&&(o=o/4),this._lastWheelEvent=e,this._delta-=o,!this._zooming&&this._delta){var s=this.target;this._zoomOrigin=a,s.onZoomStart(null,a)}this._start()},n._start=function(){if(!!this._delta){this._zooming=!0;var e=this.target;this._active||(e.getRenderer().callInNextFrame(this._thisScrollZoom),this._active=!0)}},n._scrollZoom=function(){var e=this;if(this._active=!1,!!this._delta){var a=Math.abs(this._delta)>Fp?this._wheelZoomRate:this._defaultZoomRate,o=SD/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&o!==0&&(o=1/o);var s=this.target,l=s.getZoom(),u=s.getZoomForScale(o,l,!0);this._delta=0,s.onZooming(u,this._zoomOrigin),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){e._zooming=!1,delete e._timeout,s.onZoomEnd(s.getZoom(),e._zoomOrigin)},210)}},n._interval=function(e,a){var o=this,s=this.target;if(this._zooming)return this._requesting++,!1;this._requesting=0;var l=(e.deltaY?e.deltaY*-1:e.wheelDelta?e.wheelDelta:e.detail)>0?1:-1;e.detail&&(l*=-1);var u=s.getZoom(),f=u+l;if(f=s._checkZoom(l>0?Math.ceil(f):Math.floor(f)),f===u)return!1;this._zooming=!0,this._delta||(s.onZoomStart(null,a),this._origin=a,this._delta=l,this._startZoom=s.getZoom());var h=90;return s._animateTo({zoom:f-this._delta*1/2,around:this._origin},{continueOnViewChanged:!0,easing:"linear",duration:h,wheelZoom:!0},function(c){if(c.state.playState!=="finished"){c.state.playState!=="running"&&(delete o._zooming,delete o._requesting);return}o._requesting<1||Math.abs(f-o._startZoom)>2||f===s.getMaxZoom()||f===s.getMinZoom()?(s._animateTo({zoom:f,around:o._origin},{continueOnViewChanged:!0,duration:100},function(d){d.state.playState!=="running"&&(delete o._zooming,delete o._requesting)}),delete o._startZoom,delete o._origin,delete o._delta,o._requesting=0):N(o._requesting)||(delete o._zooming,o._onWheelScroll(e))}),!1},t}(En);Te.mergeOptions({scrollWheelZoom:!0,seamlessZoom:!0});Te.addOnLoadHook("addHandler","scrollWheelZoom",MD);var ED=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){kr(this.target.getContainer(),"touchstart",this._onTouchStart,this)},n.removeHooks=function(){_i(this.target.getContainer(),"touchstart",this._onTouchStart)},n._onTouchStart=function(e){var a=this.target;if(!(!e.touches||e.touches.length<2)){var o=a.getContainer(),s=Ft(e.touches[0],o),l=Ft(e.touches[1],o);this.preY=s.y,this._startP1=s,this._startP2=l,this._startDist=s.distanceTo(l),this._startVector=s.sub(l),this._startZoom=a.getZoom(),this._startBearing=a.getBearing(),lt(document,"touchmove",this._onTouchMove),lt(document,"touchend",this._onTouchEnd),kr(document,"touchmove",this._onTouchMove,this),kr(document,"touchend",this._onTouchEnd,this),dn(e),a._fireEvent("touchactstart")}},n._onTouchMove=function(e){var a=this.target;if(!(!e.touches||e.touches.length<2)){var o=a.getContainer(),s=Ft(e.touches[0],o),l=Ft(e.touches[1],o),u=s.sub(this._startP1),f=l.sub(this._startP2),h=s.sub(l),c=s.distanceTo(l)/this._startDist,d=h.angleWith(this._startVector)*180/Math.PI,v=this.preY||s.y,g=(v-s.y)*.4;this.preY=s.y;var m={domEvent:e,mousePos:[s,l]};if(this.mode||(a.options.touchRotate&&Math.abs(d)>8?this.mode=a.options.touchZoomRotate?"rotate_zoom":"rotate":a.options.touchPitch&&u.y*f.y>0&&Math.abs(u.y)>10&&Math.abs(f.y)>10?this.mode="pitch":a.options.zoomable&&a.options.touchZoom&&Math.abs(1-c)>.15&&(this.mode=a.options.touchZoomRotate&&a.options.touchRotate?"rotate_zoom":"zoom"),this._startTouching(m)),this.mode==="zoom"||this.mode==="rotate_zoom"){this._scale=c;var p=a._getResolution(this._startZoom)/c,_=a.getZoomFromRes(p);a.onZooming(_,this._Origin)}this.mode==="rotate"||this.mode==="rotate_zoom"?(a._setBearing(this._startBearing+d),a.onDragRotating(m)):this.mode==="pitch"&&(a._setPitch(a.getPitch()+g),a.onDragRotating(m)),a._fireEvent("touchactinging")}},n._startTouching=function(e){var a=this.target;if(this.mode==="zoom"||this.mode==="rotate_zoom"){var o=a.getSize();this._Origin=new B(o.width/2,o.height/2),a.onZoomStart(null,this._Origin)}(this.mode==="rotate"||this.mode==="pitch"||this.mode==="rotate_zoom")&&a.onDragRotateStart(e)},n._onTouchEnd=function(e){delete this.preY;var a=this.target;if(lt(document,"touchmove",this._onTouchMove),lt(document,"touchend",this._onTouchEnd),this.mode==="zoom"||this.mode==="rotate_zoom"){var o=this._scale,s=a._getResolution(this._startZoom)/o,l=a.getZoomFromRes(s);a.onZoomEnd(l,this._Origin)}(this.mode==="pitch"||this.mode==="rotate"||this.mode==="rotate_zoom")&&a.onDragRotateEnd({domEvent:e}),delete this.mode,a._fireEvent("touchactend")},t}(En);Te.mergeOptions({touchGesture:!0,touchZoom:!0,touchPitch:!0,touchRotate:!0,touchZoomRotate:!1});Te.addOnLoadHook("addHandler","touchGesture",ED);var Ss="__anim_player",qi={outExpo:function(t){return t===1?1:1-Math.pow(2,-10*t)},outQuint:function(t){return 1-Math.pow(1-t,5)},in:function(t){return Math.pow(t,2)},out:function(t){return 1-qi.in(1-t)},inAndOut:function(t){return 3*t*t-2*t*t*t},linear:function(t){return t},upAndDown:function(t){return t<.5?qi.inAndOut(2*t):1-qi.inAndOut(2*(t-.5))}},OD=function(t,n){this.state=t,this.styles=n},Db=function(t,n,i,e){this._animation=t,this.options=n,this._onFrame=i,this.playState="idle",this.ready=!0,this.finished=!1,this.target=e},Pt={speed:{slow:2e3,normal:1e3,fast:500},_resolveStyles:function(t){if(!t)return null;function n(h){if(!Array.isArray(h))return Pt._resolveStyles(h);for(var c=[],d=[],v=[],g=0;g<h.length;g++){var m=Pt._resolveStyles(h[g]);m&&(c.push(m[0]),d.push(m[1]),v.push(m[2]))}return c.length?[c,d,v]:null}function i(h){var c=h,d;Array.isArray(h)||(be(h)?c=[0,h]:h instanceof B||h instanceof te?(d=h.constructor,c=[new d(0,0),h]):c=[h,h]);var v=c[0],g=c[1];return be(v)&&be(g)?v===g?null:[v,g-v,g]:Array.isArray(v)&&be(v[0])||v instanceof te||v instanceof B?(Array.isArray(v)?(v=new te(v),g=new te(g)):(d=v.constructor,v=new d(v),g=new d(g)),v.equals(g)?null:[v,g.sub(v),g]):[v,g,g]}function e(h){return!Array.isArray(h)&&h.constructor===Object?!0:!!(Array.isArray(h)&&h[0].constructor===Object)}var a={},o={},s={};for(var l in t)if(t.hasOwnProperty(l)){var u=t[l];if(u){if(Array.isArray(u)&&(N(u[0])||N(u[1])))continue}else continue;var f=void 0;e(u)?f=n(u):f=i(u),f&&(o[l]=f[0],a[l]=f[1],s[l]=f[2])}return[o,a,s]},framing:function(t,n){n||(n={});var i=n.easing?qi[n.easing]:qi.linear;i||(i=qi.linear);var e,a,o;t=Pt._resolveStyles(t),t&&(a=t[0],e=t[1],o=t[2]);var s=function l(u,f,h){if(!f||!h)return null;var c={};for(var d in h)if(h.hasOwnProperty(d)){if(f[d]===o[d]){c[d]=f[d];continue}var v=f[d],g=h[d];if(be(g))c[d]=v+u*g;else if(Array.isArray(g)){for(var m=[],p=0;p<g.length;p++)m.push(l(u,v[p],g[p]));c[d]=m}else{var _=g.constructor;_===Object?c[d]=l(u,v,g):v instanceof B||v instanceof te?c[d]=v.add(g.multi(u)):c[d]=g}}return c};return function(l,u){var f,h;if(l<0)f={playState:"idle",delta:0},h=a;else if(l<u){var c=i(l/u);f={playState:"running",delta:c},h=s(c,a,e)}else f={playState:"finished",delta:1},h=o;return f.startStyles=a,f.destStyles=o,f.progress=l,f.remainingMs=u-l,new OD(f,h)}},_requestAnimFrame:function(t){this._frameQueue||(this._frameQueue=[]),this._frameQueue.push(t),this._a()},_a:function(){this._animationFrameId||(this._animationFrameId=oa(Pt._frameFn))},_run:function(){if(this._frameQueue.length){var t=this._frameQueue;this._frameQueue=[];for(var n=0,i=t.length;n<i;n++)t[n]();this._frameQueue.length?this._animationFrameId=oa(Pt._frameFn):delete this._animationFrameId}},animate:function(t,n,i,e){n||(n={});var a=Pt.framing(t,n),o=new Db(a,n,i,e);return o}};Pt._frameFn=Pt._run.bind(Pt);fe(Db.prototype,{_prepare:function(){var t=this.options,n=t.speed||t.duration;Re(n)&&(n=Pt.speed[n],n||(n=+n)),n||(n=Pt.speed.normal),this.duration=n,this._framer=t.framer||Pt._requestAnimFrame.bind(Pt)},play:function(){if(this.playState!=="idle"&&this.playState!=="paused"||this.target&&this.target[Ss])return this;this.target&&(this.target[Ss]=1),this.playState==="idle"&&(this.currentTime=0,this._prepare());var t=nt();if(!this.startTime){var n=this.options;this.startTime=n.startTime?n.startTime:t}return this._playStartTime=Math.max(t,this.startTime),this.playState==="paused"&&(this._playStartTime-=this.currentTime),this.playState="running",this._run(),this},pause:function(){return this.playState==="paused"?this:(this.playState="paused",this._run(),this)},cancel:function(){return this.playState==="idle"?this:(this.playState="idle",this.finished=!1,this._run(),this)},finish:function(){return this.playState==="finished"?this:(this.playState="finished",this.finished=!0,this._run(),this)},reverse:function(){},_run:function(){var t=this,n=this._onFrame,i=nt(),e=i-this._playStartTime;if(this.options.repeat&&e>=this.duration&&(this._playStartTime=i,e=0),this.playState!=="running"){if(this.target&&delete this.target[Ss],n){this.playState==="finished"?e=this.duration:this.playState==="idle"&&(e=0);var a=this._animation(e,this.duration);a.state.playState=this.playState,n(a)}return}var o=this._animation(e,this.duration);this.playState=o.state.playState,this.playState!=="running"&&this.target&&delete this.target[Ss],this.playState==="idle"?this.startTime>i&&setTimeout(this._run.bind(this),this.startTime-i):this.playState==="running"?this._framer(function(){t.playState==="running"&&(t.currentTime=e,n&&n(o),t._run())}):this.playState==="finished"&&(this.finished=!0,n&&n(o))}});var AD={smoothness:0,enableClip:!0,enableSimplify:!0,simplifyTolerance:2,symbol:{lineColor:"#000",lineWidth:2,lineOpacity:1,polygonFill:"#fff",polygonOpacity:1,opacity:1}},Ul=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.animateShow=function(e,a){var o=this;e===void 0&&(e={}),this._showPlayer&&this._showPlayer.finish(),Xe(e)&&(e={},a=e);var s=this.getCoordinates();if(s.length===0)return this;this._animIdx=0,this._animLenSoFar=0,this.show();var l=!!this.getShell,u=l?this.getShell().concat(this.getShell()[0]):s,f=this._getProjection(),h=f.projectCoords(u);this._prjAniShowCenter=this._getPrjExtent().getCenter(),this._aniShowCenter=f.unproject(this._prjAniShowCenter);var c=e.duration||1e3,d=e.easing||"out";this.setCoordinates([]);var v=0;h.length&&(h[0]._distance=0);for(var g=1;g<h.length;g++){var m=h[g].distanceTo(h[g-1]);h[g]._distance=m,v+=m}this._tempCoord=new te(0,0),this._tempPrjCoord=new B(0,0);var p=this._showPlayer=Pt.animate({t:c},{duration:c,easing:d},function(_){if(!o.getMap()){if(p.playState!=="finished"&&(p.finish(),a)){var b=o.getCoordinates();a(_,b[b.length-1])}return}var x=o._drawAnimShowFrame(_.styles.t,c,v,u,h);_.state.playState==="finished"&&(delete o._showPlayer,delete o._aniShowCenter,delete o._prjAniShowCenter,delete o._animIdx,delete o._animLenSoFar,delete o._animTailRatio,delete o._tempCoord,delete o._tempPrjCoord,o.setCoordinates(s)),a&&a(_,x)},this);return p.play(),p},n._drawAnimShowFrame=function(e,a,o,s,l){if(e===0)return s[0];var u=e/a*o,f=0,h,c;for(h=this._animIdx+1,c=l.length;h<c&&(f=l[h]._distance,!(this._animLenSoFar+f>u));h++)this._animLenSoFar+=f;if(this._animIdx=h-1,this._animIdx>=c-1)return this.setCoordinates(s),s[s.length-1];var d=this._animIdx,v=l[d],g=l[d+1],m=u-this._animLenSoFar,p=m/f;this._animTailRatio=p;var _=v.x+(g.x-v.x)*p,b=v.y+(g.y-v.y)*p;this._tempPrjCoord.x=_,this._tempPrjCoord.y=b;var x=this._tempPrjCoord,C=s[d],y=s[d+1],w=C.x+(y.x-C.x)*p,P=C.y+(y.y-C.y)*p;this._tempCoord.x=w,this._tempCoord.y=P;var T=this._tempCoord,L=!!this.getShell;if(!L&&this.options.smoothness>0){var j=s.slice(0,this._animIdx+3);this.setCoordinates(j);var M=l.slice(0,this._animIdx+3);this._setPrjCoordinates(M)}else{var D=s.slice(0,this._animIdx+1);D.push(T);var R=l.slice(0,this._animIdx+1);R.push(x),L?(this.setCoordinates([this._aniShowCenter].concat(D)),this._setPrjCoordinates([this._prjAniShowCenter].concat(R))):(this.setCoordinates(D),this._setPrjCoordinates(R))}return T},n._getCenterInExtent=function(e,a,o){var s=this.getExtent();if(!e.intersects(s))return null;var l=o(a,e);if(l.length===0)return null;var u=0,f=0,h=0;l.forEach(function(d){Array.isArray(d)?d.forEach(function(v){v.point&&(v=v.point),u+=v.x,f+=v.y,h++}):(d.point&&(d=d.point),u+=d.x,f+=d.y,h++)});var c=new te(u,f)._multi(1/h);return c.count=h,c},n._getPath2DPoints=function(e,a,o){if(!We(e))return[];var s=this.getMap(),l=!a&&this._shouldSimplify(),u=this.options.simplifyTolerance*s._getResolution(),f=Array.isArray(e[0]);if(delete this._simplified,l&&!f){var h=e.length;e=TI(e,u,!1),this._simplified=e.length<h}if(o||(o=s._getResolution()),Array.isArray(e)){var c=[],d="_glPt";if(!Array.isArray(e[0]))return c=fl(e,d),s._prjsToPointsAtRes(e,o,c);for(var v=[],g=0,m=e.length;g<m;g++){var p=e[g];c=fl(p,d);var _=s._prjsToPointsAtRes(p,o,c);v.push(_)}return v}else return s._prjToPointAtRes(e,o)},n._shouldSimplify=function(){var e=this.getLayer(),a=this.getProperties(),o=a&&e.options.enableAltitude&&!N(a[e.options.altitudeProperty])&&a[e.options.altitudeProperty]!==0;return e&&e.options.enableSimplify&&!o&&this.options.enableSimplify&&!this._showPlayer},n._setPrjCoordinates=function(e){this._prjCoords=e,this.onShapeChanged()},n._getPrjCoordinates=function(){return this._verifyProjection(),!this._prjCoords&&this._getProjection()&&(this._prjCoords=this._projectCoords(this._coordinates)),this._prjCoords},n._updateCache=function(){this._clearCache();var e=this._getProjection();!e||this._prjCoords&&(this._coordinates=this._unprojectCoords(this._getPrjCoordinates()))},n._clearProjection=function(){this._prjCoords=null,r.prototype._clearProjection.call(this)},n._projectCoords=function(e){var a=this._getProjection();return a?a.projectCoords(e):[]},n._unprojectCoords=function(e){var a=this._getProjection();return a?a.unprojectCoords(e):[]},n._computeCenter=function(){var e=this._coordinates;if(!We(e))return null;for(var a=0,o=0,s=0,l=e.length,u=0;u<l;u++)e[u]&&be(e[u].x)&&be(e[u].y)&&(a+=e[u].x,o+=e[u].y,s++);return new te(a/s,o/s)},n._computeExtent=function(){var e=this._coordinates;if(!We(e))return null;var a=[e];return this.hasHoles&&this.hasHoles()&&a.push.apply(a,this.getHoles()),this._coords2Extent(a,this._getProjection())},n._computePrjExtent=function(){var e=[this._getPrjCoordinates()];return this.hasHoles&&this.hasHoles()&&e.push.apply(e,this._getPrjHoles()),this._coords2Extent(e)},n._get2DLength=function(){for(var e=this._getPath2DPoints(this._getPrjCoordinates(),!0),a=0,o=1,s=e.length;o<s;o++)a+=e[o].distanceTo(e[o-1]);return a},n._hitTestTolerance=function(){var e=this._getInternalSymbol(),a;if(Array.isArray(e)){a=0;for(var o=0;o<e.length;o++)be(e[o].lineWidth)&&e[o].lineWidth>a&&(a=e[o].lineWidth)}else a=e.lineWidth;return be(a)?a/2:1.5},n._coords2Extent=function(e,a){if(!e||e.length===0||Array.isArray(e[0])&&e[0].length===0)return null;for(var o=new Ye(a),s=0,l=e.length;s<l;s++)for(var u=0,f=e[s].length;u<f;u++)o._combine(e[s][u]);return o},t}(je);Ul.mergeOptions(AD);var Lb="Polygon",it=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,e)||this,a.type="Polygon",i&&a.setCoordinates(i),a}var n=t.prototype;return n.getOutline=function(){var e=this._getPainter();if(!e)return null;var a=this.getExtent();return new t(a.toArray(),{symbol:{lineWidth:1,lineColor:"6b707b"}})},n.setCoordinates=function(e){if(!e)return this._coordinates=null,this._holes=null,this._projectRings(),this;var a=te.toCoordinates(e),o=a.length;if(!Array.isArray(a[0]))this._coordinates=this._trimRing(a);else if(this._coordinates=this._trimRing(a[0]),o>1){for(var s=[],l=1;l<o;l++)!a[l]||s.push(this._trimRing(a[l]));this._holes=s}return this._projectRings(),this},n.getCoordinates=function(){if(!this._coordinates)return[];for(var e=this.getHoles(),a=[this._copyAndCloseRing(this._coordinates)],o=0,s=e.length;o<s;o++)a.push(this._copyAndCloseRing(e[o]));return a},n.getCenterInExtent=function(e){return this._getCenterInExtent(e,this.getShell(),$s)},n.getShell=function(){return this._coordinates||[]},n.getHoles=function(){return this._holes||[]},n.hasHoles=function(){return this.getHoles().length>0},n._projectRings=function(){if(!this.getMap()){this.onShapeChanged();return}this._prjCoords=this._projectCoords(this._coordinates),this._prjHoles=this._projectCoords(this._holes),this.onShapeChanged()},n._setPrjCoordinates=function(e){this._prjCoords=e,this.onShapeChanged()},n._cleanRing=function(e){for(var a=e.length-1;a>=0;a--)e[a]||e.splice(a,1)},n._checkRing=function(e){if(this._cleanRing(e),!e||!We(e))return!1;var a=e[e.length-1],o=!0;return(e[0].x!==a.x||e[0].y!==a.y)&&(o=!1),o},n._trimRing=function(e){var a=this._checkRing(e);return We(e)&&a&&e.splice(e.length-1,1),e},n._copyAndCloseRing=function(e){e=e.slice(0);var a=this._checkRing(e);return We(e)&&!a&&e.push(e[0].copy()),e},n._getPrjShell=function(){return this.getJSONType()===Lb?this._getPrjCoordinates():(this._verifyProjection(),this._getProjection()&&!this._prjShell&&(this._prjShell=this._projectCoords(this.getShell())),this._prjShell)},n._getPrjHoles=function(){var e=this._getProjection();return this._verifyProjection(),e&&!this._prjHoles&&(this._prjHoles=this._projectCoords(this.getHoles())),this._prjHoles},n._computeGeodesicLength=function(e){var a=this.getCoordinates();if(!We(a))return 0;for(var o=0,s=0,l=a.length;s<l;s++)o+=e.measureLength(a[s]);return o},n._computeGeodesicArea=function(e){var a=this.getCoordinates();if(!We(a))return 0;for(var o=e.measureArea(a[0]),s=1,l=a.length;s<l;s++)o-=e.measureArea(a[s]);return o},n._updateCache=function(){r.prototype._updateCache.call(this),this._prjHoles&&(this._holes=this._unprojectCoords(this._getPrjHoles()))},n._clearCache=function(){return delete this._prjShell,r.prototype._clearCache.call(this)},n._clearProjection=function(){this._prjHoles&&(this._prjHoles=null),this._prjShell&&(this._prjShell=null),r.prototype._clearProjection.call(this)},t}(Ul);it.registerJSONType(Lb);function Uc(r){return function(t){re(n,t);function n(){return t.apply(this,arguments)||this}var i=n.prototype;return i.getCoordinates=function(){return this._coordinates},i.setCoordinates=function(a){var o=a instanceof te?a:new te(a);if(o.equals(this._coordinates))return this;if(this._coordinates=o,!this.getMap())return this._dirtyCoords=!0,this.onPositionChanged(),this;var s=this._getProjection();return this._setPrjCoordinates(s.project(this._coordinates)),this},i._getCenter2DPoint=function(a){var o=this.getMap();if(!o)return null;var s=this._getPrjCoordinates();return s?(a||(a=o._getResolution()),o._prjToPointAtRes(s,a)):null},i._getPrjCoordinates=function(){var a=this._getProjection();return this._verifyProjection(),!this._pcenter&&a&&this._coordinates&&(this._pcenter=a.project(this._coordinates)),this._pcenter},i._setPrjCoordinates=function(a){this._pcenter=a,this.onPositionChanged()},i._updateCache=function(){this._clearCache();var a=this._getProjection();this._pcenter&&a&&(this._coordinates=a.unproject(this._pcenter))},i._clearProjection=function(){this._pcenter=null,t.prototype._clearProjection.call(this)},i._computeCenter=function(){return this._coordinates?this._coordinates.copy():null},n}(r)}var Hp=new Ee,RD={symbol:{markerType:"path",markerPath:[{path:"M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z",fill:"#DE3333"}],markerPathWidth:16,markerPathHeight:23,markerWidth:24,markerHeight:34},hitTestForEvent:!1},et=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,e)||this,a.type="Point",i&&a.setCoordinates(i),a}var n=t.prototype;return n.getOutline=function(){var e=this.getCoordinates(),a=this.getContainerExtent(),o=this.getMap().coordToContainerPoint(e);return new t(e,{symbol:{markerType:"square",markerWidth:a.getWidth(),markerHeight:a.getHeight(),markerLineWidth:1,markerLineColor:"6b707b",markerFill:"rgba(0, 0, 0, 0)",markerDx:a.xmin-(o.x-a.getWidth()/2),markerDy:a.ymin-(o.y-a.getHeight()/2)}})},n.setSymbol=function(){var e;delete this._fixedExtent;for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.prototype.setSymbol).call.apply(e,[this].concat(o))},n._getSizeSymbol=function(e){for(var a={},o=!1,s=!1,l=0;l<qu.length;l++){var u=e[qu[l]];N(u)||(!o&&ot(u)&&(o=!0,s=!0),a[qu[l]]=u)}for(var f=0;f<Xu.length;f++){var h=e[Xu[f]];N(h)||(!o&&ot(h)&&(o=!0),a[Xu[f]]=h)}var c;return o?(c=hl(a,this),s&&(c._dynamic=!0)):c=a,c},n._setExternSymbol=function(e){return this._symbol||delete this._fixedExtent,r.prototype._setExternSymbol.call(this,e)},n._isDynamicSize=function(){return this._sizeSymbol&&this._sizeSymbol._dynamic},n._getFixedExtent=function(){if(this._fixedExtent&&!this._isDynamicSize())return this._fixedExtent;this._fixedExtent=this._fixedExtent||new Ee,this._fixedExtent.set(null,null,null,null);var e=this._sizeSymbol;if(!e)return this._fixedExtent;var a=this.getLayer()&&this.getLayer().getRenderer(),o=a&&a.resources,s=this.getTextDesc();if(Array.isArray(e)){Hp.set(0,0,0,0);for(var l=0;l<e.length;l++)!e[l]||this._fixedExtent._combine(gh(Hp,e[l],o,s&&s[l]))}else this._fixedExtent=gh(this._fixedExtent,e,o,s);return this._fixedExtent},n._isVectorMarker=function(){var e=this._getInternalSymbol();return Array.isArray(e)?!1:gl(e)},n._canEdit=function(){var e=this._getInternalSymbol();return Array.isArray(e)?!1:gl(e)||Gc(e)||Wc(e)},n._containsPoint=function(e,a){var o=this.getContainerExtent();return a&&(o=o.expand(a)),o.contains(e)?this.options.hitTestForEvent?r.prototype._containsPoint.call(this,e,a):!0:!1},n._computeExtent=function(){return Bp.call(this,"getCenter")},n._computePrjExtent=function(){return Bp.call(this,"_getPrjCoordinates")},n._computeGeodesicLength=function(){return 0},n._computeGeodesicArea=function(){return 0},n._getSprite=function(e,a){return this._getPainter()?this._getPainter().getSprite(e,a):new Zc(this).getSprite(e,a)},t}(Uc(je));et.mergeOptions(RD);et.registerJSONType("Marker");function Bp(r){var t=this[r]();return t?new Ye(t,t,this._getProjection()):null}var ID={arrowStyle:null,arrowPlacement:"vertex-last"},tt=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,e)||this,a.type="LineString",i&&a.setCoordinates(i),a}var n=t.prototype;return n.getOutline=function(){return it.prototype.getOutline.call(this)},n.setCoordinates=function(e){return e?(this._coordinates=te.toCoordinates(e),this.getMap()?this._setPrjCoordinates(this._projectCoords(this._coordinates)):this.onShapeChanged(),this):(this._coordinates=null,this._setPrjCoordinates(null),this)},n.getCoordinates=function(){return this._coordinates||[]},n.getCenterInExtent=function(e){return this._getCenterInExtent(e,this.getCoordinates(),Bs)},n._computeGeodesicLength=function(e){return e.measureLength(this.getCoordinates())},n._computeGeodesicArea=function(){return 0},t}(Ul);tt.mergeOptions(ID);tt.registerJSONType("LineString");var kD=new Ee,pl=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,e)||this,a.type="GeometryCollection",a.setGeometries(i),a}var n=t.prototype;return n.getContainerExtent=function(e){var a=e||new Ee;return this.forEach(function(o){a._combine(o.getContainerExtent(kD))}),a},n.setGeometries=function(e){for(var a=this._checkGeometries(e||[]),o=this._getSymbol(),s=this.config(),l=a.length-1;l>=0;l--)a[l]._initOptions(s),a[l]._setParent(this),a[l]._setEventParent(this),o&&a[l].setSymbol(o);return this._geometries=a,this.getLayer()&&(this._bindGeometriesToLayer(),this.onShapeChanged()),this},n.getGeometries=function(){return this._geometries||[]},n.forEach=function(e,a){for(var o=this.getGeometries(),s=0,l=o.length;s<l;s++)!o[s]||(a?e.call(a,o[s],s):e(o[s],s));return this},n.filter=function(e,a){if(!e)return new t;var o=[],s=Xe(e),l=s?e:kc(e);return this.forEach(function(u){var f=s?u:sh(u);(a?l.call(a,f):l(f))&&o.push(u)},this),new t(o)},n.translate=function(e){if(!e)return this;if(this.isEmpty())return this;var a=arguments;return this.forEach(function(o){o&&o.translate&&o.translate.apply(o,a)}),this},n.isEmpty=function(){return!We(this.getGeometries())},n.remove=function(){return this.forEach(function(e){e._unbind()}),je.prototype.remove.apply(this,arguments)},n.show=function(){return this.options.visible=!0,this.forEach(function(e){e.show()}),this},n.hide=function(){return this.options.visible=!1,this.forEach(function(e){e.hide()}),this},n.onConfig=function(e){this.forEach(function(a){a.config(e)})},n.getSymbol=function(){var e=r.prototype.getSymbol.call(this);if(!e){var a=[],o=!1;this.forEach(function(s){var l=s.getSymbol();l&&!o&&(o=!0),a.push(s.getSymbol())}),o&&(e={children:a})}return e},n.setSymbol=function(e){if(e&&e.children)this._symbol=null,this.forEach(function(o,s){o.setSymbol(e.children[s])});else{var a=this._prepareSymbol(e);this._symbol=a,this.forEach(function(o){o.setSymbol(a)})}return this.onSymbolChanged(),this},n._setExternSymbol=function(e){return e=this._prepareSymbol(e),this._externSymbol=e,this.forEach(function(a){a._setExternSymbol(e)}),this.onSymbolChanged(),this},n._bindLayer=function(){r.prototype._bindLayer.apply(this,arguments),this._bindGeometriesToLayer()},n._bindGeometriesToLayer=function(){var e=this.getLayer();this.forEach(function(a){a._bindLayer(e)})},n._checkGeometries=function(e){var a="The geometry added to collection is invalid.";if(e&&!Array.isArray(e)){if(e instanceof je)return[e];throw new Error(a)}else{for(var o=0,s=e.length;o<s;o++)if(!this._checkGeo(e[o]))throw new Error(a+" Index: "+o);return e}},n._checkGeo=function(e){return e instanceof je},n._updateCache=function(){this._clearCache(),!this.isEmpty()&&this.forEach(function(e){e&&e._updateCache&&e._updateCache()})},n._removePainter=function(){this._painter&&this._painter.remove(),delete this._painter,this.forEach(function(e){e._removePainter()})},n._computeCenter=function(e){if(!e||this.isEmpty())return null;for(var a=0,o=0,s=0,l=this.getGeometries(),u=0,f=l.length;u<f;u++)if(!!l[u]){var h=l[u]._computeCenter(e);h&&(a+=h.x,o+=h.y,s++)}return s===0?null:new te(a/s,o/s)},n._containsPoint=function(e,a){if(this.isEmpty())return!1;for(var o=this.getGeometries(),s=0,l=o.length;s<l;s++)if(o[s]._containsPoint(e,a))return!0;return!1},n._computeExtent=function(e){return $p.call(this,e,"_computeExtent")},n._computePrjExtent=function(e){return $p.call(this,e,"_computePrjExtent")},n._computeGeodesicLength=function(e){if(!e||this.isEmpty())return 0;for(var a=this.getGeometries(),o=0,s=0,l=a.length;s<l;s++)!a[s]||(o+=a[s]._computeGeodesicLength(e));return o},n._computeGeodesicArea=function(e){if(!e||this.isEmpty())return 0;for(var a=this.getGeometries(),o=0,s=0,l=a.length;s<l;s++)!a[s]||(o+=a[s]._computeGeodesicArea(e));return o},n._exportGeoJSONGeometry=function(){var e=[];if(!this.isEmpty())for(var a=this.getGeometries(),o=0,s=a.length;o<s;o++)!a[o]||e.push(a[o]._exportGeoJSONGeometry());return{type:"GeometryCollection",geometries:e}},n._clearProjection=function(){if(!this.isEmpty())for(var e=this.getGeometries(),a=0,o=e.length;a<o;a++)!e[a]||e[a]._clearProjection()},n._getConnectPoints=function(){var e=this.getExtent(),a=[new te(e.xmin,e.ymax),new te(e.xmax,e.ymin),new te(e.xmin,e.ymin),new te(e.xmax,e.ymax)];return a},n._getExternalResources=function(){if(this.isEmpty())return[];for(var e=this.getGeometries(),a=[],o={},s,l,u,f=0,h=e.length;f<h;f++)if(!!e[f]){s=e[f]._getInternalSymbol(),l=$l(s);for(var c=0,d=l.length;c<d;c++)u=l[c].join(),o[u]||(a.push(l[c]),o[u]=1)}return a},n.startEdit=function(e){var a=this;if(this.isEmpty())return this;e||(e={}),e.symbol&&(this._originalSymbol=this.getSymbol(),this.setSymbol(e.symbol)),this._draggbleBeforeEdit=this.options.draggable,this.config("draggable",!1);for(var o=this.getGeometries(),s=0,l=o.length;s<l;s++)o[s].startEdit(e);return this._editing=!0,this.hide(),setTimeout(function(){a.fire("editstart")},1),this},n.endEdit=function(){if(this.isEmpty())return this;for(var e=this.getGeometries(),a=0,o=e.length;a<o;a++)e[a].endEdit();return this._originalSymbol&&(this.setSymbol(this._originalSymbol),delete this._originalSymbol),this._editing=!1,this.show(),this.config("draggable",this._draggbleBeforeEdit),this.fire("editend"),this},n.isEditing=function(){return!!this._editing},t}(je);pl.registerJSONType("GeometryCollection");function $p(r,t){if(this.isEmpty())return null;for(var n=new Ye,i=this.getGeometries(),e=0,a=i.length;e<a;e++)if(!!i[e]){var o=i[e][t](r);o&&n._combine(o)}return n}var jb=function(r){re(t,r);function t(i,e,a,o){var s;return s=r.call(this,null,o)||this,s.GeometryType=i,s.type=e,s._initData(a),s}var n=t.prototype;return n.getCoordinates=function(){for(var e=[],a=this.getGeometries(),o=0,s=a.length;o<s;o++){var l=a[o];e.push(l.getShell&&l.getJSONType()!=="Polygon"?[l.getShell()]:l.getCoordinates())}return e},n.setCoordinates=function(e){e=e||[];for(var a=[],o=0,s=e.length;o<s;o++){var l=new this.GeometryType(e[o],this.config());a.push(l)}return this.setGeometries(a),this},n._initData=function(e){e=e||[],e.length&&(e[0]instanceof this.GeometryType?this.setGeometries(e):this.setCoordinates(e))},n._checkGeo=function(e){return e instanceof this.GeometryType},n._exportGeoJSONGeometry=function(){var e=this.getCoordinates(),a=te.toNumberArrays(e);return{type:this.getType(),coordinates:a}},t}(pl),ml=function(r){re(t,r);function t(i,e){return r.call(this,et,"MultiPoint",i,e)||this}var n=t.prototype;return n.findClosest=function(e){if(!e)return null;var a=this.getCoordinates(),o=null,s=1/0;return a.forEach(function(l){var u=DD(l,e);u<s&&(o=l,s=u)}),o},t}(jb);ml.registerJSONType("MultiPoint");function DD(r,t){var n=t.x-r.x,i=t.y-r.y;return Math.sqrt(n*n+i*i)}var Nb=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getCenterInExtent=function(e){var a=this.getGeometries(),o=0,s=0,l=0;return a.forEach(function(u){var f=u.getCenterInExtent(e);f&&(o+=f.x*f.count,s+=f.y*f.count,l+=f.count)}),l===0?null:new te(o,s)._multi(1/l)},t}(jb),_l=function(r){re(t,r);function t(n,i){return r.call(this,tt,"MultiLineString",n,i)||this}return t}(Nb);_l.registerJSONType("MultiLineString");var zb=function(r){re(t,r);function t(n,i){return r.call(this,it,"MultiPolygon",n,i)||this}return t}(Nb);zb.registerJSONType("MultiPolygon");var LD={Marker:et,LineString:tt,Polygon:it,MultiPoint:ml,MultiLineString:_l,MultiPolygon:zb},Tr={toGeometry:function(t,n){if(Re(t)&&(t=Oc(t)),Array.isArray(t)){for(var i=[],e=0,a=t.length;e<a;e++){var o=Tr._convert(t[e],n);Array.isArray(o)?xa(i,o):i.push(o)}return i}else{var s=Tr._convert(t,n);return s}},_convert:function(t,n){if(!t||N(t.type))return null;var i=t.type;if(i==="Feature"){var e=t.geometry,a=Tr._convert(e);return a?(a.setId(t.id),a.setProperties(t.properties),n&&n(a),a):null}else if(i==="FeatureCollection"){var o=t.features;return o?Tr.toGeometry(o,n):null}else if(["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(i)>=0){var s=i==="Point"?"Marker":i,l=new LD[s](t.coordinates);return n&&n(l),l}else if(i==="GeometryCollection"){var u=t.geometries;if(!We(u)){var f=new pl;return n&&n(f),f}for(var h=[],c=u.length,d=0;d<c;d++)h.push(Tr._convert(u[d]));var v=new pl(h);return n&&n(v),v}return null}},jD={numberOfShellPoints:60},Bn=function(r){re(t,r),t.fromJSON=function(e){var a=e.feature,o=new t(e.coordinates,e.radius,e.options);return o.setProperties(a.properties),o};function t(i,e,a){var o;return o=r.call(this,null,a)||this,i&&o.setCoordinates(i),o._radius=e,o}var n=t.prototype;return n.getRadius=function(){return this._radius},n.setRadius=function(e){return this._radius=e,this.onShapeChanged(),this},n.getShell=function(){for(var e=this._getMeasurer(),a=this.getCoordinates(),o=this.options.numberOfShellPoints,s=this.getRadius(),l=[],u,f,h,c=0,d=o-1;c<d;c++){u=360*c/d*Math.PI/180,f=s*Math.cos(u),h=s*Math.sin(u);var v=e.locate(a,f,h);l.push(v)}return l.push(l[0]),l},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._containsPoint=function(e,a){var o=this.getMap();if(o.getPitch())return r.prototype._containsPoint.call(this,e,a);var s=o._pointToContainerPoint(this._getCenter2DPoint()),l=this.getSize(),u=N(a)?this._hitTestTolerance():a,f=s.add(l.width/2,l.height/2);return Pb(e,s,f,u)},n._computePrjExtent=function(e){var a=this._getMinMax(e);if(!a)return null;var o=this._getPrjCoordinates(),s=a.map(function(c){return e.project(c)}),l=s[0].x-o.x,u=s[1].x-o.x,f=s[2].y-o.y,h=s[3].y-o.y;return new Ye(o.add(l,f),o.add(u,h))},n._computeExtent=function(e){var a=this._getMinMax(e);return a?new Ye(a[0].x,a[2].y,a[1].x,a[3].y,this._getProjection()):null},n._getMinMax=function(e){if(!e||!this._coordinates||N(this._radius))return null;var a=this._radius,o=e.locate(this._coordinates,-a,0),s=e.locate(this._coordinates,a,0),l=e.locate(this._coordinates,0,a),u=e.locate(this._coordinates,0,-a);return[o,s,l,u]},n._computeGeodesicLength=function(){return N(this._radius)?0:Math.PI*2*this._radius},n._computeGeodesicArea=function(){return N(this._radius)?0:Math.PI*Math.pow(this._radius,2)},n._exportGeoJSONGeometry=function(){var e=te.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:e}},n._toJSON=function(e){var a=this.getCenter(),o=fe({},e);o.geometry=!1;var s=this.toGeoJSON(o);return s.geometry={type:"Polygon"},{feature:s,subType:"Circle",coordinates:[a.x,a.y],radius:this.getRadius()}},t}(Uc(it));Bn.mergeOptions(jD);Bn.registerJSONType("Circle");var ND={numberOfShellPoints:80},ir=function(r){re(t,r),t.fromJSON=function(e){var a=e.feature,o=new t(e.coordinates,e.width,e.height,e.options);return o.setProperties(a.properties),o};function t(i,e,a,o){var s;return s=r.call(this,null,o)||this,i&&s.setCoordinates(i),s.width=e,s.height=a,s}var n=t.prototype;return n.getWidth=function(){return this.width},n.setWidth=function(e){return this.width=e,this.onShapeChanged(),this},n.getHeight=function(){return this.height},n.setHeight=function(e){return this.height=e,this.onShapeChanged(),this},n.getShell=function(){for(var e=this._getMeasurer(),a=this.getCoordinates(),o=this.options.numberOfShellPoints,s=this.getWidth(),l=this.getHeight(),u=[],f=Math.pow(s/2,2)*Math.pow(l/2,2),h=Math.pow(s/2,2),c=Math.pow(l/2,2),d,v,g,m,p=0;p<o;p++){d=360*p/o,v=d*Math.PI/180,g=Math.sqrt(f/(h*Math.pow(Math.tan(v),2)+c)),m=Math.sqrt(f/(c*Math.pow(1/Math.tan(v),2)+h)),d>90&&d<270&&(g*=-1),d>180&&d<360&&(m*=-1);var _=e.locate(a,g,m);u.push(_)}return u},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._containsPoint=function(e,a){var o=this.getMap();if(o.isTransforming())return r.prototype._containsPoint.call(this,e,a);var s=o.getProjection(),l=N(a)?this._hitTestTolerance():a,u=s.projectCoords([this._coordinates,o.locate(this._coordinates,this.getWidth()/2,this.getHeight()/2)]),f=o._prjToContainerPoint(u[0]),h=o._prjToContainerPoint(u[1]);return Pb(e,f,h,l)},n._computePrjExtent=function(){return Bn.prototype._computePrjExtent.apply(this,arguments)},n._computeExtent=function(){return Bn.prototype._computeExtent.apply(this,arguments)},n._getMinMax=function(e){if(!e||!this._coordinates||N(this.width)||N(this.height))return null;var a=this.getWidth(),o=this.getHeight(),s=e.locate(this._coordinates,-a/2,0),l=e.locate(this._coordinates,a/2,0),u=e.locate(this._coordinates,0,-o/2),f=e.locate(this._coordinates,0,o/2);return[s,l,u,f]},n._computeGeodesicLength=function(){if(N(this.width)||N(this.height))return 0;var e=this.width>this.height?this.width:this.height;return 2*Math.PI*e/2-4*Math.abs(this.width-this.height)},n._computeGeodesicArea=function(){return N(this.width)||N(this.height)?0:Math.PI*this.width*this.height/4},n._exportGeoJSONGeometry=function(){var e=te.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:e}},n._toJSON=function(e){var a=fe({},e),o=this.getCenter();a.geometry=!1;var s=this.toGeoJSON(a);return s.geometry={type:"Polygon"},{feature:s,subType:"Ellipse",coordinates:[o.x,o.y],width:this.getWidth(),height:this.getHeight()}},t}(Uc(it));ir.mergeOptions(ND);ir.registerJSONType("Ellipse");var Xi=function(r){re(t,r),t.fromJSON=function(e){var a=e.feature,o=new t(e.coordinates,e.width,e.height,e.options);return o.setProperties(a.properties),o};function t(i,e,a,o){var s;return s=r.call(this,null,o)||this,i&&s.setCoordinates(i),s._width=e,s._height=a,s}var n=t.prototype;return n.getCoordinates=function(){return this._coordinates},n.setCoordinates=function(e){if(this._coordinates=e instanceof te?e:new te(e),!this._coordinates||!this.getMap())return this.onPositionChanged(),this;var a=this._getProjection();return this._setPrjCoordinates(a.project(this._coordinates)),this},n.getWidth=function(){return this._width},n.setWidth=function(e){return this._width=e,this.onShapeChanged(),this},n.getHeight=function(){return this._height},n.setHeight=function(e){return this._height=e,this.onShapeChanged(),this},n.getShell=function(){var e=this._getMeasurer(),a=this._coordinates,o=this.getMap(),s=1,l=-1;if(o){var u=o.getFullExtent();u.left>u.right&&(s=-1),u.bottom>u.top&&(l=1)}var f=[];return f.push(a),f.push(e.locate(a,s*this._width,0)),f.push(e.locate(a,s*this._width,l*this._height)),f.push(e.locate(a,0,l*this._height)),f.push(a),f},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._getPrjCoordinates=function(){var e=this._getProjection();return this._verifyProjection(),!this._pnw&&e&&this._coordinates&&(this._pnw=e.project(this._coordinates)),this._pnw},n._setPrjCoordinates=function(e){this._pnw=e,this.onPositionChanged()},n._getPrjShell=function(){var e=r.prototype._getPrjShell.call(this),a=this._getProjection();if(!a.isSphere())return e;for(var o=a.getSphereExtent(),s=o.sx,l=o.sy,u=this._getProjection().getCircum(),f=e[0],h=1,c=e.length;h<c;h++){var d=e[h],v=0,g=0;s*(f.x-d.x)>0&&(v=u.x*s),l*(f.y-d.y)<0&&(g=u.y*l),e[h]._add(v,g)}return e},n._updateCache=function(){this._clearCache();var e=this._getProjection();this._pnw&&e&&(this._coordinates=e.unproject(this._pnw))},n._clearProjection=function(){this._pnw=null,r.prototype._clearProjection.call(this)},n._computeCenter=function(e){return e.locate(this._coordinates,this._width/2,-this._height/2)},n._containsPoint=function(e,a){var o=this.getMap();if(o.isTransforming())return r.prototype._containsPoint.call(this,e,a);var s=N(a)?this._hitTestTolerance():a,l=o._getResolution()*s,u=this._getPrjExtent().expand(l),f=o._containerPointToPrj(e);return u.contains(f)},n._computePrjExtent=function(e){var a=this._getSouthEast(e);if(!a)return null;var o=e.projectCoords([new te(this._coordinates.x,a.y),new te(a.x,this._coordinates.y)]);return new Ye(o[0],o[1])},n._computeExtent=function(e){var a=this._getSouthEast(e);return a?new Ye(this._coordinates,a,this._getProjection()):null},n._getSouthEast=function(e){if(!e||!this._coordinates||N(this._width)||N(this._height))return null;var a=this.getWidth(),o=this.getHeight(),s=a,l=-o;if(e.fullExtent){var u=e.fullExtent,f=u.right>u.left?1:-1,h=u.top>u.bottom?1:-1;s*=f,l*=h}var c=e.locate(this._coordinates,s,0),d=e.locate(this._coordinates,0,l);return c.y=d.y,c},n._computeGeodesicLength=function(){return N(this._width)||N(this._height)?0:2*(this._width+this._height)},n._computeGeodesicArea=function(){return N(this._width)||N(this._height)?0:this._width*this._height},n._exportGeoJSONGeometry=function(){var e=te.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:e}},n._toJSON=function(e){var a=fe({},e),o=this.getCoordinates();a.geometry=!1;var s=this.toGeoJSON(a);return s.geometry={type:"Polygon"},{feature:s,subType:"Rectangle",coordinates:[o.x,o.y],width:this.getWidth(),height:this.getHeight()}},t}(it);Xi.registerJSONType("Rectangle");var zD={numberOfShellPoints:60},Ta=function(r){re(t,r),t.fromJSON=function(e){var a=e.feature,o=new t(e.coordinates,e.radius,e.startAngle,e.endAngle,e.options);return o.setProperties(a.properties),o};function t(i,e,a,o,s){var l;return l=r.call(this,i,e,s)||this,l.startAngle=a,l.endAngle=o,l}var n=t.prototype;return n.getStartAngle=function(){return this.startAngle},n.setStartAngle=function(e){return this.startAngle=e,this.onShapeChanged(),this},n.getEndAngle=function(){return this.endAngle},n.setEndAngle=function(e){return this.endAngle=e,this.onShapeChanged(),this},n.getShell=function(){for(var e=this._getMeasurer(),a=this.getCoordinates(),o=this.options.numberOfShellPoints-2,s=this.getRadius(),l=[a.copy()],u=this.getStartAngle(),f=this.getEndAngle()-u,h,c,d,v=0;v<o;v++){h=(f*v/(o-1)+u)*Math.PI/180,c=s*Math.cos(h),d=s*Math.sin(h);var g=e.locate(a,c,d);l.push(g)}return l.push(a.copy()),l},n._containsPoint=function(e,a){var o=this.getMap();if(o.isTransforming())return r.prototype._containsPoint.call(this,e,a);var s=o._pointToContainerPoint(this._getCenter2DPoint()),l=N(a)?this._hitTestTolerance():a,u=this.getSize(),f=s,h=e,c=h.x-f.x,d=f.y-h.y,v=Math.atan2(d,c),g=v<0?(v+2*Math.PI)*360/(2*Math.PI):v*360/(2*Math.PI),m=this.startAngle%360,p=this.endAngle%360,_=!1;return m>p?_=!(g>p&&g<m):_=g>=m&&g<=p,h.distanceTo(f)<=u.width/2+l&&_},n._computeGeodesicLength=function(){return N(this._radius)?0:Math.PI*2*this._radius*Math.abs(this.startAngle-this.endAngle)/360+2*this._radius},n._computeGeodesicArea=function(){return N(this._radius)?0:Math.PI*Math.pow(this._radius,2)*Math.abs(this.startAngle-this.endAngle)/360},n._toJSON=function(e){var a=fe({},e),o=this.getCenter();a.geometry=!1;var s=this.toGeoJSON(a);return s.geometry={type:"Polygon"},{feature:s,subType:"Sector",coordinates:[o.x,o.y],radius:this.getRadius(),startAngle:this.getStartAngle(),endAngle:this.getEndAngle()}},t}(Bn);Ta.mergeOptions(zD);Ta.registerJSONType("Sector");var FD={enableSimplify:!1,enableClip:!1},Wo=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._arc=function(e,a,o){for(var s=this.options.arcDegree*Math.PI/180,l=1,u=a.length;l<u;l++){var f=Q._arcBetween(e,a[l-1],a[l],s),h=[a[l-1].x+a[l].x-f[0],a[l-1].y+a[l].y-f[1]];a[l-1].nextCtrlPoint=h,a[l].prevCtrlPoint=h,Q._stroke(e,o)}},n._quadraticCurve=function(e,a){if(a.length<=2){Q._path(e,a);return}var o,s;for(o=2,s=a.length;o<s;o+=2)e.quadraticCurveTo(a[o-1].x,a[o-1].y,a[o].x,a[o].y);if(o-=1,o<s)for(;o<s;o++)e.lineTo(a[o].x,a[o].y)},n._bezierCurve=function(e,a){if(a.length<=3){Q._path(e,a);return}var o,s;for(o=1,s=a.length;o+2<s;o+=3)e.bezierCurveTo(a[o].x,a[o].y,a[o+1].x,a[o+1].y,a[o+2].x,a[o+2].y);if(o<s)for(;o<s;o++)e.lineTo(a[o].x,a[o].y)},n._getCurveArrowPoints=function(e,a,o,s,l,u){var f=a.length,h;for(h=u;h<f;h+=u){var c=this._getArrowShape(a[h-1],a[h],o,s,l);c&&e.push(c)}if(h-=u,h<f-1)for(h+=1;h<f;h++){var d=this._getArrowShape(a[h-1],a[h],o,s,l);d&&e.push(d)}},t}(tt);Wo.mergeOptions(FD);var HD={arcDegree:90},Kl=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"ArcCurve"}},n._paintOn=function(e,a,o){e.beginPath(),this._arc(e,a,o),Q._stroke(e,o),this._paintArrow(e,a,o)},t.fromJSON=function(e){var a=e.feature,o=new t(a.geometry.coordinates,e.options);return o.setProperties(a.properties),o},t}(Wo);Kl.registerJSONType("ArcCurve");Kl.mergeOptions(HD);var Fb=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}t.fromJSON=function(e){var a=e.feature,o=new t(a.geometry.coordinates,e.options);return o.setProperties(a.properties),o};var n=t.prototype;return n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"CubicBezierCurve"}},n._paintOn=function(e,a,o){e.beginPath(),e.moveTo(a[0].x,a[0].y),this._bezierCurve(e,a),Q._stroke(e,o),this._paintArrow(e,a,o)},n._getArrowPoints=function(e,a,o,s,l){return this._getCurveArrowPoints(e,a,o,s,l,3)},t}(Wo);Fb.registerJSONType("CubicBezierCurve");var Hb=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}t.fromJSON=function(e){var a=e.feature,o=new t(a.geometry.coordinates,e.options);return o.setProperties(a.properties),o};var n=t.prototype;return n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"QuadBezierCurve"}},n._paintOn=function(e,a,o){e.beginPath(),e.moveTo(a[0].x,a[0].y),this._quadraticCurve(e,a,o),Q._stroke(e,o),this._paintArrow(e,a,o)},n._getArrowPoints=function(e,a,o,s,l){return this._getCurveArrowPoints(e,a,o,s,l,2)},t}(Wo);Hb.registerJSONType("QuadBezierCurve");var BD={textFaceName:"monospace",textSize:12,textLineSpacing:8,textWrapCharacter:`
`,textHorizontalAlignment:"middle",textVerticalAlignment:"middle"},$D={markerType:"square",markerLineColor:"#000",markerLineWidth:2,markerLineOpacity:1,markerFill:"#fff",markerOpacity:1},Kc=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getContent=function(){return this._content},n.setContent=function(e){var a=this._content;return this._content=Dc(e),this._refresh(),this._fireEvent("contentchange",{old:a,new:e}),this},n.onAdd=function(){this._refresh()},n.toJSON=function(){var e=r.prototype.toJSON.call(this);return delete e.symbol,e},n.setSymbol=function(e){if(this._refreshing||!e)return r.prototype.setSymbol.call(this,e);var a=this._parseSymbol(e);if(this.setTextStyle){var o=this.getTextStyle()||{};o.symbol=a[0],this.setTextStyle(o)}else this.setTextSymbol&&this.setTextSymbol(a[0]);if(this.setBoxStyle){var s=this.getBoxStyle()||{};s.symbol=a[1],this.setBoxStyle(s)}else this.setBoxSymbol&&this.setBoxSymbol(a[1]);return this},n._parseSymbol=function(e){var a={},o={};for(var s in e)Bo(e,s)&&(s.indexOf("text")===0?a[s]=e[s]:o[s]=e[s]);return[a,o]},n._getTextSize=function(e){return q0(this._content,e).size},n._getInternalSymbol=function(){return this._symbol},n._getDefaultTextSymbol=function(){return fe({},BD)},n._getDefaultBoxSymbol=function(){return fe({},$D)},n._getDefaultPadding=function(){return[12,8]},t}(et),WD={textStyle:{wrap:!0,padding:[12,8],verticalAlignment:"middle",horizontalAlignment:"middle"},boxSymbol:null},yl=function(r){re(t,r);function t(i,e,a,o,s){var l;return s===void 0&&(s={}),l=r.call(this,e,s)||this,l._content=Dc(i),l._width=N(a)?100:a,l._height=N(o)?40:o,s.boxSymbol&&l.setBoxSymbol(s.boxSymbol),s.textStyle&&l.setTextStyle(s.textStyle),l._refresh(),l}var n=t.prototype;return n.getWidth=function(){return this._width},n.setWidth=function(e){return this._width=e,this._refresh(),this},n.getHeight=function(){return this._height},n.setHeight=function(e){return this._height=e,this._refresh(),this},n.getBoxSymbol=function(){return fe({},this.options.boxSymbol)},n.setBoxSymbol=function(e){return this.options.boxSymbol=e&&fe({},e),this.getSymbol()&&this._refresh(),this},n.getTextStyle=function(){return this.options.textStyle?fe({},this.options.textStyle):null},n.setTextStyle=function(e){return this.options.textStyle=e&&fe({},e),this.getSymbol()&&this._refresh(),this},t.fromJSON=function(e){var a=e.feature,o=new t(e.content,a.geometry.coordinates,e.width,e.height,e.options);return o.setProperties(a.properties),o.setId(a.id),e.symbol&&o.setSymbol(e.symbol),o},n._toJSON=function(e){return{feature:this.toGeoJSON(e),width:this.getWidth(),height:this.getHeight(),subType:"TextBox",content:this._content}},n._refresh=function(){var e=this.getTextStyle()||{},a=e.padding||[12,8],o=this._width-2*a[0],s=this._height-2*a[1],l=fe({},e.symbol||this._getDefaultTextSymbol(),this.options.boxSymbol||this._getDefaultBoxSymbol(),{textName:this._content,markerWidth:this._width,markerHeight:this._height,textHorizontalAlignment:"middle",textVerticalAlignment:"middle",textMaxWidth:o,textMaxHeight:s});e.wrap&&!l.textWrapWidth&&(l.textWrapWidth=o);var u=e.horizontalAlignment;l.textDx=l.markerDx||0;var f=l.markerWidth/2-a[0];u==="left"?(l.textHorizontalAlignment="right",l.textDx=l.textDx-f):u==="right"&&(l.textHorizontalAlignment="left",l.textDx=l.textDx+f);var h=e.verticalAlignment;l.textDy=l.markerDy||0;var c=l.markerHeight/2-a[1];h==="top"?(l.textVerticalAlignment="bottom",l.textDy-=c):h==="bottom"&&(l.textVerticalAlignment="top",l.textDy+=c),this._refreshing=!0,this.updateSymbol(l),delete this._refreshing},t}(Kc);yl.mergeOptions(WD);yl.registerJSONType("TextBox");var GD={boxStyle:null,textSymbol:null},Ji=function(r){re(t,r);function t(i,e,a){var o;return a===void 0&&(a={}),o=r.call(this,e,a)||this,a.textSymbol&&o.setTextSymbol(a.textSymbol),a.boxStyle&&o.setBoxStyle(a.boxStyle),o._content=Dc(i),o._refresh(),o}var n=t.prototype;return n.getBoxStyle=function(){return this.options.boxStyle?fe({},this.options.boxStyle):null},n.setBoxStyle=function(e){return this.options.boxStyle=e&&fe({},e),this._refresh(),this},n.getTextSymbol=function(){return fe({},this._getDefaultTextSymbol(),this.options.textSymbol)},n.setTextSymbol=function(e){return this.options.textSymbol=e&&fe({},e),this._refresh(),this},t.fromJSON=function(e){var a=e.feature,o=new t(e.content,a.geometry.coordinates,e.options);return o.setProperties(a.properties),o.setId(a.id),e.symbol&&o.setSymbol(e.symbol),o},n._canEdit=function(){return!1},n._toJSON=function(e){return{feature:this.toGeoJSON(e),subType:"Label",content:this._content}},n._refresh=function(){var e=fe({},this.getTextSymbol(),{textName:this._content}),a=this.getBoxStyle();if(a){fe(e,a.symbol);var o=this._getBoxSize(e),s=o[1],l=a.padding||this._getDefaultPadding(),u=o[0];e.markerWidth=u.width,e.markerHeight=u.height;var f=e.textDx||0,h=e.textDy||0,c=ci(s,e.textHorizontalAlignment,e.textVerticalAlignment)._add(f,h),d=a.horizontalAlignment||"middle";e.markerDx=c.x,d==="left"?e.markerDx+=e.markerWidth/2-l[0]:d==="right"?e.markerDx-=e.markerWidth/2-s.width-l[0]:e.markerDx+=s.width/2;var v=a.verticalAlignment||"middle";e.markerDy=c.y,v==="top"?e.markerDy+=e.markerHeight/2-l[1]:v==="bottom"?e.markerDy-=e.markerHeight/2-s.height-l[1]:e.markerDy+=s.height/2}this._refreshing=!0,this.updateSymbol(e),delete this._refreshing},n._getBoxSize=function(e){e.markerType||(e.markerType="square");var a=this.getBoxStyle(),o=this._getTextSize(e),s,l,u=a.padding||this._getDefaultPadding();return s=o.width+u[0]*2,l=o.height+u[1]*2,a.minWidth&&(!s||s<a.minWidth)&&(s=a.minWidth),a.minHeight&&(!l||l<a.minHeight)&&(l=a.minHeight),[new st(s,l),o]},t}(Kc);Ji.mergeOptions(GD);Ji.registerJSONType("Label");var Bb=function(t){return function(n){re(i,n);function i(){return n.apply(this,arguments)||this}i._hasConnectors=function(o){return!N(o.__connectors)&&o.__connectors.length>0},i._getConnectors=function(o){return o.__connectors};var e=i.prototype;return e.getConnectSource=function(){return this._connSource},e.setConnectSource=function(o){var s=this._connTarget;return this.onRemove(),this._connSource=o,this._connTarget=s,this.onAdd(),this},e.getConnectTarget=function(){return this._connTarget},e.setConnectTarget=function(o){var s=this._connSource;return this.onRemove(),this._connSource=s,this._connTarget=o,this._updateCoordinates(),this._registerEvents(),this},e._updateCoordinates=function(){var o=this.getMap();if(!o&&this._connSource&&(o=this._connSource.getMap()),!o&&this._connTarget&&(o=this._connTarget.getMap()),!!o&&!(!this._connSource||!this._connTarget)){for(var s=this._connSource._getConnectPoints(),l=this._connTarget._getConnectPoints(),u=0,f=this.getCoordinates(),h,c,d=0,v=s.length;d<v;d++)for(var g=s[d],m=0,p=l.length;m<p;m++){var _=l[m],b=o.computeLength(g,_);d===0&&m===0?(h=g,c=_,u=b):b<u&&(h=g,c=_)}(!We(f)||!f[0].equals(h)||!f[1].equals(c))&&this.setCoordinates([h,c])}},e.onAdd=function(){this._registerEvents(),this._updateCoordinates()},e.onRemove=function(){if(this._connSource&&(this._connSource.__connectors&&nh(this,this._connSource.__connectors),this._connSource.off("dragging positionchange",this._updateCoordinates,this).off("remove",this.onRemove,this),this._connSource.off("dragstart mousedown mouseover",this._showConnect,this),this._connSource.off("dragend mouseup mouseout",this.hide,this),this._connSource.off("show",this._showConnect,this).off("hide",this.hide,this),delete this._connSource),this._connTarget&&(nh(this,this._connTarget.__connectors),this._connTarget.off("dragging positionchange",this._updateCoordinates,this).off("remove",this.onRemove,this),this._connTarget.off("show",this._showConnect,this).off("hide",this.hide,this),delete this._connTarget),!(this._connSource instanceof je)||!(this._connTarget instanceof je)){var o=this.getMap();o&&o.off("movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange",this._updateCoordinates,this)}},e._showConnect=function(){!this._connSource||!this._connTarget||this._connSource.isVisible()&&this._connTarget.isVisible()&&(this._updateCoordinates(),this.show())},e._registerEvents=function(){if(!(!this._connSource||!this._connTarget)){this._connSource.__connectors||(this._connSource.__connectors=[]),this._connTarget.__connectors||(this._connTarget.__connectors=[]),this._connSource.__connectors.push(this),this._connTarget.__connectors.push(this),this._connSource.on("dragging positionchange",this._updateCoordinates,this).on("remove",this.remove,this),this._connTarget.on("dragging positionchange",this._updateCoordinates,this).on("remove",this.remove,this),this._connSource.on("show",this._showConnect,this).on("hide",this.hide,this),this._connTarget.on("show",this._showConnect,this).on("hide",this.hide,this);var o=this.options.showOn;if(this.hide(),o==="moving"?(this._connSource.on("dragstart",this._showConnect,this).on("dragend",this.hide,this),this._connTarget.on("dragstart",this._showConnect,this).on("dragend",this.hide,this)):o==="click"?(this._connSource.on("mousedown",this._showConnect,this).on("mouseup",this.hide,this),this._connTarget.on("mousedown",this._showConnect,this).on("mouseup",this.hide,this)):o==="mouseover"?(this._connSource.on("mouseover",this._showConnect,this).on("mouseout",this.hide,this),this._connTarget.on("mouseover",this._showConnect,this).on("mouseout",this.hide,this)):this._showConnect(),!(this._connSource instanceof je)||!(this._connTarget instanceof je)){var s=this.getMap();s&&s.on("movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange",this._updateCoordinates,this)}}},i}(t)},$b={showOn:"always"},bl=function(r){re(t,r);function t(n,i,e){var a;return a=r.call(this,null,e)||this,arguments.length===1&&(e=n,n=null,i=null),a._connSource=n,a._connTarget=i,a}return t}(Bb(tt));bl.mergeOptions($b);bl.registerJSONType("ConnectorLine");var Wb=function(r){re(t,r);function t(n,i,e){var a;return a=r.call(this,null,e)||this,arguments.length===1&&(e=n,n=null,i=null),a._connSource=n,a._connTarget=i,a}return t}(Bb(Kl));Wb.mergeOptions($b);Wb.registerJSONType("ArcConnectorLine");var VD={drawImmediate:!1},Gb=function(r){re(t,r);function t(i,e,a){var o;e&&!(e instanceof je)&&!Array.isArray(e)&&OI.indexOf(e.type)<0&&(a=e,e=null),o=r.call(this,i,a)||this,o._maxZIndex=0,o._minZIndex=0,o._initCache(),e&&o.addGeometry(e);var s=o.options.style;return s&&o.setStyle(s),o}var n=t.prototype;return n.getGeometryById=function(e){return N(e)||e===""||!this._geoMap[e]?null:this._geoMap[e]},n.getGeometries=function(e,a){if(!e)return this._geoList.slice(0);for(var o=[],s,l,u=0,f=this._geoList.length;u<f;u++)s=this._geoList[u],a?l=e.call(a,s):l=e(s),l&&o.push(s);return o},n.getFirstGeometry=function(){return this._geoList.length?this._geoList[0]:null},n.getLastGeometry=function(){var e=this._geoList.length;return e===0?null:this._geoList[e-1]},n.getCount=function(){return this._geoList.length},n.getExtent=function(){if(this.getCount()===0)return null;var e=new Ye(this.getProjection());return this.forEach(function(a){e._combine(a.getExtent())}),e},n.forEach=function(e,a){for(var o=this._geoList.slice(0),s=0,l=o.length;s<l;s++)a?e.call(a,o[s],s):e(o[s],s);return this},n.filter=function(e,a){var o=[],s=Xe(e),l=s?e:kc(e);return this.forEach(function(u){var f=s?u:sh(u);(a?l.call(a,f):l(f))&&o.push(u)},this),o},n.isEmpty=function(){return!this._geoList.length},n.addGeometry=function(e,a){if(!e)return this;if(e.type==="FeatureCollection")return this.addGeometry(Tr.toGeometry(e),a);if(Array.isArray(e)){if(e.length===0)return this}else{var o=arguments.length,s=arguments[o-1];return e=Array.prototype.slice.call(arguments,0,o-1),a=s,s&&Pn(s)&&("type"in s||s instanceof je)&&(e.push(s),a=!1),this.addGeometry(e,a)}this._initCache();var l;a&&(l=new Ye),this._toSort=this._maxZIndex>0;for(var u=[],f=0,h=e.length;f<h;f++){var c=e[f];if(!c)throw new Error("Invalid geometry to add to layer("+this.getId()+") at index:"+f);if(!(c instanceof je)&&(c=je.fromJSON(c),Array.isArray(c)))for(var d=0,v=c.length;d<v;d++)this._add(c[d],l,f),u.push(c[d]);Array.isArray(c)||(this._add(c,l,f),u.push(c))}var g=this.getMap();if(g&&(this._getRenderer().onGeometryAdd(u),l&&!N(l.xmin))){var m=l.getCenter(),p=g.getFitZoom(l);if(Pn(a)){var _=Xe(a.step)?a.step:function(){};g.animateTo({center:m,zoom:p},fe({duration:g.options.zoomAnimationDuration,easing:"out"},a),_)}else a===!0&&g.setCenterAndZoom(m,p)}return this.fire("addgeo",{geometries:e}),this},n.getGeoMinZIndex=function(){return this._minZIndex},n.getGeoMaxZIndex=function(){return this._maxZIndex},n._add=function(e,a,o){this._toSort||(this._toSort=e.getZIndex()!==0),this._updateZIndex(e.getZIndex());var s=e.getId();if(!N(s)){if(!N(this._geoMap[s]))throw new Error("Duplicate geometry id in layer("+this.getId()+"):"+s+", at index:"+o);this._geoMap[s]=e}var l=ba();e._setInternalId(l),this._geoList.push(e),this.onAddGeometry(e),e._bindLayer(this),e.onAdd&&e.onAdd(),a&&a._combine(e.getExtent()),e._fireEvent("add",{layer:this}),this._cookedStyles&&this._styleGeometry(e)},n.removeGeometry=function(e){if(!Array.isArray(e))return this.removeGeometry([e]);for(var a=e.length-1;a>=0;a--)e[a]instanceof je||(e[a]=this.getGeometryById(e[a])),!(!e[a]||this!==e[a].getLayer())&&e[a].remove();return this.fire("removegeo",{geometries:e}),this},n.clear=function(){this._clearing=!0,this.forEach(function(o){o.remove()}),this._geoMap={};var e=this._geoList;this._geoList=[];var a=this._getRenderer();return a&&(a.onGeometryRemove(e),a.clearImageData&&a.clearImageData()),this._clearing=!1,this.fire("clear"),this},n.onRemoveGeometry=function(e){if(!(!e||this._clearing)&&this===e.getLayer()){var a=e._getInternalId();if(!N(a)){var o=e.getId();N(o)||delete this._geoMap[o];var s=this._findInList(e);s>=0&&this._geoList.splice(s,1),this._getRenderer()&&this._getRenderer().onGeometryRemove([e])}}},n.getStyle=function(){return this.options.style?this.options.style:null},n.setStyle=function(e){return this.options.style=e,e=fk(e),this._cookedStyles=V0(e),this.forEach(function(a){this._styleGeometry(a)},this),this.fire("setstyle",{style:e}),this},n._styleGeometry=function(e){if(!this._cookedStyles)return!1;for(var a=sh(e),o=0,s=this._cookedStyles.length;o<s;o++)if(this._cookedStyles[o].filter(a)===!0)return e._setExternSymbol(this._cookedStyles[o].symbol),!0;return!1},n.removeStyle=function(){return this.options.style?(delete this.options.style,delete this._cookedStyles,this.forEach(function(e){e._setExternSymbol(null)},this),this.fire("removestyle"),this):this},n.onAddGeometry=function(e){var a=this.getStyle();a&&this._styleGeometry(e)},n.hide=function(){for(var e=0,a=this._geoList.length;e<a;e++)this._geoList[e].onHide();return kt.prototype.hide.call(this)},n._initCache=function(){this._geoList||(this._geoList=[],this._geoMap={})},n._updateZIndex=function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];this._maxZIndex=Math.max(this._maxZIndex,Math.max.apply(Math,a)),this._minZIndex=Math.min(this._minZIndex,Math.min.apply(Math,a))},n._sortGeometries=function(){var e=this;!this._toSort||(this._maxZIndex=0,this._minZIndex=0,this._geoList.sort(function(a,o){return e._updateZIndex(a.getZIndex(),o.getZIndex()),e._compare(a,o)}),this._toSort=!1)},n._compare=function(e,a){return e.getZIndex()===a.getZIndex()?e._getInternalId()-a._getInternalId():e.getZIndex()-a.getZIndex()},n._findInList=function(e){var a=this._geoList.length;if(a===0)return-1;this._sortGeometries();for(var o=0,s=a-1,l;o<=s;){if(l=Math.floor((o+s)/2),this._geoList[l]===e)return l;this._compare(this._geoList[l],e)>0?s=l-1:o=l+1}return-1},n._onGeometryEvent=function(e){if(!(!e||!e.target)){var a=e.type;a==="idchange"?this._onGeometryIdChange(e):a==="zindexchange"?this._onGeometryZIndexChange(e):a==="positionchange"?this._onGeometryPositionChange(e):a==="shapechange"?this._onGeometryShapeChange(e):a==="symbolchange"?this._onGeometrySymbolChange(e):a==="show"?this._onGeometryShow(e):a==="hide"?this._onGeometryHide(e):a==="propertieschange"&&this._onGeometryPropertiesChange(e)}},n._onGeometryIdChange=function(e){if(!(e.new===e.old&&this._geoMap[e.old]&&this._geoMap[e.old]===e.target)){if(!N(e.new)){if(this._geoMap[e.new])throw new Error("Duplicate geometry id in layer("+this.getId()+"):"+e.new);this._geoMap[e.new]=e.target}!N(e.old)&&e.new!==e.old&&delete this._geoMap[e.old]}},n._onGeometryZIndexChange=function(e){e.old!==e.new&&(this._updateZIndex(e.new),this._toSort=!0,this._getRenderer()&&this._getRenderer().onGeometryZIndexChange(e))},n._onGeometryPositionChange=function(e){this._getRenderer()&&this._getRenderer().onGeometryPositionChange(e)},n._onGeometryShapeChange=function(e){this._getRenderer()&&this._getRenderer().onGeometryShapeChange(e)},n._onGeometrySymbolChange=function(e){this._getRenderer()&&this._getRenderer().onGeometrySymbolChange(e)},n._onGeometryShow=function(e){this._getRenderer()&&this._getRenderer().onGeometryShow(e)},n._onGeometryHide=function(e){this._getRenderer()&&this._getRenderer().onGeometryHide(e)},n._onGeometryPropertiesChange=function(e){this._getRenderer()&&this._getRenderer().onGeometryPropertiesChange(e)},t}(kt);Gb.mergeOptions(VD);var ZD=new Ee,UD={debug:!1,enableSimplify:!0,geometryEvents:!0,defaultIconSize:[20,20],cacheVectorOnCanvas:!0,cacheSvgOnCanvas:De.gecko,enableAltitude:!1,altitudeProperty:"altitude",drawAltitude:!1,sortByDistanceToCamera:!1,roundPoint:!1,altitude:0,clipBBoxBufferSize:3},$n=function(r){re(t,r);function t(i,e,a){return r.call(this,i,e,a)||this}var n=t.prototype;return n.onConfig=function(e){if(r.prototype.onConfig.call(this,e),e.enableAltitude||e.drawAltitude||e.altitudeProperty){var a=this.getRenderer();a&&a.setToRedraw&&a.setToRedraw()}},n.identify=function(e,a){a===void 0&&(a={});var o=this.getRenderer();e instanceof te||(e=new te(e));var s=this.getMap().coordToContainerPoint(e);return a.onlyVisible&&o&&o.identifyAtPoint?o.identifyAtPoint(s,a):this._hitGeos(this._geoList,s,a)},n.identifyAtPoint=function(e,a){a===void 0&&(a={});var o=this.getRenderer();return e instanceof B||(e=new B(e)),a.onlyVisible&&o&&o.identifyAtPoint?o.identifyAtPoint(e,a):this._hitGeos(this._geoList,e,a)},n._hitGeos=function(e,a,o){o===void 0&&(o={});var s=o.filter,l=o.tolerance,u=[],f=this.getMap(),h=this.getRenderer(),c=h&&h.getImageData&&h.getImageData();if(c){var d=f.getDevicePixelRatio();c.r=d;var v=Math.round(a.x*d),g=Math.round(a.y*d),m=g*c.width*4+v*4;if(c.data[m+3]===0)return u}for(var p=e.length-1;p>=0;p--){var _=e[p];if(!(!_||!_.isVisible()||!_._getPainter()||!_.options.interactive)){if(!(_ instanceof tt)||!_._getArrowStyle()&&!(_ instanceof Wo)){var b=_.getContainerExtent(ZD);if(l&&(b=b._expand(l)),!b||!b.contains(a))continue}if(_._containsPoint(a,l)&&(!s||s(_))&&(u.push(_),o.count&&u.length>=o.count))break}}return u},n.getAltitude=function(){return this.options.altitude||0},n.toJSON=function(e){e||(e={});var a={type:this.getJSONType(),id:this.getId(),options:this.config()};if(N(e.geometries)||e.geometries){var o;if(e.clipExtent){var s=this.getMap(),l=s?s.getProjection():null;o=new Ye(e.clipExtent,l)}for(var u=[],f=this.getGeometries(),h=0,c=f.length;h<c;h++){var d=f[h],v=d.getExtent();if(!(!v||o&&!o.intersects(v))){var g=d.toJSON(e.geometries);u.push(g)}}a.geometries=u}return a},t.fromJSON=function(e){if(!e||e.type!=="VectorLayer")return null;for(var a=new t(e.id,e.options),o=e.geometries,s=[],l=0;l<o.length;l++){var u=je.fromJSON(o[l]);u&&s.push(u)}return a.addGeometry(s),a},t.getPainterClass=function(){return Zc},t.getCollectionPainterClass=function(){return kb},t}(Gb);$n.mergeOptions(UD);$n.registerJSONType("VectorLayer");var Ms="_map_tool",Wp=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addTo=function(e){return e?(this._map=e,e[Ms]&&e[Ms].disable(),this.onAdd&&this.onAdd(),this.enable(),e[Ms]=this,this._fireEvent("add"),this):this},n.getMap=function(){return this._map},n.enable=function(){var e=this._map;return!e||this._enabled?this:(this._enabled=!0,this._switchEvents("off"),this._registerEvents(),this.onEnable&&this.onEnable(),this._fireEvent("enable"),this)},n.disable=function(){return!this._enabled||!this._map?this:(this._enabled=!1,this._switchEvents("off"),this.onDisable&&this.onDisable(),this._fireEvent("disable"),this)},n.isEnabled=function(){return!!this._enabled},n.remove=function(){return this._map?(this.disable(),this._map&&(delete this._map[Ms],delete this._map),this._fireEvent("remove"),this):this},n._registerEvents=function(){this._switchEvents("on")},n._switchEvents=function(e){var a=this.getEvents();a&&this._map[e](a,this)},n._fireEvent=function(e,a){a||(a={}),this.fire(e,a)},t}(fr(_n)),KD={symbol:{lineColor:"#000",lineWidth:2,lineOpacity:1,polygonFill:"#fff",polygonOpacity:.3},doubleClickZoom:!1,mode:null,once:!1,autoPanAtEdge:!1,ignoreMouseleave:!0,blockGeometryEvents:!1},Gp={},xt=function(r){re(t,r),t.registerMode=function(e,a){Gp[e.toLowerCase()]=a},t.getRegisterMode=function(e){return Gp[e.toLowerCase()]};function t(i){var e;return e=r.call(this,i)||this,e._checkMode(),e._events={click:e._clickHandler,"mousemove touchmove":e._mouseMoveHandler,dblclick:e._doubleClickHandler,"mousedown touchstart":e._mouseDownHandler,"mouseup touchend":e._mouseUpHandler,mousemove:e._mouseMoveHandler,mousedown:e._mouseDownHandler,mouseup:e._mouseUpHandler},e}var n=t.prototype;return n.getMode=function(){return this.options.mode?this.options.mode.toLowerCase():null},n.setMode=function(e){return this._geometry&&(this._geometry.remove(),delete this._geometry),this._clearStage(),this._switchEvents("off"),this.options.mode=e,this._checkMode(),this.isEnabled()&&(this._switchEvents("on"),this._restoreMapCfg(),this._saveMapCfg()),this},n.getSymbol=function(){var e=this.options.symbol;return jn(e||this.options.symbol)},n.setSymbol=function(e){return e?(this.options.symbol=e,this._geometry&&this._geometry.setSymbol(e),this):this},n.getCurrentGeometry=function(){return this._geometry},n.onAdd=function(){this._checkMode()},n.onEnable=function(){this._saveMapCfg(),this._drawToolLayer=this._getDrawLayer(),this._clearStage(),this._loadResources();var e=this.getMap();return this.options.autoPanAtEdge&&(this._mapAutoPanAtEdge=e.options.autoPanAtEdge,this._mapAutoPanAtEdge||e.config({autoPanAtEdge:!0})),this._geometryEvents=e.options.geometryEvents,this.options.blockGeometryEvents&&e.config("geometryEvents",!1),this},n.onDisable=function(){var e=this.getMap();return this._restoreMapCfg(),this.endDraw(),this._map&&(e.removeLayer(this._getDrawLayer()),this.options.autoPanAtEdge&&(this._mapAutoPanAtEdge||e.config({autoPanAtEdge:!1}))),this.options.blockGeometryEvents&&e.config("geometryEvents",this._geometryEvents),this},n.undo=function(){var e=this._getRegisterMode(),a=e.action;if(!this._shouldRecordHistory(a)||!this._historyPointer)return this;var o=this._clickCoords.slice(0,--this._historyPointer);return e.update(this.getMap().getProjection(),o,this._geometry),this},n.redo=function(){var e=this._getRegisterMode(),a=e.action;if(!this._shouldRecordHistory(a)||N(this._historyPointer)||this._historyPointer===this._clickCoords.length)return this;var o=this._clickCoords.slice(0,++this._historyPointer);return e.update(this.getMap().getProjection(),o,this._geometry),this},n._shouldRecordHistory=function(e){return Array.isArray(e)&&e[0]==="click"&&e[1]==="mousemove"&&e[2]==="dblclick"},n._checkMode=function(){this._getRegisterMode()},n._saveMapCfg=function(){var e=this.getMap();this._mapDoubleClickZoom=e.options.doubleClickZoom,e.config({doubleClickZoom:this.options.doubleClickZoom});for(var a=this._getRegisterMode().action,o=!1,s=0;s<a.length;s++)if(a[s].indexOf("mousedown")>=0||a[s].indexOf("touchstart")>=0){o=!0;break}if(o){var l=this.getMap();this._mapDraggable=l.options.draggable,l.config({draggable:!1})}},n._restoreMapCfg=function(){var e=this.getMap();e.config({doubleClickZoom:this._mapDoubleClickZoom}),N(this._mapDraggable)||e.config("draggable",this._mapDraggable),delete this._mapDraggable,delete this._mapDoubleClickZoom},n._loadResources=function(){var e=this.getSymbol(),a=$l(e);a.length>0&&this._drawToolLayer._getRenderer().loadResources(a)},n._getProjection=function(){return this._map.getProjection()},n._getRegisterMode=function(){var e=this.getMode(),a=t.getRegisterMode(e);if(!a)throw new Error(e+" is not a valid mode of DrawTool.");return a},n.getEvents=function(){var e=this._getRegisterMode().action,a={};if(Array.isArray(e)){for(var o=0;o<e.length;o++)a[e[o]]=this._events[e[o]];return a}return null},n._mouseDownHandler=function(e){this._createGeometry(e)},n._mouseUpHandler=function(e){this.endDraw(e)},n._clickHandler=function(e){var a=this._getRegisterMode();if(this._clickCoords&&this._clickCoords.length){var o=this._clickCoords.length,s=this.getMap()._pointToPrj(e.point2d);if(this._clickCoords[o-1].equals(s))return}if(!this._geometry)this._createGeometry(e);else{var l=this.getMap()._pointToPrj(e.point2d);N(this._historyPointer)||(this._clickCoords=this._clickCoords.slice(0,this._historyPointer)),this._clickCoords.push(l),this._historyPointer=this._clickCoords.length,e.drawTool=this,a.update(this.getMap().getProjection(),this._clickCoords,this._geometry,e),this._clickCoords.length<=1?this._fireEvent("drawstart",e):this._fireEvent("drawvertex",e),a.clickLimit&&a.clickLimit===this._historyPointer&&this.endDraw(e)}},n._createGeometry=function(e){var a=this.getMode(),o=this._getRegisterMode(),s=this.getMap()._pointToPrj(e.point2d),l=this.getSymbol();this._geometry||(this._clickCoords=[s],e.drawTool=this,this._geometry=o.create(this.getMap().getProjection(),this._clickCoords,e),l&&a!=="point"?this._geometry.setSymbol(l):this.options.hasOwnProperty("symbol")&&this._geometry.setSymbol(this.options.symbol),this._addGeometryToStage(this._geometry),this._fireEvent("drawstart",e)),a==="point"&&this.endDraw(e)},n._mouseMoveHandler=function(e){var a=this.getMap();if(!(!this._geometry||!a||a.isInteracting())){var o=this._getMouseContainerPoint(e);if(!!this._isValidContainerPoint(o)){var s=this.getMap()._pointToPrj(e.point2d),l=a.getProjection();e.drawTool=this;var u=this._getRegisterMode();if(this._shouldRecordHistory(u.action)){var f=this._clickCoords.slice(0,this._historyPointer);if(f&&f.length>0&&s.equals(f[f.length-1]))return;u.update(l,f.concat([s]),this._geometry,e)}else u.update(l,s,this._geometry,e);this._fireEvent("mousemove",e)}}},n._doubleClickHandler=function(e){if(!!this._geometry){var a=this._getMouseContainerPoint(e);if(!!this._isValidContainerPoint(a)){var o=this._getRegisterMode(),s=this._clickCoords;if(!(s.length<2)){var l=this.getMode();if(!(l&&l.indexOf("polygon")>-1&&s.length<3)){for(var u=this.getMap().getProjection(),f=[s[0]],h=1,c=s.length;h<c;h++)(s[h].x!==s[h-1].x||s[h].y!==s[h-1].y)&&f.push(s[h]);f.length<2||this._geometry&&this._geometry instanceof it&&f.length<3||(e.drawTool=this,o.update(u,f,this._geometry,e),this.endDraw(e))}}}}},n._addGeometryToStage=function(e){var a=this._getDrawLayer();a.addGeometry(e)},n.endDraw=function(e){if(!this._geometry||this._ending)return this;this._ending=!0;var a=this._geometry;return this._clearStage(),e=e||{},this._geometry=a,this._fireEvent("drawend",e),delete this._geometry,this.options.once&&this.disable(),delete this._ending,delete this._historyPointer,this},n._clearStage=function(){this._getDrawLayer().clear(),delete this._geometry,delete this._clickCoords},n._getMouseContainerPoint=function(e){var a=this._getRegisterMode().action;return(a[0].indexOf("mousedown")>=0||a[0].indexOf("touchstart")>=0)&&Jt(e.domEvent),e.containerPoint},n._isValidContainerPoint=function(e){var a=this._map.getSize(),o=a.width,s=a.height;return e.x<0||e.y<0?!1:!(e.x>o||e.y>s)},n._getDrawLayer=function(){var e=Ho+"drawtool",a=this._map.getLayer(e);return a||(a=new $n(e,{enableSimplify:!1}),this._map.addLayer(a)),a},n._fireEvent=function(e,a){a||(a={}),this._geometry&&(a.geometry=this._getRegisterMode().generate(this._geometry,{drawTool:this})),Wp.prototype._fireEvent.call(this,e,a)},t}(Wp);xt.mergeOptions(KD);var YD=function(r){re(t,r);function t(i){var e;return e=r.call(this,i)||this,e.drawTool=new xt({mode:"boxZoom",ignoreMouseleave:!1}),e}var n=t.prototype;return n.addHooks=function(){this.target.on("_mousedown",this._onMouseDown,this)},n.removeHooks=function(){this.target.off("_mousedown",this._onMouseDown,this),this.drawTool.isEnabled()&&this.drawTool.remove()},n._onMouseDown=function(e){!this.target.options.boxZoom||e.domEvent.shiftKey&&this.drawTool.setSymbol(this.target.options.boxZoomSymbol).on("drawend",this._boxZoom,this).addTo(this.target)},n._boxZoom=function(e){var a=this.target;this.drawTool.remove();var o=e.geometry,s=o.getCenter(),l=o.getSymbol(),u=l.markerWidth,f=l.markerHeight,h=new Ye(s,a.locateByPoint(s,u,f),a.getProjection()),c=a.getFitZoom(h);a._animateTo({center:h.getCenter(),zoom:c})},t}(En);Te.mergeOptions({boxZoom:!0,boxZoomSymbol:{markerType:"rectangle",markerLineWidth:3,markerLineColor:"#1bbc9b",markerLineDasharray:[10,5],markerFillOpacity:.1,markerFill:"#1bbc9b",markerWidth:1,markerHeight:1}});Te.addOnLoadHook("addHandler","boxZoom",YD);var _r=30,qD=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.addHooks=function(){!this.target||this.target.on("_mousemove",this._onMouseMove,this)},n.removeHooks=function(){!this.target||this.target.off("_mousemove",this._onMouseMove,this)},n._onMouseMove=function(e){var a=this.target;if(a.options.autoPanAtEdge){var o=e.containerPoint,s=a.getContainerExtent();if(s){var l=o.x,u=o.y,f=s.xmax,h=s.ymax,c;l<_r&&(c=[Math.abs(l-_r),0]),u<_r&&(c=[0,Math.abs(u-_r)]),l+_r>f&&(c=[-Math.abs(l+_r-f),0]),u+_r>h&&(c=[0,-Math.abs(u+_r-h)]),c&&a.panBy(c,{duration:1})}}},t}(En);Te.mergeOptions({autoPanAtEdge:!1});Te.addOnLoadHook("addHandler","autoPanAtEdge",qD);Te.include({animateTo:function(t,n,i){var e=this;n===void 0&&(n={}),Xe(n)&&(i=n,n={});var a=this.getProjection(),o=this.getView(),s={},l=!0;for(var u in t)if(Bo(t,u)&&!N(t[u])&&(u==="prjCenter"||!N(o[u])))if(l=!1,u==="center"){var f=new te(o[u]).toFixed(7),h=new te(t[u]).toFixed(7);f.equals(h)||(s.center=[f,h])}else if(u==="prjCenter"){var c=new te(this._getPrjCenter()),d=new te(t[u]);c.equals(d)||(s.prjCenter=[c,d])}else o[u]!==t[u]&&u!=="around"&&(s[u]=[o[u],t[u]]);if(l)return null;this._animPlayer&&(this._isInternalAnimation?this._animPlayer.playState==="running"&&(this._animPlayer.pause(),this._prevAnimPlayer=this._animPlayer):(delete this._prevAnimPlayer,this._stopAnim(this._animPlayer)));var v=t.around||new B(this.width/2,this.height/2),g=this._getRenderer(),m=function(b){g.callInNextFrame(b)},p=this._animPlayer=Pt.animate(s,{easing:n.easing||"out",duration:n.duration||this.options.zoomAnimationDuration,framer:m},function(_){if(e.isRemoved()){p.finish();return}if(p.playState==="running"){if(_.styles.center){var b=_.styles.center;e._setPrjCenter(a.project(b)),e.onMoving(e._parseEventFromCoord(e.getCenter()))}else if(_.styles.prjCenter){var x=_.styles.prjCenter;e._setPrjCenter(x),e.onMoving(e._parseEventFromCoord(e.getCenter()))}N(_.styles.zoom)||e.onZooming(_.styles.zoom,v),N(_.styles.pitch)||e._setPitch(_.styles.pitch),N(_.styles.bearing)||e._setBearing(_.styles.bearing),e._fireEvent("animating")}else(p.playState!=="paused"||p===e._mapAnimPlayer)&&(p._interupted||(s.center?e._setPrjCenter(a.project(s.center[1])):s.prjCenter&&e._setPrjCenter(s.prjCenter[1]),N(s.pitch)||e._setPitch(s.pitch[1]),N(s.bearing)||e._setBearing(s.bearing[1])),e._endAnim(p,s,v,n));i&&i(_)},this);return this._startAnim(s,v),p},_animateTo:function(t,n,i){return n===void 0&&(n={}),this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._isInternalAnimation=!0,this._mapAnimPlayer=this.animateTo(t,n,i),delete this._isInternalAnimation,this._mapAnimPlayer},flyTo:function(t,n,i){var e=this;n===void 0&&(n={}),this._animPlayer&&(this._isInternalAnimation?this._animPlayer.playState==="running"&&(this._animPlayer.pause(),this._prevAnimPlayer=this._animPlayer):(delete this._prevAnimPlayer,this._stopAnim(this._animPlayer))),Xe(n)&&(i=n,n={}),n=fe({curve:1.42},n);var a=this;function o(W,ne){return a.getResolution(ne)/a.getResolution(W)}var s=t.around||new B(this.width/2,this.height/2),l=this.getMinZoom(),u=this.getMaxZoom(),f=this.getProjection(),h=this.getView(),c=h.zoom,d=h.bearing,v=h.pitch,g="zoom"in t?ih(+t.zoom,l,u):c,m="bearing"in t?+t.bearing:d,p="pitch"in t?+t.pitch:v,_=f.project(t.center&&new te(t.center)||this.getCenter()),b=o(g,c),x=f.project(this.getCenter()),C=_.sub(x),y=n.curve,w=Math.max(this.width,this.height),P=w/b,T=C.mag();if("minZoom"in n){var L=ih(Math.min(n.minZoom,c,g),l,u),j=w/o(L,c);y=Math.sqrt(j/T*2)}var M=y*y;function D(W){var ne=(P*P-w*w+(W?-1:1)*M*M*T*T)/(2*(W?P:w)*M*T);return Math.log(Math.sqrt(ne*ne+1)-ne)}function R(W){return(Math.exp(W)-Math.exp(-W))/2}function I(W){return(Math.exp(W)+Math.exp(-W))/2}function z(W){return R(W)/I(W)}var F=D(0),O=function(ne){return I(F)/I(F+y*ne)},A=function(ne){return w*((I(F)*z(F+y*ne)-R(F))/M)/T},$=(D(1)-F)/y;if(Math.abs(T)<1e-6||!isFinite($)){if(Math.abs(w-P)<1e-6)return this.animateTo(t,n,i);var J=P<w?-1:1;$=Math.abs(Math.log(P/w))/y,A=function(){return 0},O=function(ne){return Math.exp(J*y*ne)}}var Z=this._getRenderer(),ae=function(ne){Z.callInNextFrame(ne)},U=this._animPlayer=Pt.animate({k:[0,1]},{easing:n.easing||"out",duration:n.duration||8,framer:ae},function(W){if(e.isRemoved()){U.finish();return}var ne=W.styles.k,de=ne*$,ge=1/O(de),ve={};if(t.center){var ce=ne===1?_:x.add(C.multi(A(de)));ve.prjCenter=[_,ce]}if(c!==g){var Me=ne===1?g:e.getZoomForScale(ge,c,!0);ve.zoom=[c,Me]}if(v!==p){var Ce=Vp(v,p,ne);ve.pitch=[p,Ce]}if(d!==m){var S=Vp(d,m,ne);ve.bearing=[m,S]}if(U.playState==="running"){if(ve.prjCenter){var k=ve.prjCenter;e._setPrjCenter(k[1]),e.onMoving(e._parseEventFromCoord(e.getCenter()))}ve.zoom&&e.onZooming(ve.zoom[1],s),ve.pitch&&e._setPitch(ve.pitch[1]),ve.bearing&&e._setBearing(ve.bearing[1]),e._fireEvent("animating")}else(U.playState!=="paused"||U===e._mapAnimPlayer)&&(U._interupted||(ve.prjCenter&&e._setPrjCenter(ve.prjCenter[1]),ve.pitch&&e._setPitch(ve.pitch[1]),ve.bearing&&e._setBearing(ve.bearing[1])),e._endAnim(U,ve,s,n));i&&i(W)});return this._startAnim({center:t.center,zoom:t.zoom!==c,pitch:p!==v,bearing:m!==d},s),this},isAnimating:function(){return!!this._animPlayer},isRotating:function(){return this.isDragRotating()||!!this._animRotating},_endAnim:function(t,n,i,e){delete this._animRotating;var a=t._interupted?"animateinterrupted":"animateend";if(t===this._animPlayer&&delete this._animPlayer,t===this._mapAnimPlayer&&delete this._mapAnimPlayer,n.center){var o;t._interupted?o=this.getCenter():o=n.center[1],this.onMoveEnd(this._parseEventFromCoord(o))}else if(n.prjCenter){var s;t._interupted?s=this._getPrjCenter():s=n.prjCenter[1];var l=this._parseEventFromCoord(this.getProjection().unproject(s));l.point2d=this._prjToPoint(s),this.onMoveEnd(l)}N(n.zoom)||(t._interupted?this.onZoomEnd(this.getZoom(),i):e.wheelZoom?this.onZooming(n.zoom[1],i):this.onZoomEnd(n.zoom[1],i)),a&&this._fireEvent(a),!N(n.pitch)&&!this.getPitch()&&this.getRenderer().setToRedraw(),e.wheelZoom||this._resumePrev(t)},_startAnim:function(t,n){!this._animPlayer||(t.center&&this.onMoveStart(),t.zoom&&!this.isZooming()&&this.onZoomStart(t.zoom[1],n),(t.pitch||t.bearing)&&(this._animRotating=!0),this._fireEvent("animatestart"),this._animPlayer.play())},_stopAnim:function(t){!t||(delete this._animRotating,t.playState!=="finished"&&(t._interupted=!0,t.cancel()),t===this._animPlayer&&delete this._animPlayer,t===this._mapAnimPlayer&&delete this._mapAnimPlayer)},_resumePrev:function(t){if(!!this._prevAnimPlayer){var n=this._prevAnimPlayer;n.playState!=="paused"&&delete this._prevAnimPlayer,t!==n&&(this._animPlayer=n,n.play())}}});function Vp(r,t,n){return r*(1-n)+t*n}var Zp="mousedown mouseup mouseover mouseout mouseenter mouseleave mousemove click dblclick contextmenu keypress touchstart touchmove touchend ",ef=300;Te.include({_registerDomEvents:function(){var t=this._panels.mapWrapper||this._containerDOM;kr(t,Zp,this._handleDOMEvent,this)},_removeDomEvents:function(){var t=this._panels.mapWrapper||this._containerDOM;_i(t,Zp,this._handleDOMEvent)},_handleDOMEvent:function(t){var n=t.type,i=n==="mousedown"||n==="touchstart"&&(!t.touches||t.touches.length===1);i&&(this._domMouseDownTime=nt(),this._domMouseDownView=this.getView());var e=n==="contextmenu"&&XD(this);if(n==="contextmenu"){dn(t);var a=this._domMouseDownTime,o=nt();o-a<=ef&&!e&&this._fireDOMEvent(this,t,"dom:"+t.type)}else this._fireDOMEvent(this,t,"dom:"+t.type);if(!this._ignoreEvent(t)){var s=!1;if(i)this._mouseDownTime=nt();else if(n==="click"||n==="touchend"||n==="contextmenu")if(this._mouseDownTime){var l=this._mouseDownTime;delete this._mouseDownTime;var u=nt();if(u-l>ef){if(n==="click"||n==="contextmenu")return}else if(n==="contextmenu"){if(e)return}else n==="touchend"&&(s=!0)}else return;var f;s&&(this._clickTime&&nt()-this._clickTime<=ef?(delete this._clickTime,f="dblclick",this._fireDOMEvent(this,t,"dom:dblclick")):(this._clickTime=nt(),f="click",this._fireDOMEvent(this,t,"dom:click"))),!this._ignoreEvent(t)&&(this._fireDOMEvent(this,t,n),f&&this._fireDOMEvent(this,t,f))}},_ignoreEvent:function(t){if(!t||!this._panels.control)return!1;if(this._isEventOutMap(t))return!0;var n=t.srcElement||t.target,i;if(n)for(;n&&n!==this._containerDOM;){if(n.className&&n.className.indexOf&&(n.className.indexOf("maptalks-control")>=0||n.className.indexOf("maptalks-ui")>=0&&i&&!i.eventsPropagation))return!0;i=n,n=n.parentNode}return!1},_isEventOutMap:function(t){if(this.getPitch()>this.options.maxVisualPitch){var n=this._getActualEvent(t),i=Ft(n,this._containerDOM);if(!this.getContainerExtent().contains(i))return!0}return!1},_parseEvent:function(t,n){if(!t)return null;var i={domEvent:t};if(n!=="keypress"){var e=this._getActualEvent(t);if(e){var a=Ft(e,this._containerDOM);i=fe(i,{containerPoint:a,viewPoint:this.containerPointToViewPoint(a)});var o=this.options.maxVisualPitch;(this.getPitch()<=o||a.y>=this.height-this._getVisualHeight(o))&&(i=fe(i,{coordinate:this.containerPointToCoord(a),point2d:this._containerPointToPoint(a)}))}}return i},_parseEventFromCoord:function(t){var n=this.coordToContainerPoint(t),i=this.containerPointToViewPoint(n),e={coordinate:t,containerPoint:n,viewPoint:i,point2d:this.coordToPoint(t)};return e},_getActualEvent:function(t){return t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t},_fireDOMEvent:function(t,n,i){if(!this.isRemoved()){var e=this._parseEvent(n,i);this._fireEvent(i,e)}}});Te.addOnLoadHook("_registerDomEvents");function XD(r){if(!r._domMouseDownView)return!0;var t=r.getView(),n=r._domMouseDownView;return t.bearing!==n.bearing||t.pitch!==n.pitch}Te.include({isFullScreen:function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},requestFullScreen:function(t){return this._fireEvent("fullscreenstart"),this._requestFullScreen(t||this._containerDOM),this._fireEvent("fullscreenend"),this},cancelFullScreen:function(){return this._cancelFullScreen(),this._fireEvent("cancelfullscreen"),this},_requestFullScreen:function(t){if(t.requestFullscreen)t.requestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.webkitRequestFullScreen)t.webkitRequestFullScreen();else if(t.msRequestFullScreen)t.msRequestFullScreen();else{var n="fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,width="+(screen.availWidth-8)+",height="+(screen.availHeight-45),i=window.open(location.href,"_blank",n);i!==null&&(window.opener=null,window.close())}},_cancelFullScreen:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else{var t="fullscreen=no,status=yes,resizable=yes,scrollbars=no,titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes",n=window.open(location.href,"_blank",t);n!==null&&(window.opener=null,window.close())}}});Te.include({panTo:function(t,n,i){if(n===void 0&&(n={}),!t)return this;if(Xe(n)&&(i=n,n={}),t=new te(t),typeof n.animation=="undefined"||n.animation){var e=this.getProjection().project(t);return this._panAnimation(e,n.duration,i)}else this.setCenter(t);return this},_panTo:function(t,n){return n===void 0&&(n={}),typeof n.animation=="undefined"||n.animation?this._panAnimation(t,n.duration):(this.onMoveStart(),this._setPrjCenter(t),this.onMoveEnd(this._parseEventFromCoord(this.getCenter())),this)},panBy:function(t,n,i){if(n===void 0&&(n={}),!t)return this;Xe(n)&&(i=n,n={}),t=new B(t);var e=this.getContainerExtent(),a=e.ymin;if(a>0&&t.y>30){var o=t.y;t.y=30,t.x=t.x*30/o,console.warn("offset is limited to panBy when pitch is above maxPitch")}if(this.onMoveStart(),typeof n.animation=="undefined"||n.animation){t=t.multi(-1);var s=this._containerPointToPrj(new B(this.width/2+t.x,this.height/2+t.y));this._panAnimation(s,n.duration,i)}else this._offsetCenterByPixel(t),this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));return this},_panAnimation:function(t,n,i){return this._animateTo({prjCenter:t},{duration:n||this.options.panAnimationDuration},i)}});je.fromJSON=function(r){if(Array.isArray(r)){for(var t=[],n=0,i=r.length;n<i;n++){var e=je.fromJSON(r[n]);Array.isArray(r)?t=t.concat(e):t.push(e)}return t}if(r&&!r.feature)return Tr.toGeometry(r);var a;return r.subType?(a=je.getJSONClass(r.subType).fromJSON(r),N(r.feature.id)||a.setId(r.feature.id)):(a=Tr.toGeometry(r.feature),r.options&&a.config(r.options)),r.symbol&&a.setSymbol(r.symbol),r.infoWindow&&a.setInfoWindow(r.infoWindow),a};kt.fromJSON=function(r){if(!r)return null;var t=r.type,n=kt.getJSONClass(t);if(!n||!n.fromJSON)throw new Error("unsupported layer type:"+t);return n.fromJSON(r)};Te.include({JSON_VERSION:"1.0",toJSON:function(t){t||(t={});var n={jsonVersion:this.JSON_VERSION,version:this.VERSION,extent:this.getExtent().toJSON()};n.options=this.config(),n.options.center=this.getCenter(),n.options.zoom=this.getZoom(),n.options.bearing=this.getBearing(),n.options.pitch=this.getPitch();var i=this.getBaseLayer();(N(t.baseLayer)||t.baseLayer)&&i&&(n.baseLayer=i.toJSON(t.baseLayer));var e={};t.clipExtent&&(t.clipExtent===!0?e.clipExtent=this.getExtent():e.clipExtent=t.clipExtent);var a=[];if(N(t.layers)||t.layers&&!Array.isArray(t.layers)){for(var o=this.getLayers(),s=0,l=o.length;s<l;s++)if(!!o[s].toJSON){var u=fe({},Pn(t.layers)?t.layers:{},e);a.push(o[s].toJSON(u))}n.layers=a}else if(We(t.layers)){for(var f=t.layers,h=0;h<f.length;h++){var c=f[h],d=this.getLayer(c.id);if(!!d.toJSON){var v=fe({},c.options,e);a.push(d.toJSON(v))}}n.layers=a}else n.layers=[];return n}});Te.fromJSON=function(r,t,n){if(!r||!t)return null;n||(n={});var i=new Te(r,t.options);if(N(n.baseLayer)||n.baseLayer){var e=kt.fromJSON(t.baseLayer);e&&i.setBaseLayer(e)}if(N(n.layers)||n.layers){for(var a=[],o=t.layers,s=0;s<o.length;s++){var l=kt.fromJSON(o[s]);a.push(l)}i.addLayer(a)}return i};Te.include({computeLength:function(t,n){if(!this.getProjection())return null;var i=new te(t),e=new te(n);return i.equals(e)?0:this.getProjection().measureLength(i,e)},computeGeometryLength:function(t){return t._computeGeodesicLength(this.getProjection())},computeGeometryArea:function(t){return t._computeGeodesicArea(this.getProjection())},identify:function(t,n){t=t||{};var i=new te(t.coordinate);return this._identify(t,n,function(e){return e.identify(i,t)})},identifyAtPoint:function(t,n){t=t||{};var i=new B(t.containerPoint),e=this.containerPointToCoord(i);return this._identify(t,n,function(a){return a.identifyAtPoint?a.identifyAtPoint(i,t):e?a.identify(e,t):[]})},_identify:function(t,n,i){var e=t.layers;if(!We(e))return this;for(var a=[],o=0,s=e.length;o<s;o++)Re(e[o])?a.push(this.getLayer(e[o])):a.push(e[o]);for(var l=[],u=a.length-1;u>=0&&!(t.count&&l.length>=t.count);u--){var f=a[u];if(!(!f||!f.getMap()||!t.includeInvisible&&!f.isVisible()||!t.includeInternals&&f.getId().indexOf(Ho)>=0)){var h=i(f);h&&(Array.isArray(h)?xa(l,h):l.push(h))}}return n.call(this,l),this}});Te.include({_zoom:function(t,n){!this.options.zoomable||this.isZooming()||(n=this._checkZoomOrigin(n),t=this._checkZoom(t),this.onZoomStart(t,n),this._frameZoom=this.getZoom(),this.onZoomEnd(t,n))},_zoomAnimation:function(t,n,i){!this.options.zoomable||this.isZooming()||(t=this._checkZoom(t),this.getZoom()!==t&&(n=this._checkZoomOrigin(n),this._startZoomAnim(t,n,i)))},_checkZoomOrigin:function(t){return(!t||this.options.zoomInCenter)&&(t=new B(this.width/2,this.height/2)),this.options.zoomOrigin&&(t=new B(this.options.zoomOrigin)),t},_startZoomAnim:function(t,n,i){N(i)&&(i=1);var e=this._getResolution(this._startZoomVal)/this._getResolution(t),a=this.options.zoomAnimationDuration*Math.abs(e-i)/Math.abs(e-1);this._frameZoom=this._startZoomVal,this._animateTo({zoom:t,around:n},{continueOnViewChanged:!0,duration:a})},onZoomStart:function(t,n){!this.options.zoomable||this.isZooming()||(this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._zooming=!0,this._startZoomVal=this.getZoom(),this._startZoomCoord=this._containerPointToPrj(n),this._fireEvent("zoomstart",{from:this._startZoomVal,to:t}))},onZooming:function(t,n,i){if(!!this.options.zoomable){var e=this._frameZoom;if(e!==t){N(i)&&(i=1),this._zoomTo(t,n);var a=this.getResolution(t),o=this.getResolution(this._startZoomVal),s=o/a/i,l=this._prjToContainerPoint(this._startZoomCoord,this._startZoomVal),u=this.getViewPoint();if(!this.isRotating()&&!l.equals(n)&&s!==1){var f=this.getPitch(),h=l._sub(n)._multi(1/(1-s));f&&(h.y/=Math.cos(f*Math.PI/180)),n=n.add(h)}var c={view:[s,0,0,s,(n.x-u.x)*(1-s),(n.y-u.y)*(1-s)]},d=this.getDevicePixelRatio();d!==1&&(n=n.multi(d)),c.container=[s,0,0,s,n.x*(1-s),n.y*(1-s)],this._fireEvent("zooming",{from:this._startZoomVal,to:t,origin:n,matrix:c}),this._frameZoom=t}}},onZoomEnd:function(t,n){if(!!this.options.zoomable){var i=this._startZoomVal;this._zoomTo(t,n),this._zooming=!1,this._getRenderer().onZoomEnd(),this._fireEvent("zoomend",{from:i,to:t}),this._verifyExtent(this._getPrjCenter())||this._panTo(this._prjMaxExtent.getCenter())}},_zoomTo:function(t,n){this._zoomLevel=t,this._calcMatrices(),n&&this._setPrjCoordAtContainerPoint(this._startZoomCoord,n)},_checkZoom:function(t){var n=this.getMaxZoom(),i=this.getMinZoom();return t<i&&(t=i),t>n&&(t=n),t}});function Up(r,t,n,i,e){var a=1/Math.tan(t/2),o=1/(i-e);return r[0]=a/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(e+i)*o,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*e*i*o,r[15]=0,r}function Vb(r,t,n){var i=n[0],e=n[1],a=n[2],o,s,l,u,f,h,c,d,v,g,m,p;return t===r?(r[12]=t[0]*i+t[4]*e+t[8]*a+t[12],r[13]=t[1]*i+t[5]*e+t[9]*a+t[13],r[14]=t[2]*i+t[6]*e+t[10]*a+t[14],r[15]=t[3]*i+t[7]*e+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],f=t[4],h=t[5],c=t[6],d=t[7],v=t[8],g=t[9],m=t[10],p=t[11],r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=f,r[5]=h,r[6]=c,r[7]=d,r[8]=v,r[9]=g,r[10]=m,r[11]=p,r[12]=o*i+f*e+v*a+t[12],r[13]=s*i+h*e+g*a+t[13],r[14]=l*i+c*e+m*a+t[14],r[15]=u*i+d*e+p*a+t[15]),r}function mh(r,t,n){var i=n[0],e=n[1],a=n[2];return r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i,r[3]=t[3]*i,r[4]=t[4]*e,r[5]=t[5]*e,r[6]=t[6]*e,r[7]=t[7]*e,r[8]=t[8]*a,r[9]=t[9]*a,r[10]=t[10]*a,r[11]=t[11]*a,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function JD(r,t,n){var i=Math.sin(n),e=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],f=t[9],h=t[10],c=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=a*e+u*i,r[5]=o*e+f*i,r[6]=s*e+h*i,r[7]=l*e+c*i,r[8]=u*e-a*i,r[9]=f*e-o*i,r[10]=h*e-s*i,r[11]=c*e-l*i,r}function QD(r,t,n){var i=Math.sin(n),e=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],f=t[5],h=t[6],c=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=a*e+u*i,r[1]=o*e+f*i,r[2]=s*e+h*i,r[3]=l*e+c*i,r[4]=u*e-a*i,r[5]=f*e-o*i,r[6]=h*e-s*i,r[7]=c*e-l*i,r}function ro(r,t,n){var i=t[0],e=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],f=t[7],h=t[8],c=t[9],d=t[10],v=t[11],g=t[12],m=t[13],p=t[14],_=t[15],b=n[0],x=n[1],C=n[2],y=n[3];return r[0]=b*i+x*s+C*h+y*g,r[1]=b*e+x*l+C*c+y*m,r[2]=b*a+x*u+C*d+y*p,r[3]=b*o+x*f+C*v+y*_,b=n[4],x=n[5],C=n[6],y=n[7],r[4]=b*i+x*s+C*h+y*g,r[5]=b*e+x*l+C*c+y*m,r[6]=b*a+x*u+C*d+y*p,r[7]=b*o+x*f+C*v+y*_,b=n[8],x=n[9],C=n[10],y=n[11],r[8]=b*i+x*s+C*h+y*g,r[9]=b*e+x*l+C*c+y*m,r[10]=b*a+x*u+C*d+y*p,r[11]=b*o+x*f+C*v+y*_,b=n[12],x=n[13],C=n[14],y=n[15],r[12]=b*i+x*s+C*h+y*g,r[13]=b*e+x*l+C*c+y*m,r[14]=b*a+x*u+C*d+y*p,r[15]=b*o+x*f+C*v+y*_,r}function Kp(r,t){var n=t[0],i=t[1],e=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],h=t[9],c=t[10],d=t[11],v=t[12],g=t[13],m=t[14],p=t[15],_=n*s-i*o,b=n*l-e*o,x=n*u-a*o,C=i*l-e*s,y=i*u-a*s,w=e*u-a*l,P=f*g-h*v,T=f*m-c*v,L=f*p-d*v,j=h*m-c*g,M=h*p-d*g,D=c*p-d*m,R=_*D-b*M+x*j+C*L-y*T+w*P;return R?(R=1/R,r[0]=(s*D-l*M+u*j)*R,r[1]=(e*M-i*D-a*j)*R,r[2]=(g*w-m*y+p*C)*R,r[3]=(c*y-h*w-d*C)*R,r[4]=(l*L-o*D-u*T)*R,r[5]=(n*D-e*L+a*T)*R,r[6]=(m*x-v*w-p*b)*R,r[7]=(f*w-c*x+d*b)*R,r[8]=(o*M-s*L+u*P)*R,r[9]=(i*L-n*M-a*P)*R,r[10]=(v*y-g*x+p*_)*R,r[11]=(h*x-f*y-d*_)*R,r[12]=(s*T-o*j-l*P)*R,r[13]=(n*j-i*T+e*P)*R,r[14]=(g*b-v*C-m*_)*R,r[15]=(f*C-h*b+c*_)*R,r):null}function Yc(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Yp(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function hn(r,t,n,i){return r[0]=t,r[1]=n,r[2]=i,r}function eL(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function Ws(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r}function qp(r){var t=r[0],n=r[1],i=r[2];return Math.sqrt(t*t+n*n+i*i)}function Gs(r,t){var n=t[0],i=t[1],e=t[2],a=n*n+i*i+e*e;return a>0&&(a=1/Math.sqrt(a),r[0]=t[0]*a,r[1]=t[1]*a,r[2]=t[2]*a),r}function tL(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function nL(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r}function tf(r,t,n){var i=t[0],e=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return r[0]=e*l-a*s,r[1]=a*o-i*l,r[2]=i*s-e*o,r}function xl(r,t){var n=t[0]-r[0],i=t[1]-r[1],e=t[2]-r[2];return Math.hypot?Math.hypot(n,i,e):iL(n,i,e)}function rL(r,t,n){var i=t[0],e=t[1],a=t[2],o=n[3]*i+n[7]*e+n[11]*a+n[15];return o=o||1,r[0]=(n[0]*i+n[4]*e+n[8]*a+n[12])/o,r[1]=(n[1]*i+n[5]*e+n[9]*a+n[13])/o,r[2]=(n[2]*i+n[6]*e+n[10]*a+n[14])/o,r}function iL(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)}function nf(r,t,n){var i=t[0],e=t[1],a=t[2],o=1/(n[3]*i+n[7]*e+n[11]*a+n[15]);return r[0]=(n[0]*i+n[4]*e+n[8]*a+n[12])*o,r[1]=(n[1]*i+n[5]*e+n[9]*a+n[13])*o,r[2]=(n[2]*i+n[6]*e+n[10]*a+n[14])*o,r}function aL(r,t){var n=t[0],i=t[4],e=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],f=t[10],h=n+o+f,c;return h>0?(c=.5/Math.sqrt(h+1),r.w=.25/c,r.x=(u-s)*c,r.y=(e-l)*c,r.z=(a-i)*c):n>o&&n>f?(c=2*Math.sqrt(1+n-o-f),r.w=(u-s)/c,r.x=.25*c,r.y=(i+a)/c,r.z=(e+l)/c):o>f?(c=2*Math.sqrt(1+o-n-f),r.w=(e-l)/c,r.x=(i+a)/c,r.y=.25*c,r.z=(s+u)/c):(c=2*Math.sqrt(1+f-n-o),r.w=(a-i)/c,r.x=(e+l)/c,r.y=(s+u)/c,r.z=.25*c),this}function oL(r,t){var n=r,i=t.x,e=t.y,a=t.z,o=t.w,s=i+i,l=e+e,u=a+a,f=i*s,h=i*l,c=i*u,d=e*l,v=e*u,g=a*u,m=o*s,p=o*l,_=o*u;return n[0]=1-(d+g),n[4]=h-_,n[8]=c+p,n[1]=h+_,n[5]=1-(f+g),n[9]=v-m,n[2]=c-p,n[6]=v+m,n[10]=1-(f+d),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function sL(r,t){var n=r;return n[12]=t[0],n[13]=t[1],n[14]=t[2],r}function lL(r,t,n,i){var e=[0,0,0],a=[0,0,0],o=[0,0,0];return Ws(o,t,n),qp(o)===0&&(o[2]=1),Gs(o,o),tf(e,i,o),qp(o)===0&&(Math.abs(i[2])===1?o[0]+=1e-4:o[2]+=1e-4,Gs(o,o),tf(e,i,o)),Gs(e,e),tf(a,o,e),r[0]=e[0],r[4]=a[0],r[8]=o[0],r[1]=e[1],r[5]=a[1],r[9]=o[1],r[2]=e[2],r[6]=a[2],r[10]=o[2],r}var yr=Math.PI/180,uL=.6435011087932844,Xp=new te(0,0);Te.include({getFov:function(){return this._fov||(this._fov=uL),this._fov/yr},setFov:function(t){if(this.isZooming())return this;if(t=Math.max(.01,Math.min(60,t)),this._fov===t)return this;var n=this.getFov();return this._fov=t*yr,this._calcMatrices(),this._renderLayers(),this._fireEvent("fovchange",{from:n,to:this.getFov()}),this},getBearing:function(){return this._angle?-this._angle/yr:0},setBearing:function(t){return this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._setBearing(t)},_setBearing:function(t){if(De.ie9)throw new Error("map can't rotate in IE9.");var n=-hi(t,-180,180)*yr;if(this._angle===n)return this;var i=this.getBearing();return this._fireEvent("rotatestart",{from:i,to:n}),this._angle=n,this._calcMatrices(),this._renderLayers(),this._fireEvent("rotate",{from:i,to:n}),this._fireEvent("rotateend",{from:i,to:n}),this},getPitch:function(){return this._pitch?this._pitch/Math.PI*180:0},setPitch:function(t){return this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._setPitch(t)},_setPitch:function(t){if(De.ie9)throw new Error("map can't tilt in IE9.");var n=ih(t,0,this.options.maxPitch)*yr;if(this._pitch===n)return this;var i=this.getPitch();return this._fireEvent("pitchstart",{from:i,to:n}),this._pitch=n,this._calcMatrices(),this._renderLayers(),this._fireEvent("pitch",{from:i,to:n}),this._fireEvent("pitchend",{from:i,to:n}),this},isTransforming:function(){return!!(this._pitch||this._angle)},getFrustumAltitude:function(){return this._frustumAltitude},_calcFrustumAltitude:function(){var t=90-this.getPitch(),n=this.getFov()/2,i=this.cameraPosition?this.cameraPosition[2]:0;if(n<=t)return i;n=Math.PI*n/180;var e=new B(this.cameraPosition).distanceTo(new B(this.cameraLookAt)),a=i*Math.tan(n*2),o=Math.tan(n)*(e+a);return i+o},_pointToContainerPoint:function(t,n,i,e){i===void 0&&(i=0);var a=this._getResolution(n);return this._pointAtResToContainerPoint(t,a,i,e)},_pointAtResToContainerPoint:function(t,n,i,e){i===void 0&&(i=0),e||(e=new B(0,0)),t=this._pointAtResToPoint(t,n,e);var a=this.isTransforming(),o=n/this._getResolution(),s;return!a&&!i&&(s=this._prjToPoint(this._getPrjCenter(),void 0,Xp)),this._toContainerPoint(e,a,o,i,s),e},_pointsAtResToContainerPoints:function(t,n,i,e){i===void 0&&(i=[]),e===void 0&&(e=[]);var a=this.getPitch(),o=this.getBearing();if(a===0&&o===0){var s=this._get2DExtent(),l=s.xmin,u=s.ymin,f=s.xmax,h=s.ymax;if(f>l&&h>u){for(var c=n/this._getResolution(),d=this.getSize(),v=d.width,g=d.height,m=(f-l)/v,p=(h-u)/g,_=0,b=t.length;_<b;_++){if(!t[_]){e[_]=null;continue}var x=e[_];x.x=t[_].x,x.y=t[_].y,x._multi(c),x.x=(x.x-l)*m,x.y=g-(x.y-u)*p}return e}}for(var C=Array.isArray(i),y=this.isTransforming(),w=n/this._getResolution(),P=this._prjToPoint(this._getPrjCenter(),void 0,Xp),T=0,L=t.length;T<L;T++){if(!t[T]){e[T]=null;continue}var j=e[T];j.x=t[T].x,j.y=t[T].y,j._multi(w);var M=C?i[T]||0:i;this._toContainerPoint(j,y,w,M,P)}return e},_toContainerPoint:function(){var r=[0,0,0];return function(t,n,i,e,a){var o=this.width/2,s=this.height/2;if(n||e){e*=i;var l=this._glScale;hn(r,t.x*l,t.y*l,e*l);var u=this._projIfBehindCamera(r,this.cameraPosition,this.cameraForward);nf(u,u,this.projViewMatrix),t.x=u[0]*o+o,t.y=-(u[1]*s)+s}else t._sub(a.x,a.y),t.set(t.x,-t.y),t._add(o,s)}}(),_projIfBehindCamera:function(){var r=new Array(3),t=new Array(3),n=new Array(3);return function(i,e,a){Ws(r,i,e);var o=tL(a,r);return o<=0&&(nL(t,a,o*1.01),eL(i,e,Ws(n,r,t))),i}}(),_containerPointToPoint:function(t,n,i){var e=this._getResolution(n);return this._containerPointToPointAtRes(t,e,i)},_containerPointToPointAtRes:function(){var r=[0,0,0],t=[0,0,0,1],n=[0,0,0,1];return function(i,e,a){if(this.isTransforming()){var o=this.width/2||1,s=this.height/2||1;hn(r,(i.x-o)/o,(s-i.y)/s,0),hn(t,r[0],r[1],0),hn(n,r[0],r[1],1),t[3]=n[3]=1,nf(t,t,this.projViewMatrixInverse),nf(n,n,this.projViewMatrixInverse);var l=t[0],u=n[0],f=t[1],h=n[1],c=t[2],d=n[2],v=c===d?0:(0-c)/(d-c),g=rh(l,u,v),m=rh(f,h,v);return a?(a.x=g,a.y=m):a=new B(g,m),a._multi(1/this._glScale),this._getResolution()===e?a:this._pointToPointAtRes(a,e,a)}var p=this._prjToPointAtRes(this._getPrjCenter(),e,a),_=this._getResolution()/e,b=_*(i.x-this.width/2),x=_*(i.y-this.height/2);return p._add(b,-x)}}(),_calcMatrices:function(){var r=fn();return function(){delete this._mapRes,delete this._mapGlRes,delete this._mapExtent2D,delete this._mapGlExtent2D;var t=this.getSize(),n=t.width||1,i=t.height||1;this._glScale=this.getGLScale();var e=this._getCameraWorldMatrix(),a=this.getFov()*Math.PI/180,o=this._getCameraFar(a,this.getPitch());this.cameraFar=o,this.cameraNear=this.cameraCenterDistance/20;var s=this.projMatrix||fn();Up(s,a,n/i,this.cameraNear,o),this.projMatrix=s,this.viewMatrix=Kp(this.viewMatrix||fn(),e),this.projViewMatrix=ro(this.projViewMatrix||fn(),s,this.viewMatrix),this._calcCascadeMatrixes(),this.projViewMatrixInverse=ro(this.projViewMatrixInverse||fn(),e,Kp(r,s)),this.domCssMatrix=this._calcDomMatrix(),this._frustumAltitude=this._calcFrustumAltitude(),this._mapRes=this._getResolution(),this._mapGlRes=this.getGLRes(),this._mapExtent2D=this._get2DExtent(),this._mapGlExtent2D=this._get2DExtentAtRes(this._mapGlRes)}}(),_getCameraFar:function(t,n){var i=this.cameraCenterDistance=xl(this.cameraPosition,this.cameraLookAt),e=i,a=4*i;if(n>0&&(n=n*Math.PI/180,2/Math.PI-n>t/2)){var o=Math.tan(t/2),s=Math.tan(n);a=Math.max(i*o/(1/s-o),a)}return e+=a,e+1},_calcCascadeMatrixes:function(){var r=fn();function t(n,i,e){var a=this.width,o=this.height,s=this.getFov()*Math.PI/180,l=this._getCameraFar(s,i),u=this.cameraCenterDistance;l=u+(l-u)/Math.cos((90-i)*Math.PI/180)*Math.cos((90-n)*Math.PI/180),Up(r,s,a/o,.1,l);var f=this.viewMatrix;return ro(e,r,f)}return function(){var n=this.getPitch(),i=this.options.cascadePitches[0],e=this.options.cascadePitches[1],a=this.cascadeFrustumMatrix0=this.cascadeFrustumMatrix0||fn(),o=this.cascadeFrustumMatrix1=this.cascadeFrustumMatrix1||fn();n>i?t.call(this,n,i,a):Yp(this.cascadeFrustumMatrix0,this.projViewMatrix),n>e?t.call(this,n,e,o):Yp(this.cascadeFrustumMatrix1,this.cascadeFrustumMatrix0)}}(),_calcDomMatrix:function(){var r=fn(),t=fn(),n=[1,-1,1],i=[0,0,0];return function(){var e=this.width||1,a=this.height||1,o=.5/Math.tan(this._fov/2)*a;return mh(r,this.projMatrix,n),Vb(r,r,hn(i,0,0,-o)),this._pitch&&JD(r,r,this._pitch),this._angle&&QD(r,r,this._angle),Yc(t),mh(t,t,hn(i,e/2,-a/2,1)),ro(this.domCssMatrix||fn(),t,r)}}(),_getFovZ:function(t){var n=this.getGLScale(t),i=this._getFovRatio();return n*(this.height||1)/2/i},_getCameraWorldMatrix:function(){var r={};return function(){var t=this.getGLRes(),n=this._prjToPointAtRes(this._prjCenter,t);this.cameraLookAt=hn(this.cameraLookAt||[0,0,0],n.x,n.y,0);var i=this.getPitch()*yr,e=this.getBearing()*yr,a=this._getFovZ(),o=a*Math.cos(i),s=Math.sin(i)*a,l=n.x-s*Math.sin(e),u=n.y-s*Math.cos(e);this.cameraPosition=hn(this.cameraPosition||[0,0,0],l,u,o),this.cameraToCenterDistance=xl(this.cameraPosition,this.cameraLookAt);var f=s||1,h=this.cameraUp=hn(this.cameraUp||[0,0,0],Math.sin(e)*f,Math.cos(e)*f,0),c=this.cameraWorldMatrix=this.cameraWorldMatrix||fn();lL(c,this.cameraPosition,this.cameraLookAt,h);var d=this.cameraForward||[0,0,0];return Ws(d,this.cameraLookAt,this.cameraPosition),this.cameraForward=Gs(d,d),aL(r,c),oL(c,r),sL(c,this.cameraPosition),c}}(),_getFovRatio:function(){var t=this.getFov();return Math.tan(t/2*yr)},_renderLayers:function(){if(!this.isInteracting()){var t=this._getLayers();t.forEach(function(n){if(!!n){var i=n._getRenderer();i&&i.setToRedraw&&i.setToRedraw()}})}}});function fn(){return Yc(new Array(16))}Te.include({_onViewChange:function(t){this._viewHistory||(this._viewHistory=[],this._viewHistoryPointer=0);for(var n=this._getCurrentView(),i=this._viewHistory.length-1;i>=0;i--)if(oh(t,this._viewHistory[i])){this._viewHistoryPointer=i,this._fireViewChange(n,t);return}this._viewHistoryPointer<this._viewHistory.length-1&&this._viewHistory.splice(this._viewHistoryPointer+1),this._viewHistory.push(t);var e=this.options.viewHistoryCount;e>0&&this._viewHistory.length>e&&this._viewHistory.splice(0,this._viewHistory.length-e),this._viewHistoryPointer=this._viewHistory.length-1,this._fireViewChange(n,t)},zoomToPreviousView:function(t){if(t===void 0&&(t={}),!this.hasPreviousView())return null;var n=this._viewHistory[--this._viewHistoryPointer];return this._zoomToView(n,t),n},hasPreviousView:function(){return!(!this._viewHistory||this._viewHistoryPointer===0)},zoomToNextView:function(t){if(t===void 0&&(t={}),!this.hasNextView())return null;var n=this._viewHistory[++this._viewHistoryPointer];return this._zoomToView(n,t),n},hasNextView:function(){return!(!this._viewHistory||this._viewHistoryPointer===this._viewHistory.length-1)},_zoomToView:function(t,n){var i=this,e=this.getView();n.animation?this._animateTo(t,{duration:n.duration},function(a){a.state.playState==="finished"&&i._fireViewChange(e,t)}):(this.setView(t),this._fireViewChange(e,t))},getViewHistory:function(){return this._viewHistory},_fireViewChange:function(t,n){this._fireEvent("viewchange",{old:t,new:n})},_getCurrentView:function(){return this._viewHistory?this._viewHistory[this._viewHistoryPointer]:null}});Te.mergeOptions({viewHistory:!0,viewHistoryCount:10});Te.include({getCollisionIndex:function(){return this._collisionIndex||this.createCollisionIndex(),this._collisionIndex||this.createCollisionIndex()},createCollisionIndex:function(){return this.clearCollisionIndex(),this._collisionIndex=new ob,this._collisionIndex},clearCollisionIndex:function(){return this.collisionFrameTime=0,this._collisionIndex&&this._collisionIndex.clear(),this}});var fL={mode:"LineString",language:"zh-CN",metric:!0,imperial:!1,symbol:{lineColor:"#000",lineWidth:3,lineOpacity:1},vertexSymbol:{markerType:"ellipse",markerFill:"#fff",markerLineColor:"#000",markerLineWidth:3,markerWidth:11,markerHeight:11},labelOptions:{textSymbol:{textFaceName:"monospace",textLineSpacing:1,textHorizontalAlignment:"right",textDx:15},boxStyle:{padding:[6,2],symbol:{markerType:"square",markerFill:"#fff",markerFillOpacity:.9,markerLineColor:"#b4b3b3"}}},clearButtonSymbol:[{markerType:"square",markerFill:"#fff",markerLineColor:"#b4b3b3",markerLineWidth:2,markerWidth:15,markerHeight:15,markerDx:20},{markerType:"x",markerWidth:10,markerHeight:10,markerDx:20}]},Zb=function(r){re(t,r);function t(i){var e;return e=r.call(this,i)||this,e.on("enable",e._afterEnable,at(at(e))).on("disable",e._afterDisable,at(at(e))),e._measureLayers=[],e}var n=t.prototype;return n.clear=function(){if(We(this._measureLayers))for(var e=0;e<this._measureLayers.length;e++)this._measureLayers[e].remove();return delete this._lastMeasure,delete this._lastVertex,this._measureLayers=[],this},n.getMeasureLayers=function(){return this._measureLayers},n.getLastMeasure=function(){return this._lastMeasure?this._lastMeasure:0},n.undo=function(){r.prototype.undo.call(this);var e=this._historyPointer;if(e!==this._vertexes.length)for(var a=e;a<this._vertexes.length;a++)this._vertexes[a].label&&this._vertexes[a].label.remove(),this._vertexes[a].marker.remove();return this},n.redo=function(){r.prototype.redo.call(this);var e=this._historyPointer-1;return this._vertexes[e]&&(this._vertexes[e].marker.getLayer()||(this._vertexes[e].label&&this._vertexes[e].label.addTo(this._measureMarkerLayer),this._vertexes[e].marker.addTo(this._measureMarkerLayer))),this},n._measure=function(e){var a=this.getMap(),o;e instanceof je?o=a.computeGeometryLength(e):Array.isArray(e)&&(o=a.getProjection().measureLength(e)),this._lastMeasure=o;var s;this.options.language==="zh-CN"?s=[" \u7C73"," \u516C\u91CC"," \u82F1\u5C3A"," \u82F1\u91CC"]:s=[" m"," km"," feet"," mile"];var l="";return this.options.metric&&(l+=o<1e3?o.toFixed(0)+s[0]:(o/1e3).toFixed(2)+s[1]),this.options.imperial&&(o*=3.2808399,l.length>0&&(l+=`
`),l+=o<5280?o.toFixed(0)+s[2]:(o/5280).toFixed(2)+s[3]),l},n._registerMeasureEvents=function(){this.on("drawstart",this._msOnDrawStart,this).on("drawvertex",this._msOnDrawVertex,this).on("mousemove",this._msOnMouseMove,this).on("drawend",this._msOnDrawEnd,this)},n._afterEnable=function(){this._registerMeasureEvents()},n._afterDisable=function(){this.off("drawstart",this._msOnDrawStart,this).off("drawvertex",this._msOnDrawVertex,this).off("mousemove",this._msOnMouseMove,this).off("drawend",this._msOnDrawEnd,this)},n._msOnDrawStart=function(e){var a=this.getMap(),o=a._pointToPrj(e.point2d),s=ba(),l="distancetool_"+s,u="distancetool_markers_"+s;a.getLayer(l)?(this._measureLineLayer=a.getLayer(l),this._measureMarkerLayer=a.getLayer(u)):(this._measureLineLayer=new $n(l).addTo(a),this._measureMarkerLayer=new $n(u).addTo(a)),this._measureLayers.push(this._measureLineLayer),this._measureLayers.push(this._measureMarkerLayer);var f=new et(e.coordinate,{symbol:this.options.vertexSymbol});f._setPrjCoordinates(o);var h=this.options.language==="zh-CN"?"\u8D77\u70B9":"start",c=new Ji(h,e.coordinate,this.options.labelOptions);c._setPrjCoordinates(o),this._lastVertex=c,this._addVertexMarker(f,c)},n._msOnMouseMove=function(e){var a=this._measure(this._msGetCoordsToMeasure(e));if(!this._tailMarker){var o=jn(this.options.vertexSymbol);o.markerWidth/=2,o.markerHeight/=2,this._tailMarker=new et(e.coordinate,{symbol:o}).addTo(this._measureMarkerLayer),this._tailLabel=new Ji(a,e.coordinate,this.options.labelOptions).addTo(this._measureMarkerLayer)}var s=this._geometry._getPrjCoordinates(),l=s[s.length-1];this._tailMarker.setCoordinates(e.coordinate),this._tailMarker._setPrjCoordinates(l),this._tailLabel.setContent(a),this._tailLabel.setCoordinates(e.coordinate),this._tailLabel._setPrjCoordinates(l)},n._msGetCoordsToMeasure=function(e){return e.geometry.getCoordinates().concat([e.coordinate])},n._msOnDrawVertex=function(e){var a=this._geometry._getPrjCoordinates(),o=a[a.length-1],s=e.geometry,l=new et(e.coordinate,{symbol:this.options.vertexSymbol}),u=this._measure(s),f=new Ji(u,e.coordinate,this.options.labelOptions);this._addVertexMarker(l,f),f._setPrjCoordinates(o),l._setPrjCoordinates(o),this._lastVertex=f},n._addVertexMarker=function(e,a){this._vertexes||(this._vertexes=[]),this._historyPointer!==void 0&&this._vertexes.length>this._historyPointer-1&&(this._vertexes.length=this._historyPointer-1),this._vertexes.push({label:a,marker:e}),this._measureMarkerLayer.addGeometry(e),a&&this._measureMarkerLayer.addGeometry(a)},n._msOnDrawEnd=function(e){if(this._clearTailMarker(),e.geometry._getPrjCoordinates().length<2){this._lastMeasure=0,this._clearMeasureLayers();return}var a=this._lastVertex.getSize();a||(a=new st(10,10)),this._addClearMarker(this._lastVertex.getCoordinates(),this._lastVertex._getPrjCoordinates(),a.width);var o=e.geometry.copy();o._setPrjCoordinates(e.geometry._getPrjCoordinates()),o.addTo(this._measureLineLayer),this._lastMeasure=o.getLength()},n._addClearMarker=function(e,a,o){var s=this.options.clearButtonSymbol,l={markerDx:(s.markerDx||0)+o,textDx:(s.textDx||0)+o};Array.isArray(s)&&(l=s.map(function(c){return c?{markerDx:(c.markerDx||0)+o,textDx:(c.textDx||0)+o}:null})),s=jn(s,l);var u=new et(e,{symbol:s}),f=this._measureLineLayer,h=this._measureMarkerLayer;u.on("click",function(){return f.remove(),h.remove(),!1},this),u.addTo(this._measureMarkerLayer),u._setPrjCoordinates(a)},n._clearTailMarker=function(){this._tailMarker&&(this._tailMarker.remove(),delete this._tailMarker),this._tailLabel&&(this._tailLabel.remove(),delete this._tailLabel)},n._clearMeasureLayers=function(){this._measureLineLayer.remove(),this._measureMarkerLayer.remove()},t}(xt);Zb.mergeOptions(fL);var hL={mode:"Polygon",symbol:{lineColor:"#000000",lineWidth:2,lineOpacity:1,lineDasharray:"",polygonFill:"#ffffff",polygonOpacity:.5}},cL=function(r){re(t,r);function t(i){var e;return e=r.call(this,i)||this,e.on("enable",e._afterEnable,at(at(e))).on("disable",e._afterDisable,at(at(e))),e._measureLayers=[],e}var n=t.prototype;return n._measure=function(e){var a=this.getMap(),o;e instanceof je?o=a.computeGeometryArea(e):Array.isArray(e)&&(o=a.getProjection().measureArea(e)),this._lastMeasure=o;var s;this.options.language==="zh-CN"?s=[" \u5E73\u65B9\u7C73"," \u5E73\u65B9\u516C\u91CC"," \u5E73\u65B9\u82F1\u5C3A"," \u5E73\u65B9\u82F1\u91CC"]:s=[" sq.m"," sq.km"," sq.ft"," sq.mi"];var l="";if(this.options.metric&&(l+=o<1e6?o.toFixed(0)+s[0]:(o/1e6).toFixed(2)+s[1]),this.options.imperial){o*=3.2808399,l.length>0&&(l+=`
`);var u=5280*5280;l+=o<u?o.toFixed(0)+s[2]:(o/u).toFixed(2)+s[3]}return l},n._msGetCoordsToMeasure=function(e){return e.geometry.getShell().concat([e.coordinate])},n._msOnDrawVertex=function(e){var a=this.getMap()._pointToPrj(e.point2d),o=new et(e.coordinate,{symbol:this.options.vertexSymbol});o._setPrjCoordinates(a),this._measure(e.geometry),this._lastVertex=o,this._addVertexMarker(o)},n._msOnDrawEnd=function(e){this._clearTailMarker();var a;if(e.point2d)a=this.getMap()._pointToPrj(e.point2d);else{var o=e.geometry._getPrjCoordinates();o=o.slice(0,o.length-1),e.geometry._setPrjCoordinates(o),a=o[o.length-1]}if(e.geometry._getPrjCoordinates().length<3){this._lastMeasure=0,this._clearMeasureLayers();return}var s=this._measure(e.geometry),l=this.getMap().getProjection(),u=l.unproject(a),f=new Ji(s,u,this.options.labelOptions).addTo(this._measureMarkerLayer);f._setPrjCoordinates(a);var h=f.getSize();h||(h=new st(10,10)),this._addClearMarker(u,a,h.width);var c=e.geometry.copy();c._setPrjCoordinates(e.geometry._getPrjCoordinates()),c.addTo(this._measureLineLayer),this._lastMeasure=c.getArea()},t}(Zb);cL.mergeOptions(hL);var Ub={create:function(t,n){var i=t.unproject(n[0]),e=new Bn(i,0);return e._setPrjCoordinates(n[0]),e},update:function(t,n,i){var e=i.getMap(),a=Array.isArray(n)?n[n.length-1]:n,o=t.unproject(a),s=e.computeLength(i.getCenter(),o);i.setRadius(s)},generate:function(t){return t}};xt.registerMode("circle",fe({clickLimit:2,action:["click","mousemove","click"]},Ub));xt.registerMode("freeHandCircle",fe({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},Ub));var Kb={create:function(t,n){var i=t.unproject(n[0]),e=new ir(i,0,0);return e._setPrjCoordinates(n[0]),e},update:function(t,n,i){var e=i.getMap(),a=i.getCenter(),o=Array.isArray(n)?n[n.length-1]:n,s=t.unproject(o),l=e.computeLength(a,new te({x:s.x,y:a.y})),u=e.computeLength(a,new te({x:a.x,y:s.y}));i.setWidth(l*2),i.setHeight(u*2)},generate:function(t){return t}};xt.registerMode("ellipse",fe({clickLimit:2,action:["click","mousemove","click"]},Kb));xt.registerMode("freeHandEllipse",fe({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},Kb));var Yb={create:function(t,n){var i=new it([]);return i._firstClick=n[0],i},update:function(t,n,i,e){var a=i.getMap(),o=e.containerPoint,s=a._prjToContainerPoint(i._firstClick),l=[[s.x,s.y],[o.x,s.y],[o.x,o.y],[s.x,o.y]];i.setCoordinates(l.map(function(u){return a.containerPointToCoord(new B(u))})),i._setPrjCoordinates(l.map(function(u){return a._containerPointToPrj(new B(u))}))},generate:function(t){return t}};xt.registerMode("rectangle",fe({clickLimit:2,action:["click","mousemove","click"]},Yb));xt.registerMode("freeHandRectangle",fe({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},Yb));xt.registerMode("point",{clickLimit:1,action:["click"],create:function(t,n){var i=t.unproject(n[0]),e=new et(i);return e._setPrjCoordinates(n[0]),e},generate:function(t){return t}});var qb={create:function(t,n){var i=n.map(function(a){return t.unproject(a)}),e=new tt(i);return e._setPrjCoordinates(n),e},update:function(t,n,i){var e=i.getSymbol(),a;Array.isArray(n)?a=n:(a=i._getPrjCoordinates(),a.push(n));var o=a.map(function(f){return t.unproject(f)});i.setCoordinates(o),i._setPrjCoordinates(a);var s=i.getLayer();if(s){var l=s.getGeometryById("polygon");if(!l&&a.length>=3){if(l=new it([o],{id:"polygon"}),e){var u=jn(e,{lineOpacity:0});l.setSymbol(u)}l.addTo(s)}l&&l._setPrjCoordinates(a)}},generate:function(t){var n=new it(t.getCoordinates(),{symbol:t.getSymbol()});return n._setPrjCoordinates(t._getPrjCoordinates()),n._projCode=t._projCode,n}};xt.registerMode("polygon",fe({action:["click","mousemove","dblclick"]},qb));xt.registerMode("freeHandPolygon",fe({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},qb));var Go={create:function(t,n){var i=n.map(function(a){return t.unproject(a)}),e=new tt(i);return e._setPrjCoordinates(n),e},update:function(t,n,i){var e;Array.isArray(n)?e=n:(e=i._getPrjCoordinates(),e.push(n));var a=e.map(function(o){return t.unproject(o)});i.setCoordinates(a),i._setPrjCoordinates(e)},generate:function(t){return t}};xt.registerMode("linestring",fe({action:["click","mousemove","dblclick"]},Go));xt.registerMode("freeHandLinestring",fe({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},Go));xt.registerMode("arccurve",{action:["click","mousemove","dblclick"],create:function(t,n){var i=n.map(function(a){return t.unproject(a)}),e=new Kl(i);return e._setPrjCoordinates(n),e},update:Go.update,generate:function(t){return t}});xt.registerMode("quadbeziercurve",{action:["click","mousemove","dblclick"],create:function(t,n){var i=n.map(function(a){return t.unproject(a)}),e=new Hb(i);return e._setPrjCoordinates(n),e},update:Go.update,generate:function(t){return t}});xt.registerMode("cubicbeziercurve",{action:["click","mousemove","dblclick"],create:function(t,n){var i=n.map(function(a){return t.unproject(a)}),e=new Fb(i);return e._setPrjCoordinates(n),e},update:Go.update,generate:function(t){return t}});xt.registerMode("boxZoom",{action:["mousedown","mousemove","mouseup"],create:function(t,n){n=n[0];var i=t.unproject(n),e=new et(i);return e._firstClick=n,e},update:function(t,n,i,e){var a=i.getMap(),o=a._prjToContainerPoint(i._firstClick),s=e.containerPoint;n=a._containerPointToPrj(new te(Math.min(o.x,s.x),Math.min(o.y,s.y)));var l=t.unproject(n);i.setCoordinates(l)._setPrjCoordinates(n),i.updateSymbol({markerWidth:Math.abs(o.x-s.x),markerHeight:Math.abs(o.y-s.y)})},generate:function(t){return t}});function Jp(r){for(var t=r.tileInfo,n=[t.cols,t.rows],i=[],e=t.lods,a=0,o=e.length;a<o;a++)i.push(e[a].resolution);var s=r.fullExtent,l=t.origin,u=[1,-1,l.x,l.y];return delete s.spatialReference,{spatialReference:{resolutions:i,fullExtent:s},tileSystem:u,tileSize:n}}Nn.loadArcgis=function(r,t,n){if(n===void 0&&(n={jsonp:!0}),Re(r)&&r.substring(0,1)!=="{")Zt.getJSON(r,function(e,a){if(e){t(e);return}var o=Jp(a);t(null,o)},n);else{Re(r)&&(r=Oc(r));var i=Jp(r);t(null,i)}return this};function dL(r){for(var t="",n=r.split(""),i=n.length,e=i-1;e>=0&&!isNaN(n[e]);e--)t=n[e]+t;return t}function vL(r){var t=r.indexOf("EPSG")>-1?r:"EPSG:"+r;return t=Xb(t,[["4490","4326"],["102100","3857"],["900913","3857"]]),t}function Xb(r,t){return t===void 0&&(t=[]),t.forEach(function(n){var i=n[0],e=n[1];r=r.replace(i,e)}),r}function gL(r){var t=r.projection,n=r.isArcgis,i=r.isGeoServer,e=r.isSuperMap,a=.0002645833333333333;return(n||i||e)&&(a=28e-5),t&&t.indexOf("4326")>-1&&(a=23767925226029154e-25,(n||e)&&(a=2518101729011901e-24),i&&(a=251528279553466e-23)),a}function pL(r,t){for(var n=0;n<r.length;n++){var i=r[n];if(i=i.getElementsByTagName("ows:Identifier")[0],i&&i.textContent===t)return r[n]}return null}function mL(r,t,n){n.isArcgis==null&&(n.isArcgis=r.indexOf("arcgis")>-1),n.isSuperMap==null&&(n.isSuperMap=r.indexOf("supermap")>-1);var i=new DOMParser,e=i.parseFromString(r,"text/xml"),a=e.querySelectorAll("Contents")[0];if(!a)return[];var o=a.getElementsByTagName("Layer");if(!o.length)return[];for(var s=[],l=0,u=a.childNodes.length;l<u;l++)a.childNodes[l].nodeName==="TileMatrixSet"&&s.push(a.childNodes[l]);if(!s.length)return[];for(var f=[],h=0,c=o.length;h<c;h++){var d=o[h],v=d.querySelectorAll("Style")[0];v&&(v=v.getElementsByTagName("ows:Identifier")[0],v&&(v=v.textContent));var g=d.getElementsByTagName("ows:Identifier")[0];g&&(g=g.textContent);var m=d.getElementsByTagName("TileMatrixSetLink");if(m.length!==0)for(var p=0,_=m.length;p<_;p++){var b=m[p];b=b.getElementsByTagName("TileMatrixSet")[0],b&&(b=b.textContent);var x=pL(s,b);if(!!x){var C=d.querySelectorAll("ResourceURL")[0],y="";C&&(y=C.attributes.template.value);var w=_L(x,n),P=w.resolutions,T=w.tileSize,L=w.tileSystem,j=w.projection,M=w.TileMatrixSet,D=w.isGeoServer,R=w.levelStr;y.length||(y=t.substr(0,t.lastIndexOf("?")),y+="?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT={tiles}&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}");var I=Xb(y,[["{LAYER}",g],["{Layer}",g],["{layer}",g],["{STYLE}",v],["{Style}",v],["{style}",v],["{TileMatrixSet}",M],["{TileMatrix}",D?R+":{z}":"{z}"],["{TileRow}","{y}"],["{TileCol}","{x}"],["{tiles}",D?"image/png":"tiles"]]);f.push({tileSize:T,tileSystem:L,spatialReference:{resolutions:P,projection:j},urlTemplate:I,info:{layerName:g,TileMatrixSet:M,style:v,tileSize:T,tileSystem:L,resolutions:P,projection:j,urlTemplate:I}})}}}return f}function _L(r,t){t===void 0&&(t={});var n=r.getElementsByTagName("TileMatrix"),i=[],e=[],a=[],o,s,l=!1,u;if(!o){var f=r.getElementsByTagName("ows:SupportedCRS")[0];f&&(o=f.textContent,o=o.split("EPSG")[1],o=dL(o),o=vL(o))}s||(s=r.getElementsByTagName("ows:Identifier")[0],s&&(s=s.textContent)),t.projection=o;for(var h=1/0,c=0;c<n.length;c++){var d=n[c],v=d.getElementsByTagName("ows:Identifier")[0].textContent;isNaN(parseInt(v))?(u=v.substr(0,v.lastIndexOf(":")),v=v.split(":"),v=v[v.length-1],v=parseInt(v),l=!0,t.isGeoServer=!0):v=parseInt(v),h=Math.min(h,v);var g=d.getElementsByTagName("ScaleDenominator")[0].textContent,m=d.getElementsByTagName("TopLeftCorner")[0].textContent,p=d.getElementsByTagName("TileWidth")[0].textContent,_=d.getElementsByTagName("TileHeight")[0].textContent;if(a.length===0&&a.push(parseInt(p),parseInt(_)),e.length===0){var b=m.split(" ").filter(function(L){return L!==""}).map(function(L){return parseFloat(L)}),x=b[0],C=b[1];x>0?e.push(1,-1,C,x):e.push(1,-1,x,C)}var y=gL(t),w=parseFloat(g)*y;i.push(w)}if(h>0)for(var P=i[0],T=h-1;T>=0;T--)P=P*2,i.splice(0,0,P);return{resolutions:i,tileSize:a,tileSystem:e,projection:o,TileMatrixSet:s,isGeoServer:l,levelStr:u}}Nn.loadWMTS=function(r,t,n){return n===void 0&&(n={jsonp:!0}),Re(r)&&Zt.get(r,function(i,e){if(i){t(i);return}var a=mL(e,r,n);t(null,a)},n),this};var yL={eventsPropagation:!1,eventsToStop:null,dx:0,dy:0,autoPan:!1,autoPanDuration:600,single:!0,animation:"scale",animationOnHide:!1,animationDuration:500,pitchWithMap:!1,rotateWithMap:!1,visible:!0,roundPoint:!1},di=function(r){re(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n.addTo=function(e){return this._owner=e,this._switchEvents("on"),this.onAdd&&this.onAdd(),this.fire("add"),this},n.getMap=function(){return this._owner?this._owner.getBaseLayer?this._owner:this._owner.getMap():null},n.show=function(e){var a=this.getMap();if(!a)return this;this.options.visible=!0,e=e||this._coordinate||this._owner.getCenter();var o=this.isVisible();this.fire("showstart");var s=this._getUIContainer();this._coordinate=e,this._removePrevDOM(),this._mapEventsOn||this._switchMapEvents("on");var l=this.__uiDOM=this.buildOn(a);if(l.eventsPropagation=this.options.eventsPropagation,this._observerDomSize(l),!l)return this.fire("showend"),this;this._measureSize(l),this._singleton()&&(l._uiComponent=this,a[this._uiDomKey()]=l),this._setPosition(),l.style[ys]=null,s.appendChild(l);var u=this._getAnimation();if(o&&(u.ok=!1),u.ok&&(u.fade&&(l.style.opacity=0),u.scale)){if(this.getTransformOrigin){var f=this.getTransformOrigin();l.style[vk]=f}l.style[Li]=this._toCSSTranslate(this._pos)+" scale(0)"}this.isSupportZoomFilter()||(l.style.display=""),this.options.eventsToStop&&rt(l,this.options.eventsToStop,Jt),this.options.autoPan&&this._autoPan();var h=u.transition;return u.ok&&h&&(l.offsetHeight,h&&(l.style[ys]=h),u.fade&&(l.style.opacity=1),u.scale&&(l.style[Li]=this._toCSSTranslate(this._pos)+" scale(1)")),this.fire("showend"),this},n.hide=function(){var e=this;if(!this.getDOM())return this;this.options.visible=!1;var a=this._getAnimation(),o=this.getDOM();return this.options.animationOnHide||(a.ok=!1),a.ok?(o.offsetHeight,o.style[ys]=a.transition,setTimeout(function(){o.style.display="none",e.fire("hide")},this.options.animationDuration)):(o.style.display="none",this.fire("hide")),a.fade&&(o.style.opacity=0),a.scale&&(o.style[Li]=this._toCSSTranslate(this._pos)+" scale(0)"),this._switchMapEvents("off"),this},n.isVisible=function(){if(!this.options.visible)return!1;var e=this.getDOM();return this.getMap()&&e&&e.parentNode&&e.style.display!=="none"},n.remove=function(){return delete this._mapEventsOn,this._owner?(this.hide(),this._switchEvents("off"),this.onRemove&&this.onRemove(),!this._singleton()&&this.__uiDOM&&this._removePrevDOM(),delete this._owner,this.fire("remove"),this):this},n.getSize=function(){return this._domContentRect&&this._size&&(this._size.width=this._domContentRect.width,this._size.height=this._domContentRect.height),this._size?this._size.copy():null},n.getOwner=function(){return this._owner},n.getDOM=function(){return this.__uiDOM},n._roundPoint=function(e){return this.options.roundPoint&&(e=e._round()),e},n.getPosition=function(){if(!this.getMap())return null;var e=this._roundPoint(this._getViewPoint());if(this.getOffset){var a=this._roundPoint(this.getOffset());a&&e._add(a)}return e},n._getAnimation=function(){for(var e={fade:!1,scale:!1},a=this.options.animation?this.options.animation.split(","):[],o=0;o<a.length;o++){var s=U0(a[o]);s==="fade"?e.fade=!0:s==="scale"&&(e.scale=!0)}var l=null;return e.fade&&(l="opacity "+this.options.animationDuration+"ms"),e.scale&&(l=l?l+",":"",l+=Li+" "+this.options.animationDuration+"ms"),e.transition=l,e.ok=l!==null,e},n._getViewPoint=function(){var e=0;if(this._owner&&this._owner.getAltitude){var a=this._owner.getAltitude();a>0&&(e=this._meterToPoint(this._coordinate,a))}return this.getMap().coordToViewPoint(this._coordinate,void 0,e)._add(this.options.dx,this.options.dy)},n._meterToPoint=function(e,a){var o=this.getMap();return o.distanceToPoint(a,0,void 0,e).x*dt(a)},n._autoPan=function(){var e=this.getMap(),a=this.getDOM();if(!e.isMoving()){var o=this._getViewPoint()._round(),s=e.width,l=e.height,u=e.viewPointToContainerPoint(o),f=this.getOffset(),h=u.add(f),c=e._viewPointToPrj(o),d=parseInt(a.clientWidth),v=parseInt(a.clientHeight),g=50,m=0,p=0;if(h.x<0?m=-h.x+g:h.x+d>s&&(m=-(h.x+d-s)-g),h.y<0?p=-h.y+g:h.y+v>l&&(p=l-(h.y+v)-g),p!==0||m!==0){var _=u.add(m,p),b=e._containerPointToPoint(_)._sub(e._prjToPoint(e._getPrjCenter())),x=e._pointToPrj(e._prjToPoint(c).sub(b));e._panAnimation(x)}}},n._measureSize=function(e){var a=this._getUIContainer();e.style.position="absolute",e.style.left=-99999+"px";var o=e.style.bottom?"bottom":"top";return e.style[o]=-99999+"px",e.style.display="",a.appendChild(e),this._size=new st(e.clientWidth,e.clientHeight),e.style.display="none",e.style.left="0px",e.style[o]="0px",this._size},n._removePrevDOM=function(){this.onDomRemove&&this.onDomRemove();var e=this.options.eventsToStop;if(this._singleton()){var a=this.getMap(),o=this._uiDomKey();a[o]&&(e&&lt(a[o],e,Jt),la(a[o]),a[o]._uiComponent&&!this.hideDom&&a[o]._uiComponent._switchMapEvents("off"),delete a[o]),delete this.__uiDOM}else this.__uiDOM&&(e&&lt(this.__uiDOM,e,Jt),la(this.__uiDOM),delete this.__uiDOM);this._resizeObserver&&(this._resizeObserver.disconnect(),delete this._resizeObserver,delete this._domContentRect)},n._uiDomKey=function(){return"__ui_"+this._getClassName()},n._singleton=function(){return this.options.single},n._getUIContainer=function(){return this.getMap()._panels.ui},n._getClassName=function(){return"UIComponent"},n._switchMapEvents=function(e){var a=this.getMap();if(!!a){this._mapEventsOn=e==="on";var o=this._getDefaultEvents();if(this.getEvents&&fe(o,this.getEvents()),o)for(var s in o)o.hasOwnProperty(s)&&a[e](s,o[s],this)}},n._switchEvents=function(e){var a=this._getOwnerEvents();if(this._owner)for(var o in a)a.hasOwnProperty(o)&&this._owner[e](o,a[o],this)},n._getDefaultEvents=function(){return{"zooming rotate pitch":this.onEvent,zoomend:this.onZoomEnd,moving:this.onMoving,resize:this.onResize}},n._getOwnerEvents=function(){var e={};return this._owner&&this._owner instanceof je&&(e.positionchange=this.onGeometryPositionChange,e.symbolchange=this.onGeometryPositionChange),this.getOwnerEvents&&fe(e,this.getOwnerEvents()),e},n.onGeometryPositionChange=function(e){this._owner&&this.isVisible()&&this.show(e.target.getCenter())},n.onMoving=function(){this.isVisible()&&this.getMap().isTransforming()&&this._updatePosition()},n.onEvent=function(){this.isVisible()&&this._updatePosition()},n.onZoomEnd=function(){this.isVisible()&&this._setPosition()},n.onResize=function(){this.isVisible()&&this._setPosition()},n.onDomSizeChange=function(){this.isVisible()&&this._setPosition()},n._updatePosition=function(){var e=this.getMap()._getRenderer();e.callInNextFrame(this._setPosition.bind(this))},n._setPosition=function(){var e=this.getDOM();if(!!e){e.style[ys]=null;var a=this.getPosition();this._pos=a,e.style[Li]=this._toCSSTranslate(a)+" scale(1)"}},n._toCSSTranslate=function(e){if(!e)return"";if(De.any3d){var a=this.getMap(),o=a?a.getBearing():0,s=a?a.getPitch():0,l="";return this.options.pitchWithMap&&s&&(l+=" rotateX("+Math.round(s)+"deg)"),this.options.rotateWithMap&&o&&(l+=" rotateZ("+Math.round(-o)+"deg)"),"translate3d("+e.x+"px,"+e.y+"px, 0px)"+l}else return"translate("+e.x+"px,"+e.y+"px)"},n._observerDomSize=function(e){var a=this;return!e||!De.resizeObserver||this._resizeObserver?this:(this._resizeObserver=new ResizeObserver(function(o){o.length?a._domContentRect=o[0].contentRect:delete a._domContentRect,a.onDomSizeChange&&a.onDomSizeChange()}),this._resizeObserver.observe(e),this)},n.isSupportZoomFilter=function(){return!1},t.isSupport=function(e){return!!(e&&Xe(e.on)&&Xe(e.off)&&Xe(e.getCenter))},t}(fr(_n));di.mergeOptions(yL);var bL={containerClass:null,eventsPropagation:!0,draggable:!1,single:!1,content:null,altitude:0,minZoom:0,maxZoom:null},Qp="mousedown mouseup mouseenter mouseover mouseout mousemove click dblclick contextmenu keypress touchstart touchmove touchend",qc=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,e)||this,a._markerCoord=new te(i),a}var n=t.prototype;return n._getClassName=function(){return"UIMarker"},n.setCoordinates=function(e){return this._markerCoord=e,this.fire("positionchange"),this.isVisible()&&(this._coordinate=this._markerCoord,this._setPosition()),this},n.getCoordinates=function(){return this._markerCoord},n.getCenter=function(){return this.getCoordinates()},n.getAltitude=function(){return this.options.altitude||0},n.setContent=function(e){var a=this.options.content;return this.options.content=e,this.fire("contentchange",{old:a,new:e}),this.isVisible()&&this.show(),this},n.getContent=function(){return this.options.content},n.onAdd=function(){this.show()},n.show=function(){return r.prototype.show.call(this,this._markerCoord)},n.flash=function(e,a,o,s){return I0.call(this,e,a,o,s)},n.buildOn=function(){var e;return Re(this.options.content)?(e=we("div"),e.innerHTML=this.options.content):e=this.options.content,this.options.containerClass&&(e.className=this.options.containerClass),this._registerDOMEvents(e),e},n.getOffset=function(){var e=this.getSize();return new B(-e.width/2,-e.height/2)},n.getTransformOrigin=function(){return"center center"},n.onDomRemove=function(){var e=this.getDOM();this._removeDOMEvents(e)},n.isDragging=function(){return this.draggable?this.draggable.isDragging():!1},n._registerDOMEvents=function(e){rt(e,Qp,this._onDomEvents,this)},n._onDomEvents=function(e){var a=this.getMap()._parseEvent(e,e.type);this.fire(e.type,a)},n._removeDOMEvents=function(e){lt(e,Qp,this._onDomEvents)},n._getConnectPoints=function(){var e=this.getMap(),a=e.coordToContainerPoint(this.getCoordinates()),o=this.getSize(),s=o.width,l=o.height,u=[e.containerPointToCoordinate(a.add(-s/2,0)),e.containerPointToCoordinate(a.add(s/2,0)),e.containerPointToCoordinate(a.add(0,l/2)),e.containerPointToCoordinate(a.add(0,-l/2))];return u},n._getViewPoint=function(){var e=0;if(this._owner){var a=this.getAltitude();a>0&&(e=this._meterToPoint(this._coordinate,a))}return this.getMap().coordToViewPoint(this._coordinate,void 0,e)._add(this.options.dx,this.options.dy)},n._getDefaultEvents=function(){return fe({},r.prototype._getDefaultEvents.call(this),{"zooming zoomend":this.onZoomFilter})},n._setPosition=function(){this.onZoomFilter(),r.prototype._setPosition.call(this)},n.onZoomFilter=function(){var e=this.getDOM();!e||(!this.isVisible()&&e.style.display!=="none"?e.style.display="none":this.isVisible()&&e.style.display==="none"&&(e.style.display=""))},n.isVisible=function(){var e=this.getMap();if(!e||!this.options.visible)return!1;var a=e.getZoom(),o=this.options,s=o.minZoom,l=o.maxZoom;if(!N(s)&&a<s||!N(l)&&a>l)return!1;var u=this.getDOM();return u&&!0},n.isSupportZoomFilter=function(){return!0},t}(zc(di));qc.mergeOptions(bL);var em=De.touch?"touchstart mousedown":"mousedown",xL=function(r){re(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n.addHooks=function(){this.target.on(em,this._startDrag,this)},n.removeHooks=function(){this.target.off(em,this._startDrag,this)},n._startDrag=function(e){var a=e.domEvent;a.touches&&a.touches.length>1||a.button===2||this.isDragging()||(this.target.on("click",this._endDrag,this),this._lastCoord=e.coordinate,this._lastPoint=e.containerPoint,this._prepareDragHandler(),this._dragHandler.onMouseDown(e.domEvent),this.target.fire("dragstart",e))},n._prepareDragHandler=function(){this._dragHandler=new wa(this.target.getDOM(),{cancelOn:this._cancelOn.bind(this),ignoreMouseleave:!0}),this._dragHandler.on("mousedown",this._onMouseDown,this),this._dragHandler.on("dragging",this._dragging,this),this._dragHandler.on("mouseup",this._endDrag,this),this._dragHandler.enable()},n._cancelOn=function(e){var a=e.srcElement||e.target,o=a.tagName.toLowerCase();return o==="button"||o==="input"||o==="select"||o==="option"||o==="textarea"},n._onMouseDown=function(e){Jt(e.domEvent)},n._dragging=function(e){var a=this.target,o=a.getMap(),s=o._parseEvent(e.domEvent),l=s.domEvent;if(!(l.touches&&l.touches.length>1)){if(!this._isDragging){this._isDragging=!0;return}var u=s.coordinate,f=s.containerPoint;this._lastCoord||(this._lastCoord=u),this._lastPoint||(this._lastPoint=f);var h=u.sub(this._lastCoord),c=f.sub(this._lastPoint);this._lastCoord=u,this._lastPoint=f,this.target.setCoordinates(this.target.getCoordinates().add(h)),s.coordOffset=h,s.pointOffset=c,a.fire("dragging",s)}},n._endDrag=function(e){var a=this.target,o=a.getMap();if(this._dragHandler&&(a.off("click",this._endDrag,this),this._dragHandler.disable(),delete this._dragHandler),delete this._lastCoord,delete this._lastPoint,this._isDragging=!1,!!o){var s=o._parseEvent(e.domEvent);a.fire("dragend",s)}},n.isDragging=function(){return!!this._isDragging},t}(En);qc.addInitHook("addHandler","draggable",xL);var wL=/\{ *([\w_]+) *\}/g,Jb={containerClass:"maptalks-msgBox",autoPan:!0,autoCloseOn:null,autoOpenOn:"click",width:"auto",minHeight:120,custom:!1,title:null,content:null,enableTemplate:!1},CL=new st(0,0),_h=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n._getClassName=function(){return"InfoWindow"},n.addTo=function(e){return e instanceof je&&(e.getInfoWindow()&&e.getInfoWindow()!==this&&e.removeInfoWindow(),e._infoWindow=this),r.prototype.addTo.call(this,e)},n.setContent=function(e){var a=this.options.content;return this.options.content=e,this.fire("contentchange",{old:a,new:e}),this.isVisible()&&this.show(this._coordinate),this},n.getContent=function(){return this.options.content},n.setTitle=function(e){var a=e;return this.options.title=e,this.fire("contentchange",{old:a,new:e}),this.isVisible()&&this.show(this._coordinate),this},n.getTitle=function(){return this.options.title},n.buildOn=function(){if(this.options.custom)if(Re(this.options.content)){var e=we("div");return e.innerHTML=this.options.content,this._replaceTemplate(e),e}else return this._replaceTemplate(this.options.content),this.options.content;var a=we("div");this.options.containerClass&&(a.className=this.options.containerClass);var o=this._getWindowWidth();a.style.width=be(o)?o+"px":"auto",a.style.bottom="0px";var s='<em class="maptalks-ico"></em>';this.options.title&&(s+="<h2>"+this.options.title+"</h2>"),s+='<a href="javascript:void(0);" class="maptalks-close"></a><div class="maptalks-msgContent"></div>',a.innerHTML=s,this._replaceTemplate(a);var l=a.querySelector(".maptalks-msgContent");Re(this.options.content)?l.innerHTML=this.options.content:l.appendChild(this.options.content),this._onCloseBtnClick=this.hide.bind(this);var u=a.querySelector(".maptalks-close");return kr(u,"click touchend",this._onCloseBtnClick),this._replaceTemplate(l),a},n._replaceTemplate=function(e){if(this.options.enableTemplate&&this._owner&&this._owner.getProperties&&e&&e.innerHTML){var a=this._owner.getProperties()||{};if(Pn(a)){var o=e.innerHTML;e.innerHTML=o.replace(wL,function(s,l){return a[l]})}}return this},n.getTransformOrigin=function(){var e=this.getSize();return e.width/2+"px bottom"},n.getOffset=function(){var e=this.getSize(),a=new B(-e.width/2,0);this.options.custom?a._sub(0,e.height):a._sub(4,12);var o=this.getOwner();if(o instanceof et||o instanceof ml){var s,l;if(o instanceof et)s=o._getPainter(),l=o.getSize();else{var u=o.getGeometries();if(!u||!u.length)return a;s=u[0]._getPainter(),l=u[0].getSize()}if(l||(l=CL),s){var f=s.getFixedExtent();a._add(f.xmax-l.width/2,f.ymin)}else a._add(0,-l.height)}return a},n.show=function(e){return this.getMap()?this.getMap().options.enableInfoWindow?r.prototype.show.call(this,e):this:this},n.getEvents=function(){if(!this.options.autoCloseOn)return null;var e={};return e[this.options.autoCloseOn]=this.hide,e},n.getOwnerEvents=function(){var e=this.getOwner();if(!this.options.autoOpenOn||!e)return null;var a={};return a[this.options.autoOpenOn]=this._onAutoOpen,a},n.onRemove=function(){this.onDomRemove()},n.onDomRemove=function(){if(this._onCloseBtnClick){var e=this.getDOM(),a=e.childNodes[2];_i(a,"click touchend",this._onCloseBtnClick),delete this._onCloseBtnClick}},n._onAutoOpen=function(e){var a=this,o=this.getOwner();setTimeout(function(){o instanceof et||o instanceof di?a.show(o.getCoordinates()):o instanceof ml?a.show(o.findClosest(e.coordinate)):((o instanceof tt||o instanceof _l)&&a.getMap().getScale()>=8&&(e.coordinate=a._rectifyMouseCoordinte(o,e.coordinate)),a.show(e.coordinate))},1)},n._rectifyMouseCoordinte=function(e,a){var o=this;return e instanceof tt?this._rectifyLineStringMouseCoordinate(e,a).coordinate:e instanceof _l?e.getGeometries().map(function(s){return o._rectifyLineStringMouseCoordinate(s,a)}).sort(function(s,l){return s.dis-l.dis})[0].coordinate:a},n._rectifyLineStringMouseCoordinate=function(e,a){for(var o=this,s=e.getCoordinates().map(function(Z){return o.getMap().coordToContainerPoint(Z)}),l=this.getMap().coordToContainerPoint(a),u=1/0,f=-1,h=0,c=s.length;h<c;h++){var d=s[h],v=l.distanceTo(d);v<u&&(u=v,f=h)}var g=[];f===0?g.push(s[0],s[1]):f===s.length-1?g.push(s[f-1],s[f]):g.push(s[f-1],s[f],s[f+1]);for(var m=[],p=this.getMap().getSize(),_=p.width,b=p.height,x=0,C=g.length-1;x<C;x++){var y=g[x],w=g[x+1];if(y.x===w.x)for(var P=Math.max(0,Math.min(y.y,w.y)),T=Math.min(b,Math.max(y.y,w.y)),L=P;L<=T;L++)m.push(new B(y.x,L));else for(var j=(w.y-y.y)/(w.x-y.x),M=Math.max(0,Math.min(y.x,w.x)),D=Math.min(_,Math.max(y.x,w.x)),R=M;R<=D;R++){var I=j*(R-y.x)+y.y;m.push(new B(R,I))}}for(var z=1/0,F=-1,O=0,A=m.length;O<A;O++){var $=m[O],J=l.distanceTo($);J<z&&(z=J,F=O)}return{dis:z,coordinate:F<0?a:this.getMap().containerPointToCoord(m[F])}},n._getWindowWidth=function(){var e=Jb.width,a=this.options.width;return a||(a=e),a},t}(di);_h.mergeOptions(Jb);var tm="remove hide shapechange positionchange dragend animatestart",PL={width:0,height:0,animation:"fade",containerClass:"maptalks-tooltip",showTimeout:400},TL=function(r){re(n,r);var t=n.prototype;t._getClassName=function(){return"ToolTip"};function n(i,e){var a;return e===void 0&&(e={}),a=r.call(this,e)||this,a._content=i,a}return t.addTo=function(e){if(n.isSupport(e))return e.on("mousemove",this.onMouseMove,this),e.on("mouseout",this.onMouseOut,this),e.on(tm,this.hideDom,this),r.prototype.addTo.call(this,e);throw new Error("Invalid geometry or UIMarker the tooltip is added to.")},t.setStyle=function(e){return this.options.containerClass=e,this},t.getStyle=function(){return this.options.containerClass},t.getContent=function(){return this._content},t.buildOn=function(){var e=we("div"),a=this.options||{};a.height&&(e.style.height=a.height+"px"),a.width&&(e.style.width=a.width+"px");var o=a.containerClass||a.cssName;return!o&&a.height&&(e.style.lineHeight=a.height+"px"),e.innerHTML='<div class="'+o+'">'+this._content+"</div>",e},t.onMouseOut=function(){clearTimeout(this._timeout),this.isVisible()&&this._removePrevDOM(),this._switchMapEvents("off")},t.onMouseMove=function(e){var a=this;clearTimeout(this._timeout);var o=this.getMap();if(!!o){var s=o.locateByPoint(e.coordinate,-5,25);this.options.showTimeout===0?this.show(s):this._timeout=setTimeout(function(){o&&a.show(s)},this.options.showTimeout)}},t.onRemove=function(){clearTimeout(this._timeout),this._owner&&(this._owner.off("mouseover",this.onMouseOver,this),this._owner.off("mouseout",this.onMouseOut,this),this._owner.off(tm,this.hideDom,this))},t.hideDom=function(){return this.hide()},t.onEvent=function(){return r.prototype.onEvent.call(this),this.hideDom(),this},t._getViewPoint=function(){return this.getMap().coordToViewPoint(this._coordinate,void 0,0)._add(this.options.dx,this.options.dy)},n}(di);TL.mergeOptions(PL);var SL={containerClass:"maptalks-menu",animation:null,animationDelay:10,animationOnHide:!1,autoPan:!1,width:160,maxHeight:0,custom:!1,items:[]},Qb=function(r){re(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n._getClassName=function(){return"Menu"},n.addTo=function(e){return e._menu&&e._menu!==this&&e.removeMenu(),e._menu=this,this._owner=e,di.prototype.addTo.apply(this,arguments)},n.setItems=function(e){return this.options.items=e,this},n.getItems=function(){return this.options.items||[]},n.buildOn=function(){if(this.options.custom)if(Re(this.options.items)){var e=we("div");return e.innerHTML=this.options.items,e}else return this.options.items;else{var a=we("div");this.options.containerClass&&Zi(a,this.options.containerClass),a.style.width=this._getMenuWidth()+"px";var o=this._createMenuItemDom();return a.appendChild(o),rt(a,"contextmenu",dn),a}},n.getOffset=function(){if(!this.getMap())return null;var e=this.getMap().getSize(),a=this.getMap().viewPointToContainerPoint(this._getViewPoint()),o=this.getSize(),s=0,l=0;return a.x+o.width>e.width&&(s=-o.width),a.y+o.height>e.height&&(l=-o.height),new B(s,l)},n.getTransformOrigin=function(){var e=this.getOffset()._multi(-1);return e.x+"px "+e.y+"px"},n.getEvents=function(){return{"_zoomstart _zoomend _movestart _dblclick _click":this._removePrevDOM}},n._createMenuItemDom=function(){var e=this,a=this.getMap(),o=we("ul");Zi(o,"maptalks-menu-items");var s=this.getItems();function l(g){return function(m){var p=a._parseEvent(m,"click");p.target=e,p.owner=e._owner,p.index=g;var _=this._callback(p);_!==!1&&(e.hide(),e._owner&&e._owner.fire("closemenu"))}}for(var u,f,h=0,c=s.length;h<c;h++){if(u=s[h],u==="-"||u==="_")f=we("li"),Zi(f,"maptalks-menu-splitter");else{f=we("li");var d=u.item;Xe(d)&&(d=d({owner:this._owner,index:h})),f.innerHTML=d,f._callback=u.click,rt(f,"click",l(h))}o.appendChild(f)}var v=this.options.maxHeight||0;return v>0&&jc(o,"max-height: "+v+"px; overflow-y: auto;"),o},n._getMenuWidth=function(){var e=160,a=this.options.width||e;return a},t}(di);Qb.mergeOptions(SL);var ex={setMenu:function(t){return this._menuOptions=t,this._menu?this._menu.setOptions(t):this.on("contextmenu",this._defaultOpenMenu,this),this},getMenu:function(){return this._menu},openMenu:function(t){var n=this instanceof Te?this:this.getMap();return t||(t=this.getCenter()),this._menu?this._menu.show(t):this._menuOptions&&n&&(this._bindMenu(),this._menu.show(t)),this.fire("openmenu",{coordinate:t}),this},setMenuItems:function(t){return this._menuOptions||(this._menuOptions={}),Array.isArray(t)&&(this._menuOptions.custom=!1),this._menuOptions.items=t,this.setMenu(this._menuOptions),this},getMenuItems:function(){return this._menu?this._menu.getItems():this._menuOptions?this._menuOptions.items||[]:[]},closeMenu:function(){return this._menu&&this._menu.hide(),this.fire("closemenu",{}),this},removeMenu:function(){return this.off("contextmenu",this._defaultOpenMenu,this),this._unbindMenu(),delete this._menuOptions,this.fire("removemenu",{}),this},_bindMenu:function(){return this._menuOptions?(this._menu=new Qb(this._menuOptions),this._menu.addTo(this),this):this},_unbindMenu:function(){return this._menu&&(this.closeMenu(),this._menu.remove(),delete this._menu),this},_defaultOpenMenu:function(t){return this.openMenu(t.coordinate),!1}};Te.include(ex);je.include(ex);var ar=function(r){re(t,r);function t(i){return i&&i.position&&!Re(i.position)&&(i.position=fe({},i.position)),r.call(this,i)||this}var n=t.prototype;return n.addTo=function(e){if(this.remove(),!e.options.control)return this;this._map=e;var a=e._panels.control;return this.__ctrlContainer=we("div"),jc(this.__ctrlContainer,"position:absolute;overflow:visible;"),this.update(),a.appendChild(this.__ctrlContainer),this.onAdd&&this.onAdd(),this.fire("add",{dom:a}),this},n.update=function(){return this.__ctrlContainer.innerHTML="",this._controlDom=this.buildOn(this.getMap()),this._controlDom&&(this._updatePosition(),this.__ctrlContainer.appendChild(this._controlDom)),this},n.getMap=function(){return this._map},n.getPosition=function(){return fe({},this._parse(this.options.position))},n.setPosition=function(e){return Re(e)?this.options.position=e:this.options.position=fe({},e),this._updatePosition(),this},n.getContainerPoint=function(){var e=this.getPosition(),a=this.getMap().getSize(),o,s;return N(e.left)?N(e.right)||(o=a.width-parseInt(e.right)):o=parseInt(e.left),N(e.top)?N(e.bottom)||(s=a.height-parseInt(e.bottom)):s=parseInt(e.top),new B(o,s)},n.getContainer=function(){return this.__ctrlContainer},n.getDOM=function(){return this._controlDom},n.show=function(){return this.__ctrlContainer.style.display="",this},n.hide=function(){return this.__ctrlContainer.style.display="none",this},n.isVisible=function(){return this.__ctrlContainer&&this.__ctrlContainer.style.display===""},n.remove=function(){return this._map?(la(this.__ctrlContainer),this.onRemove&&this.onRemove(),delete this._map,delete this.__ctrlContainer,delete this._controlDom,this.fire("remove"),this):this},n._parse=function(e){var a=e;return Re(e)&&(a=t.positions[a]),a},n._updatePosition=function(){var e=this.getPosition();e||(e={top:20,left:20});for(var a in e)e.hasOwnProperty(a)&&(e[a]=parseInt(e[a]),this.__ctrlContainer.style[a]=e[a]+"px");this.fire("positionchange",{position:fe({},e)})},t}(fr(_n));ar.positions={"top-left":{top:20,left:20},"top-right":{top:20,right:20},"bottom-left":{bottom:20,left:20},"bottom-right":{bottom:20,right:20}};Te.mergeOptions({control:!0});Te.include({addControl:function(t){return this._containerDOM.getContext?this:(t.addTo(this),this)},removeControl:function(t){return!t||t.getMap()!==this?this:(t.remove(),this)}});var ML={position:{bottom:0,left:0},content:'<a href="http://maptalks.org" target="_blank">maptalks</a>'},nm="addlayer removelayer setbaselayer baselayerremove",tx=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){return this._attributionContainer=we("div"),this._attributionContainer.className="maptalks-attribution",this._update(),this._attributionContainer},n.onAdd=function(){this.getMap().on(nm,this._update,this)},n.onRemove=function(){this.getMap().off(nm,this._update,this)},n._update=function(){var e=this.getMap();if(!!e){var a=e._getLayers(function(s){return s.options.attribution}).reverse().map(function(s){return s.options.attribution}),o=this.options.content+(a.length>0?" - "+a.join(", "):"");this._attributionContainer.innerHTML='<span style="padding:0px 4px">'+o+"</span>"}},t}(ar);tx.mergeOptions(ML);Te.mergeOptions({attribution:!0});Te.addOnLoadHook(function(){var r=this.options.attribution||this.options.attributionControl;r&&(this.attributionControl=new tx(r),this.addControl(this.attributionControl))});var EL={position:"top-right",baseTitle:"Base Layers",overlayTitle:"Layers",excludeLayers:[],containerClass:"maptalks-layer-switcher"},nx=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){var e=this.container=we("div",this.options.containerClass),a=this.panel=we("div","panel"),o=this.button=we("button");return e.appendChild(o),e.appendChild(a),e},n.onAdd=function(){rt(this.button,"mouseover",this._show,this),rt(this.panel,"mouseleave",this._hide,this),rt(this.getMap(),"click",this._hide,this)},n.onRemove=function(){this.panel&&(lt(this.button,"mouseover",this._show),lt(this.panel,"mouseleave",this._hide),lt(this.getMap(),"click",this._hide),la(this.panel),la(this.button),delete this.panel,delete this.button,delete this.container)},n._show=function(){tb(this.container,"shown")||(Zi(this.container,"shown"),this._createPanel())},n._hide=function(e){this.panel.contains(e.toElement||e.relatedTarget)||Nc(this.container,this.options.containerClass)},n._createPanel=function(){this.panel.innerHTML="";var e=we("ul");this.panel.appendChild(e),this._renderLayers(this.getMap(),e)},n._renderLayers=function(e,a){var o=e.getBaseLayer(),s=e.getLayers(),l=s.length;if(o){var u=o.layers||[o],f=we("li","group"),h=we("ul"),c=we("label");c.innerHTML=this.options.baseTitle,f.appendChild(c);for(var d=0,v=u.length;d<v;d++){var g=u[d];this._isExcluded(g)&&(h.appendChild(this._renderLayer(u[d],!0)),f.appendChild(h),a.appendChild(f))}}if(l){var m=we("li","group"),p=we("ul"),_=we("label");_.innerHTML=this.options.overlayTitle,m.appendChild(_);for(var b=0;b<l;b++){var x=s[b];this._isExcluded(x)&&p.appendChild(this._renderLayer(x))}m.appendChild(p),a.appendChild(m)}},n._isExcluded=function(e){var a=e.getId(),o=this.options.excludeLayers;return!(o.length&&o.indexOf(a)>=0)},n._renderLayer=function(e,a){var o=this,s=we("li","layer"),l=we("label"),u=we("input"),f=this.getMap(),h=e.options.visible;e.options.visible=!0;var c=e.isVisible();return e.options.visible=h,s.className="layer",a?(u.type="radio",u.name="base"):u.type="checkbox",u.checked=h&&c,c||u.setAttribute("disabled","disabled"),u.onchange=function(d){if(d.target.type==="radio"){var v=f.getBaseLayer(),g=v.layers;if(g)for(var m=0,p=g.length;m<p;m++){var _=g[m];_[_===e?"show":"hide"]()}else v.isVisible()||v.show();f._fireEvent("setbaselayer")}else e[d.target.checked?"show":"hide"]();o.fire("layerchange",{target:e})},s.appendChild(u),l.innerHTML=e.getId(),s.appendChild(l),s},t}(ar);nx.mergeOptions(EL);Te.mergeOptions({layerSwitcherControl:!1});Te.addOnLoadHook(function(){this.options.layerSwitcherControl&&(this.layerSwitcherControl=new nx(this.options.layerSwitcherControl),this.addControl(this.layerSwitcherControl))});var OL={level:4,position:{right:1,bottom:1},size:[300,200],maximize:!0,symbol:{lineWidth:3,lineColor:"#1bbc9b",polygonFill:"#1bbc9b",polygonOpacity:.4},containerClass:"maptalks-overview",buttonClass:"maptalks-overview-button"},rx=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){var e=this.options.size;this.options.maximize||(e=[0,0]);var a=we("div"),o=this.mapContainer=we("div");o.style.width=e[0]+"px",o.style.height=e[1]+"px",o.className=this.options.containerClass;var s=this.button=we("div");return s.className=this.options.buttonClass,a.appendChild(o),a.appendChild(s),a},n.onAdd=function(){this.options.maximize&&this._createOverview(),this.getMap().on("resize moving zooming rotate dragrotating viewchange",this._update,this).on("setbaselayer",this._updateBaseLayer,this).on("spatialreferencechange",this._updateSpatialReference,this),rt(this.button,"click",this._onButtonClick,this),this._updateButtonText()},n.onRemove=function(){this.getMap().off("resize moving zooming rotate dragrotating viewchange",this._update,this).off("setbaselayer",this._updateBaseLayer,this).off("spatialreferencechange",this._updateSpatialReference,this),this._overview&&(this._overview.remove(),delete this._overview,delete this._perspective),lt(this.button,"click",this._onButtonClick)},n.maxmize=function(){var e=this.options.size,a=this.mapContainer;return a.style.width=e[0]+"px",a.style.height=e[1]+"px",this._createOverview(),this},n.minimize=function(){this._overview&&this._overview.remove(),delete this._overview,delete this._perspective;var e=this.mapContainer;return e.style.width=0+"px",e.style.height=0+"px",this},n.getOverviewMap=function(){return this._overview},n._onButtonClick=function(){this._overview?this.minimize():this.maxmize(),this._updateButtonText()},n._updateButtonText=function(){this._overview?this.button.innerHTML="-":this.button.innerHTML="+"},n._createOverview=function(){var e=this.getMap(),a=this.mapContainer,o=e.config();fe(o,{center:e.getCenter(),zoom:this._getOverviewZoom(),zoomAnimationDuration:150,pitch:0,bearing:0,scrollWheelZoom:!1,checkSize:!1,doubleClickZoom:!1,touchZoom:!1,control:!1,draggable:!1,maxExtent:null}),this._overview=new Te(a,o),this._updateBaseLayer(),this._perspective=new it(this._getPerspectiveCoords(),{draggable:!0,cursor:"move",symbol:this.options.symbol}).on("dragend",this._onDragEnd,this),new $n("perspective_layer",this._perspective).addTo(this._overview),this.fire("load")},n._getOverviewZoom=function(){var e=this.getMap(),a=e.getZoom(),o=e.getMinZoom(),s=this.options.level;if(s>0){for(var l=s;l>0;l--)if(a-l>=o)return a-l}else for(var u=s;u<0;u++)if(a-u>=o)return a-u;return a},n._onDragEnd=function(){var e=this._perspective.getCenter();this._overview.setCenter(e),this.getMap().panTo(e)},n._getPerspectiveCoords=function(){var e=this.getMap();return e.getContainerExtent().toArray().map(function(a){return e.containerPointToCoordinate(a)})},n._update=function(){if(!!this._overview){Gl(this._overview._containerDOM);var e=this._getPerspectiveCoords();this._perspective.setCoordinates(e),this._overview.setCenterAndZoom(this.getMap().getCenter(),this._getOverviewZoom())}},n._updateSpatialReference=function(){if(!!this._overview){var e=this.getMap(),a=e.options.spatialReference;this._overview.setSpatialReference(a)}},n._updateBaseLayer=function(){if(!!this._overview){var e=this.getMap(),a=e.getBaseLayer();if(!a){this._overview.setBaseLayer(null);return}var o=a.layers,s=0;if(o)for(var l=0,u=o.length;l<u;l++){var f=o[l];if(f.isVisible()){s=l;break}}var h=a.toJSON(),c=null;o?(c=h.layers[s].options,c.visible=!0):c=h.options,this._overview.setMinZoom(c.minZoom||null).setMaxZoom(c.maxZoom||null),delete c.minZoom,delete c.maxZoom,delete h.options.canvas,h.options.visible=!0,h.options.renderer="canvas";var d=kt.fromJSON(h);for(var v in a)Xe(a[v])&&a.hasOwnProperty(v)&&a[v]!==a.constructor.prototype[v]&&(d[v]=a[v]);this._overview.setBaseLayer(d)}},t}(ar);rx.mergeOptions(OL);Te.mergeOptions({overviewControl:!1});Te.addOnLoadHook(function(){this.options.overviewControl&&(this.overviewControl=new rx(this.options.overviewControl),this.addControl(this.overviewControl))});var AL={position:"top-right",draggable:!0,custom:!1,content:"",closeButton:!0},RL=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(){var e;if(this.options.custom)Re(this.options.content)?(e=we("div"),e.innerHTML=this.options.content):e=this.options.content;else{if(e=we("div","maptalks-panel"),this.options.closeButton){var a=we("a","maptalks-close");a.href="javascript:;",a.onclick=function(){e.style.display="none"},e.appendChild(a)}var o=we("div","maptalks-panel-content");o.innerHTML=this.options.content,e.appendChild(o)}return this.draggable=new wa(e,{cancelOn:this._cancelOn.bind(this),ignoreMouseleave:!0}),this.draggable.on("dragstart",this._onDragStart,this).on("dragging",this._onDragging,this).on("dragend",this._onDragEnd,this),this.options.draggable&&this.draggable.enable(),e},n.update=function(){return this.draggable&&(this.draggable.disable(),delete this.draggable),ar.prototype.update.call(this)},n.setContent=function(e){var a=this.options.content;return this.options.content=e,this.fire("contentchange",{old:a,new:e}),this.isVisible()&&this.update(),this},n.getContent=function(){return this.options.content},n._cancelOn=function(e){var a=e.srcElement||e.target,o=a.tagName.toLowerCase();return o==="button"||o==="input"||o==="select"||o==="option"||o==="textarea"},n._onDragStart=function(e){this._startPos=e.mousePos,this._startPosition=fe({},this.getPosition()),this.fire("dragstart",e)},n._onDragging=function(e){var a=e.mousePos,o=a.sub(this._startPos),s=this._startPosition,l=this.getPosition();N(l.top)||(l.top=parseInt(s.top)+o.y),N(l.bottom)||(l.bottom=parseInt(s.bottom)-o.y),N(l.left)||(l.left=parseInt(s.left)+o.x),N(l.right)||(l.right=parseInt(s.right)-o.x),this.setPosition(l),this.fire("dragging",e)},n._onDragEnd=function(e){delete this._startPos,delete this._startPosition,this.fire("dragend",e)},n._getConnectPoints=function(){var e=this.getMap(),a=this.getContainerPoint(),o=this.getDOM(),s=parseInt(o.clientWidth),l=parseInt(o.clientHeight),u=[e.containerPointToCoordinate(a.add(s/2,0)),e.containerPointToCoordinate(a.add(s,l/2)),e.containerPointToCoordinate(a.add(s/2,l)),e.containerPointToCoordinate(a.add(0,l/2))];return u},t}(ar);RL.mergeOptions(AL);var IL={position:"bottom-left",maxWidth:100,metric:!0,imperial:!1,containerClass:null},ix=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(e){return this._map=e,this._scaleContainer=we("div",this.options.containerClass),this._addScales(),e.on("zoomend",this._update,this),this._map._loaded&&this._update(),this._scaleContainer},n.onRemove=function(){this.getMap().off("zoomend",this._update,this)},n._addScales=function(){var e="border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden;-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);";this.options.metric&&(this._mScale=yp("div",this.options.containerClass?null:e,this._scaleContainer)),this.options.imperial&&(this._iScale=yp("div",this.options.containerClass?null:e,this._scaleContainer))},n._update=function(){var e=this._map,a=e.pixelToDistance(this.options.maxWidth,0);this._updateScales(a)},n._updateScales=function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},n._updateMetric=function(e){var a=this._getRoundNum(e),o=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,o,a/e)},n._updateImperial=function(e){var a=e*3.2808399,o,s,l;a>5280?(o=a/5280,s=this._getRoundNum(o),this._updateScale(this._iScale,s+" mile",s/o)):(l=this._getRoundNum(a),this._updateScale(this._iScale,l+" feet",l/a))},n._updateScale=function(e,a,o){e.style.width=Math.round(this.options.maxWidth*o)+"px",e.innerHTML=a},n._getRoundNum=function(e){var a=Math.pow(10,(Math.floor(e)+"").length-1),o=e/a;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,a*o},t}(ar);ix.mergeOptions(IL);Te.mergeOptions({scaleControl:!1});Te.addOnLoadHook(function(){this.options.scaleControl&&(this.scaleControl=new ix(this.options.scaleControl),this.addControl(this.scaleControl))});var kL={height:28,vertical:!1,position:"top-right",reverseMenu:!1,items:{}},DL=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(e){this._map=e;var a=we("div"),o=we("ul","maptalks-toolbar-hx");a.appendChild(o),this.options.vertical?Zi(a,"maptalks-toolbar-vertical"):Zi(a,"maptalks-toolbar-horizonal");var s=this;function l(m,p,_,b){var x=s._getItems()[p];return function(C){return Jt(C),m({target:x,index:p,childIndex:_,dom:b})}}var u=this.options.items;if(We(u))for(var f=0,h=u.length;f<h;f++){var c=u[f],d=we("li");if(this.options.height!==28&&(d.style.lineHeight=this.options.height+"px"),d.style.height=this.options.height+"px",d.style.cursor="pointer",_k(c.item)){d.style.textAlign="center";var v=yk("div",c.item);d.innerHTML='<div style="margin-top:'+(this.options.height-v.height)/2+'px;">'+c.item+"</div>"}else d.innerHTML=c.item;if(c.click&&rt(d,"click",l(c.click,f,null,d)),We(c.children)){var g=this._createDropMenu(f);d.appendChild(g),d._menu=g,rt(d,"mouseover",function(){this._menu.style.display=""}),rt(d,"mouseout",function(){this._menu.style.display="none"})}o.appendChild(d)}return a},n._createDropMenu=function(e){var a=this;function o(C,y,w){var P=a._getItems()[y].children[w];return function(T){return Jt(T),C({target:P,index:y,childIndex:w})}}var s=we("div","maptalks-dropMenu"),l=this._getItems(),u=l.length,f=we("ul"),h=l[e].children;e===u-1&&h&&(s.style.cssText="right: 0px;",f.style.cssText="right: 0px;position: absolute;",this.options.reverseMenu&&(f.style.bottom=0)),s.appendChild(we("em","maptalks-ico"));for(var c=0,d=0,v=h.length;d<v;d++){var g=K0(h[d].item,"12px");g.width>c&&(c=g.width)}for(var m=0,p=h.length;m<p;m++){var _=h[m],b=we("li");b.innerHTML='<a href="javascript:;">'+_.item+"</a>",b.style.cursor="pointer",b.style.width=c+24+"px",rt(b.childNodes[0],"click",o(_.click,e,m)),f.appendChild(b)}if(this.options.vertical){var x=c<95?95:c;this.options.reverseMenu?s.style.right=-(x+10*2)+"px":s.style.left=-(x+10*2)+"px"}else this.options.reverseMenu?s.style.bottom="28px":s.style.top="28px";return s.appendChild(f),s.style.display="none",s},n._getItems=function(){return this.options.items||[]},t}(ar);DL.mergeOptions(kL);var LL={position:"top-left",slider:!0,zoomLevel:!0,seamless:!1},Ur=10,ax=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.buildOn=function(e){var a=this.options,o=we("div","maptalks-zoom");if(a.zoomLevel){var s=we("span","maptalks-zoom-zoomlevel");o.appendChild(s),this._levelDOM=s}var l=we("div","maptalks-zoom-slider"),u=we("a","maptalks-zoom-zoomin");if(u.href="javascript:;",u.innerHTML="+",l.appendChild(u),this._zoomInButton=u,a.slider){var f=we("div","maptalks-zoom-slider-box"),h=we("div","maptalks-zoom-slider-ruler"),c=we("span","maptalks-zoom-slider-reading"),d=we("span","maptalks-zoom-slider-dot");h.appendChild(c),f.appendChild(h),f.appendChild(d),l.appendChild(f),this._sliderBox=f,this._sliderRuler=h,this._sliderReading=c,this._sliderDot=d}var v=we("a","maptalks-zoom-zoomout");return v.href="javascript:;",v.innerHTML="-",l.appendChild(v),this._zoomOutButton=v,o.appendChild(l),e.on("_zoomend _zooming _zoomstart _spatialreferencechange",this._update,this),this._update(),this._registerDomEvents(),o},n.onRemove=function(){this.getMap().off("_zoomend _zooming _zoomstart _spatialreferencechange",this._update,this),this._zoomInButton&&lt(this._zoomInButton,"click",this._onZoomInClick),this._zoomOutButton&&lt(this._zoomOutButton,"click",this._onZoomOutClick),this._sliderRuler&&(lt(this._sliderRuler,"click",this._onClickRuler),this.dotDragger.disable(),delete this.dotDragger)},n._update=function(){var e=this.getMap();if(this._sliderBox){var a=(e.getMaxZoom()-e.getMinZoom())*Ur;this._sliderBox.style.height=a+16+"px",this._sliderRuler.style.height=a+8+"px",this._sliderRuler.style.cursor="pointer";var o=(e.getMaxZoom()-e.getZoom())*Ur;this._sliderReading.style.height=(e.getZoom()-e.getMinZoom()+1)*Ur+"px",this._sliderDot.style.top=o+"px"}this._updateText()},n._updateText=function(){if(this._levelDOM){var e=this.getMap(),a=e.getZoom();Pr(a)||(a=Math.floor(a*10)/10),this._levelDOM.innerHTML=a}},n._registerDomEvents=function(){this._zoomInButton&&rt(this._zoomInButton,"click",this._onZoomInClick,this),this._zoomOutButton&&rt(this._zoomOutButton,"click",this._onZoomOutClick,this),this._sliderRuler&&(rt(this._sliderRuler,"click",this._onClickRuler,this),this.dotDragger=new wa(this._sliderDot,{ignoreMouseleave:!0}),this.dotDragger.on("dragstart",this._onDotDragstart,this).on("dragging dragend",this._onDotDrag,this).enable())},n._onZoomInClick=function(e){dn(e),this.getMap().zoomIn()},n._onZoomOutClick=function(e){dn(e),this.getMap().zoomOut()},n._onClickRuler=function(e){dn(e);var a=this.getMap(),o=Ft(e,this._sliderRuler),s=o.y,l=a.getMaxZoom(),u=Math.floor(l-s/Ur);a.setZoom(u)},n._onDotDragstart=function(e){dn(e.domEvent);var a=this.getMap(),o=a.getSize().toPoint()._multi(1/2);a.onZoomStart(a.getZoom(),o)},n._onDotDrag=function(e){dn(e.domEvent);var a=this.getMap(),o=a.getSize().toPoint()._multi(1/2),s=Ft(e.domEvent,this._sliderRuler),l=a.getMaxZoom(),u=a.getMinZoom(),f=s.y,h=l-f/Ur;l<h?(h=l,f=0):u>h&&(h=u,f=(l-u)*Ur),e.type==="dragging"?a.onZooming(h,o,1):e.type==="dragend"&&(this.options.seamless?a.onZoomEnd(h,o):a.onZoomEnd(Math.round(h),o)),this._sliderDot.style.top=f+"px",this._sliderReading.style.height=(a.getZoom()-u+1)*Ur+"px",this._updateText()},t}(ar);ax.mergeOptions(LL);Te.mergeOptions({zoomControl:!1});Te.addOnLoadHook(function(){this.options.zoomControl&&(this.zoomControl=new ax(this.options.zoomControl),this.addControl(this.zoomControl))});var Sr=function(){function r(t,n,i,e){Array.isArray(t)?(this.scale={x:t[0],y:t[1]},this.origin={x:t[2],y:t[3]}):(this.scale={x:t,y:n},this.origin={x:i,y:e})}return r.getDefault=function(n){return n.code.toLowerCase()==="baidu"?"baidu":n.code.toLowerCase()==="EPSG:4326".toLowerCase()?"tms-global-geodetic":n.code.toLowerCase()==="identity"?[1,-1,0,0]:"web-mercator"},r}(),Es=6378137*Math.PI;fe(Sr,{"web-mercator":new Sr([1,-1,-Es,Es]),"tms-global-mercator":new Sr([1,1,-Es,-Es]),"tms-global-geodetic":new Sr([1,1,-180,-90]),baidu:new Sr([1,1,0,0])});var rm=function(){function r(n,i,e,a){this.map=n,this.tileSize=a,this.fullExtent=e,this.prepareTileInfo(i,e),this._xScale=e.right>=e.left?1:-1,this._yScale=e.top>=e.bottom?1:-1;var o=n.getGLRes();this._pointOrigin=n._prjToPointAtRes(new B(this.tileSystem.origin),o),this._glRes=o}var t=r.prototype;return t.prepareTileInfo=function(i,e){if(Re(i)?i=Sr[i.toLowerCase()]:Array.isArray(i)&&(i=new Sr(i)),!i)throw new Error("Invalid TileSystem");this.tileSystem=i;var a=e.right>e.left?1:-1,o=e.top>e.bottom?-1:1,s=i.origin.x,l=i.origin.y;this.transformation=new sb([a,o,s,l])},t._getTileNum=function(i,e){var a=this.tileSystem,o=this.tileSize,s=1e-7,l=Math.floor(s*a.scale.x+i.x/(o.width*e)),u=Math.ceil(s*a.scale.y+i.y/(o.height*e));return{x:a.scale.x*l,y:a.scale.y*u}},t.getTileIndex=function(i,e,a){var o=this.tileSystem,s=this.transformation.transform(i,1),l=this._getTileNum(s,e);return o.scale.x<0&&(l.x-=1),o.scale.y>0&&(l.y-=1),this.getNeighorTileIndex(l.x,l.y,0,0,e,a)},t.getNeighorTileIndex=function(i,e,a,o,s,l){var u=this.tileSystem,f=i+u.scale.x*a,h=e-u.scale.y*o,c=!1,d=f,v=h,g=this._getTileFullIndex(s);return l&&((l===!0||l==="x")&&(g.xmax===g.xmin?f=g.xmin:f<g.xmin?(f=g.xmax-(g.xmin-f)%(g.xmax-g.xmin),f===g.xmax&&(f=g.xmin)):f>=g.xmax&&(f=g.xmin+(f-g.xmin)%(g.xmax-g.xmin))),(l===!0||l==="y")&&(g.ymax===g.ymin?h=g.ymin:h>=g.ymax?h=g.ymin+(h-g.ymin)%(g.ymax-g.ymin):h<g.ymin&&(h=g.ymax-(g.ymin-h)%(g.ymax-g.ymin),h===g.ymax&&(h=g.ymin)))),(f<g.xmin||f>g.xmax||h>g.ymax||h<g.ymin)&&(c=!0),{x:f,y:h,idx:d,idy:v,out:c}},t._getTileFullIndex=function(i){if(this._tileFullIndex||(this._tileFullIndex={}),this._tileFullIndex[i])return this._tileFullIndex[i];var e=this.fullExtent,a=this.transformation,o=this._getTileNum(a.transform(new te(e.left,e.top),1),i),s=this._getTileNum(a.transform(new te(e.right,e.bottom),1),i),l=this.tileSystem;return l.scale.x<0&&(o.x-=1,s.x-=1),l.scale.y>0&&(o.y-=1,s.y-=1),this._tileFullIndex[i]=new Ye(o,s),this._tileFullIndex[i]},t.getTilePrjNW=function(i,e,a){var o=this.tileSystem,s=this.tileSize,l=o.origin.y+this._yScale*o.scale.y*(e+(o.scale.y===1?1:0))*a*s.height,u=o.origin.x+this._xScale*o.scale.x*(i+(o.scale.x===1?0:1))*a*s.width;return new te(u,l)},t.getTilePointNW=function(i,e,a){var o=this._glRes/a,s=this.tileSystem,l=this.tileSize,u=this._pointOrigin.y*o+this._yScale*s.scale.y*(e+(s.scale.y===1?1:0))*l.height,f=this._pointOrigin.x*o+this._xScale*s.scale.x*(i+(s.scale.x===1?0:1))*l.width;return new B(f,u)},t.getTilePrjSE=function(i,e,a){var o=this.tileSystem,s=this.tileSize,l=o.origin.y+this._yScale*o.scale.y*(e+(o.scale.y===1?0:1))*a*s.height,u=o.origin.x+this._xScale*o.scale.x*(i+(o.scale.x===1?1:0))*a*s.width;return new te(u,l)},t.getTilePointSE=function(i,e,a){var o=this._glRes/a,s=this.tileSystem,l=this.tileSize,u=this._pointOrigin.y*o+this._yScale*s.scale.y*(e+(s.scale.y===1?0:1))*l.height,f=this._pointOrigin.x*o+this._xScale*s.scale.x*(i+(s.scale.x===1?1:0))*l.width;return new B(f,u)},t.getTilePrjExtent=function(i,e,a){var o=this.getTilePrjNW(i,e,a),s=this.getTilePrjSE(i,e,a);return new Ye(o,s)},r}(),jL=1,Wa=new B(0,0),NL=32,Os=typeof Set!="undefined",im=function(){function r(){this._table=Os?new Set:{}}var t=r.prototype;return t.add=function(i){Os?this._table.add(i):this._table[i]=!0},t.has=function(i){return Os?this._table.has(i):this._table[i]},t.reset=function(){Os?this._table.clear():this._table={}},r}(),zL={urlTemplate:null,subdomains:null,errorUrl:null,repeatWorld:!0,background:!0,backgroundZoomDiff:6,loadingLimitOnInteracting:3,tileRetryCount:0,placeholder:!1,crossOrigin:null,tileSize:[256,256],offset:[0,0],tileSystem:null,fadeAnimation:!ct,debug:!1,spatialReference:null,maxCacheSize:256,renderer:function(){return De.webgl?"gl":"canvas"}(),clipByPitch:!0,maxAvailableZoom:null,cascadeTiles:!0,zoomOffset:0,pyramidMode:1,decodeImageInWorker:!1},FL=/\{ *([\w_]+) *\}/g,HL=new B(0,0),As=new B(0,0),Ga=new B(0,0),br=new B(0,0),BL=new B(0,0),$L=new B(0,0),Lt=[[0,0,0],[0,0,0]],rf=[0,0,0],af=[0,0,0],of=[],Nr=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}t.fromJSON=function(e){return!e||e.type!=="TileLayer"?null:new t(e.id,e.options)};var n=t.prototype;return n.getTileSize=function(){if(this._tileSize)return this._tileSize;var e=this.options.tileSize;return be(e)&&(e=[e,e]),this._tileSize=new st(e),this._tileSize},n.getTiles=function(e,a){this._coordCache={};var o=this.getSpatialReference();return!this._disablePyramid&&!this._hasOwnSR&&this.options.pyramidMode&&o&&o.isPyramid()?this._getPyramidTiles(e,a):this._getCascadeTiles(e,a)},n._getTileFullExtent=function(){if(this._tileFullExtent)return this._tileFullExtent;var e=this.getSpatialReference(),a=e.getFullExtent(),o=e.getResolution(0),s=this.getMap();return this._tileFullExtent=a.convertTo(function(l){return s._prjToPointAtRes(l,o,Wa)}),this._tileFullExtent},n._getRootNodes=function(e){var a=this.getMap();if(this._rootNodes){var o=this._rootNodes,s=o.tiles,l=o.mapWidth,u=o.mapHeight;if(a.width!==l||a.height!==u){for(var f=this._getRootError(),h=0;h<s.length;h++)s[h].error=f;this._rootNodes.mapWidth=a.width,this._rootNodes.mapHeight=a.height}for(var c=0;c<s.length;c++)s[c].offset[0]=e[0],s[c].offset[1]=e[1];return this._rootNodes}var d=this.getSpatialReference(),v=d.getResolution(0),g=this._getTileConfig(),m=d.getFullExtent(),p=g.tileSystem,_=p.origin,b=p.scale,x=g.getTilePrjExtent(0,0,v),C=x.getWidth(),y=x.getHeight(),w=1e-5,P=Math.abs((_.x-m.left)/C);P=Math.ceil(P-w);var T=Math.abs((m.right-_.x)/C);T=Math.ceil(T-w);var L=Math.ceil(Math.abs(m.top-_.y)/y);L=Math.ceil(L-w);var j=Math.ceil(Math.abs(m.bottom-_.y)/y);if(j=Math.ceil(j-w),(T+P)*(j+L)>NL)return{status:0,error:"Too many root nodes"};for(var M=this._getRootError(),D=[],R=0,I=-P;I<T;I++)for(var z=-L;z<j;z++){var F=b.y<0?z:-(z+1);D.push({x:I,y:F,z:R,idx:I,idy:F,extent2d:g.getTilePrjExtent(I,F,v).convertTo(function(O){return a._prjToPointAtRes(O,v,Wa)}),id:this._getTileId(I,F,R),url:this.getTileUrl(I,F,R+this.options.zoomOffset),offset:[0,0],error:M})}return this._rootNodes={status:1,tiles:D,mapWidth:a.width,mapHeight:a.height},this._getRootNodes(e)},n._getRootError=function(){var e=this.getMap(),a=Ct(e.getFov()),o=e.width/e.height,s=e.cameraPosition[2],l=s*Math.tan(.5*a),u=l*o,f=Math.sqrt(s*s+l*l+u*u),h=e._getFovZ(0),c=h*(f/s),d=this.getSpatialReference(),v=d.getResolution(0);return c*v/e.getResolution(0)},n._getPyramidTiles=function(e,a){var o=this.getMap();isNaN(+e)&&(e=this._getTileZoom(o.getZoom()));var s=this.getSpatialReference(),l=Math.min(e,this.getMaxZoom()),u=o.projViewMatrix,f=this._getTileFullExtent(),h=this._getTileOffset(0),c;if(this.options.repeatWorld){var d=o.getContainerExtent(),v=this._convertToExtent2d(d),g=s.getResolution(0)/o.getResolution();if(v.within(f.copy()._scale(g))){var y=this._getRootNodes(h);if(y.status!==1)return console.warn(y.error),this._disablePyramid=!0,this.getTiles(e,a);c=y.tiles.concat()}else{var m=o.getPitch(),p=o.options.cascadePitches[1],_=Math.floor(o._getVisualHeight(p)),b=m<=p?d:new Ee(0,o.height-_,o.width,o.height);this._visitedTiles=new im;var x=this._getTiles(0,b,2,a&&a.getRenderer(),!0),C=this._getRootError();x.tiles.forEach(function(D){D.error=C}),c=x.tiles}}else{var w=this._getRootNodes(h);if(w.status!==1)return console.warn(w.error),this._disablePyramid=!0,this.getTiles(e,a);c=w.tiles.concat()}for(var P=o.getGLRes(),T={0:h},L=new Ee,j=[];c.length>0;){var M=c.pop();if(M.z===l){L._combine(M.extent2d),j.push(M);continue}T[M.z+1]||(T[M.z+1]=this._getTileOffset(M.z+1)),this._splitNode(M,u,c,j,L,l,T[M.z+1],a&&a.getRenderer(),P)}return{tileGrids:[{extent:L,count:j.length,tiles:j,offset:[0,0],zoom:e}],count:j.length}},n._splitNode=function(e,a,o,s,l,u,f,h,c){for(var d=this._getTileConfig().tileSystem,v=d.scale.y,g=e.z+1,m=this.getSpatialReference(),p=e.x,_=e.y,b=e.extent2d,x=e.idx,C=e.idy,y=2,w=b.getWidth()/2*y,P=b.getHeight()/2*y,T=b.xmin*y,L=b.ymax*y,j=b.ymin*y,M=h||this.getRenderer(),D=!1,R=[],I=m.getResolution(g)/c,z=0;z<4;z++){var F=z%2,O=z>>1,A=(p<<1)+F,$=(_<<1)+O,J=(x<<1)+F,Z=(C<<1)+O,ae=this._getTileId(J,Z,g),U=M.isTileCachedOrLoading(ae),W=void 0;if(!U)if(v<0){var ne=T+F*w,de=L-O*P;W=new Ee(ne,de-P,ne+w,de)}else{var ge=T+F*w,ve=j+O*P;W=new Ee(ge,ve,ge+w,ve+P)}var ce=U&&U.info;ce||(ce={x:A,y:$,idx:J,idy:Z,z:g,extent2d:W,error:e.error/2,id:ae,url:this.getTileUrl(A,$,g+this.options.zoomOffset),offset:f},h&&(ce.layer=this.getId())),ce.error=e.error/2,ce.offset[0]=f[0],ce.offset[1]=f[1];var Me=this._isTileVisible(ce,a,I,u,f);if(Me===1)D=!0;else{if(Me===-1)continue;if(Me===0&&g!==u){s.push(e),l._combine(e.extent2d);return}}R.push(ce)}g===u?D?o.push.apply(o,R):(s.push(e),l._combine(e.extent2d)):o.push.apply(o,R)},n._isTileVisible=function(e,a,o,s,l){if(e.z===0)return 1;if(!this._isTileInFrustum(e,a,o,l))return-1;var u=this.options.maxError;N(u)&&(u=jL);var f=this._getScreenSpaceError(e,o,s,l);return f>=u?1:0},n._isTileInFrustum=function(e,a,o,s){var l=e.extent2d,u=l.xmin,f=l.ymin,h=l.xmax,c=l.ymax;return Lt[0][0]=(u-s[0])*o,Lt[0][1]=(f-s[1])*o,Lt[1][0]=(h-s[0])*o,Lt[1][1]=(c-s[1])*o,Mu(a,Lt)},n._getScreenSpaceError=function(e,a,o,s){var l=e.error,u=this.getMap(),f=e.extent2d,h=f.xmin,c=f.ymin,d=f.xmax,v=f.ymax;rf[0]=(h-s[0])*a,rf[1]=(c-s[1])*a,af[0]=(d-s[0])*a,af[1]=(v-s[1])*a;var g=WL(rf,af,u.cameraPosition),m=Math.max(Math.abs(g),1e-7),p=Math.abs(e.z-o),_;u.height<1e3?_=1:_=p<=1?1:p<=2?.7:.605;var b=l*_/m;return b},n._getCascadeTiles=function(e,a){var o=this.getMap(),s=o.getPitch(),l=a&&a.getRenderer(),u=o.getContainerExtent(),f=[],h=0,c=this.getMinZoom(),d=o.options.cascadePitches[0],v=o.options.cascadePitches[1],g=Math.floor(o._getVisualHeight(v)),m=N(e)?this._getTileZoom(o.getZoom()):e;if(this._visitedTiles=new im,!N(e)||!this.options.cascadeTiles||s<=d||!N(c)&&m<=c){var p=s<=v?u:new Ee(0,o.height-g,o.width,o.height),_=this._getTiles(m,p,2,l);return _&&(h+=_.tiles.length,f.push(_)),{tileGrids:f,count:h}}var b=Math.floor(o._getVisualHeight(d)),x=new Ee(0,o.height-b,o.width,o.height),C=this._getTiles(m,x,0,l);h+=C?C.tiles.length:0,f.push(C);var y=x.ymin,w=o.getSpatialReference().getZoomDirection(),P=w,T;if(s>v){m-P<=c&&(P=0);var L=new Ee(0,o.height-g,o.width,y);T=this._getTiles(m-P,L,1,l),h+=T?T.tiles.length:0,y=L.ymin,P+=4*w}var j;if(m-P>=c){var M=new Ee(0,u.ymin,o.width,y);j=this._getTiles(m-P,M,2,l),h+=j?j.tiles.length:0,f.push(j)}return T&&j&&(f[1]=j,f[2]=T),{tileGrids:f,count:h}},n.getTileUrl=function(e,a,o){var s=this.options.urlTemplate,l="";if(this.options.subdomains){var u=this.options.subdomains;if(We(u)){var f=u.length,h=(e+a)%f;h<0&&(h=0),l=u[h]}}if(Xe(s))return s(e,a,o,l);var c={x:e,y:a,z:o,s:l};return this.options.token&&(c.token=this.options.token),s.replace(FL,function(d,v){var g=c[v];if(g===void 0)throw new Error("No value provided for variable "+d);return typeof g=="function"&&(g=g(c)),g})},n.clear=function(){return this._renderer&&this._renderer.clear(),this.fire("clear"),this},n.toJSON=function(){var e={type:this.getJSONType(),id:this.getId(),options:this.config()};return e},n.getSpatialReference=function(){var e=this.getMap();if(e&&(!this.options.spatialReference||Nn.equals(this.options.spatialReference,e.options.spatialReference)))return e.getSpatialReference();if(this._sr)return this._sr;var a=this.options.spatialReference;if(Re(a)&&(a=Nn.getPreset(a),!a))throw new Error("Unsupported spatial reference: "+this.options.spatialReference+", possible values: "+Nn.getAllPresets().join());return this._sr=new Nn(a),this._srMinZoom=this._sr.getMinZoom(),this._srMaxZoom=this._sr.getMaxZoom(),this._hasOwnSR=this._sr.toJSON().projection!==e.getSpatialReference().toJSON().projection,this._sr},n.getMinZoom=function(){var e=this.getSpatialReference();return e!==this.getMap().getSpatialReference()?Math.max(r.prototype.getMinZoom.call(this),this._srMinZoom):r.prototype.getMinZoom.call(this)},n.getMaxZoom=function(){var e=this.getSpatialReference();return e!==this.getMap().getSpatialReference()?Math.min(r.prototype.getMaxZoom.call(this),this._srMaxZoom):r.prototype.getMaxZoom.call(this)},n._getTileZoom=function(e){if(!this._hasOwnSR){var a=this.getMap().getResolution(e),o=this.getSpatialReference().getResolution(e),s=Math.log(o/a)*Math.LOG2E;e+=s}var l=this.options.maxAvailableZoom;return!N(l)&&e>l&&(e=l),Pr(e)||(e=Math.round(e)),e=Math.max(0,e),e},n._getTiles=function(e,a,o,s,l){var u=this.getMap(),f=e,h=u.projViewMatrix;o<2&&(o===0&&(f-=1),h=o===0?u.cascadeFrustumMatrix0:o===1?u.cascadeFrustumMatrix1:u.projViewMatrix);var c=f+this.options.zoomOffset,d=this._getTileOffset(c),v=d[0]||d[1],g={zoom:f,extent:null,offset:d,tiles:[]};if(c<0||!u||!this.isVisible()||!u.width||!u.height)return g;if(!l){var m=this.getMinZoom(),p=this.getMaxZoom();if(!N(m)&&f<m||!N(p)&&f>p)return g}var _=this._getTileConfig();if(!_)return g;var b={zoom:d},x=this.getSpatialReference(),C=x.getResolution(c),y;this._hasOwnSR?y=u.getGLScale(f):y=C/u.getGLRes();var w=!this._hasOwnSR&&this.options.repeatWorld,P=this._convertToExtent2d(a),T=this._getMask2DExtent();if(T){var L=T.intersection(P);if(!L)return g;a=L.convertTo(function(wt){return u._pointToContainerPoint(wt,void 0,0,Wa)})}var j=u._containerPointToPrj(a.getCenter(),HL),M=u._prjToPoint(j,c,As),D;v?D=this._project(u._pointToPrj(M._add(d),c,As),As):D=this._project(j,As);var R=u.getGLScale()/u.getGLScale(c);Ga.x=P.xmin*R,Ga.y=P.ymax*R,br.x=P.xmax*R,br.y=P.ymin*R;for(var I=this._project(u._pointToPrj(Ga._add(d),c,Ga),Ga),z=this._project(u._pointToPrj(br._add(d),c,br),br),F=_.getTileIndex(D,C,w),O=_.getTileIndex(I,C,w),A=_.getTileIndex(z,C,w),$=Math.ceil(Math.abs(F.idy-O.idy)),J=Math.ceil(Math.abs(F.idx-O.idx)),Z=Math.ceil(Math.abs(F.idy-A.idy)),ae=Math.ceil(Math.abs(F.idx-A.idx)),U=($+Z+1)*(J+ae+1),W=this.getTileSize(),ne=this.getRenderer()||s,de=this._getTileConfig().tileSystem.scale,ge=[],ve=new Ee,ce=new B(0,0),Me=-$;Me<=Z;Me++)for(var Ce=-J,S=-1/0,k=!1;Ce>=S&&Ce<=ae;){var H=_.getNeighorTileIndex(F.idx,F.idy,Ce,Me,C,w);S===-1/0?Ce++:Ce--;var K=this._getTileId(H.idx,H.idy,f);if(!(H.out||this._visitedTiles&&this._visitedTiles.has(K))){var G=ne&&ne.isTileCachedOrLoading(K);G&&(G=G.info);var X=void 0;if(G){var se=G,ie=se.extent2d;ce.set(ie.xmin,ie.ymax),X=ce}else if(!this._hasOwnSR)X=_.getTilePointNW(H.x,H.y,C);else{var oe=_.getTilePrjNW(H.x,H.y,C);X=u._prjToPoint(this._unproject(oe,br),f)}var Y=void 0,le=void 0;if(!this._hasOwnSR)Y=W.width,le=W.height;else{var he=void 0;if(!this._hasOwnSR)he=_.getTilePointSE(H.x,H.y,C);else{var pe=_.getTilePrjSE(H.x,H.y,C);he=u._prjToPoint(this._unproject(pe,br),f,br)}Y=Math.ceil(Math.abs(he.x-X.x)),le=Math.ceil(Math.abs(he.y-X.y))}var xe=de.x*(H.idx-H.x)*Y,Oe=de.y*(H.idy-H.y)*le;!G&&(xe||Oe)&&X._add(xe,Oe);var Ne=G&&G.extent2d||new Ee(X.x,X.y-le,X.x+Y,X.y);(U<=4||k||this._isTileInExtent(h,Ne,d,y))&&(this._visitedTiles&&o===0&&this._visitedTiles.add(K),o===0?(this._splitTiles(h,ge,ne,H,f+1,Ne,xe,Oe,b,s),ve._combine(Ne)):(G?(G.offset[0]=d[0],G.offset[1]=d[1]):(G={z:f,x:H.x,y:H.y,idx:H.idx,idy:H.idy,extent2d:Ne,offset:d,id:K,url:this.getTileUrl(H.x,H.y,f)},s&&(G.layer=this.getId())),ge.push(G),ve._combine(Ne)),S===-1/0?(S=Ce,Ce=ae):k||(k=!0))}}if(ge.length){var Fe=u._containerPointToPoint(a.getCenter(),f,Wa)._add(d),Ge=new B(0,0),gt=new B(0,0);ge.sort(function(wt,yn){return Ge.set((wt.extent2d.xmin+wt.extent2d.xmax)/2,(wt.extent2d.ymin+wt.extent2d.ymax)/2),gt.set((yn.extent2d.xmin+yn.extent2d.xmax)/2,(yn.extent2d.ymin+yn.extent2d.ymax)/2),Ge.distanceTo(Fe)-gt.distanceTo(Fe)})}return{offset:d,zoom:e,extent:ve,tiles:ge}},n._convertToExtent2d=function(e){var a=this,o=this.getMap();return e.convertTo(function(s){var l;if(s.y>0&&s.y<o.height){var u=(s.x===0?0:1)+s.y;a._coordCache[u]||(a._coordCache[u]=o._containerPointToPoint(s)),l=a._coordCache[u]}return l=o._containerPointToPoint(s,void 0,Wa),l})},n._splitTiles=function(e,a,o,s,l,u,f,h,c,d){var v=this._getTileConfig().tileSystem.scale.y,g=this.getMap().getGLScale(l),m=BL.set(u.xmin*2,v<0?u.ymax*2:u.ymin*2),p=u.getWidth(),_=u.getHeight(),b=s.idx*2,x=s.idy*2,C=s.x*2,y=s.y*2,w=this._checkAndAddTile(e,o,b,x,C,y,l,0,0,p,_,m,g,c,d);w&&a.push(w),w=this._checkAndAddTile(e,o,b,x,C,y,l,0,1,p,_,m,g,c,d),w&&a.push(w),w=this._checkAndAddTile(e,o,b,x,C,y,l,1,0,p,_,m,g,c,d),w&&a.push(w),w=this._checkAndAddTile(e,o,b,x,C,y,l,1,1,p,_,m,g,c,d),w&&a.push(w)},n._checkAndAddTile=function(e,a,o,s,l,u,f,h,c,d,v,g,m,p,_){var b=this._getTileId(o+h,s+c,f);if(this._visitedTiles&&this._visitedTiles.has(b))return null;var x=p[f];x||(x=p[f]=this._getTileOffset(f));var C=this._getTileConfig().tileSystem.scale.y,y=new Ee(g.x+h*d,g.y+C*c*v,g.x+(h+1)*d,g.y+C*(c+1)*v);if(!this._isSplittedTileInExtent(e,y,x,m))return null;var w=a&&a.isTileCachedOrLoading(b);return w?w=w.info:(w={z:f,x:l+h,y:u+c,extent2d:y,id:b,offset:x,url:this.getTileUrl(l+h,u+c,f+this.options.zoomOffset)},_&&(w.layer=this.getId())),w},n._getTileOffset=function(e){var a=this.options.offset;return Xe(a)&&(a=a(e)),a},n._getTileId=function(e,a,o,s){return(s||this.getId())+"_"+a+"_"+e+"_"+o},n._project=function(e,a){if(this._hasOwnSR){var o=this.getMap(),s=o.getProjection(),l=this.getSpatialReference().getProjection();return l.project(s.unproject(e,a),a)}else return e},n._unproject=function(e,a){if(this._hasOwnSR){var o=this.getMap(),s=this.getSpatialReference(),l=o.getProjection(),u=s.getProjection();return l.project(u.unproject(e,a),a)}else return e},n._initTileConfig=function(){var e=this.getMap(),a=this.getTileSize(),o=this.getSpatialReference(),s=o.getProjection(),l=o.getFullExtent();this._defaultTileConfig=new rm(e,Sr.getDefault(s),l,a),this.options.hasOwnProperty("tileSystem")&&(this._tileConfig=new rm(e,this.options.tileSystem,l,a)),delete this._rootNodes,delete this._tileFullExtent,delete this._disablePyramid},n._getTileConfig=function(){return this._defaultTileConfig||this._initTileConfig(),this._tileConfig||this._defaultTileConfig},n._bindMap=function(e){var a=e.getBaseLayer();return a===this&&(a.options.hasOwnProperty("forceRenderOnMoving")||this.config({forceRenderOnMoving:!0})),this._onSpatialReferenceChange(),r.prototype._bindMap.apply(this,arguments)},n._isTileInExtent=function(e,a,o,s){var l=this.getMap(),u;if(e!==l.projViewMatrix){var f=a.getCenter($L)._sub(o[0],o[1])._multi(s);hn(of,f.x,f.y,0);var h=rL(of,of,l.projViewMatrix);u=h[1]<0?l.projViewMatrix:e}else u=l.projViewMatrix;return Lt[0][0]=(a.xmin-o[0])*s,Lt[0][1]=(a.ymin-o[1])*s,Lt[1][0]=(a.xmax-o[0])*s,Lt[1][1]=(a.ymax-o[1])*s,Mu(u,Lt)},n._isSplittedTileInExtent=function(e,a,o,s){var l=this.getMap();return Lt[0][0]=(a.xmin-o[0])*s,Lt[0][1]=(a.ymin-o[1])*s,Lt[1][0]=(a.xmax-o[0])*s,Lt[1][1]=(a.ymax-o[1])*s,Mu(l.projViewMatrix,Lt)},n.getEvents=function(){return{spatialreferencechange:this._onSpatialReferenceChange}},n._onSpatialReferenceChange=function(){delete this._tileConfig,delete this._defaultTileConfig,delete this._sr,delete this._srMinZoom,delete this._hasOwnSR;var e=this.getRenderer();e&&e.clear()},t}(kt);Nr.registerJSONType("TileLayer");Nr.mergeOptions(zL);function WL(r,t,n){var i=Math.max(r[0]-n[0],0,n[0]-t[0]),e=Math.max(r[1]-n[1],0,n[1]-t[1]),a=Math.max(r[2]-n[2],0,n[2]-t[2]);return Math.sqrt(i*i+e*e+a*a)}var GL=`
function (exports) {
    exports.onmessage = function (msg, postResponse) {
        var url = msg.data.url;
        var fetchOptions = msg.data.fetchOptions;
        requestImageOffscreen(url, function (err, data) {
            var buffers = [];
            if (data && data.data && data.data.buffer) {
                buffers.push(data.data.buffer);
            }
            postResponse(err, data, buffers);
        }, fetchOptions);
    };

    var offCanvas, offCtx;
    function requestImageOffscreen(url, cb, fetchOptions) {
        if (!offCanvas) {
            offCanvas = new OffscreenCanvas(2, 2);
            offCtx = offCanvas.getContext('2d');
        }
        fetch(url, fetchOptions ? fetchOptions : {})
            .then(response => response.blob())
            .then(blob => createImageBitmap(blob))
            .then(bitmap => {
                var { width, height } = bitmap;
                offCanvas.width = width;
                offCanvas.height = height;
                offCtx.drawImage(bitmap, 0, 0);
                bitmap.close();
                var imgData = offCtx.getImageData(0, 0, width, height);
                // debugger
                cb(null, { width, height, data: new Uint8Array(imgData.data) });
            }).catch(err => {
                console.warn('error when loading tile:', url);
                console.warn(err);
                cb(err);
            });
    }
}`;function VL(){!De.decodeImageInWorker||jk(Bc,function(){return GL})}VL();var ZL={maxCacheSize:1024},UL=new st(256,256),ox=function(r){re(t,r),t.fromJSON=function(e){if(!e||e.type!=="GroupTileLayer")return null;var a=e.layers.map(function(o){return kt.fromJSON(o)});return new t(e.id,a,e.options)};function t(i,e,a){var o;return o=r.call(this,i,a)||this,o.layers=e||[],o._checkChildren(),o.layerMap={},o._groupChildren=[],o}var n=t.prototype;return n.getLayers=function(){return this.layers},n.toJSON=function(){var e={type:this.getJSONType(),id:this.getId(),layers:this.layers.map(function(a){return a.toJSON()}),options:this.config()};return e},n.getTileSize=function(e){var a=this.getLayer(e);return a?a.getTileSize():UL},n.getTiles=function(e,a){for(var o=this.layers,s=[],l=0,u=0,f=o.length;u<f;u++){var h=o[u];if(!!h.options.visible){var c=h.getTiles(e,a||this);!c||c.count===0||(l+=c.count,xa(s,c.tileGrids))}}return{count:l,tileGrids:s}},n.onAdd=function(){var e=this,a=this.getMap();this.layers.forEach(function(o){e.layerMap[o.getId()]=o,o.getChildLayer&&e._groupChildren.push(o),o._bindMap(a),o.on("show hide",e._onLayerShowHide,e)}),r.prototype.onAdd.call(this)},n.onRemove=function(){var e=this;this.layers.forEach(function(a){a._doRemove(),a.off("show hide",e._onLayerShowHide,e)}),this.layerMap={},this._groupChildren=[],r.prototype.onRemove.call(this)},n.getLayer=function(e){return this.getChildLayer(e)},n.getChildLayer=function(e){var a=this.layerMap[e];if(a)return a;for(var o=0;o<this._groupChildren.length;o++){var s=this._groupChildren[o].getChildLayer(e);if(s)return s}return null},n._onLayerShowHide=function(){var e=this.getRenderer();e&&e.setToRedraw()},n.isVisible=function(){if(!r.prototype.isVisible.call(this))return!1;for(var e=this.layers,a=0,o=e.length;a<o;a++)if(e[a].isVisible())return!0;return!1},n._checkChildren=function(){var e=this,a={};this.layers.forEach(function(o){var s=o.getId();if(a[s])throw new Error("Duplicate child layer id ("+s+") in the GroupTileLayer ("+e.getId()+")");a[s]=1})},t}(Nr);ox.registerJSONType("GroupTileLayer");ox.mergeOptions(ZL);var sx={crs:null,uppercase:!1,detectRetina:!1},KL={service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},lx=function(r){re(t,r);function t(i,e){var a;a=r.call(this,i)||this;var o=fe({},KL);for(var s in e)s in a.options||(o[s]=e[s]);a.setOptions(e),a.setZIndex(e.zIndex);var l=a.getTileSize();return o.width=l.width,o.height=l.height,a.wmsParams=o,a._wmsVersion=parseFloat(o.version),a}var n=t.prototype;return n.onAdd=function(){var e=this.getMap().getDevicePixelRatio(),a=sx.detectRetina?e:1;this.wmsParams.width*=a,this.wmsParams.height*=a;var o=this.options.crs||this.getMap().getProjection().code,s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=o,r.prototype.onAdd.call(this)},n.getTileUrl=function(e,a,o){var s=this.getSpatialReference().getResolution(o),l=this._getTileConfig(),u=l.getTilePrjExtent(e,a,s),f=u.getMax(),h=u.getMin(),c=(this._wmsVersion>=1.3&&this.wmsParams.crs==="EPSG:4326"?[h.y,h.x,f.y,f.x]:[h.x,h.y,f.x,f.y]).join(","),d=r.prototype.getTileUrl.call(this,e,a,o);return d+YL(this.wmsParams,d,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+c},n.toJSON=function(){return{type:"WMSTileLayer",id:this.getId(),options:this.config()}},t.fromJSON=function(e){return!e||e.type!=="WMSTileLayer"?null:new t(e.id,e.options)},t}(Nr);lx.registerJSONType("WMSTileLayer");lx.mergeOptions(sx);function YL(r,t,n){var i=[];for(var e in r)i.push(encodeURIComponent(n?e.toUpperCase():e)+"="+encodeURIComponent(r[e]));return(!t||t.indexOf("?")===-1?"?":"&")+i.join("&")}var Xc=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,i,e)||this,a.options.hasOwnProperty("forceRenderOnMoving")||(a.options.forceRenderOnMoving=!1),a}var n=t.prototype;return n.drawTile=function(){},n.toJSON=function(){return{type:"CanvasTileLayer",id:this.getId(),options:this.config()}},t.fromJSON=function(e){return!e||e.type!=="CanvasTileLayer"?null:new t(e.id,e.options)},t}(Nr);Xc.registerJSONType("CanvasTileLayer");function qL(r,t){for(var n={alpha:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!1},i=["webgl","experimental-webgl"],e=null,a=0;a<i.length;++a){try{e=r.getContext(i[a],t||n)}catch{}if(e)break}return e}function am(r,t,n){var i=r.createShader(t);r.shaderSource(i,n),r.compileShader(i);var e=r.getShaderParameter(i,r.COMPILE_STATUS);if(!e){var a=r.getShaderInfoLog(i);throw r.deleteShader(i),new Error("Failed to compile shader: "+a)}return i}function ux(r,t,n){var i=am(r,r.VERTEX_SHADER,t),e=am(r,r.FRAGMENT_SHADER,n);if(!i||!e)return null;var a=r.createProgram();return a?(r.attachShader(a,i),r.attachShader(a,e),r.linkProgram(a),{program:a,vertexShader:i,fragmentShader:e}):null}function fx(r,t,n){if(Array.isArray(n[0])){for(var i=Float32Array.BYTES_PER_ELEMENT,e=0,a=0;a<n.length;a++)e+=n[a][1]||0;for(var o=0,s=0;s<n.length;s++){var l=r.getAttribLocation(t,n[s][0]);if(l<0)throw new Error("Failed to get the storage location of "+n[s][0]);r.vertexAttribPointer(l,n[s][1],r[n[s][2]||"FLOAT"],!1,i*e,i*o),o+=n[s][1]||0,r.enableVertexAttribArray(l)}}else{var u=r.getAttribLocation(t,n[0]);r.vertexAttribPointer(u,n[1],r[n[2]||"FLOAT"],!1,0,0),r.enableVertexAttribArray(u)}}var om={vertexShader:`
        attribute vec2 a_position;

        attribute vec2 a_texCoord;

        uniform mat4 u_matrix;

        varying vec2 v_texCoord;

        void main() {
            gl_Position = u_matrix * vec4(a_position, 0., 1.);

            v_texCoord = a_texCoord;
        }
    `,fragmentShader:`
        precision mediump float;

        uniform sampler2D u_image;

        uniform float u_opacity;
        uniform float u_debug_line;

        varying vec2 v_texCoord;

        void main() {
            if (u_debug_line == 1.) {
                gl_FragColor = vec4(0., 1., 0., 1.);
            } else {
                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
            }
        }
    `},Va=[0,0],sf=[0,0,0],XL=new Array(16),JL=new B(20,20),hx=function(t){var n=function(i){re(e,i);function e(){return i.apply(this,arguments)||this}var a=e.prototype;return a.drawGLImage=function(s,l,u,f,h,c,d,v){this.gl.program!==this.program&&this.useProgram(this.program);var g=this.gl;this.loadTexture(s),sf[0]=l||0,sf[1]=u||0;var m=Yc(XL);Vb(m,m,sf),mh(m,m,[c,c,1]),ro(m,this.getMap().projViewMatrix,m),g.uniformMatrix4fv(this.program.u_matrix,!1,m),g.uniform1f(this.program.u_opacity,d),g.uniform1f(this.program.u_debug_line,0);var p=s.glBuffer;p&&(p.width!==f||p.height!==h)&&(this.saveImageBuffer(p),delete s.glBuffer),s.glBuffer?g.bindBuffer(g.ARRAY_BUFFER,p):s.glBuffer=this.bufferTileData(0,0,f,h),Va[0]="a_position",Va[1]=2,Va[2]=s.glBuffer.type,this.enableVertexAttrib(Va),g.drawArrays(g.TRIANGLE_STRIP,0,4),v&&this.drawDebug(m,Va,0,0,f,h,v)},a.drawDebug=function(s,l,u,f,h,c,d){var v=this.gl;v.bindBuffer(v.ARRAY_BUFFER,this._debugBuffer),this.enableVertexAttrib(["a_position",2,"FLOAT"]),v.bufferData(v.ARRAY_BUFFER,new Float32Array([u,f,u+h,f,u+h,f-c,u,f-c,u,f]),v.DYNAMIC_DRAW),v.uniformMatrix4fv(this.program.u_matrix,!1,s),v.uniform1f(this.program.u_debug_line,1),v.drawArrays(v.LINE_STRIP,0,5);var g=this._debugInfoCanvas;if(!g){var m=this.getMap().getDevicePixelRatio()>1?2:1;g=this._debugInfoCanvas=document.createElement("canvas"),g.width=256*m,g.height=32*m;var p=g.getContext("2d");p.font="20px monospace",p.scale(m,m)}var _=g.getContext("2d");_.clearRect(0,0,g.width,g.height);var b=this.layer.options.debugOutline;Q.fillText(_,d,JL,b),this.loadTexture(g),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,g),h=256,c=32;var x=u,C=u+h,y=f,w=f-c;v.bufferData(v.ARRAY_BUFFER,this.set8(x,y,x,w,C,y,C,w),v.DYNAMIC_DRAW),v.uniform1f(this.program.u_debug_line,0),v.drawArrays(v.TRIANGLE_STRIP,0,4)},a.bufferTileData=function(s,l,u,f,h){var c=s,d=s+u,v=l,g=l-f,m;Pr(c)&&Pr(d)&&Pr(v)&&Pr(g)?m=this.set8Int(c,v,c,g,d,v,d,g):m=this.set8(c,v,c,g,d,v,d,g);var p=this.loadImageBuffer(m,h);return p.width=u,p.height=f,p.type=m instanceof Int16Array?"SHORT":"FLOAT",p},a.drawTinImage=function(s,l,u,f,h){var c=this.gl;this.loadTexture(s),c.uniformMatrix4fv(this.program.u_matrix,!1,this.getMap().projViewMatrix),c.uniform1f(this.program.u_opacity,h),c.bindBuffer(c.ARRAY_BUFFER,this.posBuffer),this.enableVertexAttrib(["a_position",3]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(l),c.DYNAMIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,this.texBuffer),this.enableVertexAttrib(["a_texCoord",2]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(u),c.DYNAMIC_DRAW),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,f.length,c.UNSIGNED_SHORT,0)},a.createCanvas2=function(){this.canvas2=Q.createCanvas(this.canvas.width,this.canvas.height)},a.createGLContext=function(){this.canvas.gl&&this.canvas.gl.wrap?this.gl=this.canvas.gl.wrap():this.gl=qL(this.canvas2||this.canvas,this.layer.options.glOptions);var s=this.gl;s.clearColor(0,0,0,0),s.disable(s.DEPTH_TEST),s.enable(s.STENCIL_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.program=this.createProgram(om.vertexShader,this.layer.options.fragmentShader||om.fragmentShader),this._debugBuffer=this.createBuffer(),this.useProgram(this.program),this.texBuffer=this.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.texBuffer),this.enableVertexAttrib(["a_texCoord",2,"UNSIGNED_BYTE"]),s.bufferData(s.ARRAY_BUFFER,new Uint8Array([0,0,0,1,1,0,1,1]),s.STATIC_DRAW),this.enableSampler("u_image"),s.activeTexture(s.TEXTURE0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)},a.resizeGLCanvas=function(){this.gl&&this.gl.viewport(0,0,this.canvas.width,this.canvas.height),!!this.canvas2&&(this.canvas2.width!==this.canvas.width||this.canvas2.height!==this.canvas.height)&&(this.canvas2.width=this.canvas.width,this.canvas2.height=this.canvas.height)},a.clearGLCanvas=function(){this.gl&&this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT)},a.disposeImage=function(s){!s||(s.texture&&this.saveTexture(s.texture),s.glBuffer&&this.saveImageBuffer(s.glBuffer),delete s.texture,delete s.glBuffer)},a._createTexture=function(s){var l=this.gl,u=this.getTexture()||l.createTexture();return l.bindTexture(l.TEXTURE_2D,u),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,s),Pr(fp(s.width))&&Pr(fp(s.width))&&l.generateMipmap(l.TEXTURE_2D),u},a.getTexture=function(){this._textures||(this._textures=[]);var s=this._textures;return s&&s.length>0?s.pop():null},a.saveTexture=function(s){this._textures.push(s)},a.loadTexture=function(s){var l=this.gl,u=s.texture;return u||(u=this._createTexture(s),s.texture=u),l.bindTexture(l.TEXTURE_2D,u),u},a.getImageBuffer=function(){this._imageBuffers||(this._imageBuffers=[]);var s=this._imageBuffers;return s&&s.length>0?s.pop():null},a.saveImageBuffer=function(s){this._imageBuffers||(this._imageBuffers=[]),this._imageBuffers.push(s)},a.loadImageBuffer=function(s,l){var u=this.gl,f=l||this.createImageBuffer();return u.bindBuffer(u.ARRAY_BUFFER,f),u.bufferData(u.ARRAY_BUFFER,s,u.STATIC_DRAW),f},a.createImageBuffer=function(){return this.getImageBuffer()||this.createBuffer()},a.removeGLCanvas=function(){var s=this.gl;if(!!s){if(this._debugBuffer&&(s.deleteBuffer(this._debugBuffer),delete this._debugBuffer),this._buffers&&(this._buffers.forEach(function(f){s.deleteBuffer(f)}),delete this._buffers),this._textures&&(this._textures.forEach(function(f){return s.deleteTexture(f)}),delete this._textures),this._debugInfoCanvas){var l=this._debugInfoCanvas.texture;l&&s.deleteTexture(l),delete this._debugInfoCanvas.texture,delete this._debugInfoCanvas}var u=s.program;s.deleteShader(u.fragmentShader),s.deleteShader(u.vertexShader),s.deleteProgram(u),delete this.gl,delete this.canvas2}},a.createBuffer=function(){var s=this.gl,l=s.createBuffer();if(!l)throw new Error("Failed to create the buffer object");return this._buffers||(this._buffers=[]),this._buffers.push(l),l},a.enableVertexAttrib=function(s){fx(this.gl,this.gl.program,s)},a.createProgram=function(s,l){for(var u=this.gl,f=ux(u,s,l),h=f.program,c=f.vertexShader,d=f.fragmentShader,v=u.getProgramParameter(h,35718),g=[],m=0;m<v;++m){var p=u.getActiveUniform(h,m);g.push(p.name)}return h.vertexShader=c,h.fragmentShader=d,this._initUniforms(h,g),h},a.useProgram=function(s){var l=this.gl;return l.useProgram(s),l.program=s,this},a.enableSampler=function(s,l){var u=this.gl,f=this._getUniform(u.program,s);return l||(l=0),u.uniform1i(f,l),f},a._initUniforms=function(s,l){for(var u=0;u<l.length;u++){var f=l[u],h=l[u],c=f.indexOf("[");c>=0&&(f=f.substring(0,c),ct||(h=h.substring(0,c))),s[f]=this._getUniform(s,h)}},a._getUniform=function(s,l){var u=this.gl,f=u.getUniformLocation(s,l);if(!f)throw new Error("Failed to get the storage location of "+l);return f},e}(t);return fe(n.prototype,{set8:function(){var i=De.ie9?null:new Float32Array(8);return function(e,a,o,s,l,u,f,h){return i[0]=e,i[1]=a,i[2]=o,i[3]=s,i[4]=l,i[5]=u,i[6]=f,i[7]=h,i}}(),set8Int:function(){var i=De.ie9?null:new Int16Array(8);return function(e,a,o,s,l,u,f,h){return i[0]=e,i[1]=a,i[2]=o,i[3]=s,i[4]=l,i[5]=u,i[6]=f,i[7]=h,i}}()}),n},QL={renderer:De.webgl?"gl":"canvas",crossOrigin:null},ej=new B(0,0),Jc=function(r){re(t,r);function t(i,e,a){var o;return e&&!Array.isArray(e)&&!e.url&&(a=e,e=null),o=r.call(this,i,a)||this,o._images=e,o}var n=t.prototype;return n.onAdd=function(){this._prepareImages(this._images)},n.setImages=function(e){return this._images=e,this._prepareImages(e),this},n.getImages=function(){return this._images},n._prepareImages=function(e){e=e||[],Array.isArray(e)||(e=[e]);var a=this.getMap(),o=a.getGLRes();this._imageData=e.map(function(l){var u=new Ye(l.extent);return fe({},l,{extent:u,extent2d:u.convertTo(function(f){return a.coordToPointAtRes(f,o)})})}),this._images=e;var s=this.getRenderer();s&&s.refreshImages()},t}(kt);Jc.mergeOptions(QL);var tj=[],cx=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isDrawable=function(){return this.getMap().getPitch()?(console&&console.warn("ImageLayer with canvas renderer can't be pitched, use gl renderer ('renderer' : 'gl') instead."),!1):!0},n.checkResources=function(){var e=this;if(this._imageLoaded)return tj;var a=this.layer,o=a._imageData.map(function(u){return[u.url,null,null]});if(this.resources){var s=[],l=new ua;o.forEach(function(u){if(e.resources.isResourceLoaded(u)){var f=e.resources.getImage(u);l.addResource(u,f)}else s.push(u)}),this.resources.forEach(function(u,f){l.isResourceLoaded(u)||e.retireImage(f.image)}),this.resources=l,o=s}return this._imageLoaded=!0,o},n.retireImage=function(e){e.close&&e.close()},n.refreshImages=function(){this._imageLoaded=!1,this.setToRedraw()},n.draw=function(){!this.isDrawable()||(this.prepareCanvas(),this._painted=!1,this._drawImages(),this.completeRender())},n._drawImages=function(){var e=this.layer._imageData,a=this.getMap(),o=a._get2DExtentAtRes(a.getGLRes());if(e&&e.length)for(var s=0;s<e.length;s++){var l=e[s].extent2d,u=this.resources&&this.resources.getImage(e[s].url);u&&o.intersects(l)&&(this._painted=!0,this._drawImage(u,l,e[s].opacity||1))}},n._drawImage=function(e,a,o){var s=0,l=this.context;o<1&&(s=l.globalAlpha,l.globalAlpha=o);var u=this.getMap(),f=ej.set(a.xmin,a.ymax),h=u._pointAtResToContainerPoint(f,u.getGLRes()),c=h.x,d=h.y,v=u.getBearing();v&&(l.save(),l.translate(c,d),v&&l.rotate(-v*Math.PI/180),c=d=0);var g=u.getGLScale();l.drawImage(e,c,d,a.getWidth()/g,a.getHeight()/g),v&&l.restore(),s&&(l.globalAlpha=s)},n.drawOnInteracting=function(){this.draw()},t}($o),nj=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isDrawable=function(){return!0},n._drawImage=function(e,a,o){this.drawGLImage(e,a.xmin,a.ymax,a.getWidth(),a.getHeight(),1,o)},n.createContext=function(){this.createGLContext()},n.resizeCanvas=function(e){!this.canvas||(r.prototype.resizeCanvas.call(this,e),this.resizeGLCanvas())},n.clearCanvas=function(){!this.canvas||(r.prototype.clearCanvas.call(this),this.clearGLCanvas())},n.retireImage=function(e){e.close&&e.close(),this.disposeImage(e)},n.onRemove=function(){this.removeGLCanvas(),r.prototype.onRemove.call(this)},t}(hx(cx));Jc.registerRenderer("canvas",cx);Jc.registerRenderer("gl",nj);var dx=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getPrepareParams=function(){return[]},n.getDrawParams=function(){return[]},n.onCanvasCreate=function(){this.canvas&&this.layer.options.doubleBuffer&&(this.buffer=Q.createCanvas(this.canvas.width,this.canvas.height,this.getMap().CanvasClass))},n.needToRedraw=function(){if(this.layer.options.animation)return!0;var e=this.getMap();return e.isInteracting()&&!this.layer.drawOnInteracting?!1:r.prototype.needToRedraw.call(this)},n.draw=function(){this.prepareCanvas(),this.prepareDrawContext(),this._drawLayer.apply(this,arguments)},n.drawOnInteracting=function(){this._drawLayerOnInteracting.apply(this,arguments)},n.getCanvasImage=function(){var e=r.prototype.getCanvasImage.call(this);if(e&&e.image&&this.layer.options.doubleBuffer){var a=e.image;(this.buffer.width!==a.width||this.buffer.height!==a.height)&&(this.buffer.width=a.width,this.buffer.height=a.height);var o=this.buffer.getContext("2d"),s=this.layer.doubleBuffer(o,this.context);(s===void 0||s)&&(Q.image(o,a,0,0),e.image=this.buffer)}return e},n.remove=function(){return delete this._drawContext,r.prototype.remove.call(this)},n.onZoomStart=function(e){this.layer.onZoomStart(e),r.prototype.onZoomStart.call(this,e)},n.onZooming=function(e){this.layer.onZooming(e),r.prototype.onZooming.call(this,e)},n.onZoomEnd=function(e){this.layer.onZoomEnd(e),r.prototype.onZoomEnd.call(this,e)},n.onMoveStart=function(e){this.layer.onMoveStart(e),r.prototype.onMoveStart.call(this,e)},n.onMoving=function(e){this.layer.onMoving(e),r.prototype.onMoving.call(this,e)},n.onMoveEnd=function(e){this.layer.onMoveEnd(e),r.prototype.onMoveEnd.call(this,e)},n.onResize=function(e){this.layer.onResize(e),r.prototype.onResize.call(this,e)},n.prepareDrawContext=function(){if(!this._predrawed){var e=sm(this.getPrepareParams());this._drawContext=this.layer.prepareToDraw.apply(this.layer,[this.context].concat(e)),this._drawContext||(this._drawContext=[]),Array.isArray(this._drawContext)||(this._drawContext=[this._drawContext]),this._predrawed=!0}},n._prepareDrawParams=function(){if(!this.getMap())return null;var e=this.getViewExtent();if(e.maskExtent&&!e.extent.intersects(e.maskExtent))return this.completeRender(),null;var a=[this.context,e],o=sm(this.getDrawParams());return a.push.apply(a,o),a.push.apply(a,this._drawContext),a},n._drawLayer=function(){var e=this._prepareDrawParams();if(!!e){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];this.layer.draw.apply(this.layer,e.concat(o)),this.completeRender()}},n._drawLayerOnInteracting=function(){if(!!this.layer.drawOnInteracting){var e=this._prepareDrawParams();if(!!e){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];this.layer.drawOnInteracting.apply(this.layer,e.concat(o)),this.completeRender()}}},t}($o);function sm(r){return r||(r=[]),Array.isArray(r)||(r=[r]),r}var rj={doubleBuffer:!1,animation:!1},Qc=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isCanvasRender=function(){return!0},n.prepareToDraw=function(){},n.draw=function(){},n.redraw=function(){return this._getRenderer()&&this._getRenderer().setToRedraw(),this},n.play=function(){return this.config("animation",!0),this},n.pause=function(){return this.config("animation",!1),this},n.isPlaying=function(){return this.options.animation},n.clearCanvas=function(){return this._getRenderer()&&this._getRenderer().clearCanvas(),this},n.requestMapToRender=function(){return this._getRenderer()&&this._getRenderer().requestMapToRender(),this},n.completeRender=function(){return this._getRenderer()&&this._getRenderer().completeRender(),this},n.onCanvasCreate=function(){return this},n.onZoomStart=function(){},n.onZooming=function(){},n.onZoomEnd=function(){},n.onMoveStart=function(){},n.onMoving=function(){},n.onMoveEnd=function(){},n.onResize=function(){},n.doubleBuffer=function(e){return e.clearRect(0,0,e.canvas.width,e.canvas.height),this},t}(kt);Qc.mergeOptions(rj);Qc.registerRenderer("canvas",dx);var ij=new B(0,0),aj={animation:!0},vx=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getParticles=function(){},n.draw=function(e,a){var o=this.getParticles(nt());if(!o||o.length===0){var s=this._getRenderer();s&&(this._getRenderer()._shouldClear=!0);return}var l=this.getMap(),u=a.extent;a.maskExtent&&(u=a.extent.intersection(a.maskExtent)),u=u.convertTo(function(m){return l._pointToContainerPoint(m,void 0,0,ij)});for(var f=2*Math.PI,h=0,c=o.length;h<c;h++){var d=o[h].point;if(u.contains(d)){var v=o[h].color||this.options.lineColor||"#fff",g=o[h].r;e.fillStyle!==v&&(e.fillStyle=v),g<=2?e.fillRect(d.x-g/2,d.y-g/2,g,g):(e.beginPath(),e.arc(d.x,d.y,g/2,0,f),e.fill())}}this._fillCanvas(e)},n._fillCanvas=function(e){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out";var o=this.options.trail||30;e.fillStyle="rgba(0, 0, 0, "+1/o+")",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.globalCompositeOperation=a},t}(Qc);vx.mergeOptions(aj);vx.registerRenderer("canvas",function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.draw=function(){(!this.canvas||!this.layer.options.animation||this._shouldClear)&&(this.prepareCanvas(),this._shouldClear=!1),this.prepareDrawContext(),this._drawLayer()},n.drawOnInteracting=function(){this.draw(),this._shouldClear=!1},n.onSkipDrawOnInteracting=function(){this._shouldClear=!0},t}(dx));var Za=new ua,Ua,Ka,oj=function(r){re(t,r);function t(i,e,a){var o;o=r.call(this,a)||this,o.target=i,i.once("remove",o.delete,at(at(o)));var s=o.options.symbol,l=s.markerLineWidth||1;return o.w=s.markerWidth+l,o.h=s.markerHeight+l,o.dx=s.markerDx||0,o.dy=s.markerDy||0,o.opacity=N(s.opacity)?1:s.opacity,o.map=e,o.events=a.events,o._fetchImage(),o.addTo(e),o}var n=t.prototype;return n.getCursor=function(){return this.options.cursor||"default"},n._fetchImage=function(){var e=this.map,a=this.options.symbol,o=a.markerFile;this.url=o||Lc(a);var s=Za.getImage(this.url);if(!s){var l=this.w,u=this.h;if(o)s=new Image,s.onload=function(){var c=e.getRenderer();c&&c.setToRedraw()},s.src=this.url;else{var f=document.createElement("canvas");f.width=l,f.height=u;var h=f.getContext("2d");s=Sb(h,{x:l/2,y:u/2},a,Za)}Za.addResource([this.url,l,u],s)}Za.login(this.url),this._img=s},n.setContainerPoint=function(e){this._point=e,this._point._sub(this.w/2,this.h/2)},n.getContainerPoint=function(){return this._point.add(this.w/2,this.h/2)},n.offset=function(e){this._point._add(e)},n.render=function(e){if(!this._img)return!1;var a=this.map,o=this._point,s=o.x,l=o.y,u=this.w,f=this.h;if(s+u>0&&s<a.width&&l+f>0&&l<a.height){var h=a.getDevicePixelRatio();return e.globalAlpha=this.opacity,e.drawImage(this._img,Math.round((s+this.dx)*h)+this.dx,Math.round((l+this.dy)*h),Math.round(u*h),Math.round(f*h)),!0}return!1},n.delete=function(){if(this.map){var e=this.map.getRenderer();e&&e.removeTopElement(this)}Za.logout(this.url),this._dragger&&(this._dragger.disable(),delete this._dragger),delete this.map},n.hitTest=function(e){var a=this.w,o=this.h,s=this._point.x+this.dx,l=this._point.y+this.dy;return e.x>=s&&e.x<=s+a&&e.y>=l&&e.y<=l+o},n.addTo=function(e){this.map=e;var a=e.getRenderer();a.addTopElement(this)},n.onEvent=function(e){this.fire(e.type,e)},n.mousedown=function(e){var a=e.target,o=this.options.cursor;o&&a.setCursor(o),this.onDragstart(e)},n.onDragstart=function(e){var a=e.containerPoint,o=e.target,s=o._panels.mapWrapper||o._containerDOM,l=this._dragger=new wa(s);l.on("dragging",this.onDragging,this).on("mouseup",this.onDragend,this).enable(),l.type="handle",l.onMouseDown(e.domEvent),Ua=a.x,Ka=a.y,this.fire("dragstart",{containerPoint:a})},n.onDragging=function(e){if(!!this._dragger){var a=this.map,o=Ft(e.domEvent,a._containerDOM),s={x:o.x-Ua,y:o.y-Ka},l=a.containerPointToCoord(new B(Ua,Ka)),u=a.containerPointToCoord(o);Ua=o.x,Ka=o.y,this.offset(s),this.fire("dragging",{containerPoint:o,coordOffset:u._sub(l)})}},n.onDragend=function(e){if(!!this._dragger){var a=this.map;a.resetCursor();var o=Ft(e.domEvent,a._containerDOM),s={x:o.x-Ua,y:o.y-Ka};this.offset(s),this._dragger.disable(),delete this._dragger,this.fire("dragend",{containerPoint:o})}},t}(fr(_n)),sj=function(){function r(n,i){this.target=n,n.once("remove",this.delete,this),this.map=i,this.addTo(i)}var t=r.prototype;return t.setPoints=function(i){this.points=i;var e=i.map(function(o){return o.x}),a=i.map(function(o){return o.y});this.xmin=Math.min.apply(Math,e),this.xmax=Math.max.apply(Math,e),this.ymin=Math.min.apply(Math,a),this.ymax=Math.max.apply(Math,a)},t.hitTest=function(){return!1},t.render=function(i){var e=this.map;if(this.xmax<=0||this.xmin>=e.width||this.ymax<=0||this.ymin>=e.height)return;var a=e.getDevicePixelRatio(),o=.5;function s(f){return Math.round(f)*a+o}i.lineWidth=1,i.strokeStyle="#000",i.globalAlpha=1,i.beginPath();var l=this.points;i.moveTo(s(l[0].x),s(l[0].y));for(var u=1;u<this.points.length;u++)i.lineTo(s(l[u].x),s(l[u].y));i.closePath(),i.stroke()},t.addTo=function(i){this.map=i;var e=i.getRenderer();e.addTopElement(this)},t.delete=function(){if(this.map){var i=this.map.getRenderer();i&&i.removeTopElement(this)}},r}(),lj=Ho+"_edit_stage_";function lf(r,t){return{markerType:r,markerFill:"#fff",markerLineColor:"#000",markerLineWidth:2,markerWidth:10,markerHeight:10,opacity:t}}var uj={fixAspectRatio:!1,symbol:null,removeVertexOn:"contextmenu",centerHandleSymbol:lf("ellipse",1),vertexHandleSymbol:lf("square",1),newVertexHandleSymbol:lf("square",.4)},gx=function(r){re(t,r);function t(i,e){var a;return a=r.call(this,e)||this,a._geometry=i,a._geometry?a:at(a)}var n=t.prototype;return n.getMap=function(){return this._geometry.getMap()},n.prepare=function(){var e=this.getMap();!e||(e.on("drawtopstart",this._refresh,this),this.options.symbol&&(this._originalSymbol=this._geometry.getSymbol(),this._geometry.setSymbol(this.options.symbol)),this._prepareEditStageLayer())},n._prepareEditStageLayer=function(){var e=this._geometry.getLayer();if(e.options.renderer==="canvas"){var a=this.getMap(),o=ba(),s=lj+o+"_shadow";if(this._shadowLayer=a.getLayer(s),!this._shadowLayer){var l=e.constructor;this._shadowLayer=new l(s),a.addLayer(this._shadowLayer)}}},n.start=function(){if(!(!this._geometry||!this._geometry.getMap()||this._geometry.editing)){this.editing=!0,this.prepare();var e=this._geometry,a,o=this._geometry.getLayer(),s=o.options.renderer==="canvas";this._geometryDraggble=e.options.draggable,s?(e.config("draggable",!1),a=e.copy(),a.setSymbol(e._getInternalSymbol()),a.copyEventListeners(e),e._getParent()&&a.copyEventListeners(e._getParent()),a._setEventTarget(e),a.setId(null).config({draggable:!1}),this._shadow=a,e.hide()):e instanceof et&&e.config("draggable",!0),this._switchGeometryEvents("on"),(e instanceof et||e instanceof Bn||e instanceof Xi||e instanceof ir)&&this._createOrRefreshOutline(),this._shadowLayer&&this._shadowLayer.bringToFront().addGeometry(a),e instanceof et?a&&(a.config("draggable",!0),a.on("dragend",this._onMarkerDragEnd,this)):this._createCenterHandle(),e instanceof et&&this.options.resize!==!1?this.createMarkerEditor():e instanceof Bn?this.createCircleEditor():e instanceof Xi?this.createEllipseOrRectEditor():e instanceof ir?this.createEllipseOrRectEditor():e instanceof Ta||(e instanceof it||e instanceof tt)&&this.createPolygonEditor()}},n.stop=function(){delete this._history,delete this._historyPointer,delete this._editOutline,this._switchGeometryEvents("off");var e=this.getMap();if(!e){this.fire("remove");return}this._geometry.config("draggable",this._geometryDraggble),this._shadow&&(delete this._shadow,delete this._geometryDraggble,this._geometry.show()),this._shadowLayer&&(this._shadowLayer.remove(),delete this._shadowLayer),this._refreshHooks=[],this.options.symbol&&(this._geometry.setSymbol(this._originalSymbol),delete this._originalSymbol),this.editing=!1,this.fire("remove")},n.isEditing=function(){return N(this.editing)?!1:this.editing},n._getGeometryEvents=function(){return{symbolchange:this._onGeoSymbolChange,dragstart:this._onDragStart,dragend:this._onDragEnd,"positionchange shapechange":this._exeAndReset}},n._switchGeometryEvents=function(e){if(this._geometry){var a=this._getGeometryEvents();for(var o in a)this._geometry[e](o,a[o],this)}},n._onGeoSymbolChange=function(e){this._shadow&&this._shadow.setSymbol(e.target._getInternalSymbol())},n._onMarkerDragEnd=function(){this._update("setCoordinates",this._shadow.getCoordinates().toArray())},n._createOrRefreshOutline=function(){var e=this._geometry,a=this._editOutline;a||(this._editOutline=new sj(this,this.getMap()),this._addRefreshHook(this._createOrRefreshOutline));var o=this._editOutline.points;if(e instanceof et)this._editOutline.setPoints(e.getContainerExtent().toArray(o));else{var s=this.getMap(),l=e._getPrjExtent();o=l.toArray(o),o.forEach(function(u){return s._prjToContainerPoint(u,null,u)}),this._editOutline.setPoints(o)}return a},n._createCenterHandle=function(){var e=this,a=this.getMap(),o=this.options.centerHandleSymbol;this._geometry instanceof tt&&(o.markerDx=5);var s,l=a.coordToContainerPoint(this._geometry.getCenter()),u=this.createHandle(l,{symbol:o,cursor:"move",onDown:function(){if(e._shadow){s=e._shadow.copy();var h=hh(s._getInternalSymbol(),.5);s.setSymbol(h).addTo(e._geometry.getLayer())}},onMove:function(h){var c=h.coordOffset;s?s.translate(c):e._geometry.translate(c)},onUp:function(){var h=s||e._geometry;e._update("setCoordinates",te.toNumberArrays(h.getCoordinates())),s&&s.remove()}});this._addRefreshHook(function(){var f=e._geometry.getCenter();u.setContainerPoint(a.coordToContainerPoint(f))})},n._createHandleInstance=function(e,a){var o=this.getMap(),s=Rc(a.symbol,function(){return[o.getZoom(),{"{bearing}":o.getBearing(),"{pitch}":o.getPitch(),"{zoom}":o.getZoom()}]}),l=this.options.removeVertexOn,u=new oj(this,o,{symbol:s,cursor:a.cursor,events:l});return u.setContainerPoint(e),u},n.createHandle=function(e,a){a||(a={});var o=this._createHandleInstance(e,a),s=this;function l(h){return this._updating=!0,a.onDown&&(this._geometry.fire("handledragstart"),a.onDown.call(s,h.containerPoint,h)),!1}function u(h){return s._hideContext(),a.onMove&&(this._geometry.fire("handledragging"),a.onMove.call(s,h)),!1}function f(h){return a.onUp&&(this._geometry.fire("handledragend"),a.onUp.call(s,h)),this._updating=!1,!1}return o.on("dragstart",l,this),o.on("dragging",u,this),o.on("dragend",f,this),a.onRefresh&&(o.refresh=a.onRefresh),o},n._createResizeHandles=function(e,a,o){var s=this,l=["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"],u=[null,"y",null,"x","x",null,"y",null],f=this._geometry,h=f instanceof et;function c(){if(h){var b=f.getContainerExtent();return[new B(b.xmin,b.ymin),new B((b.xmax+b.xmin)/2,b.ymin),new B(b.xmax,b.ymin),new B(b.xmin,(b.ymin+b.ymax)/2),new B(b.xmax,(b.ymin+b.ymax)/2),new B(b.xmin,b.ymax),new B((b.xmax+b.xmin)/2,b.ymax),new B(b.xmax,b.ymax)]}var x=f._getPrjExtent();return[new B(x.xmin,x.ymax),new B((x.xmax+x.xmin)/2,x.ymax),new B(x.xmax,x.ymax),new B(x.xmin,(x.ymax+x.ymin)/2),new B(x.xmax,(x.ymax+x.ymin)/2),new B(x.xmin,x.ymin),new B((x.xmax+x.xmin)/2,x.ymin),new B(x.xmax,x.ymin)]}e||(e=[]);var d=this,v=[],g={},m=this.getMap(),p=this.options.vertexHandleSymbol,_=function(){for(var x=c(),C=function(T){if(Array.isArray(e)){var L=e.some(function(R){return R===T});if(L)return"continue"}var j=x[T],M=h?j:m._prjToContainerPoint(j);if(v.length<x.length-e.length){var D=s.createHandle(M,{symbol:p,cursor:l[T],axis:u[T],onMove:function(R){return function(I){d._updating=!0,a(I.containerPoint,R),f.fire("resizing")}}(T),onUp:function(){d._updating=!1,o()}});g[T]=v.length,v.push(D)}else v[g[T]].setContainerPoint(M)},y=0;y<x.length;y++)var w=C(y)};return _(),this._addRefreshHook(_),v},n.createMarkerEditor=function(){var e=this,a=this._shadow||this._geometry,o=this.getMap();if(!a._canEdit()){console&&console.warn("A marker can't be resized with symbol:",a.getSymbol());return}this._history||this._recordHistory(p());var s=a._getInternalSymbol(),l=new B(0,0);be(s.markerDx)&&(l.x=s.markerDx),be(s.markerDy)&&(l.y=s.markerDy);var u=null,f="middle",h="middle";if(Ab.test(s)){var c=s.markerType;c==="pin"||c==="pie"||c==="bar"?(u=[5,6,7],f="bottom"):c==="rectangle"&&(u=[0,1,2,3,5],f="top",h="left")}else(Vc.test(s)||Rb.test(s))&&(f="bottom",u=[5,6,7]);var d=[2,1,2,0,0,2,1,2],v;if(this.options.fixAspectRatio){var g=a.getSize();v=g.width/g.height}var m=this._createResizeHandles(u,function(_,b){if(u&&u.indexOf(b)>=0){var x=o.containerPointToCoordinate(_.sub(l)),C=a.getCoordinates();x.x=C.x,a.setCoordinates(x),e._updateCoordFromShadow(!0);var y=m[m.length-1-b],w=y.getContainerPoint();_=w}var P=o.coordToContainerPoint(a.getCoordinates()).add(l),T=a._getInternalSymbol(),L=_.sub(P);f==="bottom"&&_.y>P.y&&(L.y=0);var j=f==="middle"?2:1,M=h==="left"?1:2,D=Math.abs(L.x)*M,R=Math.abs(L.y)*j;v&&(D=Math.max(D,R*v),R=D/v);var I=d[b];a instanceof yl?((v||I===0||I===2)&&(a.setWidth(D),a!==e._geometry&&e._geometry.setWidth(D)),(v||I===1||I===2)&&(a.setHeight(R),a!==e._geometry&&e._geometry.setHeight(R))):((v||I===0||I===2)&&(T.markerWidth=Math.min(D,e._geometry.options.maxMarkerWidth||1/0)),(v||I===1||I===2)&&(T.markerHeight=Math.min(R,e._geometry.options.maxMarkerHeight||1/0)),a.setSymbol(T),a!==e._geometry&&e._geometry.setSymbol(T))},function(){e._update(p())});function p(){var _=[["setCoordinates",a.getCoordinates().toArray()]];return a instanceof yl?(_.push(["setWidth",a.getWidth()]),_.push(["setHeight",a.getHeight()])):_.push(["setSymbol",a.getSymbol()]),_}},n.createCircleEditor=function(){var e=this,a=this._shadow||this._geometry,o=this.getMap();this._history||this._recordHistory([["setCoordinates",a.getCoordinates().toArray()],["setRadius",a.getRadius()]]),this._createResizeHandles(null,function(s){var l=a.getCenter(),u=o.containerPointToCoord(s),f=new tt([[l.x,l.y],[u.x,l.y]]),h=new tt([[l.x,l.y],[l.x,u.y]]),c=Math.max(o.computeGeometryLength(f),o.computeGeometryLength(h));a.setRadius(c),a!==e._geometry&&e._geometry.setRadius(c)},function(){e._update("setRadius",a.getRadius())})},n.createEllipseOrRectEditor=function(){var e=this,a=[2,1,2,0,0,2,1,2],o=this._shadow||this._geometry;this._history||this._recordHistory(h());var s=this.getMap(),l=this._geometry instanceof Xi,u;this.options.fixAspectRatio&&(u=o.getWidth()/o.getHeight());var f=this._createResizeHandles(null,function(c,d){var v=l?1:2,g,m,p,_=f[d],b=_.getContainerPoint(),x=a[d];if(l){var C=f[7-d],y=C.getContainerPoint();g=b.sub(y);var w=g.abs();m=s.pixelToDistance(w.x,0),p=s.pixelToDistance(0,w.y);var P=o.getSize(),T=o.getCoordinates(),L=o.getWidth(),j=o.getHeight(),M=s.containerPointToCoord(c),D=s.containerPointToCoord(y),R=new tt([[D.x,D.y],[M.x,D.y]]),I=new tt([[D.x,D.y],[D.x,M.y]]);if(m=s.computeGeometryLength(R),p=s.computeGeometryLength(I),x===0)if(u&&(w.y=w.x/u,P.height=Math.abs(w.y),p=m/u),b.y=y.y-P.height/2,M.y=T.y,d===4)M.x=Math.min(M.x,T.x);else{var z=s.locate(T,L,0);M.x=s.locate(new te(z.x,M.y),-m,0).x}else if(x===1)u&&(w.x=w.y*u,P.width=Math.abs(w.x),m=p*u),b.x=y.x-P.width/2,M.x=T.x,M.y=Math.max(M.y,D.y);else{if(u&&(m>p*u?(p=m/u,b.y=y.y+w.x*dt(g.y)/u):(m=p*u,b.x=y.x+w.y*dt(g.x)*u)),d===0||d===5){var F=d===0?s.locate(T,L,0):s.locate(T,L,-j);M.x=s.locate(new te(F.x,M.y),-m,0).x}else M.x=Math.min(M.x,D.x);M.y=Math.max(M.y,D.y)}o.setCoordinates(M),e._updateCoordFromShadow(!0)}else{var O=o.getCenter(),A=s.containerPointToCoord(b),$=new tt([[O.x,O.y],[A.x,O.y]]),J=new tt([[O.x,O.y],[O.x,A.y]]);m=s.computeGeometryLength($),p=s.computeGeometryLength(J),u&&(m=Math.max(m,p*u),p=m/u)}(u||x===0||x===2)&&(o.setWidth(m*v),o!==e._geometry&&e._geometry.setWidth(m*v)),(u||x===1||x===2)&&(o.setHeight(p*v),o!==e._geometry&&e._geometry.setHeight(p*v))},function(){e._update(h())});function h(){return[["setCoordinates",o.getCoordinates().toArray()],["setWidth",o.getWidth()],["setHeight",o.getHeight()]]}},n.createPolygonEditor=function(){var e=this.getMap(),a=this._shadow||this._geometry,o=this;this._history||this._recordHistory("setCoordinates",te.toNumberArrays(a.getCoordinates()));var s=a instanceof it?3:2,l="maptalks--editor-vertex-index",u={0:[]},f={0:[]};function h(R){if(R===void 0&&(R=0),a instanceof it){var I=a.getCoordinates()[R]||[];return I.slice(0,I.length-1)}else return a.getCoordinates()}function c(R){return R===void 0&&(R=0),R===0?a._getPrjCoordinates():a._getPrjHoles()[R-1]}function d(){for(var R in u){for(var I=u[R].length-1;I>=0;I--)u[R][I][l]=I;for(var z=f[R].length-1;z>=0;z--)f[R][z][l]=z}o._updateCoordFromShadow()}function v(R){o._updating=!0;var I=R.target,z=I[l],F=be(I._ringIndex)?I._ringIndex:0,O=c(F);if(!(O.length<=s)){var A=a instanceof tt&&(z===0||z===O.length-1);O.splice(z,1),F>0?a._prjHoles[F-1]=O:a._setPrjCoordinates(O),a._updateCache(),u[F].splice(z,1)[0].delete(),z<f[F].length&&f[F].splice(z,1)[0].delete();var $;z===0?$=f[F].length-1:$=z-1,f[F].splice($,1)[0].delete(),A||f[F].splice($,0,x.call(o,$,F)),d(),o._updating=!1}}function g(R,I,z){z===void 0&&(z=0);var F=c(z),O=e._containerPointToPrj(R.sub(p())),A=F[I];A.x=O.x,A.y=O.y,a._updateCache(),a.onShapeChanged(),o._updateCoordFromShadow(!0);var $;I===0?$=f[z].length-1:$=I-1,f[z][I]&&f[z][I].refresh(),f[z][$]&&f[z][$].refresh()}var m=new B(0,0);function p(){var R=a._getCompiledSymbol();return m.x=R.lineDx||0,m.y=R.lineDy||0,m}function _(R,I){I===void 0&&(I=0);var z=h(I)[R],F=o.createHandle(e.coordToContainerPoint(z)._add(p()),{symbol:o.options.vertexHandleSymbol,cursor:"pointer",axis:null,onMove:function(){g(F.getContainerPoint(),F[l],I)},onRefresh:function(){z=h(I)[F[l]];var A=e.coordToContainerPoint(z);F.setContainerPoint(A._add(p()))},onUp:function(){o._updateCoordFromShadow()},onDown:function(A,$){$&&$.domEvent&&$.domEvent.button}});return F[l]=R,F._ringIndex=I,F.on(o.options.removeVertexOn,v),F}var b=!1;function x(R,I){I===void 0&&(I=0);var z=h(I),F;R+1>=z.length?F=z[0]:F=z[R+1];var O=z[R].add(F).multi(1/2),A=o.createHandle(O,{symbol:o.options.newVertexHandleSymbol,cursor:"pointer",axis:null,onDown:function(J,Z){if(!(Z&&Z.domEvent&&Z.domEvent.button===2)){var ae=c(I),U=A[l],W=A.getContainerPoint(),ne=e._containerPointToPrj(W);ae.splice(U+1,0,ne),I>0?a._prjHoles[I-1]=ae:a._setPrjCoordinates(ae),a._updateCache(),A.opacity=1,f[I].splice(U,0,x.call(o,U,I),x.call(o,U+1,I)),b=!0}},onMove:function(){g(A.getContainerPoint(),A[l]+1,I)},onUp:function(J){if(J&&J.domEvent&&J.domEvent.button===2){b=!1;return}var Z=A[l];nh(A,f[I]),A.delete(),u[I].splice(Z+1,0,_.call(o,Z+1,I)),d(),o._updateCoordFromShadow(),b=!1},onRefresh:function(J){z=h(J);var Z=A[l],ae;Z===z.length-1?ae=0:ae=Z+1;var U=z[Z].add(z[ae]).multi(1/2),W=e.coordToContainerPoint(U);A.setContainerPoint(W._add(p()))}});return A[l]=R,A}if(a instanceof it)for(var C=a.getHoles().length+1,y=0;y<C;y++){u[y]=[],f[y]=[];for(var w=h(y),P=0,T=w.length;P<T;P++)u[y].push(_.call(this,P,y)),P<T-1&&f[y].push(x.call(this,P,y));f[y].push(x.call(this,w.length-1,y))}else for(var L=0,j=h(L),M=0,D=j.length;M<D;M++)u[L].push(_.call(this,M,L)),M<D-1&&f[L].push(x.call(this,M,L));this._addRefreshHook(function(){if(!b){for(var R in f)for(var I=f[R].length-1;I>=0;I--)f[R][I].refresh(R);for(var z in u)for(var F=u[z].length-1;F>=0;F--)u[z][F].refresh(z)}})},n._refresh=function(){if(this._refreshHooks)for(var e=this._refreshHooks.length-1;e>=0;e--)this._refreshHooks[e].call(this)},n._hideContext=function(){this._geometry&&(this._geometry.closeMenu(),this._geometry.closeInfoWindow())},n._addRefreshHook=function(e){!e||(this._refreshHooks||(this._refreshHooks=[]),this._refreshHooks.push(e))},n._update=function(e){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];this._exeHistory([e,o]),this._recordHistory.apply(this,[e].concat(o))},n._updateCoordFromShadow=function(e){var a=this._shadow||this._geometry,o=a.getCoordinates(),s=this._geometry,l=this._updating;this._updating=!0,s.setCoordinates(o),e||this._recordHistory("setCoordinates",te.toNumberArrays(s.getCoordinates())),this._updating=l},n._recordHistory=function(e){this._history||(this._history=[],this._historyPointer=0);for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];if(this._history.length){var l=this._history[this._history.length-1];if(l[0]===e&&JSON.stringify(l[1])===JSON.stringify(o))return}this._historyPointer<this._history.length-1&&this._history.splice(this._historyPointer+1),this._history.push([e,o]),this._historyPointer=this._history.length-1,this._geometry.fire("editrecord")},n.cancel=function(){if(!this._history||this._historyPointer===0)return this;this._historyPointer=0;var e=this._history[0];return this._exeAndReset(e),this},n.undo=function(){if(!this._history||this._historyPointer===0)return this;var e=this._history[--this._historyPointer];return this._exeAndReset(e),this},n.redo=function(){if(!this._history||this._historyPointer===this._history.length-1)return this;var e=this._history[++this._historyPointer];return this._exeAndReset(e),this},n._exeAndReset=function(e){if(!this._updating){this._exeHistory(e);var a=this._history,o=this._historyPointer;this.stop(),this._history=a,this._historyPointer=o,this.start()}},n._onDragStart=function(){this._updating=!0},n._onDragEnd=function(){this._updating=!1},n._exeHistory=function(e){if(!!Array.isArray(e)){var a=this._updating;this._updating=!0;var o=this._shadow||this._geometry,s=this._geometry;Array.isArray(e[0])?e[0].forEach(function(l){var u=l[0],f=l.slice(1);o[u].apply(o,f),o!==s&&s[u].apply(s,f)}):(o[e[0]].apply(o,e[1]),o!==s&&s[e[0]].apply(s,e[1])),this._updating=a}},t}(fr(_n));gx.mergeOptions(uj);var fj={startEditText:function(){return this.getMap()?(this.hide(),this.endEditText(),this._prepareEditor(),this._fireEvent("edittextstart"),this):this},endEditText:function(){if(this._textEditor){var t=this._textEditor.innerHTML;t=t.replace(/<p>/ig,"").replace(/<\/p>/ig,"<br/>"),this._textEditor.innerHTML=t;var n=this._textEditor.innerText.replace(/[\r\n]+$/gi,"");this.setContent(n),lt(this._textEditor,"mousedown dblclick",Jt),this.getMap().off("mousedown",this.endEditText,this),this._editUIMarker.remove(),delete this._editUIMarker,this._textEditor.onkeyup=null,delete this._textEditor,this.show(),this._fireEvent("edittextend")}return this},isEditingText:function(){return!!this._textEditor},getTextEditor:function(){return this._editUIMarker},_prepareEditor:function(){var t=this.getMap(),n=this._createEditor();this._textEditor=n,t.on("mousedown",this.endEditText,this);var i=this._getEditorOffset();this._editUIMarker=new qc(this.getCoordinates(),{animation:null,content:n,dx:i.dx,dy:i.dy}).addTo(t),this._setCursorToLast(this._textEditor)},_getEditorOffset:function(){var t=this._getInternalSymbol()||{},n=0,i=0,e=t.textHorizontalAlignment;return e==="middle"||N(e)?(n=(t.textDx||0)-2,i=(t.textDy||0)-2):(n=(t.markerDx||0)-2,i=(t.markerDy||0)-2),{dx:n,dy:i}},_createEditor:function(){var t=this.getContent(),n=this.getSize(),i=this._getInternalSymbol()||{},e=n.width,a=i.textFill||"#000000",o=i.textSize||12,s=n.height,l=i.markerLineColor||"#000",u=i.markerFill||"#3398CC",f=i.textLineSpacing||0,h=we("div");return h.contentEditable=!0,h.style.cssText="background:"+u+"; border:1px solid "+l+`;
            color:`+a+";font-size:"+o+"px;width:"+(e-2)+"px;height:"+(s-2)+`px;margin: auto;
            line-height:`+(o+f)+`px;outline: 0; padding:0; margin:0;word-wrap: break-word;
            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;`,h.innerText=t,rt(h,"mousedown dblclick",Jt),h.onkeyup=function(c){var d=h.style.height||0;c.keyCode===13&&(h.style.height=parseInt(d)+o/2+"px")},h},_setCursorToLast:function(t){var n;window.getSelection?(t.focus(),n=window.getSelection(),n.selectAllChildren(t),n.collapseToEnd()):document.selection&&(n=document.selection.createRange(),n.moveToElementText(t),n.collapse(!1),n.select())}};Kc.include(fj);je.include({animate:function(t,n,i){var e=this;this._animPlayer&&this._animPlayer.finish(),Xe(n)&&(i=n),n||(n={});var a=this.getMap(),o=this._getProjection(),s=this._prepareAnimationStyles(t),l,u=n.focus;if(delete this._animationStarted,a){var f=a._getRenderer(),h=function(v){f.callInNextFrame(v)};n.framer=h}var c=Pt.animate(s,n,function(d){if(a&&a.isRemoved()){c.finish();return}a&&!e._animationStarted&&u&&a.onMoveStart();var v=d.styles;for(var g in v)if(g!=="symbol"&&g!=="translate"&&v.hasOwnProperty(g)){var m="set"+g[0].toUpperCase()+g.slice(1);e[m](v[g])}var p=v.translate;if(p){var _=p;l&&(_=p.sub(l)),l=p,e.translate(_)}var b=v.symbol;if(b){var x=e.getSymbol()||{};e.setSymbol(jn(x,b))}if(a&&u){var C=o.project(e.getCenter());a._setPrjCenter(C);var y=a._parseEventFromCoord(o.unproject(C));c.playState!=="running"?a.onMoveEnd(y):a.onMoving(y)}e._fireAnimateEvent(c.playState),i&&i(d)},this);return this._animPlayer=c,this._animPlayer.play()},_prepareAnimationStyles:function(t){var n=this._getInternalSymbol(),i={};for(var e in t)if(t.hasOwnProperty(e)){var a=t[e];if(e!=="translate"&&e!=="symbol"){var o="get"+e[0].toUpperCase()+e.substring(1),s=this[o]();i[e]=[s,a]}else if(e==="symbol"){var l=void 0;if(Array.isArray(t.symbol)){if(!Array.isArray(n))throw new Error("geometry'symbol isn't a composite symbol, while the symbol in styles is.");l=[];for(var u=t.symbol,f=0;f<u.length;f++){if(!u[f]){l.push(null);continue}var h={};for(var c in u[f])u[f].hasOwnProperty(c)&&(h[c]=[n[f][c],u[f][c]]);l.push(h)}}else{if(Array.isArray(n))throw new Error("geometry'symbol is a composite symbol, while the symbol in styles isn't.");l={};for(var d in a)a.hasOwnProperty(d)&&(l[d]=[n[d],a[d]])}i.symbol=l}else e==="translate"&&(i.translate=new te(a))}return i},_fireAnimateEvent:function(t){t==="finished"?(delete this._animationStarted,this._fireEvent("animateend")):t==="running"&&(this._animationStarted?this._fireEvent("animating"):(this._fireEvent("animatestart"),this._animationStarted=!0))}});var uf=Ho+"_drag_stage",lm=De.touch?"touchstart mousedown":"mousedown",hj=function(r){re(t,r);function t(i){return r.call(this,i)||this}var n=t.prototype;return n.addHooks=function(){this.target.on(lm,this._startDrag,this)},n.removeHooks=function(){this._endDrag(),this.target.off(lm,this._startDrag,this),delete this.container},n._prepareDragHandler=function(){this._dragHandler=new wa(this.container),this._dragHandler.on("dragging",this._dragging,this).on("mouseup",this._endDrag,this).enable()},n._prepareShadow=function(){var e=this,a=this.target,o=a.getLayer().options.renderer==="canvas";if(!!o){this._prepareDragStageLayer(),this._shadow&&this._shadow.remove();var s=this._shadow=a.copy();if(s.getGeometries){var l=s.getGeometries(),u=a.getGeometries();l.forEach(function(f,h){e._updateShadowSymbol(f,u[h])})}else this._updateShadowSymbol(s,a);s.setId(null),this._prepareShadowConnectors()}},n._updateShadowSymbol=function(e,a){if(e.setSymbol(a._getInternalSymbol()),a.options.dragShadow){var o=hh(e._getInternalSymbol(),.5);e.setSymbol(o)}},n._prepareShadowConnectors=function(){var e=this.target,a=this._shadow,o=this._dragStageLayer._getRenderer().resources,s=[];if(bl._hasConnectors(e))for(var l=bl._getConnectors(e),u=0,f=l.length;u<f;u++){var h=l[u],c=h.config(),d=h._getInternalSymbol();c.symbol=hh(d,.5);var v=void 0;h.getConnectSource()===e?v=new h.constructor(a,h.getConnectTarget(),c):v=new h.constructor(h.getConnectSource(),a,c),s.push(v),h.getLayer()&&h.getLayer()._getRenderer()&&o.merge(h.getLayer()._getRenderer().resources)}this._shadowConnectors=s,s.push(a),this._dragStageLayer.bringToFront().addGeometry(s)},n._onTargetUpdated=function(){this._shadow&&this._shadow.setSymbol(this.target._getSymbol())},n._prepareDragStageLayer=function(){var e=this.target.getMap(),a=this.target.getLayer();this._dragStageLayer=e.getLayer(uf),this._dragStageLayer||(this._dragStageLayer=new $n(uf,{enableAltitude:a.options.enableAltitude,altitudeProperty:a.options.altitudeProperty}),e.addLayer(this._dragStageLayer));var o=new ua;o.merge(a._getRenderer().resources),this._dragStageLayer._getRenderer().resources=o},n._startDrag=function(e){var a=this.target.getMap();if(!!a){var o=this.target._getParent();if(!o&&!this.isDragging()){var s=e.domEvent;s.touches&&s.touches.length>1||s.button===2||(this.container=a._panels.mapWrapper||a._containerDOM,this.target.on("click",this._endDrag,this),this._lastCoord=this._correctCoord(e.coordinate),this._lastPoint=e.containerPoint,this._prepareDragHandler(),this._dragHandler.onMouseDown(e.domEvent),rt(this.container,"mouseleave",this._endDrag,this),this._startParam=e,this._moved=!1)}}},n._dragging=function(e){var a=this.target,o=a.getMap(),s=o._parseEvent(e.domEvent),l=s.domEvent;if(!(l.touches&&l.touches.length>1)){if(!this._moved){this._moved=!0,a.on("symbolchange",this._onTargetUpdated,this),this._isDragging=!0,this._prepareShadow(),this._shadow&&(a.options.dragShadow||a.hide(),this._shadow._fireEvent("dragstart",s)),this.target._fireEvent("dragstart",this._startParam||s),delete this._startParam;return}var u=this._shadow||a,f=u.options.dragOnAxis,h=u.options.dragOnScreenAxis,c=s.containerPoint,d=s.coordinate;this._lastPoint=this._lastPoint||c,this._lastCoord=this._lastCoord||d,h?(f==="x"?c.y=this._lastPoint.y:f==="y"&&(c.x=this._lastPoint.x),d=o.containerPointToCoord(c)):d=this._correctCoord(d);var v=c.sub(this._lastPoint),g=d.sub(this._lastCoord);h||(f==="x"?v.y=g.y=0:f==="y"&&(v.x=g.x=0)),this._lastPoint=c,this._lastCoord=d,u.translate(g),u!==a&&!a.options.dragShadow&&a.translate(g),s.coordOffset=g,s.pointOffset=v,u._fireEvent("dragging",s),u!==a&&a._fireEvent("dragging",s)}},n._endDrag=function(e){if(this._dragHandler&&(this._dragHandler.disable(),delete this._dragHandler),this.container&&lt(this.container,"mouseleave",this._endDrag),!!this.target){var a=this.target;a.off("click",this._endDrag,this),a.off("symbolchange",this._onTargetUpdated,this),delete this._lastCoord,delete this._lastPoint,this._isDragging=!1;var o=a.getMap();if(this.enabled()&&o){var s=o._parseEvent(e?e.domEvent:null);this._updateTargetAndRemoveShadow(s),this._moved&&a._fireEvent("dragend",s)}}},n.isDragging=function(){return!!this._isDragging},n._updateTargetAndRemoveShadow=function(e){if(!!this._shadow){var a=this.target,o=a.getMap();a.options.dragShadow||a.show();var s=this._shadow;if(s){if(a.options.dragShadow)if(a.getGeometries){var l=s.getGeometries(),u=a.getGeometries();l.forEach(function(f,h){u[h].setCoordinates(l[h].getCoordinates())})}else a.setCoordinates(s.getCoordinates());s._fireEvent("dragend",e),s.remove(),delete this._shadow}this._shadowConnectors&&(o.getLayer(uf).removeGeometry(this._shadowConnectors),delete this._shadowConnectors),this._dragStageLayer&&(this._dragStageLayer._getRenderer().resources=new ua,this._dragStageLayer.remove())}},n._correctCoord=function(e){var a=this.target.getMap();if(!a.getPitch())return e;var o=this.target;if(!o.getMinAltitude())return e;var s=(o.getMinAltitude()+o.getMaxAltitude())/2;return a.locateByPoint(e,0,-s)},t}(En);je.mergeOptions({draggable:!1,dragShadow:!0,dragOnAxis:null,dragOnScreenAxis:!1});je.addInitHook("addHandler","draggable",hj);je.include({isDragging:function(){return this._getParent()?this._getParent().isDragging():this.draggable?this.draggable.isDragging():!1}});je.include({startEdit:function(t){return!this.getMap()||!this.options.editable?this:(this.endEdit(),this._editor=new gx(this,t),this._editor.start(),this.fire("editstart"),this)},endEdit:function(){return this._editor&&(this._editor.stop(),delete this._editor,this.fire("editend")),this},redoEdit:function(){return this.isEditing()?(this._editor.redo(),this.fire("redoedit"),this):this},undoEdit:function(){return this.isEditing()?(this._editor.undo(),this.fire("undoedit"),this):this},cancelEdit:function(){return this.isEditing()?(this._editor.cancel(),this.fire("canceledit"),this):this},isEditing:function(){return this._editor?this._editor.isEditing():!1}});je.include({_onEvent:function(t,n){if(!!this.getMap()){var i=n||this._getEventTypeToFire(t);i==="contextmenu"&&this.listens("contextmenu")&&(Jt(t),dn(t));var e=this._getEventParams(t);this._fireEvent(i,e)}},_getEventTypeToFire:function(t){return t.type},_getEventParams:function(t){var n=this.getMap(),i={domEvent:t},e=t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t;if(e){var a=Ft(e,n._containerDOM);i.coordinate=n.containerPointToCoordinate(a),i.containerPoint=a,i.viewPoint=n.containerPointToViewPoint(a),i.pont2d=n._containerPointToPoint(a)}return i}});je.include({setInfoWindow:function(t){return this.removeInfoWindow(),t instanceof _h?(this._infoWindow=t,this._infoWinOptions=fe({},this._infoWindow.options),this._infoWindow.addTo(this),this):(this._infoWinOptions=fe({},t),this._infoWindow?this._infoWindow.setOptions(t):this.getMap()&&this._bindInfoWindow(),this)},getInfoWindow:function(){return this._infoWindow?this._infoWindow:null},openInfoWindow:function(t){return this.getMap()?(t||(t=this.getCenter()),this._infoWindow?this._infoWindow.show(t):this._infoWinOptions&&this.getMap()&&(this._bindInfoWindow(),this._infoWindow.show(t)),this):this},closeInfoWindow:function(){return this._infoWindow&&this._infoWindow.hide(),this},removeInfoWindow:function(){return this._unbindInfoWindow(),delete this._infoWinOptions,delete this._infoWindow,this},_bindInfoWindow:function(){var t=this._infoWinOptions;return t?(this._infoWindow=new _h(t),this._infoWindow.addTo(this),this):this},_unbindInfoWindow:function(){return this._infoWindow&&(this.closeInfoWindow(),this._infoWindow.remove(),delete this._infoWindow),this}});var cj=new B(0,0),dj=new B(0,0),um=new B(0,0),fm=new B(0,0),vj=[],gj=function(r){re(t,r);function t(){return r.call(this,Bc)||this}var n=t.prototype;return n.checkUrl=function(e){return!e||!Re(e)?e:L0(e)},n.fetchImage=function(e,a,o,s){e=this.checkUrl(e);var l={url:e,fetchOptions:s};this.send(l,vj,o,a)},t}(pb),pj=new Image,ed=function(r){re(t,r);function t(i){var e;return e=r.call(this,i)||this,e.tilesInView={},e.tilesLoading={},e._parentTiles=[],e._childTiles=[],e.tileCache=new wk(i.options.maxCacheSize,e.deleteTile.bind(at(at(e)))),De.decodeImageInWorker&&e.layer.options.decodeImageInWorker&&(e._tileImageWorkerConn=new gj),e}var n=t.prototype;return n.getCurrentTileZoom=function(){return this._tileZoom},n.draw=function(){var e=this.getMap();if(!!this.isDrawable()){var a=this.prepareCanvas();if(a&&!a.intersects(this.canvasExtent2D)){this.completeRender();return}var o=this.layer,s=o.getTiles().tileGrids;if(!s||!s.length){this.completeRender();return}var l=s.reduce(function(Z,ae){return Z+(ae&&ae.tiles&&ae.tiles.length||0)},0);l>=this.tileCache.max/2&&this.tileCache.setMaxSize(l*2+1);var u=0,f=!1,h={},c=[],d=[],v={},g=[],m={},p=[],_={},b={},x=this._markTiles(),C=this._getLoadLimit(),y=s.length;this._tileZoom=s[0].zoom;for(var w=0;w<y;w++)for(var P=s[w],T=P.tiles,L=this._generatePlaceHolder(P.zoom),j=0,M=T.length;j<M;j++){var D=T[j],R=D.id,I=!1;if(this._isLoadingTile(R))I=f=!0,this.tilesLoading[R].current=!0;else{var z=this._getCachedTile(R);if(z)z.image&&this.getTileOpacity(z.image)<1&&(I=f=!0),c.push(z);else{I=f=!0;var F=C&&u+x[0]>C;if(!F&&(!e.isInteracting()||e.isMoving()||e.isRotating())){u++;var O=R;b[O]=D}}}if(!!I&&!h[R]){h[R]=1,L&&!_[R]&&(D.cache=!1,p.push({image:L,info:D}),_[R]=1);var A=this._findParentTile(D);if(A){var $=A.info.id;v[$]===void 0&&(v[$]=d.length,d.push(A))}else if(!d.length){var J=this._findChildTiles(D);J.length&&J.forEach(function(Z){m[Z.info.id]||(g.push(Z),m[Z.info.id]=1)})}}}d.length&&(g.length=0,this._childTiles.length=0),this._drawTiles(c,d,g,p),u?this.loadTileQueue(b):f||(!e.isAnimating()&&(this._parentTiles.length||this._childTiles.length)&&(this._parentTiles=[],this._childTiles=[],this.setToRedraw()),this.completeRender()),this._retireTiles()}},n.isTileCachedOrLoading=function(e){return this.tileCache.get(e)||this.tilesInView[e]||this.tilesLoading[e]},n._drawTiles=function(e,a,o,s){var l=this;a.length&&(a.sort(function(g,m){return Math.abs(m.info.z-l._tileZoom)-Math.abs(g.info.z-l._tileZoom)}),this._parentTiles=a),o.length&&(this._childTiles=o);var u={tiles:e,parentTiles:this._parentTiles,childTiles:this._childTiles};this.onDrawTileStart(u),this._parentTiles.forEach(function(g){return l._drawTileAndCache(g)}),this._childTiles.forEach(function(g){return l._drawTile(g.info,g.image)}),s.forEach(function(g){return l._drawTile(g.info,g.image)});var f=this.layer,h=this.getMap();if(!f.options.cascadeTiles||h.getPitch()<=h.options.cascadePitches[0])e.forEach(function(g){return l._drawTileAndCache(g)});else{this.writeZoomStencil();for(var c=!1,d=0,v=e.length;d<v;d++)e[d].info.z!==this._tileZoom?c?this.resumeZoomStencilTest():(this.startZoomStencilTest(),c=!0):c&&this.pauseZoomStencilTest(),this._drawTileAndCache(e[d]);this.endZoomStencilTest()}this.onDrawTileEnd(u)},n.writeZoomStencil=function(){},n.startZoomStencilTest=function(){},n.endZoomStencilTest=function(){},n.pauseZoomStencilTest=function(){},n.resumeZoomStencilTest=function(){},n.onDrawTileStart=function(){},n.onDrawTileEnd=function(){},n._drawTile=function(e,a){a&&this.drawTile(e,a)},n._drawTileAndCache=function(e){e.current=!0,this.tilesInView[e.info.id]=e,this._drawTile(e.info,e.image),this.tileCache.add(e.info.id,e)},n.drawOnInteracting=function(){this.draw()},n.needToRedraw=function(){var e=this.getMap();return e.getPitch()?r.prototype.needToRedraw.call(this):e.isRotating()||e.isZooming()?!0:e.isMoving()?!!this.layer.options.forceRenderOnMoving:r.prototype.needToRedraw.call(this)},n.hitDetect=function(){return!1},n._getLoadLimit=function(){return this.getMap().isInteracting()?this.layer.options.loadingLimitOnInteracting:0},n.isDrawable=function(){return this.getMap().getPitch()?(console&&console.warn("TileLayer with canvas renderer can't be pitched, use gl renderer ('renderer' : 'gl') instead."),this.clear(),!1):!0},n.clear=function(){this._retireTiles(!0),this.tileCache.reset(),this.tilesInView={},this.tilesLoading={},this._parentTiles=[],this._childTiles=[],r.prototype.clear.call(this)},n._isLoadingTile=function(e){return!!this.tilesLoading[e]},n.clipCanvas=function(e){return r.prototype.clipCanvas.call(this,e)},n._clipByPitch=function(e){var a=this.getMap();if(a.getPitch()<=a.options.maxVisualPitch||!this.layer.options.clipByPitch)return!1;var o=a.getContainerExtent(),s=a.getDevicePixelRatio();return e.save(),e.strokeStyle="rgba(0, 0, 0, 0)",e.beginPath(),e.rect(0,Math.ceil(o.ymin)*s,Math.ceil(o.getWidth())*s,Math.ceil(o.getHeight())*s),e.stroke(),e.clip(),!0},n.loadTileQueue=function(e){for(var a in e)if(e.hasOwnProperty(a)){var o=e[a],s=this.loadTile(o);s.loadTime===void 0&&(this.tilesLoading[o.id]={image:s,current:!0,info:o})}},n.loadTile=function(e){var a;if(this._tileImageWorkerConn&&this.loadTileImage===this.constructor.prototype.loadTileImage)a={},this._fetchImage(a,e);else{var o=this.layer.getTileSize(e.layer);a=new Image,a.width=o.width,a.height=o.height,a.onload=this.onTileLoad.bind(this,a,e),a.onerror=this.onTileError.bind(this,a,e),this.loadTileImage(a,e.url)}return a},n._fetchImage=function(e,a){var o=this;if(e instanceof Image)e.src=a.url;else{var s=a.x,l=a.y,u=Math.abs(s+l)%this._tileImageWorkerConn.workers.length;this._tileImageWorkerConn.fetchImage(a.url,u,function(f,h){f?o.onTileError(e,a,f):D0(h,function(c){o.onTileLoad(c,a)})},this.layer.options.fetchOptions||{referrer:document.location.href,headers:{accept:"image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8"}})}},n.loadTileImage=function(e,a){var o=this.layer.options.crossOrigin;return N(o)||(e.crossOrigin=o),ul(e,[a])},n.abortTileLoading=function(e){!e||(e.onload=hm,e.onerror=hm,e.src=R0)},n.onTileLoad=function(e,a){if(!!this.layer){var o=a.id;if(!!this.tilesInView){var s={tile:a,tileImage:e};this.layer.fire("tileload",s),e=s.tileImage,e.loadTime=nt(),delete this.tilesLoading[o],this._addTileToCache(a,e),this.setToRedraw()}}},n.onTileError=function(e,a){if(!!this.layer){e.onerrorTick=e.onerrorTick||0;var o=this.layer.options.tileRetryCount;if(o>e.onerrorTick){e.onerrorTick++,this._fetchImage(e,a);return}var s=this.layer.options.errorUrl;if(s)if(e instanceof Image&&e.src!==s){e.src=s;return}else e=new Image,e.src=s;e=e instanceof Image?e:pj,this.abortTileLoading(e,a),e.loadTime=0,delete this.tilesLoading[a.id],this._addTileToCache(a,e),this.setToRedraw(),this.layer.fire("tileerror",{tile:a})}},n.drawTile=function(e,a){if(!(!a||!this.getMap())){var o=e.extent2d,s=e.offset,l=cj.set(o.xmin-s[0],o.ymax-s[1]),u=e.z,f=e.id,h=this.getMap(),c=h.getZoom(),d=this.context,v=h._pointToContainerPoint(l,u,0,dj),g=h.getBearing(),m=g||c!==u,p=this.getTileOpacity(a),_=d.globalAlpha;p<1&&(d.globalAlpha=p,this.setToRedraw()),m||v._round();var b=v.x,x=v.y,C=e.extent2d.xmax-e.extent2d.xmin,y=e.extent2d.ymax-e.extent2d.ymin;if(m){if(d.save(),d.translate(b,x),g&&(d.rotate(-g*Math.PI/180),C+=.1,y+=.1),c!==u){var w=h._getResolution(u)/h._getResolution();d.scale(w,w)}b=x=0}if(Q.image(d,a,b,x,C,y),this.layer.options.debug){var P=this.layer.options.debugOutline;d.save(),d.strokeStyle=P,d.fillStyle=P,d.strokeWidth=10,d.font="20px monospace";var T=new B(b,x);Q.rectangle(d,T,{width:C,height:y},1,0),Q.fillText(d,this.getDebugInfo(f),T._add(10,20),P),Q.drawCross(d,b+C/2,x+y/2,2,P),d.restore()}m&&d.restore(),d.globalAlpha!==_&&(d.globalAlpha=_),this.setCanvasUpdated()}},n.getDebugInfo=function(e){var a=e.split("_"),o=a.length;return"x:"+a[o-2]+", y:"+a[o-3]+", z:"+a[o-1]},n._findChildTiles=function(e){var a=this._getLayerOfTile(e.layer);if(!a.options.background)return[];for(var o=this.getMap(),s=[],l=a.getSpatialReference(),u=l.getResolution(e.z),f=e.extent2d.getMin(),h=e.extent2d.getMax(),c=a._project(o._pointToPrjAtRes(f,u,um),um),d=a._project(o._pointToPrjAtRes(h,u,fm),fm),v=2,g=1;g<v;g++)this._findChildTilesAt(s,c,d,a,e.z+g);return s},n._findChildTilesAt=function(e,a,o,s,l){var u=s.options.zoomOffset,f=s.getId(),h=s.getSpatialReference().getResolution(l+u);if(!!h)for(var c=s._getTileConfig().getTileIndex(a,h),d=s._getTileConfig().getTileIndex(o,h),v=Math.min(c.idx,d.idx),g=Math.max(c.idx,d.idx),m=Math.min(c.idy,d.idy),p=Math.max(c.idy,d.idy),_,b,x=v;x<g;x++)for(var C=m;C<p;C++)_=s._getTileId(x,C,l+u,f),this.tileCache.has(_)&&(b=this.tileCache.getAndRemove(_),e.push(b),this.tileCache.add(_,b))},n._findParentTile=function(e){var a=this.getMap(),o=this._getLayerOfTile(e.layer);if(!o.options.background)return null;for(var s=o.getSpatialReference(),l=s.getZoomDirection(),u=o.options.zoomOffset,f=o.options.backgroundZoomDiff,h=s.getResolution(e.z),c=e.extent2d.getCenter(),d=o._project(a._pointToPrjAtRes(c,h)),v=1;v<=f;v++){var g=e.z-l*v,m=s.getResolution(g+u);if(!!m){var p=o._getTileConfig().getTileIndex(d,m),_=o._getTileId(p.x,p.y,g+u,e.layer);if(this.tileCache.has(_)){var b=this.tileCache.getAndRemove(_);return this.tileCache.add(_,b),b}}}return null},n._getLayerOfTile=function(e){return this.layer.getChildLayer?this.layer.getChildLayer(e):this.layer},n._getCachedTile=function(e){var a=this.tilesInView,o=this.tileCache.getAndRemove(e);if(o){a[e]=o;var s=this.tilesLoading;if(s&&s[e]){s[e].current=!1;var l=s[e],u=l.image,f=l.info;this.abortTileLoading(u,f),delete s[e]}}else o=a[e];return o},n._addTileToCache=function(e,a){this.tilesInView[e.id]={image:a,current:!0,info:e}},n.getTileOpacity=function(e){return!this.layer.options.fadeAnimation||!e.loadTime?1:Math.min(1,(nt()-e.loadTime)/(1e3/60*10))},n.onRemove=function(){this.clear(),delete this.tileCache,delete this._tilePlaceHolder,r.prototype.onRemove.call(this)},n._markTiles=function(){var e=0,a=0;if(this.tilesLoading)for(var o in this.tilesLoading)this.tilesLoading[o].current=!1,e++;if(this.tilesInView)for(var s in this.tilesInView)this.tilesInView[s].current=!1,a++;return[e,a]},n._retireTiles=function(e){for(var a in this.tilesLoading){var o=this.tilesLoading[a];(e||!o.current)&&(o.image&&this.abortTileLoading(o.image,o.info),this.deleteTile(o),delete this.tilesLoading[a])}for(var s in this.tilesInView){var l=this.tilesInView[s];l.current||(delete this.tilesInView[s],this.tileCache.has(s)||this.deleteTile(l))}},n.deleteTile=function(e){!e||!e.image||(e.image.close&&e.image.close(),e.image.onload=null,e.image.onerror=null)},n._generatePlaceHolder=function(e){var a=this.getMap(),o=this.layer.options.placeholder;if(!o||a.getPitch())return null;var s=this.layer.getTileSize(),l=a._getResolution(e)/a._getResolution(),u=this._tilePlaceHolder=this._tilePlaceHolder||Q.createCanvas(1,1,a.CanvasClass);return u.width=s.width*l,u.height=s.height*l,Xe(o)?o(u):mj(u),u},t}($o);Nr.registerRenderer("canvas",ed);function hm(){return!1}function mj(r){var t=r.getContext("2d"),n=r.width,i=r.height,e=n/16,a=i/16;t.beginPath();for(var o=0;o<16;o++)t.moveTo(0,o*a),t.lineTo(n,o*a),t.moveTo(o*e,0),t.lineTo(o*e,i);t.strokeStyle="rgba(180, 180, 180, 0.1)",t.lineWidth=1,t.stroke(),t.beginPath();for(var s=[[0,0],[n,0],[0,i],[n,i],[0,0],[0,i],[n,0],[n,i],[0,i/2],[n,i/2],[n/2,0],[n/2,i]],l=1;l<s.length;l+=2)t.moveTo(s[l-1][0],s[l-1][1]),t.lineTo(s[l][0],s[l][1]);t.lineWidth=1*4,t.stroke()}var _j=new B(0,0),px=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.isDrawable=function(){return!0},n.needToRedraw=function(){var e=this.getMap();return this._gl()&&!e.getPitch()&&e.isZooming()&&!e.isMoving()&&!e.isRotating()?!0:r.prototype.needToRedraw.call(this)},n.drawTile=function(e,a){var o=this.getMap();if(!(!e||!o||!a)){var s=e._glScale=e._glScale||o.getGLScale(e.z),l=e.extent2d.xmax-e.extent2d.xmin,u=e.extent2d.ymax-e.extent2d.ymin;if(e.cache!==!1&&this._bindGLBuffer(a,l,u),!this._gl()){r.prototype.drawTile.call(this,e,a);return}var f=e.extent2d,h=e.offset,c=_j.set(f.xmin-h[0],e.extent2d.ymax-h[1]),d=c.x*s,v=c.y*s,g=this.getTileOpacity(a),m=null;this.layer.options.debug&&(m=this.getDebugInfo(e.id)),this.drawGLImage(a,d,v,l,u,s,g,m),g<1?this.setToRedraw():this.setCanvasUpdated()}},n.writeZoomStencil=function(){var e=this.gl;e.stencilFunc(e.ALWAYS,1,255),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE)},n.startZoomStencilTest=function(){var e=this.gl;e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(e.EQUAL,0,255)},n.endZoomStencilTest=function(){this.pauseZoomStencilTest()},n.pauseZoomStencilTest=function(){var e=this.gl;e.stencilFunc(e.ALWAYS,1,255)},n.resumeZoomStencilTest=function(){var e=this.gl;e.stencilFunc(e.EQUAL,0,255)},n._bindGLBuffer=function(e,a,o){e.glBuffer||(e.glBuffer=this.bufferTileData(0,0,a,o))},n.loadTileImage=function(e,a){var o=this.layer.options.crossOrigin;e.crossOrigin=o!==null?o:"",e.src=a},n.onCanvasCreate=function(){(!this.canvas.gl||!this.canvas.gl.wrap)&&this.createCanvas2()},n.createContext=function(){r.prototype.createContext.call(this),this.createGLContext()},n.resizeCanvas=function(e){!this.canvas||(r.prototype.resizeCanvas.call(this,e),this.resizeGLCanvas())},n.clearCanvas=function(){!this.canvas||(r.prototype.clearCanvas.call(this),this.clearGLCanvas())},n.getCanvasImage=function(){if(!this._gl()||!this.canvas2)return r.prototype.getCanvasImage.call(this);var e=r.prototype.getCanvasImage.call(this);return e&&(e.image=this.canvas2),e},n._gl=function(){if(this.canvas.gl&&this.canvas.gl.wrap)return!0;var e=this.getMap();return e&&(e.getPitch()||e.getBearing())||this.layer&&!!this.layer.options.fragmentShader},n.deleteTile=function(e){r.prototype.deleteTile.call(this,e),e&&e.image&&this.disposeImage(e.image),delete e.image},n.onRemove=function(){r.prototype.onRemove.call(this),this.removeGLCanvas()},t}(hx(ed));Nr.registerRenderer("gl",px);function mx(r){var t=this.layer.getTileSize(),n=this.canvas.constructor,i=this.getMap(),e=i.getDevicePixelRatio(),a=Q.createCanvas(t.width*e,t.height*e,n);a.layer=this.layer;var o=this,s=new B(r.extent2d.xmin,r.extent2d.ymax),l=new Ye(i.pointToCoordinate(s),i.pointToCoordinate(s.add(t.width,t.height)),i.getProjection());return this.layer.drawTile(a,{url:r.url,point:s,center:i.pointToCoordinate(s.add(t.width/2,t.height/2)),extent:l,z:r.z,x:r.x,y:r.y},function(u){if(u){o.onTileError(a,r);return}o.onTileLoad(a,r)}),a}var yj=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.loadTile=function(){return mx.apply(this,arguments)},t}(ed),bj=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.loadTile=function(){return mx.apply(this,arguments)},t}(px);Xc.registerRenderer("canvas",yj);Xc.registerRenderer("gl",bj);var xj=typeof Int8Array!="undefined"?new Int8Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]):[],wj=`
    attribute vec3 a_position;
    uniform mat4 transform;

    void main()
    {
        gl_Position = transform * vec4(a_position, 1.0);
    }
`,Cj=`
    precision mediump float;
    uniform vec3 color;
    void main()
    {
        gl_FragColor = vec4(color, 1.0);
    }
`;(function(){function r(n,i,e){this.gl=n,this.quadVertices=i||xj,this.attributes=["a_position",3,Pj(i)],this.debug=e}var t=r.prototype;return t.start=function(){var i=this.gl;i.enable(i.STENCIL_TEST),i.stencilMask(255),i.stencilOp(i.KEEP,i.REPLACE,i.REPLACE),i.depthMask(!1),this._save(),this.buffer||(this._createBuffer(),this._createProgram()),i.useProgram(this.program),i.bindBuffer(i.ARRAY_BUFFER,this.buffer),fx(i,this.program,this.attributes),this.transformLoc||(this.transformLoc=i.getUniformLocation(this.program,"transform")),this.colorLoc||(this.colorLoc=i.getUniformLocation(this.program,"color")),!this.debug&&i.colorMask(!1,!1,!1,!1)},t.end=function(){var i=this.gl;i.depthMask(!0),this._restore(),!this.debug&&i.colorMask(!0,!0,!0,!0)},t.draw=function(i){var e=this.gl;e.uniformMatrix4fv(this.transformLoc,!1,i),e.uniform3fv(this.colorLoc,[Math.random(),Math.random(),Math.random()]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},t.remove=function(){var i=this.gl;return this.buffer&&i.deleteBuffer(this.buffer),this.program&&(i.deleteShader(this.program.fragmentShader),i.deleteShader(this.program.vertexShader),i.deleteProgram(this.program)),delete this.transformLoc,delete this.gl,this},t.stencilMask=function(i){return this.gl.stencilMask(i),this},t.stencilFunc=function(i,e,a){return this.ref=e,this.gl.stencilFunc(i,e,a),this},t.stencilOp=function(i,e,a){return this.gl.stencilOp(i,e,a),this},t.resetFunc=function(){return this.ref=1,this.gl.stencilFunc(this.gl.ALWAYS,1,255),this},t._save=function(){var i=this.gl;this._savedProgram=i.program},t._restore=function(){var i=this.gl;i.program=this._savedProgram,i.program&&i.useProgram(i.program)},t._createBuffer=function(){var i=this.gl;if(this.buffer=i.createBuffer(),!this.buffer)throw new Error("Failed to create the buffer object");i.bindBuffer(i.ARRAY_BUFFER,this.buffer),i.bufferData(i.ARRAY_BUFFER,this.quadVertices,i.STATIC_DRAW)},t._createProgram=function(){var i=ux(this.gl,wj,Cj),e=i.program,a=i.vertexShader,o=i.fragmentShader;e.vertexShader=a,e.fragmentShader=o,this.program=e},r})();function Pj(r){return r instanceof Float32Array?"FLOAT":r instanceof Int16Array?"SHORT":r instanceof Uint16Array?"UNSIGNED_SHORT":r instanceof Int8Array?"BYTE":r instanceof Uint8Array||r instanceof Uint8ClampedArray?"UNSIGNED_BYTE":"FLOAT"}var Tj=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.checkResources=function(){var e=this._geosToCheck;if(!this._resourceChecked&&!e&&(e=this.layer._geoList),!We(e))return[];for(var a=[],o={},s=e.length-1;s>=0;s--){var l=e[s],u=l._getExternalResources();if(!!u.length)if(!this.resources)a.push.apply(a,u);else for(var f=0;f<u.length;f++){var h=u[f][0];!this.resources.isResourceLoaded(u[f])&&!o[h]&&(a.push(u[f]),o[h]=1)}}return this._resourceChecked=!0,delete this._geosToCheck,a},n.render=function(){return this.layer._sortGeometries(),r.prototype.render.apply(this,arguments)},n._addGeoToCheckRes=function(e){!e||(Array.isArray(e)||(e=[e]),this._geosToCheck||(this._geosToCheck=[]),xa(this._geosToCheck,e))},n.onGeometryAdd=function(e){this._addGeoToCheckRes(e),Kn(this)},n.onGeometryRemove=function(){Kn(this)},n.onGeometrySymbolChange=function(e){this._addGeoToCheckRes(e.target),Kn(this)},n.onGeometryShapeChange=function(){Kn(this)},n.onGeometryPositionChange=function(){Kn(this)},n.onGeometryZIndexChange=function(){Kn(this)},n.onGeometryShow=function(){Kn(this)},n.onGeometryHide=function(){Kn(this)},n.onGeometryPropertiesChange=function(){Kn(this)},t}($o);function Kn(r){r.layer.options.drawImmediate&&r.render(),r.setToRedraw()}var Sj=new Ee,Rs=[],ff=new Ee,Mj="center",Ej=function(r){re(t,r);function t(){return r.apply(this,arguments)||this}var n=t.prototype;return n.getImageData=function(){if(!this.layer.options.geometryEvents||!this._lastRenderTime||nt()-this._lastRenderTime<32)return null;if(!this._imageData){var e=this.context.canvas,a=e.width,o=e.height;try{this._imageData=this.context.getImageData(0,0,a,o)}catch(s){console.warn(`hit detect failed with tainted canvas, some geometries have external resources in another domain:
`,s)}}return this._imageData},n.clearImageData=function(){this._imageData=null,delete this._imageData,this._lastRenderTime=nt()},n.checkResources=function(){var e=this,a=r.prototype.checkResources.apply(this,arguments),o=this.layer.getStyle();return o&&(Array.isArray(o)||(o=[o]),o.forEach(function(s){for(var l=$l(s.symbol,!0),u=0,f=l.length;u<f;u++)e.resources.isResourceLoaded(l[u])||a.push(l[u])})),a},n.needToRedraw=function(){var e=this.getMap();return e.isInteracting()&&this.layer.options.enableAltitude?!0:e.isZooming()&&!e.isRotating()&&!e.getPitch()&&!this._hasPoint&&this.layer.constructor===$n?!1:r.prototype.needToRedraw.call(this)},n.draw=function(){if(!!this.getMap()){if(!this.layer.isVisible()||this.layer.isEmpty()){this.clearCanvas(),this.completeRender();return}this.prepareCanvas(),this.drawGeos(),this.completeRender()}},n.isBlank=function(){return this.context?!this.context.canvas._drawn:!1},n.drawOnInteracting=function(){if(!!this._geosToDraw){this._updateMapStateCache(),this._updateDisplayExtent();var e=this.getMap(),a=this.layer.getCount(),o=this.mapStateCache.resolution;(e.isZooming()&&e.options.seamlessZoom&&this._drawnRes!==void 0&&o>this._drawnRes*1.5&&this._geosToDraw.length<a||e.isMoving()||e.isInteracting())&&(this.prepareToDraw(),this._batchConversionMarkers(this.mapStateCache.glRes),this._onlyHasPoint||this.forEachGeo(this.checkGeo,this),this._drawnRes=o),this._sortByDistanceToCamera(e.cameraPosition);for(var s=0,l=this._geosToDraw.length;s<l;s++){var u=this._geosToDraw[s];if(!u._isCheck&&!u.isVisible()){delete u._cPoint,delete u._inCurrentView;continue}u._paint(this._displayExtent),this._geosToDraw[s]._cPoint=void 0,this._geosToDraw[s]._inCurrentView=void 0}this.clearImageData()}},n.show=function(){this.layer.forEach(function(e){e._repaint()}),r.prototype.show.apply(this,arguments)},n.forEachGeo=function(e,a){this.layer.forEach(e,a)},n.drawGeos=function(){this._updateMapStateCache(),this._drawnRes=this.mapStateCache.resolution,this._updateDisplayExtent(),this.prepareToDraw(),this._batchConversionMarkers(this.mapStateCache.glRes),this._onlyHasPoint||this.forEachGeo(this.checkGeo,this),this._sortByDistanceToCamera(this.getMap().cameraPosition);for(var e=0,a=this._geosToDraw.length;e<a;e++)this._geosToDraw[e]._paint(),this._geosToDraw[e]._cPoint=void 0,this._geosToDraw[e]._inCurrentView=void 0;this.clearImageData()},n.prepareToDraw=function(){this._hasPoint=!1,this._geosToDraw=[]},n.checkGeo=function(e){if(e.type==="Point"&&this._onlyHasPoint!==void 0){e._inCurrentView&&(this._hasPoint=!0,e._isCheck=!0,this._geosToDraw.push(e));return}if(e._isCheck=!1,!(!e||!e.isVisible()||!e.getMap()||!e.getLayer()||!e.getLayer().isCanvasRender())){var a=e._getPainter(),o=!0;if(e._inCurrentView)o=!0;else if(e._inCurrentView===!1)o=!1;else{var s=a.get2DExtent(this.resources,Sj);(!s||!s.intersects(this._displayExtent))&&(o=!1)}!o||(a.hasPoint()&&(this._hasPoint=!0),e._isCheck=!0,this._geosToDraw.push(e))}},n.onZoomEnd=function(){delete this.canvasExtent2D,r.prototype.onZoomEnd.apply(this,arguments)},n.onRemove=function(){this.forEachGeo(function(e){e.onHide()}),delete this._geosToDraw},n.onGeometryPropertiesChange=function(e){e&&this.layer._styleGeometry(e.target),r.prototype.onGeometryPropertiesChange.call(this,e)},n._updateDisplayExtent=function(){var e=this.canvasExtent2D;if(this._maskExtent){if(!this._maskExtent.intersects(e)){this.completeRender();return}e=e.intersection(this._maskExtent)}this._displayExtent=e},n.identifyAtPoint=function(e,a){a===void 0&&(a={});var o=this._geosToDraw;return o?this.layer._hitGeos(o,e,a):[]},n._updateMapStateCache=function(){var e=this.getMap(),a=e._pointToContainerPoint(this.southWest)._add(0,-e.height),o=e.getResolution(),s=e.getPitch(),l=e.getBearing(),u=e.getGLScale(),f=e.getGLRes(),h=e.getContainerExtent(),c=e._get2DExtent(),d=e._get2DExtentAtRes(f);return this.mapStateCache={resolution:o,pitch:s,bearing:l,glScale:u,glRes:f,_2DExtent:c,glExtent:d,containerExtent:h,offset:a},this},n._batchConversionMarkers=function(e){if(this._onlyHasPoint=void 0,!this._constructorIsThis())return[];var a=[],o=[],s=[],l={},u=this.layer,f=u.options,h=u.getAltitude?u.getAltitude():0,c=u.isCanvasRender();this._onlyHasPoint=!0;for(var d=0,v=0,g=this.layer._geoList.length;v<g;v++){var m=this.layer._geoList[v],p=m.getType();if(p==="Point"){var _=m._painter;_||(_=m._getPainter());var b=_.getRenderPoints(Mj)[0][0],x=f.enableAltitude?m.getAltitude():h;l[x]===void 0&&(l[x]=_.getAltitude()),a[d]=b,s[d]=l[x],o[d]=m,d++}else this._onlyHasPoint=!1}if(d===0)return[];var C=this.getMap(),y=fl(a,"_pt");y=C._pointsAtResToContainerPoints(a,e,s,y);for(var w=C.getContainerExtent(),P=w.xmax,T=w.ymax,L=w.xmin,j=w.ymin,M={},D=0,R=o.length;D<R;D++){var I=o[D];if(I._cPoint=y[D],!I._cPoint){I._inCurrentView=!1;continue}var z=y[D],F=z.x,O=z.y;if(I._inCurrentView=F>=L&&O>=j&&F<=P&&O<=T,!I._inCurrentView){var A=I.getSymbolHash(),$=void 0;A?$=M[A]=M[A]||I._painter.getFixedExtent():$=I._painter.getFixedExtent(),ff.set($.xmin,$.ymin,$.xmax,$.ymax),ff._add(y[D]),I._inCurrentView=ff.intersects(w)}I._inCurrentView&&((!I.isVisible()||!c)&&(I._inCurrentView=!1),this._onlyHasPoint&&I._inCurrentView&&(this._hasPoint=!0,I._isCheck=!0,this._geosToDraw.push(I)))}return y},n._sortByDistanceToCamera=function(e){if(!!this.layer.options.sortByDistanceToCamera&&!!this._geosToDraw.length){var a=this.getMap(),o=a.distanceToPoint(1e3,0,a.getGLScale()).x,s=o/1e3,l="center";this._geosToDraw.sort(function(u,f){var h=u.getType(),c=f.getType();if(h!=="Point"||c!=="Point")return 0;var d=u._painter,v=f._painter;if(!d||!v)return 0;var g=d.getRenderPoints(l)[0][0],m=v.getRenderPoints(l)[0][0],p=d.getAltitude()*s,_=v.getAltitude()*s;hn(Rs,g.x,g.y,p);var b=xl(Rs,e);hn(Rs,m.x,m.y,_);var x=xl(Rs,e);return x-b})}},n._constructorIsThis=function(){return this.constructor===t},t}(Tj);$n.registerRenderer("canvas",Ej);var Oj=function(r){re(t,r);function t(i){var e;return e=r.call(this)||this,e.map=i,e._handlerQueue=[],e}var n=t.prototype;return n.callInNextFrame=function(e){this._handlerQueue.push(e)},n.executeFrameCallbacks=function(){var e=this._handlerQueue;this._handlerQueue=[];for(var a=0,o=e.length;a<o;a++)e[a]()},n.offsetPlatform=function(e,a){if(!this.map._panels.front)return this;if(!a&&e.x===0&&e.y===0)return this;var o=this.map._panels,s=this._frontCount=o.back.layerDOM.childElementCount,l=this._backCount=o.front.layerDOM.childElementCount,u=this._uiCount=o.front.uiDOM.childElementCount;if(s||l||u){var f=this.map.offsetPlatform();e?f=f.add(e)._round():f=f.round(),l&&bs(o.back,f),(s||u)&&bs(o.front,f)}return this},n.domChanged=function(){var e=this.map._panels;if(!e.front)return!1;var a=e.back.layerDOM.childElementCount;if(this._frontCount===void 0||this._frontCount!==a)return!0;var o=e.front.layerDOM.childElementCount;if(this._backCount===void 0||this._backCount!==o)return!0;var s=e.front.uiDOM.childElementCount;return this._uiCount===void 0||this._uiCount!==s},n.resetContainer=function(){if(!!this.map&&(this.map._resetMapViewPoint(),this.map._panels.front)){var e=new B(0,0);bs(this.map._panels.back,e),bs(this.map._panels.front,e)}},n.onZoomEnd=function(){this.resetContainer()},n.onLoad=function(){this._frameLoop()},t}(_n),Aj=function(r){re(t,r);function t(i){var e;return e=r.call(this,i)||this,e._containerIsCanvas=!!i._containerDOM.getContext,e._thisVisibilitychange=e._onVisibilitychange.bind(at(at(e))),e._registerEvents(),e._loopTime=0,e}var n=t.prototype;return n.load=function(){this.initContainer()},n.renderFrame=function(e){if(!this.map||!this.map.options.renderable)return!1;this._updateDomPosition(e),delete this._isViewChanged;var a=this.map;a._fireEvent("framestart"),this.updateMapDOM(),a.clearCollisionIndex();var o=this._getAllLayerToRender();this.drawLayers(o,e);var s=this.drawLayerCanvas(o);return s&&(this.drawTops(),this._drawCenterCross()),a._fireEvent("frameend"),this._recordView(),this._mapview=this._getMapView(),delete this._spatialRefChanged,this._fireLayerLoadEvents(),this.executeFrameCallbacks(),this._canvasUpdated=!1,!0},n.updateMapDOM=function(){var e=this.map;if(!e.isZooming()){var a=e._getViewPointFrameOffset();a?e.offsetPlatform(a):this.domChanged()&&this.offsetPlatform(null,!0)}},n.drawLayers=function(e,a){for(var o=this.map,s=o.isInteracting(),l=[],u=[],f=o.options.fpsOnInteracting||0,h=f===0?0:1e3/f,c=this.map.options.layerCanvasLimitOnInteracting,d=e.length,v=o.getBaseLayer(),g=0,m=0;m<d;m++){var p=e[m];if(!!p.isVisible()){var _=p.isCanvasRender();_&&l.push(p.getId());var b=p._getRenderer();if(!!b){var x=this._checkLayerRedraw(p);_&&b.isCanvasUpdated()&&(x||u.push(p.getId()),this.setLayerCanvasUpdated());var C=b.__zoomTransformMatrix;if(delete b.__zoomTransformMatrix,!x){_&&s&&(o.isZooming()&&!o.getPitch()?(b.prepareRender(),b.__zoomTransformMatrix=this._zoomMatrix):(o.getPitch()||o.isRotating())&&b.clearCanvas());continue}if(s&&_){if(c>0&&d-1-m>c&&p!==v){p._getRenderer().clearCanvas();continue}g+=this._drawCanvasLayerOnInteracting(p,g,h,a)}else s&&b.drawOnInteracting?(b.prepareRender&&b.prepareRender(),b.checkAndDraw?b.checkAndDraw(b.drawOnInteracting,this._eventParam,a):b.drawOnInteracting(this._eventParam,a)):(b.render(a),_&&C&&b.isLoadingResource()&&(b.__zoomTransformMatrix=C));_&&(u.push(p.getId()),this.setLayerCanvasUpdated())}}}var y=this._canvasIds||[],w=this._updatedIds||[];if(this._canvasIds=l,this._updatedIds=u,!this.isLayerCanvasUpdated()){var P="---";(y.join(P)!==l.join(P)||w.join(P)!==u.join(P))&&this.setLayerCanvasUpdated()}},n._checkLayerRedraw=function(e){if(this.isSpatialReferenceChanged())return!0;var a=this.map,o=e._getRenderer();return e.isCanvasRender()?o.testIfNeedRedraw():o.needToRedraw&&o.needToRedraw()?!0:a.isInteracting()||this.isViewChanged()},n._drawCanvasLayerOnInteracting=function(e,a,o,s){var l=this.map,u=e._getRenderer(),f=u.getDrawTime(),h=o===0||o>0&&a+f<=o;if(u.mustRenderOnInteracting&&u.mustRenderOnInteracting())u.render(s);else{if(u.drawOnInteracting&&(e===l.getBaseLayer()||h||l.isZooming()&&e.options.forceRenderOnZooming||l.isMoving()&&e.options.forceRenderOnMoving||l.isRotating()&&e.options.forceRenderOnRotating))return u.prepareRender(),u.prepareCanvas(),u.checkAndDraw?u.checkAndDraw(u.drawOnInteracting,this._eventParam,s):u.drawOnInteracting(this._eventParam,s),f;l.isZooming()&&!l.getPitch()&&!l.isRotating()?(u.prepareRender(),u.__zoomTransformMatrix=this._zoomMatrix):(l.getPitch()||l.isRotating())&&u.clearCanvas()}return u.drawOnInteracting&&!h&&u.onSkipDrawOnInteracting(this._eventParam,s),0},n._fireLayerLoadEvents=function(){if(this._updatedIds&&this._updatedIds.length>0){var e=this.map;this._updatedIds.reverse().forEach(function(a){var o=e.getLayer(a);if(!!o){var s=o._getRenderer();!s||!s.isRenderComplete()||o.fire("layerload")}})}},n.isLayerCanvasUpdated=function(){return this._canvasUpdated},n.setLayerCanvasUpdated=function(){this._canvasUpdated=!0},n.drawLayerCanvas=function(e){var a=this.map;if(!a||!this.isLayerCanvasUpdated()&&!this.isViewChanged())return!1;this.canvas||this.createCanvas(),a._fireEvent("renderstart",{context:this.context}),this._updateCanvasSize()||this.clearCanvas();for(var o=a.isInteracting(),s=a.options.layerCanvasLimitOnInteracting,l=e.length,u,f=[],h=0;h<l;h++)if(!(!e[h].isVisible()||!e[h].isCanvasRender())){var c=e[h]._getRenderer();if(!!c){var d=this._getLayerImage(e[h]);d&&d.image&&(e[h]===a.getBaseLayer()?u=[e[h],d]:f.push([e[h],d]))}}var v=this.canvas.width,g=this.canvas.height;u&&(this._drawLayerCanvasImage(u[0],u[1],v,g),this._drawFog()),l=f.length;for(var m=o&&s>=0&&l>s?l-s:0,p=m;p<l;p++)this._drawLayerCanvasImage(f[p][0],f[p][1],v,g);return a._fireEvent("renderend",{context:this.context}),!0},n.setToRedraw=function(){for(var e=this._getAllLayerToRender(),a=0,o=e.length;a<o;a++){var s=e[a].getRenderer();s&&s.canvas&&s.setToRedraw&&s.setToRedraw()}},n.updateMapSize=function(e){if(!(!e||this._containerIsCanvas)){var a=e.width+"px",o=e.height+"px",s=this.map._panels;s.mapWrapper.style.width=a,s.mapWrapper.style.height=o,this._updateCanvasSize()}},n.getMainPanel=function(){return this.map?this._containerIsCanvas?this.map._containerDOM:this.map._panels?this.map._panels.mapWrapper:null:null},n.toDataURL=function(e,a){return this.canvas?this.canvas.toDataURL(e,a):null},n.remove=function(){De.webgl&&typeof document!="undefined"&&_i(document,"visibilitychange",this._thisVisibilitychange),this._resizeInterval&&clearInterval(this._resizeInterval),delete this.context,delete this.canvas,delete this.map,delete this._spatialRefChanged,this._cancelFrameLoop()},n.hitDetect=function(e){var a=this.map;if(!(!a||!a.options.hitDetect||a.isInteracting())){for(var o=a._getLayers(),s="default",l=a.options.hitDetectLimit||0,u=0,f=o.length-1;f>=0;f--){var h=o[f];if(!(!h.options.hitDetect||h.isEmpty&&h.isEmpty())){var c=h._getRenderer();if(!(!c||!c.hitDetect)&&!(c.isBlank&&c.isBlank())){if(h.options.cursor!=="default"&&c.hitDetect(e)){s=h.options.cursor||"pointer";break}if(u++,l>0&&u>l)break}}}a._trySetCursor(s)}},n._getLayerImage=function(e){var a=e._getRenderer();return a.getCanvasImage?a.getCanvasImage():null},n.initContainer=function(){var e=this.map._panels;function a(x,C,y,w){var P=we("div",C);return y&&(P.style.cssText=y),e[x]=P,w||gk(P),P}var o=this.map._containerDOM;if(!this._containerIsCanvas){o.innerHTML="";var s="position:absolute;top:0px;left:0px;",l=a("mapWrapper","maptalks-wrapper","position:absolute;overflow:hidden;",!0),u=a("allLayers","maptalks-all-layers",s+"padding:0px;margin:0px;z-index:0;overflow:visible;",!0),f=a("backStatic","maptalks-back-static",s+"z-index:0;",!0),h=a("back","maptalks-back",s+"z-index:1;"),c=a("backLayer","maptalks-back-layer",s),d=a("canvasContainer","maptalks-canvas-layer",s+"border:none;z-index:2;"),v=a("frontStatic","maptalks-front-static",s+"z-index:3;",!0),g=a("front","maptalks-front",s+"z-index:4;",!0),m=a("frontLayer","maptalks-front-layer",s+"z-index:0;"),p=a("ui","maptalks-ui",s+"border:none;z-index:1;",!0),_=a("control","maptalks-control","z-index:1",!0);o.appendChild(l),u.appendChild(f),h.appendChild(c),h.layerDOM=c,u.appendChild(h),u.appendChild(d),g.appendChild(m),g.layerDOM=m,g.uiDOM=p,u.appendChild(v),u.appendChild(g),g.appendChild(p),l.appendChild(u),l.appendChild(_),this.createCanvas(),this.resetContainer();var b=this.map._getContainerDomSize();this.updateMapSize(b)}},n.isViewChanged=function(){if(this._isViewChanged!==void 0)return this._isViewChanged;var e=this._mapview,a=this._getMapView();return this._isViewChanged=!e||!oh(e,a),this._isViewChanged},n._recordView=function(){var e=this.map;!e._onViewChange||e.isInteracting()||e.isAnimating()||oh(e.getView(),e._getCurrentView())||e._onViewChange(e.getView())},n.isSpatialReferenceChanged=function(){return this._spatialRefChanged},n._getMapView=function(){var e=this.map,a=e._getPrjCenter();return{x:a.x,y:a.y,zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing(),width:e.width,height:e.height}},n._frameLoop=function(e){var a=this;if(!this.map){this._cancelFrameLoop();return}e=e||0,this._frameTimestamp=e,this._resizeCount=0,this.renderFrame(e),gb().commit(),this._animationFrame=oa(function(o){a._frameLoop(o)})},n._cancelFrameLoop=function(){this._animationFrame&&ll(this._animationFrame)},n._drawLayerCanvasImage=function(e,a,o,s){var l=this.context,u=a.point.round(),f=this.map.getDevicePixelRatio();f!==1&&u._multi(f);var h=a.image,c=h.width,d=h.height;if(!(u.x+c<=0||u.y+d<=0)){var v=e.options.opacity;if(be(v)||(v=1),!(v<=0)){var g=a.opacity;if(be(g)||(g=1),!(g<=0)){var m=l.globalAlpha;v<1&&(l.globalAlpha*=v),g<1&&(l.globalAlpha*=g),e.options.cssFilter&&(l.filter=e.options.cssFilter);var p=e.getRenderer(),_=p.__zoomTransformMatrix,b=p.clipCanvas(this.context);_&&(l.save(),l.setTransform.apply(l,_)),l.drawImage(h,0,0,c,d,u.x,u.y,o,s),_&&l.restore(),b&&l.restore(),l.filter!=="none"&&(l.filter="none"),l.globalAlpha=m}}}},n._drawCenterCross=function(){var e=this.map.options.centerCross;if(e){var a=this.context,o=new B(this.canvas.width/2,this.canvas.height/2);Xe(e)?e(a,o):Q.drawCross(this.context,o.x,o.y,2,"#f00")}},n._drawContainerExtent=function(){var e=this.map.options.cascadePitches,a=this.map.height-this.map._getVisualHeight(e[0]),o=this.map.height-this.map._getVisualHeight(e[1]),s=this.map.getContainerExtent(),l=this.context;l.beginPath(),l.moveTo(0,s.ymin),l.lineTo(s.xmax,s.ymin),l.stroke(),l.beginPath(),l.moveTo(0,a),l.lineTo(s.xmax,a),l.stroke(),l.beginPath(),l.moveTo(0,o),l.lineTo(s.xmax,o),l.stroke()},n._drawFog=function(){var e=this.map;if(!(e.getPitch()<=e.options.maxVisualPitch||!e.options.fog)){var a=30,o=e.getDevicePixelRatio(),s=this.context,l=e.getContainerExtent(),u=(e.height-e._getVisualHeight(75))*o;u<0&&(u=0);var f=l.ymin*o,h=Math.ceil(f-u),c=e.options.fogColor.join(),d=s.createLinearGradient(0,u,0,f+a),v=1-a/(h+a);d.addColorStop(0,"rgba("+c+", 0)"),d.addColorStop(.3,"rgba("+c+", 0.3)"),d.addColorStop(v,"rgba("+c+", 1)"),d.addColorStop(1,"rgba("+c+", 0)"),s.beginPath(),s.fillStyle=d,s.fillRect(0,u,Math.ceil(l.getWidth())*o,Math.ceil(h+a))}},n._getAllLayerToRender=function(){return this.map._getLayers()},n.clearCanvas=function(){!this.canvas||Q.clearRect(this.context,0,0,this.canvas.width,this.canvas.height)},n._updateCanvasSize=function(){if(!this.canvas||this._containerIsCanvas)return!1;var e=this.map,a=e.getSize(),o=this.canvas,s=e.getDevicePixelRatio(),l=j0(a,s),u=l.width,f=l.height,h=l.cssWidth,c=l.cssHeight;return o.style&&(o.style.width!==h||o.style.height!==c)&&(o.style.width=h,o.style.height=c),u===o.width&&f===o.height?!1:(o.height=f,o.width=u,this.topLayer.width=o.width,this.topLayer.height=o.height,!0)},n.createCanvas=function(){this.topLayer=we("canvas"),this.topCtx=this.topLayer.getContext("2d"),this._containerIsCanvas?this.canvas=this.map._containerDOM:(this.canvas=we("canvas"),this._updateCanvasSize(),this.map._panels.canvasContainer.appendChild(this.canvas)),this.context=this.canvas.getContext("2d")},n._updateDomPosition=function(e){this._checkPositionTime===void 0&&(this._checkPositionTime=-1/0);var a=Math.abs(e-this._checkPositionTime);return a>=500&&(Gl(this.map._containerDOM),this._checkPositionTime=Math.min(e,this._checkPositionTime)),this},n._checkSize=function(){!this.map||this.map.checkSize()},n._setCheckSizeInterval=function(e){var a=this;De.resizeObserver?(this._resizeObserver&&this._resizeObserver.disconnect(),this.map&&(this._resizeObserver=new ResizeObserver(function(o){!a.map||a.map.isRemoved()?a._resizeObserver.disconnect():o.length&&(a.map._containerDomContentRect=o[0].contentRect,a._checkSize(o[0].contentRect),a._resizeCount=a._resizeCount||0,a.renderFrame((a._frameTimestamp||0)+ ++a._resizeCount/100))}),this._resizeObserver.observe(this.map._containerDOM))):(clearInterval(this._resizeInterval),this._checkSizeInterval=e,this._resizeInterval=setInterval(function(){!a.map||a.map.isRemoved()?clearInterval(a._resizeInterval):a._checkSize()},this._checkSizeInterval))},n._registerEvents=function(){var e=this,a=this.map;a.options.checkSize&&!ct&&typeof window!="undefined"&&this._setCheckSizeInterval(a.options.checkSizeInterval),De.mobile||a.on("_mousemove",this._onMapMouseMove,this),a.on("_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart",function(o){e._eventParam=o}),a.on("_zooming",function(o){a.getPitch()||(e._zoomMatrix=o.matrix.container),e._eventParam=o}),a.on("_zoomend",function(o){e._eventParam=o,delete e._zoomMatrix}),a.on("_spatialreferencechange",function(){e._spatialRefChanged=!0}),De.webgl&&typeof document!="undefined"&&kr(document,"visibilitychange",this._thisVisibilitychange,this),De.addDPRListening&&De.addDPRListening(this.map)},n._onMapMouseMove=function(e){var a=this,o=this.map;o.isInteracting()||!o.options.hitDetect||(this._hitDetectFrame&&ll(this._hitDetectFrame),this._hitDetectFrame=oa(function(){a.hitDetect(e.containerPoint)}))},n._getCanvasLayers=function(){return this.map._getLayers(function(e){return e.isCanvasRender()})},n._onVisibilitychange=function(){document.visibilityState==="visible"&&this.setToRedraw()},n.addTopElement=function(e){this._tops||(this._tops=[]),this._tops.push(e)},n.removeTopElement=function(e){if(!!this._tops){var a=this._tops.indexOf(e);a>=0&&this._tops.splice(a,1)}},n.getTopElements=function(){return this._tops||[]},n.drawTops=function(){this.topCtx.clearRect(0,0,this.topLayer.width,this.topLayer.height),this.map.fire("drawtopstart"),this.map.fire("drawtops");for(var e=this.getTopElements(),a=!1,o=0;o<e.length;o++)e[o].render(this.topCtx)&&(a=!0);a&&this.context.drawImage(this.topLayer,0,0),this.map.fire("drawtopsend")},t}(Oj);Te.registerRenderer("canvas",Aj);Te.mergeOptions({fog:!1,fogColor:[233,233,233]});var Yl={_getRenderPoints:function(){return[[this._getCenter2DPoint(this.getMap().getGLRes())],null]}};et.include(Yl);ir.include(Yl);Bn.include(Yl);Ta.include(Yl);Xi.include({_getRenderPoints:function(t){var n=this.getMap(),i=n.getGLRes();if(t==="vertex"){for(var e=this._trimRing(this.getShell()),a=[],o=0,s=e.length;o<s;o++)a.push(n.coordToPointAtRes(e[o],i));return[a,null]}else{var l=n.coordToPointAtRes(this.getCenter(),i);return[[l],null]}}});var _x={_getRenderPoints:function(t){var n=this.getMap(),i=n.getGLRes(),e,a=null;if(t==="point")e=this._getPath2DPoints(this._getPrjCoordinates(),!1,i),e&&e.length>0&&Array.isArray(e[0])&&(e=e[0].concat(e[1]));else if(t==="vertex")if(e=this._getPath2DPoints(this._getPrjCoordinates(),!1,i),a=[],e&&e.length>0&&Array.isArray(e[0])){for(var o=0,s=e.length;o<s;o++)for(var l=0,u=e[o].length;l<u;l++)l===0?a.push([e[o][l],e[o][l+1]]):a.push([e[o][l-1],e[o][l]]);e=e[0].concat(e[1])}else for(var f=0,h=e.length;f<h;f++)f===0?a.push([e[f],e[f+1]]):a.push([e[f-1],e[f]]);else if(t==="line"){e=[],a=[];var c=this._getPath2DPoints(this._getPrjCoordinates(),!1,i),d=c.length>0&&Array.isArray(c[0]);if(d)for(var v,g=1,m=c.length;g<m;g++){v=c[g],this instanceof it&&v.length>0&&!v[0].equals(v[v.length-1])&&v.push(v[0]);for(var p=1,_=v.length;p<_;p++)e.push(v[p].add(v[p-1])._multi(.5)),a.push([v[p-1],v[p]])}else{this instanceof it&&c.length>0&&!c[0].equals(c[c.length-1])&&c.push(c[0]);for(var b=1,x=c.length;b<x;b++)e.push(c[b].add(c[b-1])._multi(.5)),a.push([c[b-1],c[b]])}}else if(t==="vertex-first"){var C=this._getPrjCoordinates(),y=C.length,w=y?n._prjToPointAtRes(C[0],i):null;e=y?[w]:[],a=y?[[w,C[1]?n._prjToPointAtRes(C[1],i):w]]:[]}else if(t==="vertex-last"){var P=this._getPrjCoordinates(),T=P.length,L=T?n._prjToPointAtRes(P[T-1],i):null;e=T?[L]:[];var j=T>1?T-2:T-1;a=T?[[P[j]?n._prjToPointAtRes(P[j],i):L,L]]:[]}else{var M=this._getProjection().project(this.getCenter());e=[n._prjToPointAtRes(M,i)]}return[e,a]}};tt.include(_x);it.include(_x);var Mi={within:!1,center:[0,0]};function yx(r){if(!r||!r._containerBbox)Mi.within=!1;else{Mi.within=!1;var t=r._containerBbox,n=t.minx,i=t.miny,e=t.maxx,a=t.maxy,o=Math.abs(e-n),s=Math.abs(a-i);o<=1&&s<=1&&(Mi.within=!0,Mi.center[0]=(n+e)/2,Mi.center[1]=(i+a)/2),delete r._containerBbox}return Mi}je.include({_redrawWhenPitch:function(){return!1},_redrawWhenRotate:function(){return!1}});var td={_redrawWhenPitch:function(){return!0},_redrawWhenRotate:function(){return this instanceof ir||this instanceof Ta},_paintAsPath:function(){var t=this.getMap(),n=this.getAltitude();return n>0||t.getPitch()||this instanceof ir&&t.getBearing()},_getPaintParams:function(){var t=this.getMap();if(this._paintAsPath())return it.prototype._getPaintParams.call(this,!0);var n=this._getPrjCoordinates(),i=t._prjToPointAtRes(n,t.getGLRes()),e=this._getRenderSize(i);return[i].concat(e)},_paintOn:function(){return this._paintAsPath()?Q.polygon.apply(Q,arguments):Q.ellipse.apply(Q,arguments)},_getRenderSize:function(t){var n=this.getMap(),i=n.getGLRes(),e=this._getPrjExtent(),a=n._prjToPointAtRes(e.getMin(),i),o=n._prjToPointAtRes(e.getMax(),i);return[Math.abs(o.x-a.x)/2,Math.abs(o.y-t.y),Math.abs(t.y-a.y)]}};ir.include(td);Bn.include(td);Xi.include({_getPaintParams:function(){var t=this.getMap(),n=this._getPrjShell(),i=this._getPath2DPoints(n,!1,t.getGLRes());return[i]},_paintOn:Q.polygon});Ta.include(td,{_redrawWhenPitch:function(){return!0},_getPaintParams:function(){if(this._paintAsPath())return it.prototype._getPaintParams.call(this,!0);var t=this.getMap(),n=t._prjToPointAtRes(this._getPrjCoordinates(),t.getGLRes()),i=this._getRenderSize(n);return[n,i[0],[this.getStartAngle(),this.getEndAngle()]]},_paintOn:function(){if(this._paintAsPath())return Q.polygon.apply(Q,arguments);var t=this.getMap().getBearing(),n=arguments;return t&&(n[3]=n[3].slice(0),n[3][0]+=t,n[3][1]+=t),Q.sector.apply(Q,n)}});Ul.include({_paintAsPath:function(){return!0}});tt.include({arrowStyles:{classic:[3,4]},_getArrowShape:function(t,n,i,e,a){if(!t||!n||t.equals(n))return null;a||(a=0);var o=i*e[0],s=i*e[1]+a,l=o/2+a,u;n.nextCtrlPoint||n.prevCtrlPoint?n.prevCtrlPoint?u=n.sub(new B(n.prevCtrlPoint)):u=n.sub(new B(n.nextCtrlPoint)):u=n.sub(t),u._unit();var f=n.sub(u.multi(s));u._perp();var h=f.add(u.multi(l));u._multi(-1);var c=f.add(u.multi(l));return[h,n,c,h]},_getPaintParams:function(){var t=this._getPrjCoordinates(),n=this._getPath2DPoints(t,!1,this.getMap().getGLRes());return[n]},_paintOn:function(t,n,i,e,a){var o=yx(this._painter);o.within?Q.pixelRect(t,o.center,i,e):this.options.smoothness?Q.paintSmoothLine(t,n,i,this.options.smoothness,!1,this._animIdx,this._animTailRatio):Q.path(t,n,i,null,a),this._paintArrow(t,n,i)},_getArrowPlacement:function(){return this.options.arrowPlacement},_getArrowStyle:function(){var t=this.options.arrowStyle;return t?Array.isArray(t)?t:this.arrowStyles[t]:null},_getArrows:function(t,n,i){var e=this._getArrowStyle();if(!e||t.length<2)return[];for(var a=t.length>0&&Array.isArray(t[0]),o=a?t:[t],s=this._getArrowPlacement(),l=[],u=this.getMap(),f=u.coordToContainerPoint(this.getFirstCoordinate()),h=u.coordToContainerPoint(this.getLastCoordinate()),c=o.length-1;c>=0;c--){if(s==="vertex-first"||s==="vertex-firstlast"&&o[c][0].closeTo(f,.01)){var d=this._getArrowShape(o[c][1],o[c][0],n,e,i);d&&l.push(d)}if(s==="vertex-last"||s==="vertex-firstlast"&&o[c][o[c].length-1].closeTo(h,.01)){var v=this._getArrowShape(o[c][o[c].length-2],o[c][o[c].length-1],n,e,i);v&&l.push(v)}else s==="point"&&this._getArrowPoints(l,o[c],n,e,i)}return l},_getArrowPoints:function(t,n,i,e,a){for(var o=0,s=n.length-1;o<s;o++){var l=this._getArrowShape(n[o],n[o+1],i,e,a);l&&t.push(l)}},_paintArrow:function(t,n,i){var e=this._getInternalSymbol().lineWidth;(!be(e)||e<3)&&(e=3);var a=this._getArrows(n,e);if(!!a.length){t.setLineDash&&t.setLineDash([]);for(var o=a.length-1;o>=0;o--)t.fillStyle=t.strokeStyle,Q.polygon(t,a[o],i,i)}}});it.include({_getPaintParams:function(t){var n=this.getMap().getGLRes(),i=this._getPrjShell(),e=this._getPath2DPoints(i,t,n),a=e.length>0&&Array.isArray(e[0]);a&&(e=[[e[0]],[e[1]]]);var o=this._getPrjHoles(),s=[];if(o&&o.length>0){for(var l=this._simplified,u=0;u<o.length;u++){var f=this._getPath2DPoints(o[u],t,n);Array.isArray(f)&&a?Array.isArray(f[0])?(e[0].push(f[0]),e[1].push(f[1])):e[0].push(f):s.push(f)}l&&(this._simplified=l)}return a||(e=[e],xa(e,s)),[e]},_paintOn:function(t,n,i,e,a){var o=yx(this._painter);o.within?Q.pixelRect(t,o.center,i,e):Q.polygon(t,n,i,e,a,this.options.smoothness)}});Te.VERSION=EI;var nd=(r,t)=>{const n=r.__vccOpts||r;for(const[i,e]of t)n[i]=e;return n};const Rj={},Ij=$t("success"),kj=$t("processing"),Dj=$t("error"),Lj=$t("warning"),jj=$t("default");function Nj(r,t){const n=_I;return Qi(),Bh(Ze,null,[E(n,{color:"success"},{default:ht(()=>[Ij]),_:1}),E(n,{color:"processing"},{default:ht(()=>[kj]),_:1}),E(n,{color:"error"},{default:ht(()=>[Dj]),_:1}),E(n,{color:"warning"},{default:ht(()=>[Lj]),_:1}),E(n,{color:"default"},{default:ht(()=>[jj]),_:1})],64)}var zj=nd(Rj,[["render",Nj]]);const Fj={},Hj={class:"container"};function Bj(r,t){return Qi(),Bh("div",Hj,[ii("header",null,[nu(r.$slots,"header")]),ii("main",null,[nu(r.$slots,"default")]),ii("footer",null,[nu(r.$slots,"footer")])])}var $j=nd(Fj,[["render",Bj]]);const Wj=r=>(Sw("data-v-24317658"),r=r(),Mw(),r),Gj=$t("Content of Tab Pane 1"),Vj=$t("Content of Tab Pane 2"),Zj=$t("Content of Tab Pane 3"),Uj=$t("Primary Button"),Kj=$t("Default Button"),Yj=$t("Dashed Button"),qj=$t("Text Button"),Xj=$t("Link Button"),Jj=$t("U"),Qj=Wj(()=>ii("div",{id:"map"},null,-1)),eN={setup(r){const t=ee(null),n=ee(null),i=ee("1"),e=ee(!1);return bt(()=>{var a=new Te("map",{center:[-.113049,51.498568],zoom:14,baseLayer:new Nr("base",{urlTemplate:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>'})}),o=new $n("vector").addTo(a),s=new et([-.113049,51.49856]).addTo(o);let l=document.getElementById("popup-target");s.setInfoWindow({content:l}),s.getInfoWindow().on("showend",()=>{console.log("showend"),e.value=!0});var f=new et([-.163049,51.49856]).addTo(o);f.setInfoWindow({content:n.value.$el})}),(a,o)=>{const s=sl,l=po,u=go,f=Gi;return Qi(),Bh(Ze,null,[(Qi(),$h(Hh,{to:"#popup-target"},[Rl(E(zj,{ref_key:"popupRef",ref:t},null,512),[[Vh,e.value]])])),E($j,{ref_key:"popupTempRef",ref:n},{header:ht(()=>[E(l,{activeKey:i.value,"onUpdate:activeKey":o[0]||(o[0]=h=>i.value=h)},{default:ht(()=>[E(s,{key:"1",tab:"Tab 1"},{default:ht(()=>[Gj]),_:1}),E(s,{key:"2",tab:"Tab 2","force-render":""},{default:ht(()=>[Vj]),_:1}),E(s,{key:"3",tab:"Tab 3"},{default:ht(()=>[Zj]),_:1})]),_:1},8,["activeKey"])]),default:ht(()=>[ii("div",null,[E(u,{type:"primary"},{default:ht(()=>[Uj]),_:1}),E(u,null,{default:ht(()=>[Kj]),_:1}),E(u,{type:"dashed"},{default:ht(()=>[Yj]),_:1}),E(u,{type:"text"},{default:ht(()=>[qj]),_:1}),E(u,{type:"link"},{default:ht(()=>[Xj]),_:1})])]),footer:ht(()=>[E(f,{src:"https://joeschmoe.io/api/v1/random"}),E(f,{style:{color:"#f56a00","background-color":"#fde3cf"}},{default:ht(()=>[Jj]),_:1})]),_:1},512),Qj],64)}}};var tN=nd(eN,[["__scopeId","data-v-24317658"]]);const nN={setup(r){return(t,n)=>(Qi(),$h(tN,{msg:"Hello Vue 3 + Vite"}))}},rN=rP(nN);rN.mount("#app")});export default iN();
